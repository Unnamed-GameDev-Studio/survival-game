var Jd=Object.defineProperty;var jd=(C,g,a)=>g in C?Jd(C,g,{enumerable:!0,configurable:!0,writable:!0,value:a}):C[g]=a;var Lt=(C,g,a)=>(jd(C,typeof g!="symbol"?g+"":g,a),a);(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))x(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const d of e.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&x(d)}).observe(document,{childList:!0,subtree:!0});function a(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function x(t){if(t.ep)return;t.ep=!0;const e=a(t);fetch(t.href,e)}})();var fn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qd(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Do;(function(C){(function(g){var a=typeof fn=="object"?fn:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),x=t(C);typeof a.Reflect>"u"?a.Reflect=C:x=t(a.Reflect,x),g(x);function t(e,d){return function(r,o){typeof e[r]!="function"&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:o}),d&&d(r,o)}}})(function(g){var a=Object.prototype.hasOwnProperty,x=typeof Symbol=="function",t=x&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",e=x&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",d=typeof Object.create=="function",r={__proto__:[]}instanceof Array,o=!d&&!r,n={create:d?function(){return $t(Object.create(null))}:r?function(){return $t({__proto__:null})}:function(){return $t({})},has:o?function(q,et){return a.call(q,et)}:function(q,et){return et in q},get:o?function(q,et){return a.call(q,et)?q[et]:void 0}:function(q,et){return q[et]}},i=Object.getPrototypeOf(Function),s=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",u=!s&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Rt(),h=!s&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ct(),l=!s&&typeof WeakMap=="function"?WeakMap:yt(),f=new l;function v(q,et,nt,ht){if(I(nt)){if(!tt(q))throw new TypeError;if(!st(et))throw new TypeError;return O(q,et)}else{if(!tt(q))throw new TypeError;if(!Y(et))throw new TypeError;if(!Y(ht)&&!I(ht)&&!G(ht))throw new TypeError;return G(ht)&&(ht=void 0),nt=k(nt),L(q,et,nt,ht)}}g("decorate",v);function c(q,et){function nt(ht,ft){if(!Y(ht))throw new TypeError;if(!I(ft)&&!ot(ft))throw new TypeError;W(q,et,ht,ft)}return nt}g("metadata",c);function p(q,et,nt,ht){if(!Y(nt))throw new TypeError;return I(ht)||(ht=k(ht)),W(q,et,nt,ht)}g("defineMetadata",p);function m(q,et,nt){if(!Y(et))throw new TypeError;return I(nt)||(nt=k(nt)),b(q,et,nt)}g("hasMetadata",m);function y(q,et,nt){if(!Y(et))throw new TypeError;return I(nt)||(nt=k(nt)),B(q,et,nt)}g("hasOwnMetadata",y);function T(q,et,nt){if(!Y(et))throw new TypeError;return I(nt)||(nt=k(nt)),U(q,et,nt)}g("getMetadata",T);function E(q,et,nt){if(!Y(et))throw new TypeError;return I(nt)||(nt=k(nt)),X(q,et,nt)}g("getOwnMetadata",E);function S(q,et){if(!Y(q))throw new TypeError;return I(et)||(et=k(et)),Z(q,et)}g("getMetadataKeys",S);function P(q,et){if(!Y(q))throw new TypeError;return I(et)||(et=k(et)),J(q,et)}g("getOwnMetadataKeys",P);function M(q,et,nt){if(!Y(et))throw new TypeError;I(nt)||(nt=k(nt));var ht=F(et,nt,!1);if(I(ht)||!ht.delete(q))return!1;if(ht.size>0)return!0;var ft=f.get(et);return ft.delete(nt),ft.size>0||f.delete(et),!0}g("deleteMetadata",M);function O(q,et){for(var nt=q.length-1;nt>=0;--nt){var ht=q[nt],ft=ht(et);if(!I(ft)&&!G(ft)){if(!st(ft))throw new TypeError;et=ft}}return et}function L(q,et,nt,ht){for(var ft=q.length-1;ft>=0;--ft){var Mt=q[ft],pt=Mt(et,nt,ht);if(!I(pt)&&!G(pt)){if(!Y(pt))throw new TypeError;ht=pt}}return ht}function F(q,et,nt){var ht=f.get(q);if(I(ht)){if(!nt)return;ht=new u,f.set(q,ht)}var ft=ht.get(et);if(I(ft)){if(!nt)return;ft=new u,ht.set(et,ft)}return ft}function b(q,et,nt){var ht=B(q,et,nt);if(ht)return!0;var ft=at(et);return G(ft)?!1:b(q,ft,nt)}function B(q,et,nt){var ht=F(et,nt,!1);return I(ht)?!1:$(ht.has(q))}function U(q,et,nt){var ht=B(q,et,nt);if(ht)return X(q,et,nt);var ft=at(et);if(!G(ft))return U(q,ft,nt)}function X(q,et,nt){var ht=F(et,nt,!1);if(!I(ht))return ht.get(q)}function W(q,et,nt,ht){var ft=F(nt,ht,!0);ft.set(q,et)}function Z(q,et){var nt=J(q,et),ht=at(q);if(ht===null)return nt;var ft=Z(ht,et);if(ft.length<=0)return nt;if(nt.length<=0)return ft;for(var Mt=new h,pt=[],Et=0,vt=nt;Et<vt.length;Et++){var Ct=vt[Et],At=Mt.has(Ct);At||(Mt.add(Ct),pt.push(Ct))}for(var Ut=0,Qt=ft;Ut<Qt.length;Ut++){var Ct=Qt[Ut],At=Mt.has(Ct);At||(Mt.add(Ct),pt.push(Ct))}return pt}function J(q,et){var nt=[],ht=F(q,et,!1);if(I(ht))return nt;for(var ft=ht.keys(),Mt=ut(ft),pt=0;;){var Et=mt(Mt);if(!Et)return nt.length=pt,nt;var vt=gt(Et);try{nt[pt]=vt}catch(Ct){try{dt(Mt)}finally{throw Ct}}pt++}}function N(q){if(q===null)return 1;switch(typeof q){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return q===null?1:6;default:return 6}}function I(q){return q===void 0}function G(q){return q===null}function V(q){return typeof q=="symbol"}function Y(q){return typeof q=="object"?q!==null:typeof q=="function"}function z(q,et){switch(N(q)){case 0:return q;case 1:return q;case 2:return q;case 3:return q;case 4:return q;case 5:return q}var nt=et===3?"string":et===5?"number":"default",ht=rt(q,t);if(ht!==void 0){var ft=ht.call(q,nt);if(Y(ft))throw new TypeError;return ft}return H(q,nt==="default"?"number":nt)}function H(q,et){if(et==="string"){var nt=q.toString;if(it(nt)){var ht=nt.call(q);if(!Y(ht))return ht}var ft=q.valueOf;if(it(ft)){var ht=ft.call(q);if(!Y(ht))return ht}}else{var ft=q.valueOf;if(it(ft)){var ht=ft.call(q);if(!Y(ht))return ht}var Mt=q.toString;if(it(Mt)){var ht=Mt.call(q);if(!Y(ht))return ht}}throw new TypeError}function $(q){return!!q}function Q(q){return""+q}function k(q){var et=z(q,3);return V(et)?et:Q(et)}function tt(q){return Array.isArray?Array.isArray(q):q instanceof Object?q instanceof Array:Object.prototype.toString.call(q)==="[object Array]"}function it(q){return typeof q=="function"}function st(q){return typeof q=="function"}function ot(q){switch(N(q)){case 3:return!0;case 4:return!0;default:return!1}}function rt(q,et){var nt=q[et];if(nt!=null){if(!it(nt))throw new TypeError;return nt}}function ut(q){var et=rt(q,e);if(!it(et))throw new TypeError;var nt=et.call(q);if(!Y(nt))throw new TypeError;return nt}function gt(q){return q.value}function mt(q){var et=q.next();return et.done?!1:et}function dt(q){var et=q.return;et&&et.call(q)}function at(q){var et=Object.getPrototypeOf(q);if(typeof q!="function"||q===i||et!==i)return et;var nt=q.prototype,ht=nt&&Object.getPrototypeOf(nt);if(ht==null||ht===Object.prototype)return et;var ft=ht.constructor;return typeof ft!="function"||ft===q?et:ft}function Rt(){var q={},et=[],nt=function(){function pt(Et,vt,Ct){this._index=0,this._keys=Et,this._values=vt,this._selector=Ct}return pt.prototype["@@iterator"]=function(){return this},pt.prototype[e]=function(){return this},pt.prototype.next=function(){var Et=this._index;if(Et>=0&&Et<this._keys.length){var vt=this._selector(this._keys[Et],this._values[Et]);return Et+1>=this._keys.length?(this._index=-1,this._keys=et,this._values=et):this._index++,{value:vt,done:!1}}return{value:void 0,done:!0}},pt.prototype.throw=function(Et){throw this._index>=0&&(this._index=-1,this._keys=et,this._values=et),Et},pt.prototype.return=function(Et){return this._index>=0&&(this._index=-1,this._keys=et,this._values=et),{value:Et,done:!0}},pt}();return function(){function pt(){this._keys=[],this._values=[],this._cacheKey=q,this._cacheIndex=-2}return Object.defineProperty(pt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),pt.prototype.has=function(Et){return this._find(Et,!1)>=0},pt.prototype.get=function(Et){var vt=this._find(Et,!1);return vt>=0?this._values[vt]:void 0},pt.prototype.set=function(Et,vt){var Ct=this._find(Et,!0);return this._values[Ct]=vt,this},pt.prototype.delete=function(Et){var vt=this._find(Et,!1);if(vt>=0){for(var Ct=this._keys.length,At=vt+1;At<Ct;At++)this._keys[At-1]=this._keys[At],this._values[At-1]=this._values[At];return this._keys.length--,this._values.length--,Et===this._cacheKey&&(this._cacheKey=q,this._cacheIndex=-2),!0}return!1},pt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=q,this._cacheIndex=-2},pt.prototype.keys=function(){return new nt(this._keys,this._values,ht)},pt.prototype.values=function(){return new nt(this._keys,this._values,ft)},pt.prototype.entries=function(){return new nt(this._keys,this._values,Mt)},pt.prototype["@@iterator"]=function(){return this.entries()},pt.prototype[e]=function(){return this.entries()},pt.prototype._find=function(Et,vt){return this._cacheKey!==Et&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Et)),this._cacheIndex<0&&vt&&(this._cacheIndex=this._keys.length,this._keys.push(Et),this._values.push(void 0)),this._cacheIndex},pt}();function ht(pt,Et){return pt}function ft(pt,Et){return Et}function Mt(pt,Et){return[pt,Et]}}function ct(){return function(){function q(){this._map=new u}return Object.defineProperty(q.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),q.prototype.has=function(et){return this._map.has(et)},q.prototype.add=function(et){return this._map.set(et,et),this},q.prototype.delete=function(et){return this._map.delete(et)},q.prototype.clear=function(){this._map.clear()},q.prototype.keys=function(){return this._map.keys()},q.prototype.values=function(){return this._map.values()},q.prototype.entries=function(){return this._map.entries()},q.prototype["@@iterator"]=function(){return this.keys()},q.prototype[e]=function(){return this.keys()},q}()}function yt(){var q=16,et=n.create(),nt=ht();return function(){function vt(){this._key=ht()}return vt.prototype.has=function(Ct){var At=ft(Ct,!1);return At!==void 0?n.has(At,this._key):!1},vt.prototype.get=function(Ct){var At=ft(Ct,!1);return At!==void 0?n.get(At,this._key):void 0},vt.prototype.set=function(Ct,At){var Ut=ft(Ct,!0);return Ut[this._key]=At,this},vt.prototype.delete=function(Ct){var At=ft(Ct,!1);return At!==void 0?delete At[this._key]:!1},vt.prototype.clear=function(){this._key=ht()},vt}();function ht(){var vt;do vt="@@WeakMap@@"+Et();while(n.has(et,vt));return et[vt]=!0,vt}function ft(vt,Ct){if(!a.call(vt,nt)){if(!Ct)return;Object.defineProperty(vt,nt,{value:n.create()})}return vt[nt]}function Mt(vt,Ct){for(var At=0;At<Ct;++At)vt[At]=Math.random()*255|0;return vt}function pt(vt){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(vt)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(vt)):Mt(new Uint8Array(vt),vt):Mt(new Array(vt),vt)}function Et(){var vt=pt(q);vt[6]=vt[6]&79|64,vt[8]=vt[8]&191|128;for(var Ct="",At=0;At<q;++At){var Ut=vt[At];(At===4||At===6||At===8)&&(Ct+="-"),Ut<16&&(Ct+="0"),Ct+=Ut.toString(16).toLowerCase()}return Ct}}function $t(q){return q.__=void 0,delete q.__,q}})})(Do||(Do={}));const Tr={},ah=[];function wt(C,g){if(Array.isArray(C)){for(const a of C)wt(a,g);return}if(typeof C=="object"){for(const a in C)wt(a,C[a]);return}oh(Object.getOwnPropertyNames(g)),Tr[C]=Object.assign(Tr[C]||{},g)}function se(C){return Tr[C]||{}}function kd(){return[...new Set(ah)]}function oh(C){ah.push(...C)}function Hr(C,g){let a;const x=C.length,t=[];for(a=0;a<x;a++)t.push(g(C[a]));return t}function qd(C,g){let a;const x=C.length,t=[];for(a=0;a<x;a++)g(C[a])&&t.push(C[a]);return t}function fr(C){return C%360*Math.PI/180}function Kn(C){return C.toLowerCase().replace(/-(.)/g,function(g,a){return a.toUpperCase()})}function _d(C){return C.replace(/([A-Z])/g,function(g,a){return"-"+a.toLowerCase()})}function hh(C){return C.charAt(0).toUpperCase()+C.slice(1)}function wi(C,g,a,x){return(g==null||a==null)&&(x=x||C.bbox(),g==null?g=x.width/x.height*a:a==null&&(a=x.height/x.width*g)),{width:g,height:a}}function Er(C,g){const a=C.origin;let x=C.ox!=null?C.ox:C.originX!=null?C.originX:"center",t=C.oy!=null?C.oy:C.originY!=null?C.originY:"center";a!=null&&([x,t]=Array.isArray(a)?a:typeof a=="object"?[a.x,a.y]:[a,a]);const e=typeof x=="string",d=typeof t=="string";if(e||d){const{height:r,width:o,x:n,y:i}=g.bbox();e&&(x=x.includes("left")?n:x.includes("right")?n+o:n+o/2),d&&(t=t.includes("top")?i:t.includes("bottom")?i+r:i+r/2)}return[x,t]}const Kr="http://www.w3.org/2000/svg",tc="http://www.w3.org/1999/xhtml",Zn="http://www.w3.org/2000/xmlns/",Pn="http://www.w3.org/1999/xlink",ec="http://svgjs.dev/svgjs",Dt={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};class Zr{}const ni={},$r="___SYMBOL___ROOT___";function dn(C,g=Kr){return Dt.document.createElementNS(g,C)}function ee(C,g=!1){if(C instanceof Zr)return C;if(typeof C=="object")return dr(C);if(C==null)return new ni[$r];if(typeof C=="string"&&C.charAt(0)!=="<")return dr(Dt.document.querySelector(C));const a=g?Dt.document.createElement("div"):dn("svg");return a.innerHTML=C,C=dr(a.firstChild),a.removeChild(a.firstChild),C}function zt(C,g){return g&&g.ownerDocument&&g instanceof g.ownerDocument.defaultView.Node?g:dn(C)}function de(C){if(!C)return null;if(C.instance instanceof Zr)return C.instance;if(C.nodeName==="#document-fragment")return new ni.Fragment(C);let g=hh(C.nodeName||"Dom");return g==="LinearGradient"||g==="RadialGradient"?g="Gradient":ni[g]||(g="Dom"),new ni[g](C)}let dr=de;function It(C,g=C.name,a=!1){return ni[g]=C,a&&(ni[$r]=C),oh(Object.getOwnPropertyNames(C.prototype)),C}function ic(C){return ni[C]}let nc=1e3;function lh(C){return"Svgjs"+hh(C)+nc++}function uh(C){for(let g=C.children.length-1;g>=0;g--)uh(C.children[g]);return C.id&&(C.id=lh(C.nodeName)),C}function Ft(C,g){let a,x;for(C=Array.isArray(C)?C:[C],x=C.length-1;x>=0;x--)for(a in g)C[x].prototype[a]=g[a]}function Xt(C){return function(...g){const a=g[g.length-1];return a&&a.constructor===Object&&!(a instanceof Array)?C.apply(this,g.slice(0,-1)).attr(a):C.apply(this,g)}}function sc(){return this.parent().children()}function rc(){return this.parent().index(this)}function ac(){return this.siblings()[this.position()+1]}function oc(){return this.siblings()[this.position()-1]}function hc(){const C=this.position();return this.parent().add(this.remove(),C+1),this}function lc(){const C=this.position();return this.parent().add(this.remove(),C?C-1:0),this}function uc(){return this.parent().add(this.remove()),this}function fc(){return this.parent().add(this.remove(),0),this}function dc(C){C=ee(C),C.remove();const g=this.position();return this.parent().add(C,g),this}function cc(C){C=ee(C),C.remove();const g=this.position();return this.parent().add(C,g+1),this}function vc(C){return C=ee(C),C.before(this),this}function pc(C){return C=ee(C),C.after(this),this}wt("Dom",{siblings:sc,position:rc,next:ac,prev:oc,forward:hc,backward:lc,front:uc,back:fc,before:dc,after:cc,insertBefore:vc,insertAfter:pc});const fh=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,mc=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,gc=/rgb\((\d+),(\d+),(\d+)\)/,xc=/(#[a-z_][a-z0-9\-_]*)/i,yc=/\)\s*,?\s*/,Tc=/\s/g,Bo=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,No=/^rgb\(/,Go=/^(\s+)?$/,Vo=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ec=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,Be=/[\s,]+/,Jr=/[MLHVCSQTAZ]/i;function Sc(){const C=this.attr("class");return C==null?[]:C.trim().split(Be)}function Cc(C){return this.classes().indexOf(C)!==-1}function Ac(C){if(!this.hasClass(C)){const g=this.classes();g.push(C),this.attr("class",g.join(" "))}return this}function Pc(C){return this.hasClass(C)&&this.attr("class",this.classes().filter(function(g){return g!==C}).join(" ")),this}function Mc(C){return this.hasClass(C)?this.removeClass(C):this.addClass(C)}wt("Dom",{classes:Sc,hasClass:Cc,addClass:Ac,removeClass:Pc,toggleClass:Mc});function Rc(C,g){const a={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(x){return!!x.length}).forEach(function(x){const t=x.split(/\s*:\s*/);a[t[0]]=t[1]}),a;if(arguments.length<2){if(Array.isArray(C)){for(const x of C){const t=Kn(x);a[x]=this.node.style[t]}return a}if(typeof C=="string")return this.node.style[Kn(C)];if(typeof C=="object")for(const x in C)this.node.style[Kn(x)]=C[x]==null||Go.test(C[x])?"":C[x]}return arguments.length===2&&(this.node.style[Kn(C)]=g==null||Go.test(g)?"":g),this}function Lc(){return this.css("display","")}function wc(){return this.css("display","none")}function Oc(){return this.css("display")!=="none"}wt("Dom",{css:Rc,show:Lc,hide:wc,visible:Oc});function Fc(C,g,a){if(C==null)return this.data(Hr(qd(this.node.attributes,x=>x.nodeName.indexOf("data-")===0),x=>x.nodeName.slice(5)));if(C instanceof Array){const x={};for(const t of C)x[t]=this.data(t);return x}else if(typeof C=="object")for(g in C)this.data(g,C[g]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+C))}catch{return this.attr("data-"+C)}else this.attr("data-"+C,g===null?null:a===!0||typeof g=="string"||typeof g=="number"?g:JSON.stringify(g));return this}wt("Dom",{data:Fc});function Ic(C,g){if(typeof arguments[0]=="object")for(const a in C)this.remember(a,C[a]);else{if(arguments.length===1)return this.memory()[C];this.memory()[C]=g}return this}function bc(){if(arguments.length===0)this._memory={};else for(let C=arguments.length-1;C>=0;C--)delete this.memory()[arguments[C]];return this}function Dc(){return this._memory=this._memory||{}}wt("Dom",{remember:Ic,forget:bc,memory:Dc});function Bc(C){return C.length===4?["#",C.substring(1,2),C.substring(1,2),C.substring(2,3),C.substring(2,3),C.substring(3,4),C.substring(3,4)].join(""):C}function Nc(C){const g=Math.round(C),x=Math.max(0,Math.min(255,g)).toString(16);return x.length===1?"0"+x:x}function yi(C,g){for(let a=g.length;a--;)if(C[g[a]]==null)return!1;return!0}function Gc(C,g){const a=yi(C,"rgb")?{_a:C.r,_b:C.g,_c:C.b,_d:0,space:"rgb"}:yi(C,"xyz")?{_a:C.x,_b:C.y,_c:C.z,_d:0,space:"xyz"}:yi(C,"hsl")?{_a:C.h,_b:C.s,_c:C.l,_d:0,space:"hsl"}:yi(C,"lab")?{_a:C.l,_b:C.a,_c:C.b,_d:0,space:"lab"}:yi(C,"lch")?{_a:C.l,_b:C.c,_c:C.h,_d:0,space:"lch"}:yi(C,"cmyk")?{_a:C.c,_b:C.m,_c:C.y,_d:C.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return a.space=g||a.space,a}function Vc(C){return C==="lab"||C==="xyz"||C==="lch"}function cr(C,g,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?C+(g-C)*6*a:a<1/2?g:a<2/3?C+(g-C)*(2/3-a)*6:C}class Gt{constructor(...g){this.init(...g)}static isColor(g){return g&&(g instanceof Gt||this.isRgb(g)||this.test(g))}static isRgb(g){return g&&typeof g.r=="number"&&typeof g.g=="number"&&typeof g.b=="number"}static random(g="vibrant",a,x){const{random:t,round:e,sin:d,PI:r}=Math;if(g==="vibrant"){const o=24*t()+57,n=(83-45)*t()+45,i=360*t();return new Gt(o,n,i,"lch")}else if(g==="sine"){a=a??t();const o=e(80*d(2*r*a/.5+.01)+150),n=e(50*d(2*r*a/.5+4.6)+200),i=e(100*d(2*r*a/.5+2.3)+150);return new Gt(o,n,i)}else if(g==="pastel"){const o=8*t()+86,n=(26-9)*t()+9,i=360*t();return new Gt(o,n,i,"lch")}else if(g==="dark"){const o=10+10*t(),n=(125-75)*t()+86,i=360*t();return new Gt(o,n,i,"lch")}else if(g==="rgb"){const o=255*t(),n=255*t(),i=255*t();return new Gt(o,n,i)}else if(g==="lab"){const o=100*t(),n=256*t()-128,i=256*t()-128;return new Gt(o,n,i,"lab")}else if(g==="grey"){const o=255*t();return new Gt(o,o,o)}else throw new Error("Unsupported random color mode")}static test(g){return typeof g=="string"&&(Bo.test(g)||No.test(g))}cmyk(){const{_a:g,_b:a,_c:x}=this.rgb(),[t,e,d]=[g,a,x].map(u=>u/255),r=Math.min(1-t,1-e,1-d);if(r===1)return new Gt(0,0,0,1,"cmyk");const o=(1-t-r)/(1-r),n=(1-e-r)/(1-r),i=(1-d-r)/(1-r);return new Gt(o,n,i,r,"cmyk")}hsl(){const{_a:g,_b:a,_c:x}=this.rgb(),[t,e,d]=[g,a,x].map(f=>f/255),r=Math.max(t,e,d),o=Math.min(t,e,d),n=(r+o)/2,i=r===o,s=r-o,u=i?0:n>.5?s/(2-r-o):s/(r+o),h=i?0:r===t?((e-d)/s+(e<d?6:0))/6:r===e?((d-t)/s+2)/6:r===d?((t-e)/s+4)/6:0;return new Gt(360*h,100*u,100*n,"hsl")}init(g=0,a=0,x=0,t=0,e="rgb"){if(g=g||0,this.space)for(const s in this.space)delete this[this.space[s]];if(typeof g=="number")e=typeof t=="string"?t:e,t=typeof t=="string"?0:t,Object.assign(this,{_a:g,_b:a,_c:x,_d:t,space:e});else if(g instanceof Array)this.space=a||(typeof g[3]=="string"?g[3]:g[4])||"rgb",Object.assign(this,{_a:g[0],_b:g[1],_c:g[2],_d:g[3]||0});else if(g instanceof Object){const s=Gc(g,a);Object.assign(this,s)}else if(typeof g=="string")if(No.test(g)){const s=g.replace(Tc,""),[u,h,l]=gc.exec(s).slice(1,4).map(f=>parseInt(f));Object.assign(this,{_a:u,_b:h,_c:l,_d:0,space:"rgb"})}else if(Bo.test(g)){const s=f=>parseInt(f,16),[,u,h,l]=mc.exec(Bc(g)).map(s);Object.assign(this,{_a:u,_b:h,_c:l,_d:0,space:"rgb"})}else throw Error("Unsupported string format, can't construct Color");const{_a:d,_b:r,_c:o,_d:n}=this,i=this.space==="rgb"?{r:d,g:r,b:o}:this.space==="xyz"?{x:d,y:r,z:o}:this.space==="hsl"?{h:d,s:r,l:o}:this.space==="lab"?{l:d,a:r,b:o}:this.space==="lch"?{l:d,c:r,h:o}:this.space==="cmyk"?{c:d,m:r,y:o,k:n}:{};Object.assign(this,i)}lab(){const{x:g,y:a,z:x}=this.xyz(),t=116*a-16,e=500*(g-a),d=200*(a-x);return new Gt(t,e,d,"lab")}lch(){const{l:g,a,b:x}=this.lab(),t=Math.sqrt(a**2+x**2);let e=180*Math.atan2(x,a)/Math.PI;return e<0&&(e*=-1,e=360-e),new Gt(g,t,e,"lch")}rgb(){if(this.space==="rgb")return this;if(Vc(this.space)){let{x:g,y:a,z:x}=this;if(this.space==="lab"||this.space==="lch"){let{l:h,a:l,b:f}=this;if(this.space==="lch"){const{c:E,h:S}=this,P=Math.PI/180;l=E*Math.cos(P*S),f=E*Math.sin(P*S)}const v=(h+16)/116,c=l/500+v,p=v-f/200,m=16/116,y=.008856,T=7.787;g=.95047*(c**3>y?c**3:(c-m)/T),a=1*(v**3>y?v**3:(v-m)/T),x=1.08883*(p**3>y?p**3:(p-m)/T)}const t=g*3.2406+a*-1.5372+x*-.4986,e=g*-.9689+a*1.8758+x*.0415,d=g*.0557+a*-.204+x*1.057,r=Math.pow,o=.0031308,n=t>o?1.055*r(t,1/2.4)-.055:12.92*t,i=e>o?1.055*r(e,1/2.4)-.055:12.92*e,s=d>o?1.055*r(d,1/2.4)-.055:12.92*d;return new Gt(255*n,255*i,255*s)}else if(this.space==="hsl"){let{h:g,s:a,l:x}=this;if(g/=360,a/=100,x/=100,a===0)return x*=255,new Gt(x,x,x);const t=x<.5?x*(1+a):x+a-x*a,e=2*x-t,d=255*cr(e,t,g+1/3),r=255*cr(e,t,g),o=255*cr(e,t,g-1/3);return new Gt(d,r,o)}else if(this.space==="cmyk"){const{c:g,m:a,y:x,k:t}=this,e=255*(1-Math.min(1,g*(1-t)+t)),d=255*(1-Math.min(1,a*(1-t)+t)),r=255*(1-Math.min(1,x*(1-t)+t));return new Gt(e,d,r)}else return this}toArray(){const{_a:g,_b:a,_c:x,_d:t,space:e}=this;return[g,a,x,t,e]}toHex(){const[g,a,x]=this._clamped().map(Nc);return`#${g}${a}${x}`}toRgb(){const[g,a,x]=this._clamped();return`rgb(${g},${a},${x})`}toString(){return this.toHex()}xyz(){const{_a:g,_b:a,_c:x}=this.rgb(),[t,e,d]=[g,a,x].map(c=>c/255),r=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,o=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,n=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92,i=(r*.4124+o*.3576+n*.1805)/.95047,s=(r*.2126+o*.7152+n*.0722)/1,u=(r*.0193+o*.1192+n*.9505)/1.08883,h=i>.008856?Math.pow(i,1/3):7.787*i+16/116,l=s>.008856?Math.pow(s,1/3):7.787*s+16/116,f=u>.008856?Math.pow(u,1/3):7.787*u+16/116;return new Gt(h,l,f,"xyz")}_clamped(){const{_a:g,_b:a,_c:x}=this.rgb(),{max:t,min:e,round:d}=Math,r=o=>t(0,e(d(o),255));return[g,a,x].map(r)}}class Kt{constructor(...g){this.init(...g)}clone(){return new Kt(this)}init(g,a){const x={x:0,y:0},t=Array.isArray(g)?{x:g[0],y:g[1]}:typeof g=="object"?{x:g.x,y:g.y}:{x:g,y:a};return this.x=t.x==null?x.x:t.x,this.y=t.y==null?x.y:t.y,this}toArray(){return[this.x,this.y]}transform(g){return this.clone().transformO(g)}transformO(g){Tt.isMatrixLike(g)||(g=new Tt(g));const{x:a,y:x}=this;return this.x=g.a*a+g.c*x+g.e,this.y=g.b*a+g.d*x+g.f,this}}function Uc(C,g){return new Kt(C,g).transform(this.screenCTM().inverse())}function Ti(C,g,a){return Math.abs(g-C)<(a||1e-6)}class Tt{constructor(...g){this.init(...g)}static formatTransforms(g){const a=g.flip==="both"||g.flip===!0,x=g.flip&&(a||g.flip==="x")?-1:1,t=g.flip&&(a||g.flip==="y")?-1:1,e=g.skew&&g.skew.length?g.skew[0]:isFinite(g.skew)?g.skew:isFinite(g.skewX)?g.skewX:0,d=g.skew&&g.skew.length?g.skew[1]:isFinite(g.skew)?g.skew:isFinite(g.skewY)?g.skewY:0,r=g.scale&&g.scale.length?g.scale[0]*x:isFinite(g.scale)?g.scale*x:isFinite(g.scaleX)?g.scaleX*x:x,o=g.scale&&g.scale.length?g.scale[1]*t:isFinite(g.scale)?g.scale*t:isFinite(g.scaleY)?g.scaleY*t:t,n=g.shear||0,i=g.rotate||g.theta||0,s=new Kt(g.origin||g.around||g.ox||g.originX,g.oy||g.originY),u=s.x,h=s.y,l=new Kt(g.position||g.px||g.positionX||NaN,g.py||g.positionY||NaN),f=l.x,v=l.y,c=new Kt(g.translate||g.tx||g.translateX,g.ty||g.translateY),p=c.x,m=c.y,y=new Kt(g.relative||g.rx||g.relativeX,g.ry||g.relativeY),T=y.x,E=y.y;return{scaleX:r,scaleY:o,skewX:e,skewY:d,shear:n,theta:i,rx:T,ry:E,tx:p,ty:m,ox:u,oy:h,px:f,py:v}}static fromArray(g){return{a:g[0],b:g[1],c:g[2],d:g[3],e:g[4],f:g[5]}}static isMatrixLike(g){return g.a!=null||g.b!=null||g.c!=null||g.d!=null||g.e!=null||g.f!=null}static matrixMultiply(g,a,x){const t=g.a*a.a+g.c*a.b,e=g.b*a.a+g.d*a.b,d=g.a*a.c+g.c*a.d,r=g.b*a.c+g.d*a.d,o=g.e+g.a*a.e+g.c*a.f,n=g.f+g.b*a.e+g.d*a.f;return x.a=t,x.b=e,x.c=d,x.d=r,x.e=o,x.f=n,x}around(g,a,x){return this.clone().aroundO(g,a,x)}aroundO(g,a,x){const t=g||0,e=a||0;return this.translateO(-t,-e).lmultiplyO(x).translateO(t,e)}clone(){return new Tt(this)}decompose(g=0,a=0){const x=this.a,t=this.b,e=this.c,d=this.d,r=this.e,o=this.f,n=x*d-t*e,i=n>0?1:-1,s=i*Math.sqrt(x*x+t*t),u=Math.atan2(i*t,i*x),h=180/Math.PI*u,l=Math.cos(u),f=Math.sin(u),v=(x*e+t*d)/n,c=e*s/(v*x-t)||d*s/(v*t+x),p=r-g+g*l*s+a*(v*l*s-f*c),m=o-a+g*f*s+a*(v*f*s+l*c);return{scaleX:s,scaleY:c,shear:v,rotate:h,translateX:p,translateY:m,originX:g,originY:a,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(g){if(g===this)return!0;const a=new Tt(g);return Ti(this.a,a.a)&&Ti(this.b,a.b)&&Ti(this.c,a.c)&&Ti(this.d,a.d)&&Ti(this.e,a.e)&&Ti(this.f,a.f)}flip(g,a){return this.clone().flipO(g,a)}flipO(g,a){return g==="x"?this.scaleO(-1,1,a,0):g==="y"?this.scaleO(1,-1,0,a):this.scaleO(-1,-1,g,a||g)}init(g){const a=Tt.fromArray([1,0,0,1,0,0]);return g=g instanceof Ce?g.matrixify():typeof g=="string"?Tt.fromArray(g.split(Be).map(parseFloat)):Array.isArray(g)?Tt.fromArray(g):typeof g=="object"&&Tt.isMatrixLike(g)?g:typeof g=="object"?new Tt().transform(g):arguments.length===6?Tt.fromArray([].slice.call(arguments)):a,this.a=g.a!=null?g.a:a.a,this.b=g.b!=null?g.b:a.b,this.c=g.c!=null?g.c:a.c,this.d=g.d!=null?g.d:a.d,this.e=g.e!=null?g.e:a.e,this.f=g.f!=null?g.f:a.f,this}inverse(){return this.clone().inverseO()}inverseO(){const g=this.a,a=this.b,x=this.c,t=this.d,e=this.e,d=this.f,r=g*t-a*x;if(!r)throw new Error("Cannot invert "+this);const o=t/r,n=-a/r,i=-x/r,s=g/r,u=-(o*e+i*d),h=-(n*e+s*d);return this.a=o,this.b=n,this.c=i,this.d=s,this.e=u,this.f=h,this}lmultiply(g){return this.clone().lmultiplyO(g)}lmultiplyO(g){const a=this,x=g instanceof Tt?g:new Tt(g);return Tt.matrixMultiply(x,a,this)}multiply(g){return this.clone().multiplyO(g)}multiplyO(g){const a=this,x=g instanceof Tt?g:new Tt(g);return Tt.matrixMultiply(a,x,this)}rotate(g,a,x){return this.clone().rotateO(g,a,x)}rotateO(g,a=0,x=0){g=fr(g);const t=Math.cos(g),e=Math.sin(g),{a:d,b:r,c:o,d:n,e:i,f:s}=this;return this.a=d*t-r*e,this.b=r*t+d*e,this.c=o*t-n*e,this.d=n*t+o*e,this.e=i*t-s*e+x*e-a*t+a,this.f=s*t+i*e-a*e-x*t+x,this}scale(g,a,x,t){return this.clone().scaleO(...arguments)}scaleO(g,a=g,x=0,t=0){arguments.length===3&&(t=x,x=a,a=g);const{a:e,b:d,c:r,d:o,e:n,f:i}=this;return this.a=e*g,this.b=d*a,this.c=r*g,this.d=o*a,this.e=n*g-x*g+x,this.f=i*a-t*a+t,this}shear(g,a,x){return this.clone().shearO(g,a,x)}shearO(g,a=0,x=0){const{a:t,b:e,c:d,d:r,e:o,f:n}=this;return this.a=t+e*g,this.c=d+r*g,this.e=o+n*g-x*g,this}skew(g,a,x,t){return this.clone().skewO(...arguments)}skewO(g,a=g,x=0,t=0){arguments.length===3&&(t=x,x=a,a=g),g=fr(g),a=fr(a);const e=Math.tan(g),d=Math.tan(a),{a:r,b:o,c:n,d:i,e:s,f:u}=this;return this.a=r+o*e,this.b=o+r*d,this.c=n+i*e,this.d=i+n*d,this.e=s+u*e-t*e,this.f=u+s*d-x*d,this}skewX(g,a,x){return this.skew(g,0,a,x)}skewY(g,a,x){return this.skew(0,g,a,x)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(g){if(Tt.isMatrixLike(g))return new Tt(g).multiplyO(this);const a=Tt.formatTransforms(g),x=this,{x:t,y:e}=new Kt(a.ox,a.oy).transform(x),d=new Tt().translateO(a.rx,a.ry).lmultiplyO(x).translateO(-t,-e).scaleO(a.scaleX,a.scaleY).skewO(a.skewX,a.skewY).shearO(a.shear).rotateO(a.theta).translateO(t,e);if(isFinite(a.px)||isFinite(a.py)){const r=new Kt(t,e).transform(d),o=isFinite(a.px)?a.px-r.x:0,n=isFinite(a.py)?a.py-r.y:0;d.translateO(o,n)}return d.translateO(a.tx,a.ty),d}translate(g,a){return this.clone().translateO(g,a)}translateO(g,a){return this.e+=g||0,this.f+=a||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function Yc(){return new Tt(this.node.getCTM())}function Xc(){if(typeof this.isRoot=="function"&&!this.isRoot()){const C=this.rect(1,1),g=C.node.getScreenCTM();return C.remove(),new Tt(g)}return new Tt(this.node.getScreenCTM())}It(Tt,"Matrix");function We(){if(!We.nodes){const C=ee().size(2,0);C.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),C.attr("focusable","false"),C.attr("aria-hidden","true");const g=C.path().node;We.nodes={svg:C,path:g}}if(!We.nodes.svg.node.parentNode){const C=Dt.document.body||Dt.document.documentElement;We.nodes.svg.addTo(C)}return We.nodes}function dh(C){return!C.width&&!C.height&&!C.x&&!C.y}function zc(C){return C===Dt.document||(Dt.document.documentElement.contains||function(g){for(;g.parentNode;)g=g.parentNode;return g===Dt.document}).call(Dt.document.documentElement,C)}class te{constructor(...g){this.init(...g)}addOffset(){return this.x+=Dt.window.pageXOffset,this.y+=Dt.window.pageYOffset,new te(this)}init(g){const a=[0,0,0,0];return g=typeof g=="string"?g.split(Be).map(parseFloat):Array.isArray(g)?g:typeof g=="object"?[g.left!=null?g.left:g.x,g.top!=null?g.top:g.y,g.width,g.height]:arguments.length===4?[].slice.call(arguments):a,this.x=g[0]||0,this.y=g[1]||0,this.width=this.w=g[2]||0,this.height=this.h=g[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return dh(this)}merge(g){const a=Math.min(this.x,g.x),x=Math.min(this.y,g.y),t=Math.max(this.x+this.width,g.x+g.width)-a,e=Math.max(this.y+this.height,g.y+g.height)-x;return new te(a,x,t,e)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(g){g instanceof Tt||(g=new Tt(g));let a=1/0,x=-1/0,t=1/0,e=-1/0;return[new Kt(this.x,this.y),new Kt(this.x2,this.y),new Kt(this.x,this.y2),new Kt(this.x2,this.y2)].forEach(function(r){r=r.transform(g),a=Math.min(a,r.x),x=Math.max(x,r.x),t=Math.min(t,r.y),e=Math.max(e,r.y)}),new te(a,t,x-a,e-t)}}function ch(C,g,a){let x;try{if(x=g(C.node),dh(x)&&!zc(C.node))throw new Error("Element not in the dom")}catch{x=a(C)}return x}function Wc(){const a=ch(this,t=>t.getBBox(),t=>{try{const e=t.clone().addTo(We().svg).show(),d=e.node.getBBox();return e.remove(),d}catch(e){throw new Error(`Getting bbox of element "${t.node.nodeName}" is not possible: ${e.toString()}`)}});return new te(a)}function Hc(C){const x=ch(this,e=>e.getBoundingClientRect(),e=>{throw new Error(`Getting rbox of element "${e.node.nodeName}" is not possible`)}),t=new te(x);return C?t.transform(C.screenCTM().inverseO()):t.addOffset()}function Kc(C,g){const a=this.bbox();return C>a.x&&g>a.y&&C<a.x+a.width&&g<a.y+a.height}wt({viewbox:{viewbox(C,g,a,x){return C==null?new te(this.attr("viewBox")):this.attr("viewBox",new te(C,g,a,x))},zoom(C,g){let{width:a,height:x}=this.attr(["width","height"]);if((!a&&!x||typeof a=="string"||typeof x=="string")&&(a=this.node.clientWidth,x=this.node.clientHeight),!a||!x)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const t=this.viewbox(),e=a/t.width,d=x/t.height,r=Math.min(e,d);if(C==null)return r;let o=r/C;o===1/0&&(o=Number.MAX_SAFE_INTEGER/100),g=g||new Kt(a/2/e+t.x,x/2/d+t.y);const n=new te(t).transform(new Tt({scale:o,origin:g}));return this.viewbox(n)}}});It(te,"Box");class ai extends Array{constructor(g=[],...a){if(super(g,...a),typeof g=="number")return this;this.length=0,this.push(...g)}}Ft([ai],{each(C,...g){return typeof C=="function"?this.map((a,x,t)=>C.call(a,a,x,t)):this.map(a=>a[C](...g))},toArray(){return Array.prototype.concat.apply([],this)}});const Zc=["toArray","constructor","each"];ai.extend=function(C){C=C.reduce((g,a)=>(Zc.includes(a)||a[0]==="_"||(g[a]=function(...x){return this.each(a,...x)}),g),{}),Ft([ai],C)};function Oi(C,g){return new ai(Hr((g||Dt.document).querySelectorAll(C),function(a){return de(a)}))}function $c(C){return Oi(C,this.node)}function Jc(C){return de(this.node.querySelector(C))}let jc=0;const vh={};function ph(C){let g=C.getEventHolder();return g===Dt.window&&(g=vh),g.events||(g.events={}),g.events}function jr(C){return C.getEventTarget()}function Qc(C){let g=C.getEventHolder();g===Dt.window&&(g=vh),g.events&&(g.events={})}function Sr(C,g,a,x,t){const e=a.bind(x||C),d=ee(C),r=ph(d),o=jr(d);g=Array.isArray(g)?g:g.split(Be),a._svgjsListenerId||(a._svgjsListenerId=++jc),g.forEach(function(n){const i=n.split(".")[0],s=n.split(".")[1]||"*";r[i]=r[i]||{},r[i][s]=r[i][s]||{},r[i][s][a._svgjsListenerId]=e,o.addEventListener(i,e,t||!1)})}function Ci(C,g,a,x){const t=ee(C),e=ph(t),d=jr(t);typeof a=="function"&&(a=a._svgjsListenerId,!a)||(g=Array.isArray(g)?g:(g||"").split(Be),g.forEach(function(r){const o=r&&r.split(".")[0],n=r&&r.split(".")[1];let i,s;if(a)e[o]&&e[o][n||"*"]&&(d.removeEventListener(o,e[o][n||"*"][a],x||!1),delete e[o][n||"*"][a]);else if(o&&n){if(e[o]&&e[o][n]){for(s in e[o][n])Ci(d,[o,n].join("."),s);delete e[o][n]}}else if(n)for(r in e)for(i in e[r])n===i&&Ci(d,[r,n].join("."));else if(o){if(e[o]){for(i in e[o])Ci(d,[o,i].join("."));delete e[o]}}else{for(r in e)Ci(d,r);Qc(t)}}))}function kc(C,g,a,x){const t=jr(C);return g instanceof Dt.window.Event||(g=new Dt.window.CustomEvent(g,{detail:a,cancelable:!0,...x})),t.dispatchEvent(g),g}class Mn extends Zr{addEventListener(){}dispatch(g,a,x){return kc(this,g,a,x)}dispatchEvent(g){const a=this.getEventHolder().events;if(!a)return!0;const x=a[g.type];for(const t in x)for(const e in x[t])x[t][e](g);return!g.defaultPrevented}fire(g,a,x){return this.dispatch(g,a,x),this}getEventHolder(){return this}getEventTarget(){return this}off(g,a,x){return Ci(this,g,a,x),this}on(g,a,x,t){return Sr(this,g,a,x,t),this}removeEventListener(){}}It(Mn,"EventTarget");function Uo(){}const _i={duration:400,ease:">",delay:0},qc={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class Pi extends Array{constructor(...g){super(...g),this.init(...g)}clone(){return new this.constructor(this)}init(g){return typeof g=="number"?this:(this.length=0,this.push(...this.parse(g)),this)}parse(g=[]){return g instanceof Array?g:g.trim().split(Be).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const g=[];return g.push(...this),g}}class Pt{constructor(...g){this.init(...g)}convert(g){return new Pt(this.value,g)}divide(g){return g=new Pt(g),new Pt(this/g,this.unit||g.unit)}init(g,a){return a=Array.isArray(g)?g[1]:a,g=Array.isArray(g)?g[0]:g,this.value=0,this.unit=a||"",typeof g=="number"?this.value=isNaN(g)?0:isFinite(g)?g:g<0?-34e37:34e37:typeof g=="string"?(a=g.match(fh),a&&(this.value=parseFloat(a[1]),a[5]==="%"?this.value/=100:a[5]==="s"&&(this.value*=1e3),this.unit=a[5])):g instanceof Pt&&(this.value=g.valueOf(),this.unit=g.unit),this}minus(g){return g=new Pt(g),new Pt(this-g,this.unit||g.unit)}plus(g){return g=new Pt(g),new Pt(this+g,this.unit||g.unit)}times(g){return g=new Pt(g),new Pt(this*g,this.unit||g.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(this.value*1e8)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const mh=[];function _c(C){mh.push(C)}function tv(C,g,a){if(C==null){C={},g=this.node.attributes;for(const x of g)C[x.nodeName]=Vo.test(x.nodeValue)?parseFloat(x.nodeValue):x.nodeValue;return C}else{if(C instanceof Array)return C.reduce((x,t)=>(x[t]=this.attr(t),x),{});if(typeof C=="object"&&C.constructor===Object)for(g in C)this.attr(g,C[g]);else if(g===null)this.node.removeAttribute(C);else{if(g==null)return g=this.node.getAttribute(C),g==null?qc[C]:Vo.test(g)?parseFloat(g):g;g=mh.reduce((x,t)=>t(C,x,this),g),typeof g=="number"?g=new Pt(g):Gt.isColor(g)?g=new Gt(g):g.constructor===Array&&(g=new Pi(g)),C==="leading"?this.leading&&this.leading(g):typeof a=="string"?this.node.setAttributeNS(a,C,g.toString()):this.node.setAttribute(C,g.toString()),this.rebuild&&(C==="font-size"||C==="x")&&this.rebuild()}}return this}class He extends Mn{constructor(g,a){super(),this.node=g,this.type=g.nodeName,a&&g!==a&&this.attr(a)}add(g,a){return g=ee(g),g.removeNamespace&&this.node instanceof Dt.window.SVGElement&&g.removeNamespace(),a==null?this.node.appendChild(g.node):g.node!==this.node.childNodes[a]&&this.node.insertBefore(g.node,this.node.childNodes[a]),this}addTo(g,a){return ee(g).put(this,a)}children(){return new ai(Hr(this.node.children,function(g){return de(g)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(g=!0){return this.writeDataToDom(),new this.constructor(uh(this.node.cloneNode(g)))}each(g,a){const x=this.children();let t,e;for(t=0,e=x.length;t<e;t++)g.apply(x[t],[t,x]),a&&x[t].each(g,a);return this}element(g,a){return this.put(new He(dn(g),a))}first(){return de(this.node.firstChild)}get(g){return de(this.node.childNodes[g])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(g){return this.index(g)>=0}html(g,a){return this.xml(g,a,tc)}id(g){return typeof g>"u"&&!this.node.id&&(this.node.id=lh(this.type)),this.attr("id",g)}index(g){return[].slice.call(this.node.childNodes).indexOf(g.node)}last(){return de(this.node.lastChild)}matches(g){const a=this.node,x=a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.oMatchesSelector||null;return x&&x.call(a,g)}parent(g){let a=this;if(!a.node.parentNode)return null;if(a=de(a.node.parentNode),!g)return a;do if(typeof g=="string"?a.matches(g):a instanceof g)return a;while(a=de(a.node.parentNode));return a}put(g,a){return g=ee(g),this.add(g,a),g}putIn(g,a){return ee(g).add(this,a)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(g){return this.node.removeChild(g.node),this}replace(g){return g=ee(g),this.node.parentNode&&this.node.parentNode.replaceChild(g.node,this.node),g}round(g=2,a=null){const x=10**g,t=this.attr(a);for(const e in t)typeof t[e]=="number"&&(t[e]=Math.round(t[e]*x)/x);return this.attr(t),this}svg(g,a){return this.xml(g,a,Kr)}toString(){return this.id()}words(g){return this.node.textContent=g,this}wrap(g){const a=this.parent();if(!a)return this.addTo(g);const x=a.index(this);return a.put(g,x).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(g,a,x){if(typeof g=="boolean"&&(x=a,a=g,g=null),g==null||typeof g=="function"){a=a??!0,this.writeDataToDom();let r=this;if(g!=null){if(r=de(r.node.cloneNode(!0)),a){const o=g(r);if(r=o||r,o===!1)return""}r.each(function(){const o=g(this),n=o||this;o===!1?this.remove():o&&this!==n&&this.replace(n)},!0)}return a?r.node.outerHTML:r.node.innerHTML}a=a??!1;const t=dn("wrapper",x),e=Dt.document.createDocumentFragment();t.innerHTML=g;for(let r=t.children.length;r--;)e.appendChild(t.firstElementChild);const d=this.parent();return a?this.replace(e)&&d:this.add(e)}}Ft(He,{attr:tv,find:$c,findOne:Jc});It(He,"Dom");let Ce=class extends He{constructor(g,a){super(g,a),this.dom={},this.node.instance=this,g.hasAttribute("svgjs:data")&&this.setData(JSON.parse(g.getAttribute("svgjs:data"))||{})}center(g,a){return this.cx(g).cy(a)}cx(g){return g==null?this.x()+this.width()/2:this.x(g-this.width()/2)}cy(g){return g==null?this.y()+this.height()/2:this.y(g-this.height()/2)}defs(){const g=this.root();return g&&g.defs()}dmove(g,a){return this.dx(g).dy(a)}dx(g=0){return this.x(new Pt(g).plus(this.x()))}dy(g=0){return this.y(new Pt(g).plus(this.y()))}getEventHolder(){return this}height(g){return this.attr("height",g)}move(g,a){return this.x(g).y(a)}parents(g=this.root()){const a=typeof g=="string";a||(g=ee(g));const x=new ai;let t=this;for(;(t=t.parent())&&t.node!==Dt.document&&t.nodeName!=="#document-fragment"&&(x.push(t),!(!a&&t.node===g.node||a&&t.matches(g)));)if(t.node===this.root().node)return null;return x}reference(g){if(g=this.attr(g),!g)return null;const a=(g+"").match(xc);return a?ee(a[1]):null}root(){const g=this.parent(ic($r));return g&&g.root()}setData(g){return this.dom=g,this}size(g,a){const x=wi(this,g,a);return this.width(new Pt(x.width)).height(new Pt(x.height))}width(g){return this.attr("width",g)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(g){return this.attr("x",g)}y(g){return this.attr("y",g)}};Ft(Ce,{bbox:Wc,rbox:Hc,inside:Kc,point:Uc,ctm:Yc,screenCTM:Xc});It(Ce,"Element");const ji={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(C,g){return g==="color"?C:C+"-"+g}};["fill","stroke"].forEach(function(C){const g={};let a;g[C]=function(x){if(typeof x>"u")return this.attr(C);if(typeof x=="string"||x instanceof Gt||Gt.isRgb(x)||x instanceof Ce)this.attr(C,x);else for(a=ji[C].length-1;a>=0;a--)x[ji[C][a]]!=null&&this.attr(ji.prefix(C,ji[C][a]),x[ji[C][a]]);return this},wt(["Element","Runner"],g)});wt(["Element","Runner"],{matrix:function(C,g,a,x,t,e){return C==null?new Tt(this):this.attr("transform",new Tt(C,g,a,x,t,e))},rotate:function(C,g,a){return this.transform({rotate:C,ox:g,oy:a},!0)},skew:function(C,g,a,x){return arguments.length===1||arguments.length===3?this.transform({skew:C,ox:g,oy:a},!0):this.transform({skew:[C,g],ox:a,oy:x},!0)},shear:function(C,g,a){return this.transform({shear:C,ox:g,oy:a},!0)},scale:function(C,g,a,x){return arguments.length===1||arguments.length===3?this.transform({scale:C,ox:g,oy:a},!0):this.transform({scale:[C,g],ox:a,oy:x},!0)},translate:function(C,g){return this.transform({translate:[C,g]},!0)},relative:function(C,g){return this.transform({relative:[C,g]},!0)},flip:function(C="both",g="center"){return"xybothtrue".indexOf(C)===-1&&(g=C,C="both"),this.transform({flip:C,origin:g},!0)},opacity:function(C){return this.attr("opacity",C)}});wt("radius",{radius:function(C,g=C){return(this._element||this).type==="radialGradient"?this.attr("r",new Pt(C)):this.rx(C).ry(g)}});wt("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(C){return new Kt(this.node.getPointAtLength(C))}});wt(["Element","Runner"],{font:function(C,g){if(typeof C=="object"){for(g in C)this.font(g,C[g]);return this}return C==="leading"?this.leading(g):C==="anchor"?this.attr("text-anchor",g):C==="size"||C==="family"||C==="weight"||C==="stretch"||C==="variant"||C==="style"?this.attr("font-"+C,g):this.attr(C,g)}});const ev=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce(function(C,g){const a=function(x){return x===null?this.off(g):this.on(g,x),this};return C[g]=a,C},{});wt("Element",ev);function iv(){return this.attr("transform",null)}function nv(){return(this.attr("transform")||"").split(yc).slice(0,-1).map(function(g){const a=g.trim().split("(");return[a[0],a[1].split(Be).map(function(x){return parseFloat(x)})]}).reverse().reduce(function(g,a){return a[0]==="matrix"?g.lmultiply(Tt.fromArray(a[1])):g[a[0]].apply(g,a[1])},new Tt)}function sv(C,g){if(this===C)return this;const a=this.screenCTM(),x=C.screenCTM().inverse();return this.addTo(C,g).untransform().transform(x.multiply(a)),this}function rv(C){return this.toParent(this.root(),C)}function av(C,g){if(C==null||typeof C=="string"){const t=new Tt(this).decompose();return C==null?t:t[C]}Tt.isMatrixLike(C)||(C={...C,origin:Er(C,this)});const a=g===!0?this:g||!1,x=new Tt(a).transform(C);return this.attr("transform",x)}wt("Element",{untransform:iv,matrixify:nv,toParent:sv,toRoot:rv,transform:av});let pe=class gh extends Ce{flatten(g=this,a){return this.each(function(){if(this instanceof gh)return this.flatten().ungroup()}),this}ungroup(g=this.parent(),a=g.index(this)){return a=a===-1?g.children().length:a,this.each(function(x,t){return t[t.length-x-1].toParent(g,a)}),this.remove()}};It(pe,"Container");class Qr extends pe{constructor(g,a=g){super(zt("defs",g),a)}flatten(){return this}ungroup(){return this}}It(Qr,"Defs");class oe extends Ce{}It(oe,"Shape");function kr(C){return this.attr("rx",C)}function qr(C){return this.attr("ry",C)}function xh(C){return C==null?this.cx()-this.rx():this.cx(C+this.rx())}function yh(C){return C==null?this.cy()-this.ry():this.cy(C+this.ry())}function Th(C){return this.attr("cx",C)}function Eh(C){return this.attr("cy",C)}function Sh(C){return C==null?this.rx()*2:this.rx(new Pt(C).divide(2))}function Ch(C){return C==null?this.ry()*2:this.ry(new Pt(C).divide(2))}var ov={__proto__:null,rx:kr,ry:qr,x:xh,y:yh,cx:Th,cy:Eh,width:Sh,height:Ch};class ys extends oe{constructor(g,a=g){super(zt("ellipse",g),a)}size(g,a){const x=wi(this,g,a);return this.rx(new Pt(x.width).divide(2)).ry(new Pt(x.height).divide(2))}}Ft(ys,ov);wt("Container",{ellipse:Xt(function(C=0,g=C){return this.put(new ys).size(C,g).move(0,0)})});It(ys,"Ellipse");class Ah extends He{constructor(g=Dt.document.createDocumentFragment()){super(g)}xml(g,a,x){if(typeof g=="boolean"&&(x=a,a=g,g=null),g==null||typeof g=="function"){const t=new He(dn("wrapper",x));return t.add(this.node.cloneNode(!0)),t.xml(!1,x)}return super.xml(g,!1,x)}}It(Ah,"Fragment");function Ph(C,g){return(this._element||this).type==="radialGradient"?this.attr({fx:new Pt(C),fy:new Pt(g)}):this.attr({x1:new Pt(C),y1:new Pt(g)})}function Mh(C,g){return(this._element||this).type==="radialGradient"?this.attr({cx:new Pt(C),cy:new Pt(g)}):this.attr({x2:new Pt(C),y2:new Pt(g)})}var hv={__proto__:null,from:Ph,to:Mh};class Rn extends pe{constructor(g,a){super(zt(g+"Gradient",typeof g=="string"?null:g),a)}attr(g,a,x){return g==="transform"&&(g="gradientTransform"),super.attr(g,a,x)}bbox(){return new te}targets(){return Oi('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(g){return this.clear(),typeof g=="function"&&g.call(this,this),this}url(){return'url("#'+this.id()+'")'}}Ft(Rn,hv);wt({Container:{gradient(...C){return this.defs().gradient(...C)}},Defs:{gradient:Xt(function(C,g){return this.put(new Rn(C)).update(g)})}});It(Rn,"Gradient");class cn extends pe{constructor(g,a=g){super(zt("pattern",g),a)}attr(g,a,x){return g==="transform"&&(g="patternTransform"),super.attr(g,a,x)}bbox(){return new te}targets(){return Oi('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(g){return this.clear(),typeof g=="function"&&g.call(this,this),this}url(){return'url("#'+this.id()+'")'}}wt({Container:{pattern(...C){return this.defs().pattern(...C)}},Defs:{pattern:Xt(function(C,g,a){return this.put(new cn).update(a).attr({x:0,y:0,width:C,height:g,patternUnits:"userSpaceOnUse"})})}});It(cn,"Pattern");let Ts=class extends oe{constructor(g,a=g){super(zt("image",g),a)}load(g,a){if(!g)return this;const x=new Dt.window.Image;return Sr(x,"load",function(t){const e=this.parent(cn);this.width()===0&&this.height()===0&&this.size(x.width,x.height),e instanceof cn&&e.width()===0&&e.height()===0&&e.size(this.width(),this.height()),typeof a=="function"&&a.call(this,t)},this),Sr(x,"load error",function(){Ci(x)}),this.attr("href",x.src=g,Pn)}};_c(function(C,g,a){return(C==="fill"||C==="stroke")&&Ec.test(g)&&(g=a.root().defs().image(g)),g instanceof Ts&&(g=a.root().defs().pattern(0,0,x=>{x.add(g)})),g});wt({Container:{image:Xt(function(C,g){return this.put(new Ts).size(0,0).load(C,g)})}});It(Ts,"Image");class Ke extends Pi{bbox(){let g=-1/0,a=-1/0,x=1/0,t=1/0;return this.forEach(function(e){g=Math.max(e[0],g),a=Math.max(e[1],a),x=Math.min(e[0],x),t=Math.min(e[1],t)}),new te(x,t,g-x,a-t)}move(g,a){const x=this.bbox();if(g-=x.x,a-=x.y,!isNaN(g)&&!isNaN(a))for(let t=this.length-1;t>=0;t--)this[t]=[this[t][0]+g,this[t][1]+a];return this}parse(g=[0,0]){const a=[];g instanceof Array?g=Array.prototype.concat.apply([],g):g=g.trim().split(Be).map(parseFloat),g.length%2!==0&&g.pop();for(let x=0,t=g.length;x<t;x=x+2)a.push([g[x],g[x+1]]);return a}size(g,a){let x;const t=this.bbox();for(x=this.length-1;x>=0;x--)t.width&&(this[x][0]=(this[x][0]-t.x)*g/t.width+t.x),t.height&&(this[x][1]=(this[x][1]-t.y)*a/t.height+t.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const g=[];for(let a=0,x=this.length;a<x;a++)g.push(this[a].join(","));return g.join(" ")}transform(g){return this.clone().transformO(g)}transformO(g){Tt.isMatrixLike(g)||(g=new Tt(g));for(let a=this.length;a--;){const[x,t]=this[a];this[a][0]=g.a*x+g.c*t+g.e,this[a][1]=g.b*x+g.d*t+g.f}return this}}const lv=Ke;function uv(C){return C==null?this.bbox().x:this.move(C,this.bbox().y)}function fv(C){return C==null?this.bbox().y:this.move(this.bbox().x,C)}function dv(C){const g=this.bbox();return C==null?g.width:this.size(C,g.height)}function cv(C){const g=this.bbox();return C==null?g.height:this.size(g.width,C)}var _r={__proto__:null,MorphArray:lv,x:uv,y:fv,width:dv,height:cv};class vn extends oe{constructor(g,a=g){super(zt("line",g),a)}array(){return new Ke([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(g,a){return this.attr(this.array().move(g,a).toLine())}plot(g,a,x,t){return g==null?this.array():(typeof a<"u"?g={x1:g,y1:a,x2:x,y2:t}:g=new Ke(g).toLine(),this.attr(g))}size(g,a){const x=wi(this,g,a);return this.attr(this.array().size(x.width,x.height).toLine())}}Ft(vn,_r);wt({Container:{line:Xt(function(...C){return vn.prototype.plot.apply(this.put(new vn),C[0]!=null?C:[0,0,0,0])})}});It(vn,"Line");class ts extends pe{constructor(g,a=g){super(zt("marker",g),a)}height(g){return this.attr("markerHeight",g)}orient(g){return this.attr("orient",g)}ref(g,a){return this.attr("refX",g).attr("refY",a)}toString(){return"url(#"+this.id()+")"}update(g){return this.clear(),typeof g=="function"&&g.call(this,this),this}width(g){return this.attr("markerWidth",g)}}wt({Container:{marker(...C){return this.defs().marker(...C)}},Defs:{marker:Xt(function(C,g,a){return this.put(new ts).size(C,g).ref(C/2,g/2).viewbox(0,0,C,g).attr("orient","auto").update(a)})},marker:{marker(C,g,a,x){let t=["marker"];return C!=="all"&&t.push(C),t=t.join("-"),C=arguments[1]instanceof ts?arguments[1]:this.defs().marker(g,a,x),this.attr(t,C)}}});It(ts,"Marker");function Ai(C,g){return function(a){return a==null?this[C]:(this[C]=a,g&&g.call(this),this)}}const vv={"-":function(C){return C},"<>":function(C){return-Math.cos(C*Math.PI)/2+.5},">":function(C){return Math.sin(C*Math.PI/2)},"<":function(C){return-Math.cos(C*Math.PI/2)+1},bezier:function(C,g,a,x){return function(t){return t<0?C>0?g/C*t:a>0?x/a*t:0:t>1?a<1?(1-x)/(1-a)*t+(x-a)/(1-a):C<1?(1-g)/(1-C)*t+(g-C)/(1-C):1:3*t*(1-t)**2*g+3*t**2*(1-t)*x+t**3}},steps:function(C,g="end"){g=g.split("-").reverse()[0];let a=C;return g==="none"?--a:g==="both"&&++a,(x,t=!1)=>{let e=Math.floor(x*C);const d=x*e%1===0;return(g==="start"||g==="both")&&++e,t&&d&&--e,x>=0&&e<0&&(e=0),x<=1&&e>a&&(e=a),e/a}}};class ta{done(){return!1}}class Cr extends ta{constructor(g=_i.ease){super(),this.ease=vv[g]||g}step(g,a,x){return typeof g!="number"?x<1?g:a:g+(a-g)*this.ease(x)}}class es extends ta{constructor(g){super(),this.stepper=g}done(g){return g.done}step(g,a,x,t){return this.stepper(g,a,x,t)}}function Yo(){const C=(this._duration||500)/1e3,g=this._overshoot||0,a=1e-10,x=Math.PI,t=Math.log(g/100+a),e=-t/Math.sqrt(x*x+t*t),d=3.9/(e*C);this.d=2*e*d,this.k=d*d}class pv extends es{constructor(g=500,a=0){super(),this.duration(g).overshoot(a)}step(g,a,x,t){if(typeof g=="string")return g;if(t.done=x===1/0,x===1/0)return a;if(x===0)return g;x>100&&(x=16),x/=1e3;const e=t.velocity||0,d=-this.d*e-this.k*(g-a),r=g+e*x+d*x*x/2;return t.velocity=e+d*x,t.done=Math.abs(a-r)+Math.abs(e)<.002,t.done?a:r}}Ft(pv,{duration:Ai("_duration",Yo),overshoot:Ai("_overshoot",Yo)});class mv extends es{constructor(g=.1,a=.01,x=0,t=1e3){super(),this.p(g).i(a).d(x).windup(t)}step(g,a,x,t){if(typeof g=="string")return g;if(t.done=x===1/0,x===1/0)return a;if(x===0)return g;const e=a-g;let d=(t.integral||0)+e*x;const r=(e-(t.error||0))/x,o=this._windup;return o!==!1&&(d=Math.max(-o,Math.min(d,o))),t.error=e,t.integral=d,t.done=Math.abs(e)<.001,t.done?a:g+(this.P*e+this.I*d+this.D*r)}}Ft(mv,{windup:Ai("_windup"),p:Ai("P"),i:Ai("I"),d:Ai("D")});const gv={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Ar={M:function(C,g,a){return g.x=a.x=C[0],g.y=a.y=C[1],["M",g.x,g.y]},L:function(C,g){return g.x=C[0],g.y=C[1],["L",C[0],C[1]]},H:function(C,g){return g.x=C[0],["H",C[0]]},V:function(C,g){return g.y=C[0],["V",C[0]]},C:function(C,g){return g.x=C[4],g.y=C[5],["C",C[0],C[1],C[2],C[3],C[4],C[5]]},S:function(C,g){return g.x=C[2],g.y=C[3],["S",C[0],C[1],C[2],C[3]]},Q:function(C,g){return g.x=C[2],g.y=C[3],["Q",C[0],C[1],C[2],C[3]]},T:function(C,g){return g.x=C[0],g.y=C[1],["T",C[0],C[1]]},Z:function(C,g,a){return g.x=a.x,g.y=a.y,["Z"]},A:function(C,g){return g.x=C[5],g.y=C[6],["A",C[0],C[1],C[2],C[3],C[4],C[5],C[6]]}},vr="mlhvqtcsaz".split("");for(let C=0,g=vr.length;C<g;++C)Ar[vr[C]]=function(a){return function(x,t,e){if(a==="H")x[0]=x[0]+t.x;else if(a==="V")x[0]=x[0]+t.y;else if(a==="A")x[5]=x[5]+t.x,x[6]=x[6]+t.y;else for(let d=0,r=x.length;d<r;++d)x[d]=x[d]+(d%2?t.y:t.x);return Ar[a](x,t,e)}}(vr[C].toUpperCase());function xv(C){const g=C.segment[0];return Ar[g](C.segment.slice(1),C.p,C.p0)}function Pr(C){return C.segment.length&&C.segment.length-1===gv[C.segment[0].toUpperCase()]}function yv(C,g){C.inNumber&&_e(C,!1);const a=Jr.test(g);if(a)C.segment=[g];else{const x=C.lastCommand,t=x.toLowerCase(),e=x===t;C.segment=[t==="m"?e?"l":"L":x]}return C.inSegment=!0,C.lastCommand=C.segment[0],a}function _e(C,g){if(!C.inNumber)throw new Error("Parser Error");C.number&&C.segment.push(parseFloat(C.number)),C.inNumber=g,C.number="",C.pointSeen=!1,C.hasExponent=!1,Pr(C)&&Mr(C)}function Mr(C){C.inSegment=!1,C.absolute&&(C.segment=xv(C)),C.segments.push(C.segment)}function Tv(C){if(!C.segment.length)return!1;const g=C.segment[0].toUpperCase()==="A",a=C.segment.length;return g&&(a===4||a===5)}function Ev(C){return C.lastToken.toUpperCase()==="E"}function Sv(C,g=!0){let a=0,x="";const t={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:g,p0:new Kt,p:new Kt};for(;t.lastToken=x,x=C.charAt(a++);)if(!(!t.inSegment&&yv(t,x))){if(x==="."){if(t.pointSeen||t.hasExponent){_e(t,!1),--a;continue}t.inNumber=!0,t.pointSeen=!0,t.number+=x;continue}if(!isNaN(parseInt(x))){if(t.number==="0"||Tv(t)){t.inNumber=!0,t.number=x,_e(t,!0);continue}t.inNumber=!0,t.number+=x;continue}if(x===" "||x===","){t.inNumber&&_e(t,!1);continue}if(x==="-"){if(t.inNumber&&!Ev(t)){_e(t,!1),--a;continue}t.number+=x,t.inNumber=!0;continue}if(x.toUpperCase()==="E"){t.number+=x,t.hasExponent=!0;continue}if(Jr.test(x)){if(t.inNumber)_e(t,!1);else if(Pr(t))Mr(t);else throw new Error("parser Error");--a}}return t.inNumber&&_e(t,!1),t.inSegment&&Pr(t)&&Mr(t),t.segments}function Cv(C){let g="";for(let a=0,x=C.length;a<x;a++)g+=C[a][0],C[a][1]!=null&&(g+=C[a][1],C[a][2]!=null&&(g+=" ",g+=C[a][2],C[a][3]!=null&&(g+=" ",g+=C[a][3],g+=" ",g+=C[a][4],C[a][5]!=null&&(g+=" ",g+=C[a][5],g+=" ",g+=C[a][6],C[a][7]!=null&&(g+=" ",g+=C[a][7])))));return g+" "}class oi extends Pi{bbox(){return We().path.setAttribute("d",this.toString()),new te(We.nodes.path.getBBox())}move(g,a){const x=this.bbox();if(g-=x.x,a-=x.y,!isNaN(g)&&!isNaN(a))for(let t,e=this.length-1;e>=0;e--)t=this[e][0],t==="M"||t==="L"||t==="T"?(this[e][1]+=g,this[e][2]+=a):t==="H"?this[e][1]+=g:t==="V"?this[e][1]+=a:t==="C"||t==="S"||t==="Q"?(this[e][1]+=g,this[e][2]+=a,this[e][3]+=g,this[e][4]+=a,t==="C"&&(this[e][5]+=g,this[e][6]+=a)):t==="A"&&(this[e][6]+=g,this[e][7]+=a);return this}parse(g="M0 0"){return Array.isArray(g)&&(g=Array.prototype.concat.apply([],g).toString()),Sv(g)}size(g,a){const x=this.bbox();let t,e;for(x.width=x.width===0?1:x.width,x.height=x.height===0?1:x.height,t=this.length-1;t>=0;t--)e=this[t][0],e==="M"||e==="L"||e==="T"?(this[t][1]=(this[t][1]-x.x)*g/x.width+x.x,this[t][2]=(this[t][2]-x.y)*a/x.height+x.y):e==="H"?this[t][1]=(this[t][1]-x.x)*g/x.width+x.x:e==="V"?this[t][1]=(this[t][1]-x.y)*a/x.height+x.y:e==="C"||e==="S"||e==="Q"?(this[t][1]=(this[t][1]-x.x)*g/x.width+x.x,this[t][2]=(this[t][2]-x.y)*a/x.height+x.y,this[t][3]=(this[t][3]-x.x)*g/x.width+x.x,this[t][4]=(this[t][4]-x.y)*a/x.height+x.y,e==="C"&&(this[t][5]=(this[t][5]-x.x)*g/x.width+x.x,this[t][6]=(this[t][6]-x.y)*a/x.height+x.y)):e==="A"&&(this[t][1]=this[t][1]*g/x.width,this[t][2]=this[t][2]*a/x.height,this[t][6]=(this[t][6]-x.x)*g/x.width+x.x,this[t][7]=(this[t][7]-x.y)*a/x.height+x.y);return this}toString(){return Cv(this)}}const Rh=C=>{const g=typeof C;return g==="number"?Pt:g==="string"?Gt.isColor(C)?Gt:Be.test(C)?Jr.test(C)?oi:Pi:fh.test(C)?Pt:Rr:ea.indexOf(C.constructor)>-1?C.constructor:Array.isArray(C)?Pi:g==="object"?pn:Rr};class ti{constructor(g){this._stepper=g||new Cr("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(g){return this._morphObj.morph(this._from,this._to,g,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(a,x){return a&&x},!0)}from(g){return g==null?this._from:(this._from=this._set(g),this)}stepper(g){return g==null?this._stepper:(this._stepper=g,this)}to(g){return g==null?this._to:(this._to=this._set(g),this)}type(g){return g==null?this._type:(this._type=g,this)}_set(g){this._type||this.type(Rh(g));let a=new this._type(g);return this._type===Gt&&(a=this._to?a[this._to[4]]():this._from?a[this._from[4]]():a),this._type===pn&&(a=this._to?a.align(this._to):this._from?a.align(this._from):a),a=a.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(a.length)).map(Object).map(function(x){return x.done=!0,x}),a}}class Rr{constructor(...g){this.init(...g)}init(g){return g=Array.isArray(g)?g[0]:g,this.value=g,this}toArray(){return[this.value]}valueOf(){return this.value}}class Ln{constructor(...g){this.init(...g)}init(g){return Array.isArray(g)&&(g={scaleX:g[0],scaleY:g[1],shear:g[2],rotate:g[3],translateX:g[4],translateY:g[5],originX:g[6],originY:g[7]}),Object.assign(this,Ln.defaults,g),this}toArray(){const g=this;return[g.scaleX,g.scaleY,g.shear,g.rotate,g.translateX,g.translateY,g.originX,g.originY]}}Ln.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const Av=(C,g)=>C[0]<g[0]?-1:C[0]>g[0]?1:0;class pn{constructor(...g){this.init(...g)}align(g){const a=this.values;for(let x=0,t=a.length;x<t;++x){if(a[x+1]===g[x+1]){if(a[x+1]===Gt&&g[x+7]!==a[x+7]){const r=g[x+7],o=new Gt(this.values.splice(x+3,5))[r]().toArray();this.values.splice(x+3,0,...o)}x+=a[x+2]+2;continue}if(!g[x+1])return this;const e=new g[x+1]().toArray(),d=a[x+2]+3;a.splice(x,d,g[x],g[x+1],g[x+2],...e),x+=a[x+2]+2}return this}init(g){if(this.values=[],Array.isArray(g)){this.values=g.slice();return}g=g||{};const a=[];for(const x in g){const t=Rh(g[x]),e=new t(g[x]).toArray();a.push([x,t,e.length,...e])}return a.sort(Av),this.values=a.reduce((x,t)=>x.concat(t),[]),this}toArray(){return this.values}valueOf(){const g={},a=this.values;for(;a.length;){const x=a.shift(),t=a.shift(),e=a.shift(),d=a.splice(0,e);g[x]=new t(d)}return g}}const ea=[Rr,Ln,pn];function Pv(C=[]){ea.push(...[].concat(C))}function Mv(){Ft(ea,{to(C){return new ti().type(this.constructor).from(this.toArray()).to(C)},fromArray(C){return this.init(C),this},toConsumable(){return this.toArray()},morph(C,g,a,x,t){const e=function(d,r){return x.step(d,g[r],a,t[r],t)};return this.fromArray(C.map(e))}})}class Fi extends oe{constructor(g,a=g){super(zt("path",g),a)}array(){return this._array||(this._array=new oi(this.attr("d")))}clear(){return delete this._array,this}height(g){return g==null?this.bbox().height:this.size(this.bbox().width,g)}move(g,a){return this.attr("d",this.array().move(g,a))}plot(g){return g==null?this.array():this.clear().attr("d",typeof g=="string"?g:this._array=new oi(g))}size(g,a){const x=wi(this,g,a);return this.attr("d",this.array().size(x.width,x.height))}width(g){return g==null?this.bbox().width:this.size(g,this.bbox().height)}x(g){return g==null?this.bbox().x:this.move(g,this.bbox().y)}y(g){return g==null?this.bbox().y:this.move(this.bbox().x,g)}}Fi.prototype.MorphArray=oi;wt({Container:{path:Xt(function(C){return this.put(new Fi).plot(C||new oi)})}});It(Fi,"Path");function Rv(){return this._array||(this._array=new Ke(this.attr("points")))}function Lv(){return delete this._array,this}function wv(C,g){return this.attr("points",this.array().move(C,g))}function Ov(C){return C==null?this.array():this.clear().attr("points",typeof C=="string"?C:this._array=new Ke(C))}function Fv(C,g){const a=wi(this,C,g);return this.attr("points",this.array().size(a.width,a.height))}var Lh={__proto__:null,array:Rv,clear:Lv,move:wv,plot:Ov,size:Fv};class wn extends oe{constructor(g,a=g){super(zt("polygon",g),a)}}wt({Container:{polygon:Xt(function(C){return this.put(new wn).plot(C||new Ke)})}});Ft(wn,_r);Ft(wn,Lh);It(wn,"Polygon");class On extends oe{constructor(g,a=g){super(zt("polyline",g),a)}}wt({Container:{polyline:Xt(function(C){return this.put(new On).plot(C||new Ke)})}});Ft(On,_r);Ft(On,Lh);It(On,"Polyline");class Es extends oe{constructor(g,a=g){super(zt("rect",g),a)}}Ft(Es,{rx:kr,ry:qr});wt({Container:{rect:Xt(function(C,g){return this.put(new Es).size(C,g)})}});It(Es,"Rect");class pr{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(g){const a=typeof g.next<"u"?g:{value:g,next:null,prev:null};return this._last?(a.prev=this._last,this._last.next=a,this._last=a):(this._last=a,this._first=a),a}remove(g){g.prev&&(g.prev.next=g.next),g.next&&(g.next.prev=g.prev),g===this._last&&(this._last=g.prev),g===this._first&&(this._first=g.next),g.prev=null,g.next=null}shift(){const g=this._first;return g?(this._first=g.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,g.value):null}}const Nt={nextDraw:null,frames:new pr,timeouts:new pr,immediates:new pr,timer:()=>Dt.window.performance||Dt.window.Date,transforms:[],frame(C){const g=Nt.frames.push({run:C});return Nt.nextDraw===null&&(Nt.nextDraw=Dt.window.requestAnimationFrame(Nt._draw)),g},timeout(C,g){g=g||0;const a=Nt.timer().now()+g,x=Nt.timeouts.push({run:C,time:a});return Nt.nextDraw===null&&(Nt.nextDraw=Dt.window.requestAnimationFrame(Nt._draw)),x},immediate(C){const g=Nt.immediates.push(C);return Nt.nextDraw===null&&(Nt.nextDraw=Dt.window.requestAnimationFrame(Nt._draw)),g},cancelFrame(C){C!=null&&Nt.frames.remove(C)},clearTimeout(C){C!=null&&Nt.timeouts.remove(C)},cancelImmediate(C){C!=null&&Nt.immediates.remove(C)},_draw(C){let g=null;const a=Nt.timeouts.last();for(;(g=Nt.timeouts.shift())&&(C>=g.time?g.run():Nt.timeouts.push(g),g!==a););let x=null;const t=Nt.frames.last();for(;x!==t&&(x=Nt.frames.shift());)x.run(C);let e=null;for(;e=Nt.immediates.shift();)e();Nt.nextDraw=Nt.timeouts.first()||Nt.frames.first()?Dt.window.requestAnimationFrame(Nt._draw):null}},Iv=function(C){const g=C.start,a=C.runner.duration(),x=g+a;return{start:g,duration:a,end:x,runner:C.runner}},bv=function(){const C=Dt.window;return(C.performance||C.Date).now()};class wh extends Mn{constructor(g=bv){super(),this._timeSource=g,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const g=this.getLastRunnerInfo(),a=g?g.runner.duration():0;return(g?g.start:this._time)+a}getEndTimeOfTimeline(){const g=this._runners.map(a=>a.start+a.runner.duration());return Math.max(0,...g)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(g){return this._runners[this._runnerIds.indexOf(g)]||null}pause(){return this._paused=!0,this._continue()}persist(g){return g==null?this._persist:(this._persist=g,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(g){const a=this.speed();if(g==null)return this.speed(-a);const x=Math.abs(a);return this.speed(g?-x:x)}schedule(g,a,x){if(g==null)return this._runners.map(Iv);let t=0;const e=this.getEndTime();if(a=a||0,x==null||x==="last"||x==="after")t=e;else if(x==="absolute"||x==="start")t=a,a=0;else if(x==="now")t=this._time;else if(x==="relative"){const o=this.getRunnerInfoById(g.id);o&&(t=o.start+a,a=0)}else if(x==="with-last"){const o=this.getLastRunnerInfo();t=o?o.start:this._time}else throw new Error('Invalid value for the "when" parameter');g.unschedule(),g.timeline(this);const d=g.persist(),r={persist:d===null?this._persist:d,start:t+a,runner:g};return this._lastRunnerId=g.id,this._runners.push(r),this._runners.sort((o,n)=>o.start-n.start),this._runnerIds=this._runners.map(o=>o.runner.id),this.updateTime()._continue(),this}seek(g){return this.time(this._time+g)}source(g){return g==null?this._timeSource:(this._timeSource=g,this)}speed(g){return g==null?this._speed:(this._speed=g,this)}stop(){return this.time(0),this.pause()}time(g){return g==null?this._time:(this._time=g,this._continue(!0))}unschedule(g){const a=this._runnerIds.indexOf(g.id);return a<0?this:(this._runners.splice(a,1),this._runnerIds.splice(a,1),g.timeline(null),this)}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(g=!1){return Nt.cancelFrame(this._nextFrame),this._nextFrame=null,g?this._stepImmediate():this._paused?this:(this._nextFrame=Nt.frame(this._step),this)}_stepFn(g=!1){const a=this._timeSource();let x=a-this._lastSourceTime;g&&(x=0);const t=this._speed*x+(this._time-this._lastStepTime);this._lastSourceTime=a,g||(this._time+=t,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let d=this._runners.length;d--;){const r=this._runners[d],o=r.runner;this._time-r.start<=0&&o.reset()}let e=!1;for(let d=0,r=this._runners.length;d<r;d++){const o=this._runners[d],n=o.runner;let i=t;const s=this._time-o.start;if(s<=0){e=!0;continue}else s<i&&(i=s);if(!n.active())continue;n.step(i).done?o.persist!==!0&&n.duration()-n.time()+this._time+o.persist<this._time&&(n.unschedule(),--d,--r):e=!0}return e&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}}wt({Element:{timeline:function(C){return C==null?(this._timeline=this._timeline||new wh,this._timeline):(this._timeline=C,this)}}});class ae extends Mn{constructor(g){super(),this.id=ae.id++,g=g??_i.duration,g=typeof g=="function"?new es(g):g,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof g=="number"&&g,this._isDeclarative=g instanceof es,this._stepper=this._isDeclarative?g:new Cr,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new Tt,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=this._isDeclarative?!0:null}static sanitise(g,a,x){let t=1,e=!1,d=0;return g=g||_i.duration,a=a||_i.delay,x=x||"last",typeof g=="object"&&!(g instanceof ta)&&(a=g.delay||a,x=g.when||x,e=g.swing||e,t=g.times||t,d=g.wait||d,g=g.duration||_i.duration),{duration:g,delay:a,swing:e,times:t,wait:d,when:x}}active(g){return g==null?this.enabled:(this.enabled=g,this)}addTransform(g,a){return this.transforms.lmultiplyO(g),this}after(g){return this.on("finished",g)}animate(g,a,x){const t=ae.sanitise(g,a,x),e=new ae(t.duration);return this._timeline&&e.timeline(this._timeline),this._element&&e.element(this._element),e.loop(t).schedule(t.delay,t.when)}clearTransform(){return this.transforms=new Tt,this}clearTransformsFromQueue(){(!this.done||!this._timeline||!this._timeline._runnerIds.includes(this.id))&&(this._queue=this._queue.filter(g=>!g.isTransform))}delay(g){return this.animate(0,g)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(g){return this.queue(null,g)}ease(g){return this._stepper=new Cr(g),this}element(g){return g==null?this._element:(this._element=g,g._prepareRunner(),this)}finish(){return this.step(1/0)}loop(g,a,x){return typeof g=="object"&&(a=g.swing,x=g.wait,g=g.times),this._times=g||1/0,this._swing=a||!1,this._wait=x||0,this._times===!0&&(this._times=1/0),this}loops(g){const a=this._duration+this._wait;if(g==null){const d=Math.floor(this._time/a),o=(this._time-d*a)/this._duration;return Math.min(d+o,this._times)}const x=Math.floor(g),t=g%1,e=a*x+this._duration*t;return this.time(e)}persist(g){return g==null?this._persist:(this._persist=g,this)}position(g){const a=this._time,x=this._duration,t=this._wait,e=this._times,d=this._swing,r=this._reverse;let o;if(g==null){const u=function(l){const f=d*Math.floor(l%(2*(t+x))/(t+x)),v=f&&!r||!f&&r,c=Math.pow(-1,v)*(l%(t+x))/x+v;return Math.max(Math.min(c,1),0)},h=e*(t+x)-t;return o=a<=0?Math.round(u(1e-5)):a<h?u(a):Math.round(u(h-1e-5)),o}const n=Math.floor(this.loops()),i=d&&n%2===0;return o=n+(i&&!r||r&&i?g:1-g),this.loops(o)}progress(g){return g==null?Math.min(1,this._time/this.duration()):this.time(g*this.duration())}queue(g,a,x,t){return this._queue.push({initialiser:g||Uo,runner:a||Uo,retarget:x,isTransform:t,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted?this:(this.time(0),this._reseted=!0,this)}reverse(g){return this._reverse=g??!this._reverse,this}schedule(g,a,x){if(g instanceof wh||(x=a,a=g,g=this.timeline()),!g)throw Error("Runner cannot be scheduled without timeline");return g.schedule(this,a,x),this}step(g){if(!this.enabled)return this;g=g??16,this._time+=g;const a=this.position(),x=this._lastPosition!==a&&this._time>=0;this._lastPosition=a;const t=this.duration(),e=this._lastTime<=0&&this._time>0,d=this._lastTime<t&&this._time>=t;this._lastTime=this._time,e&&this.fire("start",this);const r=this._isDeclarative;this.done=!r&&!d&&this._time>=t,this._reseted=!1;let o=!1;return(x||r)&&(this._initialise(x),this.transforms=new Tt,o=this._run(r?g:a),this.fire("step",this)),this.done=this.done||o&&r,d&&this.fire("finished",this),this}time(g){if(g==null)return this._time;const a=g-this._time;return this.step(a),this}timeline(g){return typeof g>"u"?this._timeline:(this._timeline=g,this)}unschedule(){const g=this.timeline();return g&&g.unschedule(this),this}_initialise(g){if(!(!g&&!this._isDeclarative))for(let a=0,x=this._queue.length;a<x;++a){const t=this._queue[a],e=this._isDeclarative||!t.initialised&&g;g=!t.finished,e&&g&&(t.initialiser.call(this),t.initialised=!0)}}_rememberMorpher(g,a){if(this._history[g]={morpher:a,caller:this._queue[this._queue.length-1]},this._isDeclarative){const x=this.timeline();x&&x.play()}}_run(g){let a=!0;for(let x=0,t=this._queue.length;x<t;++x){const e=this._queue[x],d=e.runner.call(this,g);e.finished=e.finished||d===!0,a=a&&e.finished}return a}_tryRetarget(g,a,x){if(this._history[g]){if(!this._history[g].caller.initialised){const e=this._queue.indexOf(this._history[g].caller);return this._queue.splice(e,1),!1}this._history[g].caller.retarget?this._history[g].caller.retarget.call(this,a,x):this._history[g].morpher.to(a),this._history[g].caller.finished=!1;const t=this.timeline();return t&&t.play(),!0}return!1}}ae.id=0;class is{constructor(g=new Tt,a=-1,x=!0){this.transforms=g,this.id=a,this.done=x}clearTransformsFromQueue(){}}Ft([ae,is],{mergeWith(C){return new is(C.transforms.lmultiply(this.transforms),C.id)}});const Oh=(C,g)=>C.lmultiplyO(g),Fh=C=>C.transforms;function Dv(){const g=this._transformationRunners.runners.map(Fh).reduce(Oh,new Tt);this.transform(g),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class Bv{constructor(){this.runners=[],this.ids=[]}add(g){if(this.runners.includes(g))return;const a=g.id+1;return this.runners.push(g),this.ids.push(a),this}clearBefore(g){const a=this.ids.indexOf(g+1)||1;return this.ids.splice(0,a,0),this.runners.splice(0,a,new is).forEach(x=>x.clearTransformsFromQueue()),this}edit(g,a){const x=this.ids.indexOf(g+1);return this.ids.splice(x,1,g+1),this.runners.splice(x,1,a),this}getByID(g){return this.runners[this.ids.indexOf(g+1)]}length(){return this.ids.length}merge(){let g=null;for(let a=0;a<this.runners.length;++a){const x=this.runners[a];if(g&&x.done&&g.done&&(!x._timeline||!x._timeline._runnerIds.includes(x.id))&&(!g._timeline||!g._timeline._runnerIds.includes(g.id))){this.remove(x.id);const e=x.mergeWith(g);this.edit(g.id,e),g=e,--a}else g=x}return this}remove(g){const a=this.ids.indexOf(g+1);return this.ids.splice(a,1),this.runners.splice(a,1),this}}wt({Element:{animate(C,g,a){const x=ae.sanitise(C,g,a),t=this.timeline();return new ae(x.duration).loop(x).element(this).timeline(t.play()).schedule(x.delay,x.when)},delay(C,g){return this.animate(0,C,g)},_clearTransformRunnersBefore(C){this._transformationRunners.clearBefore(C.id)},_currentTransform(C){return this._transformationRunners.runners.filter(g=>g.id<=C.id).map(Fh).reduce(Oh,new Tt)},_addRunner(C){this._transformationRunners.add(C),Nt.cancelImmediate(this._frameId),this._frameId=Nt.immediate(Dv.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new Bv().add(new is(new Tt(this))))}}});const Nv=(C,g)=>C.filter(a=>!g.includes(a));Ft(ae,{attr(C,g){return this.styleAttr("attr",C,g)},css(C,g){return this.styleAttr("css",C,g)},styleAttr(C,g,a){if(typeof g=="string")return this.styleAttr(C,{[g]:a});let x=g;if(this._tryRetarget(C,x))return this;let t=new ti(this._stepper).to(x),e=Object.keys(x);return this.queue(function(){t=t.from(this.element()[C](e))},function(d){return this.element()[C](t.at(d).valueOf()),t.done()},function(d){const r=Object.keys(d),o=Nv(r,e);if(o.length){const i=this.element()[C](o),s=new pn(t.from()).valueOf();Object.assign(s,i),t.from(s)}const n=new pn(t.to()).valueOf();Object.assign(n,d),t.to(n),e=r,x=d}),this._rememberMorpher(C,t),this},zoom(C,g){if(this._tryRetarget("zoom",C,g))return this;let a=new ti(this._stepper).to(new Pt(C));return this.queue(function(){a=a.from(this.element().zoom())},function(x){return this.element().zoom(a.at(x),g),a.done()},function(x,t){g=t,a.to(x)}),this._rememberMorpher("zoom",a),this},transform(C,g,a){if(g=C.relative||g,this._isDeclarative&&!g&&this._tryRetarget("transform",C))return this;const x=Tt.isMatrixLike(C);a=C.affine!=null?C.affine:a??!x;const t=new ti(this._stepper).type(a?Ln:Tt);let e,d,r,o,n;function i(){d=d||this.element(),e=e||Er(C,d),n=new Tt(g?void 0:d),d._addRunner(this),g||d._clearTransformRunnersBefore(this)}function s(h){g||this.clearTransform();const{x:l,y:f}=new Kt(e).transform(d._currentTransform(this));let v=new Tt({...C,origin:[l,f]}),c=this._isDeclarative&&r?r:n;if(a){v=v.decompose(l,f),c=c.decompose(l,f);const m=v.rotate,y=c.rotate,T=[m-360,m,m+360],E=T.map(M=>Math.abs(M-y)),S=Math.min(...E),P=E.indexOf(S);v.rotate=T[P]}g&&(x||(v.rotate=C.rotate||0),this._isDeclarative&&o&&(c.rotate=o)),t.from(c),t.to(v);const p=t.at(h);return o=p.rotate,r=new Tt(p),this.addTransform(r),d._addRunner(this),t.done()}function u(h){(h.origin||"center").toString()!==(C.origin||"center").toString()&&(e=Er(h,d)),C={...h,origin:e}}return this.queue(i,s,u,!0),this._isDeclarative&&this._rememberMorpher("transform",t),this},x(C,g){return this._queueNumber("x",C)},y(C){return this._queueNumber("y",C)},dx(C=0){return this._queueNumberDelta("x",C)},dy(C=0){return this._queueNumberDelta("y",C)},dmove(C,g){return this.dx(C).dy(g)},_queueNumberDelta(C,g){if(g=new Pt(g),this._tryRetarget(C,g))return this;const a=new ti(this._stepper).to(g);let x=null;return this.queue(function(){x=this.element()[C](),a.from(x),a.to(x+g)},function(t){return this.element()[C](a.at(t)),a.done()},function(t){a.to(x+new Pt(t))}),this._rememberMorpher(C,a),this},_queueObject(C,g){if(this._tryRetarget(C,g))return this;const a=new ti(this._stepper).to(g);return this.queue(function(){a.from(this.element()[C]())},function(x){return this.element()[C](a.at(x)),a.done()}),this._rememberMorpher(C,a),this},_queueNumber(C,g){return this._queueObject(C,new Pt(g))},cx(C){return this._queueNumber("cx",C)},cy(C){return this._queueNumber("cy",C)},move(C,g){return this.x(C).y(g)},center(C,g){return this.cx(C).cy(g)},size(C,g){let a;return(!C||!g)&&(a=this._element.bbox()),C||(C=a.width/a.height*g),g||(g=a.height/a.width*C),this.width(C).height(g)},width(C){return this._queueNumber("width",C)},height(C){return this._queueNumber("height",C)},plot(C,g,a,x){if(arguments.length===4)return this.plot([C,g,a,x]);if(this._tryRetarget("plot",C))return this;const t=new ti(this._stepper).type(this._element.MorphArray).to(C);return this.queue(function(){t.from(this._element.array())},function(e){return this._element.plot(t.at(e)),t.done()}),this._rememberMorpher("plot",t),this},leading(C){return this._queueNumber("leading",C)},viewbox(C,g,a,x){return this._queueObject("viewbox",new te(C,g,a,x))},update(C){return typeof C!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(C.opacity!=null&&this.attr("stop-opacity",C.opacity),C.color!=null&&this.attr("stop-color",C.color),C.offset!=null&&this.attr("offset",C.offset),this)}});Ft(ae,{rx:kr,ry:qr,from:Ph,to:Mh});It(ae,"Runner");class ia extends pe{constructor(g,a=g){super(zt("svg",g),a),this.namespace()}defs(){return this.isRoot()?de(this.node.querySelector("defs"))||this.put(new Qr):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof Dt.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:Kr,version:"1.1"}).attr("xmlns:xlink",Pn,Zn).attr("xmlns:svgjs",ec,Zn):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,Zn).attr("xmlns:svgjs",null,Zn)}root(){return this.isRoot()?this:super.root()}}wt({Container:{nested:Xt(function(){return this.put(new ia)})}});It(ia,"Svg",!0);let na=class extends pe{constructor(g,a=g){super(zt("symbol",g),a)}};wt({Container:{symbol:Xt(function(){return this.put(new na)})}});It(na,"Symbol");function Gv(C){return this._build===!1&&this.clear(),this.node.appendChild(Dt.document.createTextNode(C)),this}function Vv(){return this.node.getComputedTextLength()}function Uv(C,g=this.bbox()){return C==null?g.x:this.attr("x",this.attr("x")+C-g.x)}function Yv(C,g=this.bbox()){return C==null?g.y:this.attr("y",this.attr("y")+C-g.y)}function Xv(C,g,a=this.bbox()){return this.x(C,a).y(g,a)}function zv(C,g=this.bbox()){return C==null?g.cx:this.attr("x",this.attr("x")+C-g.cx)}function Wv(C,g=this.bbox()){return C==null?g.cy:this.attr("y",this.attr("y")+C-g.cy)}function Hv(C,g,a=this.bbox()){return this.cx(C,a).cy(g,a)}function Kv(C){return this.attr("x",C)}function Zv(C){return this.attr("y",C)}function $v(C,g){return this.ax(C).ay(g)}function Jv(C){return this._build=!!C,this}var Ih={__proto__:null,plain:Gv,length:Vv,x:Uv,y:Yv,move:Xv,cx:zv,cy:Wv,center:Hv,ax:Kv,ay:Zv,amove:$v,build:Jv};class me extends oe{constructor(g,a=g){super(zt("text",g),a),this.dom.leading=new Pt(1.3),this._rebuild=!0,this._build=!1}leading(g){return g==null?this.dom.leading:(this.dom.leading=new Pt(g),this.rebuild())}rebuild(g){if(typeof g=="boolean"&&(this._rebuild=g),this._rebuild){const a=this;let x=0;const t=this.dom.leading;this.each(function(e){const d=Dt.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=t*new Pt(d);this.dom.newLined&&(this.attr("x",a.attr("x")),this.text()===`
`?x+=r:(this.attr("dy",e?r+x:0),x=0))}),this.fire("rebuild")}return this}setData(g){return this.dom=g,this.dom.leading=new Pt(g.leading||1.3),this}text(g){if(g===void 0){const a=this.node.childNodes;let x=0;g="";for(let t=0,e=a.length;t<e;++t){if(a[t].nodeName==="textPath"){t===0&&(x=1);continue}t!==x&&a[t].nodeType!==3&&de(a[t]).dom.newLined===!0&&(g+=`
`),g+=a[t].textContent}return g}if(this.clear().build(!0),typeof g=="function")g.call(this,this);else{g=(g+"").split(`
`);for(let a=0,x=g.length;a<x;a++)this.newLine(g[a])}return this.build(!1).rebuild()}}Ft(me,Ih);wt({Container:{text:Xt(function(C=""){return this.put(new me).text(C)}),plain:Xt(function(C=""){return this.put(new me).plain(C)})}});It(me,"Text");class Ss extends oe{constructor(g,a=g){super(zt("tspan",g),a),this._build=!1}dx(g){return this.attr("dx",g)}dy(g){return this.attr("dy",g)}newLine(){this.dom.newLined=!0;const g=this.parent();if(!(g instanceof me))return this;const a=g.index(this),x=Dt.window.getComputedStyle(this.node).getPropertyValue("font-size"),t=g.dom.leading*new Pt(x);return this.dy(a?t:0).attr("x",g.x())}text(g){return g==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof g=="function"?(this.clear().build(!0),g.call(this,this),this.build(!1)):this.plain(g),this)}}Ft(Ss,Ih);wt({Tspan:{tspan:Xt(function(C=""){const g=new Ss;return this._build||this.clear(),this.put(g).text(C)})},Text:{newLine:function(C=""){return this.tspan(C).newLine()}}});It(Ss,"Tspan");class sa extends oe{constructor(g,a=g){super(zt("circle",g),a)}radius(g){return this.attr("r",g)}rx(g){return this.attr("r",g)}ry(g){return this.rx(g)}size(g){return this.radius(new Pt(g).divide(2))}}Ft(sa,{x:xh,y:yh,cx:Th,cy:Eh,width:Sh,height:Ch});wt({Container:{circle:Xt(function(C=0){return this.put(new sa).size(C).move(0,0)})}});It(sa,"Circle");class Lr extends pe{constructor(g,a=g){super(zt("clipPath",g),a)}remove(){return this.targets().forEach(function(g){g.unclip()}),super.remove()}targets(){return Oi('svg [clip-path*="'+this.id()+'"]')}}wt({Container:{clip:Xt(function(){return this.defs().put(new Lr)})},Element:{clipper(){return this.reference("clip-path")},clipWith(C){const g=C instanceof Lr?C:this.parent().clip().add(C);return this.attr("clip-path",'url("#'+g.id()+'")')},unclip(){return this.attr("clip-path",null)}}});It(Lr,"ClipPath");class bh extends Ce{constructor(g,a=g){super(zt("foreignObject",g),a)}}wt({Container:{foreignObject:Xt(function(C,g){return this.put(new bh).size(C,g)})}});It(bh,"ForeignObject");function jv(C,g){return this.children().forEach((a,x)=>{let t;try{t=a.bbox()}catch{return}const e=new Tt(a),d=e.translate(C,g).transform(e.inverse()),r=new Kt(t.x,t.y).transform(d);a.move(r.x,r.y)}),this}function Qv(C){return this.dmove(C,0)}function kv(C){return this.dmove(0,C)}function qv(C,g=this.bbox()){return C==null?g.height:this.size(g.width,C,g)}function _v(C=0,g=0,a=this.bbox()){const x=C-a.x,t=g-a.y;return this.dmove(x,t)}function tp(C,g,a=this.bbox()){const x=wi(this,C,g,a),t=x.width/a.width,e=x.height/a.height;return this.children().forEach((d,r)=>{const o=new Kt(a).transform(new Tt(d).inverse());d.scale(t,e,o.x,o.y)}),this}function ep(C,g=this.bbox()){return C==null?g.width:this.size(C,g.height,g)}function ip(C,g=this.bbox()){return C==null?g.x:this.move(C,g.y,g)}function np(C,g=this.bbox()){return C==null?g.y:this.move(g.x,C,g)}var Dh={__proto__:null,dmove:jv,dx:Qv,dy:kv,height:qv,move:_v,size:tp,width:ep,x:ip,y:np};class ra extends pe{constructor(g,a=g){super(zt("g",g),a)}}Ft(ra,Dh);wt({Container:{group:Xt(function(){return this.put(new ra)})}});It(ra,"G");class ns extends pe{constructor(g,a=g){super(zt("a",g),a)}target(g){return this.attr("target",g)}to(g){return this.attr("href",g,Pn)}}Ft(ns,Dh);wt({Container:{link:Xt(function(C){return this.put(new ns).to(C)})},Element:{unlink(){const C=this.linker();if(!C)return this;const g=C.parent();if(!g)return this.remove();const a=g.index(C);return g.add(this,a),C.remove(),this},linkTo(C){let g=this.linker();return g||(g=new ns,this.wrap(g)),typeof C=="function"?C.call(g,g):g.to(C),this},linker(){const C=this.parent();return C&&C.node.nodeName.toLowerCase()==="a"?C:null}}});It(ns,"A");class wr extends pe{constructor(g,a=g){super(zt("mask",g),a)}remove(){return this.targets().forEach(function(g){g.unmask()}),super.remove()}targets(){return Oi('svg [mask*="'+this.id()+'"]')}}wt({Container:{mask:Xt(function(){return this.defs().put(new wr)})},Element:{masker(){return this.reference("mask")},maskWith(C){const g=C instanceof wr?C:this.parent().mask().add(C);return this.attr("mask",'url("#'+g.id()+'")')},unmask(){return this.attr("mask",null)}}});It(wr,"Mask");class Bh extends Ce{constructor(g,a=g){super(zt("stop",g),a)}update(g){return(typeof g=="number"||g instanceof Pt)&&(g={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),g.opacity!=null&&this.attr("stop-opacity",g.opacity),g.color!=null&&this.attr("stop-color",g.color),g.offset!=null&&this.attr("offset",new Pt(g.offset)),this}}wt({Gradient:{stop:function(C,g,a){return this.put(new Bh).update(C,g,a)}}});It(Bh,"Stop");function sp(C,g){if(!C)return"";if(!g)return C;let a=C+"{";for(const x in g)a+=_d(x)+":"+g[x]+";";return a+="}",a}class Or extends Ce{constructor(g,a=g){super(zt("style",g),a)}addText(g=""){return this.node.textContent+=g,this}font(g,a,x={}){return this.rule("@font-face",{fontFamily:g,src:a,...x})}rule(g,a){return this.addText(sp(g,a))}}wt("Dom",{style(C,g){return this.put(new Or).rule(C,g)},fontface(C,g,a){return this.put(new Or).font(C,g,a)}});It(Or,"Style");class aa extends me{constructor(g,a=g){super(zt("textPath",g),a)}array(){const g=this.track();return g?g.array():null}plot(g){const a=this.track();let x=null;return a&&(x=a.plot(g)),g==null?x:this}track(){return this.reference("href")}}wt({Container:{textPath:Xt(function(C,g){return C instanceof me||(C=this.text(C)),C.path(g)})},Text:{path:Xt(function(C,g=!0){const a=new aa;C instanceof Fi||(C=this.defs().path(C)),a.attr("href","#"+C,Pn);let x;if(g)for(;x=this.node.firstChild;)a.node.appendChild(x);return this.put(a)}),textPath(){return this.findOne("textPath")}},Path:{text:Xt(function(C){return C instanceof me||(C=new me().addTo(this.parent()).text(C)),C.path(this)}),targets(){return Oi("svg textPath").filter(C=>(C.attr("href")||"").includes(this.id()))}}});aa.prototype.MorphArray=oi;It(aa,"TextPath");class Nh extends oe{constructor(g,a=g){super(zt("use",g),a)}use(g,a){return this.attr("href",(a||"")+"#"+g,Pn)}}wt({Container:{use:Xt(function(C,g){return this.put(new Nh).use(C,g)})}});It(Nh,"Use");const rp=ee;Ft([ia,na,Ts,cn,ts],se("viewbox"));Ft([vn,On,wn,Fi],se("marker"));Ft(me,se("Text"));Ft(Fi,se("Path"));Ft(Qr,se("Defs"));Ft([me,Ss],se("Tspan"));Ft([Es,ys,Rn,ae],se("radius"));Ft(Mn,se("EventTarget"));Ft(He,se("Dom"));Ft(Ce,se("Element"));Ft(oe,se("Shape"));Ft([pe,Ah],se("Container"));Ft(Rn,se("Gradient"));Ft(ae,se("Runner"));ai.extend(kd());Pv([Pt,Gt,te,Tt,Pi,Ke,oi,Kt]);Mv();function ap(C,g,a){const x=rp().size(g,a);x.rect(g,a).fill("red"),x.text(C).size(14).fill("white").center(g/2,a/2);const t=x.svg(),e=new Blob([t],{type:"image/svg+xml"});return URL.createObjectURL(e)}var Fr={},op={get exports(){return Fr},set exports(C){Fr=C}};(function(C,g){(function(x,t){C.exports=t()})(fn,function(){return function(a){var x={};function t(e){if(x[e])return x[e].exports;var d=x[e]={i:e,l:!1,exports:{}};return a[e].call(d.exports,d,d.exports,t),d.l=!0,d.exports}return t.m=a,t.c=x,t.d=function(e,d,r){t.o(e,d)||Object.defineProperty(e,d,{enumerable:!0,get:r})},t.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,d){if(d&1&&(e=t(e)),d&8||d&4&&typeof e=="object"&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),d&2&&typeof e!="string")for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var d=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(d,"a",d),d},t.o=function(e,d){return Object.prototype.hasOwnProperty.call(e,d)},t.p="",t(t.s=1528)}([function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(i){return!!i.get&&typeof i.get=="function"||!!i.set&&typeof i.set=="function"}function e(i,s,u){var h=u?i[s]:Object.getOwnPropertyDescriptor(i,s);return!u&&h.value&&typeof h.value=="object"&&(h=h.value),h&&t(h)?(typeof h.enumerable>"u"&&(h.enumerable=!0),typeof h.configurable>"u"&&(h.configurable=!0),h):!1}function d(i,s){var u=Object.getOwnPropertyDescriptor(i,s);return u?(u.value&&typeof u.value=="object"&&(u=u.value),u.configurable===!1):!1}function r(i,s,u,h){for(var l in s)if(s.hasOwnProperty(l)){var f=e(s,l,u);if(f!==!1){var v=h||i;if(d(v.prototype,l)){if(n.ignoreFinals)continue;throw new Error("cannot override final property '"+l+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(i.prototype,l,f)}else i.prototype[l]=s[l]}}function o(i,s){if(s){Array.isArray(s)||(s=[s]);for(var u=0;u<s.length;u++)r(i,s[u].prototype||s[u])}}function n(i){i||(i={});var s,u;if(i.initialize){if(typeof i.initialize!="function")throw new Error("initialize must be a function");s=i.initialize,delete i.initialize}else if(i.Extends){var h=i.Extends;s=function(){h.apply(this,arguments)}}else s=function(){};i.Extends?(s.prototype=Object.create(i.Extends.prototype),s.prototype.constructor=s,u=i.Extends,delete i.Extends):s.prototype.constructor=s;var l=null;return i.Mixins&&(l=i.Mixins,delete i.Mixins),o(s,l),r(s,i,!0,u),s}n.extend=r,n.mixin=o,n.ignoreFinals=!1,a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=typeof e;return!e||o==="number"||o==="string"?r:e.hasOwnProperty(d)&&e[d]!==void 0?e[d]:r};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(124),r=new e({initialize:function(n,i){this.x=0,this.y=0,typeof n=="object"?(this.x=n.x||0,this.y=n.y||0):(i===void 0&&(i=n),this.x=n||0,this.y=i||0)},clone:function(){return new r(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,n){return n===void 0&&(n=o),this.x=o,this.y=n,this},setTo:function(o,n){return this.set(o,n)},setToPolar:function(o,n){return n==null&&(n=1),this.x=Math.cos(o)*n,this.y=Math.sin(o)*n,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,n){return d(this.x,o.x,n)&&d(this.y,o.y,n)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var n=o.x-this.x,i=o.y-this.y;return Math.sqrt(n*n+i*i)},distanceSq:function(o){var n=o.x-this.x,i=o.y-this.y;return n*n+i*i},length:function(){var o=this.x,n=this.y;return Math.sqrt(o*o+n*n)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,n=this.y;return o*o+n*n},normalize:function(){var o=this.x,n=this.y,i=o*o+n*n;return i>0&&(i=1/Math.sqrt(i),this.x=o*i,this.y=n*i),this},normalizeRightHand:function(){var o=this.x;return this.x=this.y*-1,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=o*-1,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,n){n===void 0&&(n=0);var i=this.x,s=this.y;return this.x=i+n*(o.x-i),this.y=s+n*(o.y-s),this},transformMat3:function(o){var n=this.x,i=this.y,s=o.val;return this.x=s[0]*n+s[3]*i+s[6],this.y=s[1]*n+s[4]*i+s[7],this},transformMat4:function(o){var n=this.x,i=this.y,s=o.val;return this.x=s[0]*n+s[4]*i+s[12],this.y=s[1]*n+s[5]*i+s[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var n=this.length();return n&&n>o&&this.scale(o/n),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var n=Math.cos(o),i=Math.sin(o);return this.set(n*this.x-i*this.y,i*this.x+n*this.y)}});r.ZERO=new r,r.RIGHT=new r(1,0),r.LEFT=new r(-1,0),r.UP=new r(0,-1),r.DOWN=new r(0,1),r.ONE=new r(1,1),a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(56),r=new e({initialize:function(n,i){n===void 0&&(n=0),i===void 0&&(i=n),this.type=d.POINT,this.x=n,this.y=i},setTo:function(o,n){return o===void 0&&(o=0),n===void 0&&(n=o),this.x=o,this.y=n,this}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(24),r=t(20),o=new e({initialize:function(i){this.scene=i,this.systems=i.sys,this.events=i.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},existing:function(n){return(n.renderCanvas||n.renderWebGL)&&this.displayList.add(n),n.preUpdate&&this.updateList.add(n),n},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(n,i){o.prototype.hasOwnProperty(n)||(o.prototype[n]=i)},o.remove=function(n){o.prototype.hasOwnProperty(n)&&delete o.prototype[n]},d.register("GameObjectFactory",o,"add"),a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){if(!e||typeof e=="number")return r;if(e.hasOwnProperty(d))return e[d];if(d.indexOf(".")!==-1){for(var o=d.split("."),n=e,i=r,s=0;s<o.length;s++)if(n.hasOwnProperty(o[s]))i=n[o[s]],n=n[o[s]];else{i=r;break}return i}else return r};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},e={install:function(d){for(var r in t)d[r]=t[r]},register:function(d,r){t[d]=r},destroy:function(){t={}}};a.exports=e},function(a,x,t){var e=Object.prototype.hasOwnProperty,d="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(d=!1));function o(u,h,l){this.fn=u,this.context=h,this.once=l||!1}function n(u,h,l,f,v){if(typeof l!="function")throw new TypeError("The listener must be a function");var c=new o(l,f||u,v),p=d?d+h:h;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],c]:u._events[p].push(c):(u._events[p]=c,u._eventsCount++),u}function i(u,h){--u._eventsCount===0?u._events=new r:delete u._events[h]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var h=[],l,f;if(this._eventsCount===0)return h;for(f in l=this._events)e.call(l,f)&&h.push(d?f.slice(1):f);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(l)):h},s.prototype.listeners=function(h){var l=d?d+h:h,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var v=0,c=f.length,p=new Array(c);v<c;v++)p[v]=f[v].fn;return p},s.prototype.listenerCount=function(h){var l=d?d+h:h,f=this._events[l];return f?f.fn?1:f.length:0},s.prototype.emit=function(h,l,f,v,c,p){var m=d?d+h:h;if(!this._events[m])return!1;var y=this._events[m],T=arguments.length,E,S;if(y.fn){switch(y.once&&this.removeListener(h,y.fn,void 0,!0),T){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,l),!0;case 3:return y.fn.call(y.context,l,f),!0;case 4:return y.fn.call(y.context,l,f,v),!0;case 5:return y.fn.call(y.context,l,f,v,c),!0;case 6:return y.fn.call(y.context,l,f,v,c,p),!0}for(S=1,E=new Array(T-1);S<T;S++)E[S-1]=arguments[S];y.fn.apply(y.context,E)}else{var P=y.length,M;for(S=0;S<P;S++)switch(y[S].once&&this.removeListener(h,y[S].fn,void 0,!0),T){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,l);break;case 3:y[S].fn.call(y[S].context,l,f);break;case 4:y[S].fn.call(y[S].context,l,f,v);break;default:if(!E)for(M=1,E=new Array(T-1);M<T;M++)E[M-1]=arguments[M];y[S].fn.apply(y[S].context,E)}}return!0},s.prototype.on=function(h,l,f){return n(this,h,l,f,!1)},s.prototype.once=function(h,l,f){return n(this,h,l,f,!0)},s.prototype.removeListener=function(h,l,f,v){var c=d?d+h:h;if(!this._events[c])return this;if(!l)return i(this,c),this;var p=this._events[c];if(p.fn)p.fn===l&&(!v||p.once)&&(!f||p.context===f)&&i(this,c);else{for(var m=0,y=[],T=p.length;m<T;m++)(p[m].fn!==l||v&&!p[m].once||f&&p[m].context!==f)&&y.push(p[m]);y.length?this._events[c]=y.length===1?y[0]:y:i(this,c)}return this},s.prototype.removeAllListeners=function(h){var l;return h?(l=d?d+h:h,this._events[l]&&i(this,l)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=d,s.EventEmitter=s,a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(57),r=t(171),o=t(306),n=t(56),i=t(47),s=t(174),u=new e({initialize:function(l,f,v,c){l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=0),this.type=n.RECTANGLE,this.x=l,this.y=f,this.width=v,this.height=c},contains:function(h,l){return d(this,h,l)},getPoint:function(h,l){return r(this,h,l)},getPoints:function(h,l,f){return o(this,h,l,f)},getRandomPoint:function(h){return s(this,h)},setTo:function(h,l,f,v){return this.x=h,this.y=l,this.width=f,this.height=v,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(h,l){return l===void 0&&(l=h),this.x=h,this.y=l,this},setSize:function(h,l){return l===void 0&&(l=h),this.width=h,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(h){return h===void 0&&(h=new i),h.setTo(this.x,this.y,this.right,this.y),h},getLineB:function(h){return h===void 0&&(h=new i),h.setTo(this.right,this.y,this.right,this.bottom),h},getLineC:function(h){return h===void 0&&(h=new i),h.setTo(this.right,this.bottom,this.x,this.bottom),h},getLineD:function(h){return h===void 0&&(h=new i),h.setTo(this.x,this.bottom,this.x,this.y),h},left:{get:function(){return this.x},set:function(h){h>=this.right?this.width=0:this.width=this.right-h,this.x=h}},right:{get:function(){return this.x+this.width},set:function(h){h<=this.x?this.width=0:this.width=h-this.x}},top:{get:function(){return this.y},set:function(h){h>=this.bottom?this.height=0:this.height=this.bottom-h,this.y=h}},bottom:{get:function(){return this.y+this.height},set:function(h){h<=this.y?this.height=0:this.height=h-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(h){this.x=h-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(h){this.y=h-this.height/2}}});a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Alpha:t(607),AlphaSingle:t(303),BlendMode:t(304),ComputedSize:t(608),Crop:t(609),Depth:t(305),Flip:t(610),GetBounds:t(611),Mask:t(309),Origin:t(632),PathFollower:t(633),Pipeline:t(167),ScrollFactor:t(312),Size:t(634),Texture:t(635),TextureCrop:t(636),Tint:t(637),ToJSON:t(176),Transform:t(313),TransformMatrix:t(25),Visible:t(314)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(e){for(var d="",r=0;r<e;++r)r>0&&(d+=`
else `),r<e-1&&(d+="if(test == "+r+".0){}");return d}a.exports={getTintFromFloats:function(e,d,r,o){var n=(e*255|0)&255,i=(d*255|0)&255,s=(r*255|0)&255,u=(o*255|0)&255;return(u<<24|n<<16|i<<8|s)>>>0},getTintAppendFloatAlpha:function(e,d){var r=(d*255|0)&255;return(r<<24|e)>>>0},getTintAppendFloatAlphaAndSwap:function(e,d){var r=(e>>16|0)&255,o=(e>>8|0)&255,n=(e|0)&255,i=(d*255|0)&255;return(i<<24|n<<16|o<<8|r)>>>0},getFloatsFromUintRGB:function(e){var d=(e>>16|0)&255,r=(e>>8|0)&255,o=(e|0)&255;return[d/255,r/255,o/255]},checkShaderMax:function(e,d){(!d||d===-1)&&(d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS));for(var r=e.createShader(e.FRAGMENT_SHADER),o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var n=o.replace(/%forloop%/gi,t(d));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))d=d/2|0;else break}return d},parseFragmentShaderMaxTextures:function(e,d){if(!e)return"";for(var r="",o=0;o<d;o++)o>0&&(r+=`
	else `),o<d-1&&(r+="if (outTexId < "+o+".5)"),r+=`
	{`,r+=`
		texture = texture2D(uMainSampler[`+o+"], outTexCoord);",r+=`
	}`;return e=e.replace(/%count%/gi,d.toString()),e.replace(/%forloop%/gi,r)}}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(193),d=t(6),r=function(o,n,i){var s=d(o,n,null);if(s===null)return i;if(Array.isArray(s))return e.RND.pick(s);if(typeof s=="object"){if(s.hasOwnProperty("randInt"))return e.RND.integerInRange(s.randInt[0],s.randInt[1]);if(s.hasOwnProperty("randFloat"))return e.RND.realInRange(s.randFloat[0],s.randFloat[1])}else if(typeof s=="function")return s(n);return s};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(176),r=t(101),o=t(9),n=t(75),i=t(20),s=new e({Extends:o,initialize:function(h,l){o.call(this),this.scene=h,this.displayList=null,this.type=l,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(n.ADDED_TO_SCENE,this.addedToScene,this),this.on(n.REMOVED_FROM_SCENE,this.removedFromScene,this),h.sys.queueDepthSort()},setActive:function(u){return this.active=u,this},setName:function(u){return this.name=u,this},setState:function(u){return this.state=u,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(u,h){return this.data||(this.data=new r(this)),this.data.set(u,h),this},incData:function(u,h){return this.data||(this.data=new r(this)),this.data.inc(u,h),this},toggleData:function(u){return this.data||(this.data=new r(this)),this.data.toggle(u),this},getData:function(u){return this.data||(this.data=new r(this)),this.data.get(u)},setInteractive:function(u,h,l){return this.scene.sys.input.enable(this,u,h,l),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return d(this)},willRender:function(u){return!(s.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},getIndexList:function(){for(var u=this,h=this.parentContainer,l=[];h&&(l.unshift(h.getIndex(u)),u=h,h.parentContainer);)h=h.parentContainer;return this.displayList?l.unshift(this.displayList.getIndex(u)):l.unshift(this.scene.sys.displayList.getIndex(u)),l},addToDisplayList:function(u){return u===void 0&&(u=this.scene.sys.displayList),this.displayList&&this.displayList!==u&&this.removeFromDisplayList(),u.exists(this)||(this.displayList=u,u.add(this,!0),u.queueDepthSort(),this.emit(n.ADDED_TO_SCENE,this,this.scene),u.events.emit(i.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var u=this.displayList||this.scene.sys.displayList;return u.exists(this)&&(u.remove(this,!0),u.queueDepthSort(),this.displayList=null,this.emit(n.REMOVED_FROM_SCENE,this,this.scene),u.events.emit(i.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(u){!this.scene||this.ignoreDestroy||(u===void 0&&(u=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(n.DESTROY,this,u),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});s.RENDER_MASK=15,a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(24),r=t(20),o=new e({initialize:function(i){this.scene=i,this.systems=i.sys,this.events=i.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(n,i){o.prototype.hasOwnProperty(n)||(o.prototype[n]=i)},o.remove=function(n){o.prototype.hasOwnProperty(n)&&delete o.prototype[n]},d.register("GameObjectCreator",o,"make"),a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(7),d=function(){var r,o,n,i,s,u,h=arguments[0]||{},l=1,f=arguments.length,v=!1;for(typeof h=="boolean"&&(v=h,h=arguments[1]||{},l=2),f===l&&(h=this,--l);l<f;l++)if((r=arguments[l])!=null)for(o in r)n=h[o],i=r[o],h!==i&&(v&&i&&(e(i)||(s=Array.isArray(i)))?(s?(s=!1,u=n&&Array.isArray(n)?n:[]):u=n&&e(n)?n:{},h[o]=d(v,u,i)):i!==void 0&&(h[o]=i));return h};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return Math.max(d,Math.min(r,e))};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),d=new e,r=new e,o=new e,n={camera:d,sprite:r,calc:o},i=function(s,u,h){var l=d,f=r,v=o;return f.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),l.copyFrom(u.matrix),h?(l.multiplyWithOffset(h,-u.scrollX*s.scrollFactorX,-u.scrollY*s.scrollFactorY),f.e=s.x,f.f=s.y):(f.e-=u.scrollX*s.scrollFactorX,f.f-=u.scrollY*s.scrollFactorY),l.multiply(f,v),n};a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ADDED_TO_SCENE:t(656),BOOT:t(657),CREATE:t(658),DESTROY:t(659),PAUSE:t(660),POST_UPDATE:t(661),PRE_RENDER:t(662),PRE_UPDATE:t(663),READY:t(664),REMOVED_FROM_SCENE:t(665),RENDER:t(666),RESUME:t(667),SHUTDOWN:t(668),SLEEP:t(669),START:t(670),TRANSITION_COMPLETE:t(671),TRANSITION_INIT:t(672),TRANSITION_OUT:t(673),TRANSITION_START:t(674),TRANSITION_WAKE:t(675),UPDATE:t(676),WAKE:t(677)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BLUR:t(612),BOOT:t(613),CONTEXT_LOST:t(614),CONTEXT_RESTORED:t(615),DESTROY:t(616),FOCUS:t(617),HIDDEN:t(618),PAUSE:t(619),POST_RENDER:t(620),POST_STEP:t(621),PRE_RENDER:t(622),PRE_STEP:t(623),READY:t(624),RESUME:t(625),STEP:t(626),VISIBLE:t(627)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(95),o=t(2),n=t(155),i=t(240),s=t(517),u=t(156),h=new e({initialize:function(f,v){this.loader=f,this.cache=o(v,"cache",!1),this.type=o(v,"type",!1),this.key=o(v,"key",!1);var c=this.key;if(f.prefix&&f.prefix!==""&&(this.key=f.prefix+c),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var p=o(v,"url");p===void 0?p=f.path+c+"."+o(v,"extension",""):typeof p=="string"&&!p.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(p=f.path+p),this.url=p,this.src="",this.xhrSettings=u(o(v,"responseType",void 0)),o(v,"xhrSettings",!1)&&(this.xhrSettings=i(this.xhrSettings,o(v,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?d.FILE_POPULATED:d.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(v,"config",{}),this.multiFile,this.linkFile},setLink:function(l){this.linkFile=l,l.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===d.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=d.FILE_LOADING,this.src=n(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=s(this,this.loader.xhr))},onLoad:function(l,f){var v=l.responseURL&&(l.responseURL.indexOf("file://")===0||l.responseURL.indexOf("capacitor://")===0),c=v&&f.target.status===0,p=!(f.target&&f.target.status!==200)||c;l.readyState===4&&l.status>=400&&l.status<=599&&(p=!1),this.state=d.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,p)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(l){l.lengthComputable&&(this.bytesLoaded=l.loaded,this.bytesTotal=l.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=d.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=d.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=d.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(l){l===void 0&&(l=this.data);var f=this.key,v=this.type;this.loader.emit(r.FILE_COMPLETE,f,v,l),this.loader.emit(r.FILE_KEY_COMPLETE+v+"-"+f,f,v,l),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});h.createObjectURL=function(l,f,v){if(typeof URL=="function")l.src=URL.createObjectURL(f);else{var c=new FileReader;c.onload=function(){l.removeAttribute("crossOrigin"),l.src="data:"+(f.type||v)+";base64,"+c.result.split(",")[1]},c.onerror=l.onerror,c.readAsDataURL(f)}},h.revokeObjectURL=function(l){typeof URL=="function"&&URL.revokeObjectURL(l.src)},a.exports=h},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},e={},d={};d.register=function(r,o,n,i){i===void 0&&(i=!1),t[r]={plugin:o,mapping:n,custom:i}},d.registerCustom=function(r,o,n,i){e[r]={plugin:o,mapping:n,data:i}},d.hasCore=function(r){return t.hasOwnProperty(r)},d.hasCustom=function(r){return e.hasOwnProperty(r)},d.getCore=function(r){return t[r]},d.getCustom=function(r){return e[r]},d.getCustomClass=function(r){return e.hasOwnProperty(r)?e[r].plugin:null},d.remove=function(r){t.hasOwnProperty(r)&&delete t[r]},d.removeCustom=function(r){e.hasOwnProperty(r)&&delete e[r]},d.destroyCorePlugins=function(){for(var r in t)t.hasOwnProperty(r)&&delete t[r]},d.destroyCustomPlugins=function(){for(var r in e)e.hasOwnProperty(r)&&delete e[r]},a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(14),r=t(3),o=new e({initialize:function(i,s,u,h,l,f){i===void 0&&(i=1),s===void 0&&(s=0),u===void 0&&(u=0),h===void 0&&(h=1),l===void 0&&(l=0),f===void 0&&(f=0),this.matrix=new Float32Array([i,s,u,h,l,f,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(n){this.matrix[0]=n}},b:{get:function(){return this.matrix[1]},set:function(n){this.matrix[1]=n}},c:{get:function(){return this.matrix[2]},set:function(n){this.matrix[2]=n}},d:{get:function(){return this.matrix[3]},set:function(n){this.matrix[3]=n}},e:{get:function(){return this.matrix[4]},set:function(n){this.matrix[4]=n}},f:{get:function(){return this.matrix[5]},set:function(n){this.matrix[5]=n}},tx:{get:function(){return this.matrix[4]},set:function(n){this.matrix[4]=n}},ty:{get:function(){return this.matrix[5]},set:function(n){this.matrix[5]=n}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var n=this.matrix,i=n[0],s=n[1],u=n[2],h=n[3];return i||s?s>0?Math.acos(i/this.scaleX):-Math.acos(i/this.scaleX):u||h?d.TAU-(h>0?Math.acos(-u/this.scaleY):-Math.acos(u/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var n=this.matrix;return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,this},translate:function(n,i){var s=this.matrix;return s[4]=s[0]*n+s[2]*i+s[4],s[5]=s[1]*n+s[3]*i+s[5],this},scale:function(n,i){var s=this.matrix;return s[0]*=n,s[1]*=n,s[2]*=i,s[3]*=i,this},rotate:function(n){var i=Math.sin(n),s=Math.cos(n),u=this.matrix,h=u[0],l=u[1],f=u[2],v=u[3];return u[0]=h*s+f*i,u[1]=l*s+v*i,u[2]=h*-i+f*s,u[3]=l*-i+v*s,this},multiply:function(n,i){var s=this.matrix,u=n.matrix,h=s[0],l=s[1],f=s[2],v=s[3],c=s[4],p=s[5],m=u[0],y=u[1],T=u[2],E=u[3],S=u[4],P=u[5],M=i===void 0?this:i;return M.a=m*h+y*f,M.b=m*l+y*v,M.c=T*h+E*f,M.d=T*l+E*v,M.e=S*h+P*f+c,M.f=S*l+P*v+p,M},multiplyWithOffset:function(n,i,s){var u=this.matrix,h=n.matrix,l=u[0],f=u[1],v=u[2],c=u[3],p=u[4],m=u[5],y=i*l+s*v+p,T=i*f+s*c+m,E=h[0],S=h[1],P=h[2],M=h[3],O=h[4],L=h[5];return u[0]=E*l+S*v,u[1]=E*f+S*c,u[2]=P*l+M*v,u[3]=P*f+M*c,u[4]=O*l+L*v+y,u[5]=O*f+L*c+T,this},transform:function(n,i,s,u,h,l){var f=this.matrix,v=f[0],c=f[1],p=f[2],m=f[3],y=f[4],T=f[5];return f[0]=n*v+i*p,f[1]=n*c+i*m,f[2]=s*v+u*p,f[3]=s*c+u*m,f[4]=h*v+l*p+y,f[5]=h*c+l*m+T,this},transformPoint:function(n,i,s){s===void 0&&(s={x:0,y:0});var u=this.matrix,h=u[0],l=u[1],f=u[2],v=u[3],c=u[4],p=u[5];return s.x=n*h+i*f+c,s.y=n*l+i*v+p,s},invert:function(){var n=this.matrix,i=n[0],s=n[1],u=n[2],h=n[3],l=n[4],f=n[5],v=i*h-s*u;return n[0]=h/v,n[1]=-s/v,n[2]=-u/v,n[3]=i/v,n[4]=(u*f-h*l)/v,n[5]=-(i*f-s*l)/v,this},copyFrom:function(n){var i=this.matrix;return i[0]=n.a,i[1]=n.b,i[2]=n.c,i[3]=n.d,i[4]=n.e,i[5]=n.f,this},copyFromArray:function(n){var i=this.matrix;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],this},copyToContext:function(n){var i=this.matrix;return n.transform(i[0],i[1],i[2],i[3],i[4],i[5]),n},setToContext:function(n){var i=this.matrix;return n.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),n},copyToArray:function(n){var i=this.matrix;return n===void 0?n=[i[0],i[1],i[2],i[3],i[4],i[5]]:(n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5]),n},setTransform:function(n,i,s,u,h,l){var f=this.matrix;return f[0]=n,f[1]=i,f[2]=s,f[3]=u,f[4]=h,f[5]=l,this},decomposeMatrix:function(){var n=this.decomposedMatrix,i=this.matrix,s=i[0],u=i[1],h=i[2],l=i[3],f=s*l-u*h;if(n.translateX=i[4],n.translateY=i[5],s||u){var v=Math.sqrt(s*s+u*u);n.rotation=u>0?Math.acos(s/v):-Math.acos(s/v),n.scaleX=v,n.scaleY=f/v}else if(h||l){var c=Math.sqrt(h*h+l*l);n.rotation=Math.PI*.5-(l>0?Math.acos(-h/c):-Math.acos(h/c)),n.scaleX=f/c,n.scaleY=c}else n.rotation=0,n.scaleX=0,n.scaleY=0;return n},applyITRS:function(n,i,s,u,h){var l=this.matrix,f=Math.sin(s),v=Math.cos(s);return l[4]=n,l[5]=i,l[0]=v*u,l[1]=f*u,l[2]=-f*h,l[3]=v*h,this},applyInverse:function(n,i,s){s===void 0&&(s=new r);var u=this.matrix,h=u[0],l=u[1],f=u[2],v=u[3],c=u[4],p=u[5],m=1/(h*v+f*-l);return s.x=v*m*n+-f*m*i+(p*f-c*v)*m,s.y=h*m*i+-l*m*n+(-p*h+c*l)*m,s},getX:function(n,i){return n*this.a+i*this.c+this.e},getY:function(n,i){return n*this.b+i*this.d+this.f},getXRound:function(n,i,s){var u=this.getX(n,i);return s&&(u=Math.round(u)),u},getYRound:function(n,i,s){var u=this.getY(n,i);return s&&(u=Math.round(u)),u},getCSSMatrix:function(){var n=this.matrix;return"matrix("+n[0]+","+n[1]+","+n[2]+","+n[3]+","+n[4]+","+n[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),d=function(r,o,n,i,s,u){r===void 0&&(r=0),o===void 0&&(o=0),n===void 0&&(n=u.width),i===void 0&&(i=u.height),s||(s={});var h=e(s,"isNotEmpty",!1),l=e(s,"isColliding",!1),f=e(s,"hasInterestingFace",!1);r<0&&(n+=r,r=0),o<0&&(i+=o,o=0),r+n>u.width&&(n=Math.max(u.width-r,0)),o+i>u.height&&(i=Math.max(u.height-o,0));for(var v=[],c=o;c<o+i;c++)for(var p=r;p<r+n;p++){var m=u.data[c][p];if(m!==null){if(h&&m.index===-1||l&&!m.collides||f&&!m.hasInterestingFace)continue;v.push(m)}}return v};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n,i){o===void 0&&(o=0),n===void 0&&(n=0),i===void 0&&(i=1);var s,u=0,h=e.length;if(i===1)for(s=n;s<h;s++)e[s][d]=r+u*o,u++;else for(s=n;s>=0;s--)e[s][d]=r+u*o,u++;return e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),d=t(13),r=function(o,n,i){n.x=d(i,"x",0),n.y=d(i,"y",0),n.depth=d(i,"depth",0),n.flipX=d(i,"flipX",!1),n.flipY=d(i,"flipY",!1);var s=d(i,"scale",null);typeof s=="number"?n.setScale(s):s!==null&&(n.scaleX=d(s,"x",1),n.scaleY=d(s,"y",1));var u=d(i,"scrollFactor",null);typeof u=="number"?n.setScrollFactor(u):u!==null&&(n.scrollFactorX=d(u,"x",1),n.scrollFactorY=d(u,"y",1)),n.rotation=d(i,"rotation",0);var h=d(i,"angle",null);h!==null&&(n.angle=h),n.alpha=d(i,"alpha",1);var l=d(i,"origin",null);if(typeof l=="number")n.setOrigin(l);else if(l!==null){var f=d(l,"x",.5),v=d(l,"y",.5);n.setOrigin(f,v)}n.blendMode=d(i,"blendMode",e.NORMAL),n.visible=d(i,"visible",!0);var c=d(i,"add",!0);return c&&o.sys.displayList.add(n),n.preUpdate&&o.sys.updateList.add(n),n};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=function(r,o,n,i,s){var u=i.alpha*n.alpha;if(u<=0)return!1;var h=e(n,i,s).calc;return o.globalCompositeOperation=r.blendModes[n.blendMode],o.globalAlpha=u,o.save(),h.setToContext(o),o.imageSmoothingEnabled=!(!r.antialias||n.frame&&n.frame.source.scaleMode),!0};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(33),d=t(192),r=[],o=!1,n=function(){var i=function(m,y,T,E,S){y===void 0&&(y=1),T===void 0&&(T=1),E===void 0&&(E=e.CANVAS),S===void 0&&(S=!1);var P,M=h(E);return M===null?(M={parent:m,canvas:document.createElement("canvas"),type:E},E===e.CANVAS&&r.push(M),P=M.canvas):(M.parent=m,P=M.canvas),S&&(M.parent=P),P.width=y,P.height=T,o&&E===e.CANVAS&&d.disable(P.getContext("2d")),P},s=function(m,y,T){return i(m,y,T,e.CANVAS)},u=function(m,y,T){return i(m,y,T,e.WEBGL)},h=function(m){if(m===void 0&&(m=e.CANVAS),m===e.WEBGL)return null;for(var y=0;y<r.length;y++){var T=r[y];if(!T.parent&&T.type===m)return T}return null},l=function(m){var y=m instanceof HTMLCanvasElement;r.forEach(function(T){(y&&T.canvas===m||!y&&T.parent===m)&&(T.parent=null,T.canvas.width=1,T.canvas.height=1)})},f=function(){var m=0;return r.forEach(function(y){y.parent&&m++}),m},v=function(){return r.length-f()},c=function(){o=!0},p=function(){o=!1};return{create2D:s,create:i,createWebGL:u,disableSmoothing:c,enableSmoothing:p,first:h,free:v,pool:r,remove:l,total:f}};a.exports=n()},function(a,x){var t={};a.exports=t,function(){t._nextId=0,t._seed=0,t._nowStartTime=+new Date,t.extend=function(d,r){var o,n;typeof r=="boolean"?(o=2,n=r):(o=1,n=!0);for(var i=o;i<arguments.length;i++){var s=arguments[i];if(s)for(var u in s)n&&s[u]&&s[u].constructor===Object&&(!d[u]||d[u].constructor===Object)?(d[u]=d[u]||{},t.extend(d[u],n,s[u])):d[u]=s[u]}return d},t.clone=function(d,r){return t.extend({},r,d)},t.keys=function(d){if(Object.keys)return Object.keys(d);var r=[];for(var o in d)r.push(o);return r},t.values=function(d){var r=[];if(Object.keys){for(var o=Object.keys(d),n=0;n<o.length;n++)r.push(d[o[n]]);return r}for(var i in d)r.push(d[i]);return r},t.get=function(d,r,o,n){r=r.split(".").slice(o,n);for(var i=0;i<r.length;i+=1)d=d[r[i]];return d},t.set=function(d,r,o,n,i){var s=r.split(".").slice(n,i);return t.get(d,r,0,-1)[s[s.length-1]]=o,o},t.shuffle=function(d){for(var r=d.length-1;r>0;r--){var o=Math.floor(t.random()*(r+1)),n=d[r];d[r]=d[o],d[o]=n}return d},t.choose=function(d){return d[Math.floor(t.random()*d.length)]},t.isElement=function(d){return typeof HTMLElement<"u"?d instanceof HTMLElement:!!(d&&d.nodeType&&d.nodeName)},t.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},t.isFunction=function(d){return typeof d=="function"},t.isPlainObject=function(d){return typeof d=="object"&&d.constructor===Object},t.isString=function(d){return Object.prototype.toString.call(d)==="[object String]"},t.clamp=function(d,r,o){return d<r?r:d>o?o:d},t.sign=function(d){return d<0?-1:1},t.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-t._nowStartTime},t.random=function(d,r){return d=typeof d<"u"?d:0,r=typeof r<"u"?r:1,d+e()*(r-d)};var e=function(){return t._seed=(t._seed*9301+49297)%233280,t._seed/233280};t.colorToNumber=function(d){return d=d.replace("#",""),d.length==3&&(d=d.charAt(0)+d.charAt(0)+d.charAt(1)+d.charAt(1)+d.charAt(2)+d.charAt(2)),parseInt(d,16)},t.logLevel=1,t.log=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.info=function(){console&&t.logLevel>0&&t.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.warn=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.nextId=function(){return t._nextId++},t.indexOf=function(d,r){if(d.indexOf)return d.indexOf(r);for(var o=0;o<d.length;o++)if(d[o]===r)return o;return-1},t.map=function(d,r){if(d.map)return d.map(r);for(var o=[],n=0;n<d.length;n+=1)o.push(r(d[n]));return o},t.topologicalSort=function(d){var r=[],o=[],n=[];for(var i in d)!o[i]&&!n[i]&&t._topologicalSort(i,o,n,d,r);return r},t._topologicalSort=function(d,r,o,n,i){var s=n[d]||[];o[d]=!0;for(var u=0;u<s.length;u+=1){var h=s[u];o[h]||r[h]||t._topologicalSort(h,r,o,n,i)}o[d]=!1,r[d]=!0,i.push(d)},t.chain=function(){for(var d=[],r=0;r<arguments.length;r+=1){var o=arguments[r];o._chained?d.push.apply(d,o._chained):d.push(o)}var n=function(){for(var i,s=new Array(arguments.length),u=0,h=arguments.length;u<h;u++)s[u]=arguments[u];for(u=0;u<d.length;u+=1){var l=d[u].apply(i,s);typeof l<"u"&&(i=l)}return i};return n._chained=d,n},t.chainPathBefore=function(d,r,o){return t.set(d,r,t.chain(o,t.get(d,r)))},t.chainPathAfter=function(d,r,o){return t.set(d,r,t.chain(t.get(d,r),o))}}()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={VERSION:"3.55.2",BlendModes:t(35),ScaleModes:t(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};a.exports=e},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(11),r=t(15),o=t(47),n=new e({Extends:r,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Transform,d.Visible],initialize:function(s,u,h){u===void 0&&(u="Shape"),r.call(this,s,u),this.geom=h,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(i,s){return s===void 0&&(s=1),i===void 0?this.isFilled=!1:(this.fillColor=i,this.fillAlpha=s,this.isFilled=!0),this},setStrokeStyle:function(i,s,u){return u===void 0&&(u=1),i===void 0?this.isStroked=!1:(this.lineWidth=i,this.strokeColor=s,this.strokeAlpha=u,this.isStroked=!0),this},setClosePath:function(i){return this.closePath=i,this},setSize:function(i,s){return this.width=i,this.height=s,this},setDisplaySize:function(i,s){return this.displayWidth=i,this.displayHeight=s,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(i){this.scaleX=i/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(i){this.scaleY=i/this.height}}});a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),d=function(r){return r*e.DEG_TO_RAD};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={DESTROY:t(743),FADE_IN_COMPLETE:t(744),FADE_IN_START:t(745),FADE_OUT_COMPLETE:t(746),FADE_OUT_START:t(747),FLASH_COMPLETE:t(748),FLASH_START:t(749),FOLLOW_UPDATE:t(750),PAN_COMPLETE:t(751),PAN_START:t(752),POST_RENDER:t(753),PRE_RENDER:t(754),ROTATE_COMPLETE:t(755),ROTATE_START:t(756),SHAKE_COMPLETE:t(757),SHAKE_START:t(758),ZOOM_COMPLETE:t(759),ZOOM_START:t(760)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(103),r=t(328),o=t(188),n=t(329),i=new e({initialize:function(u,h,l,f){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(u,h,l,f)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(s,u,h,l,f){return l===void 0&&(l=255),f===void 0&&(f=!0),this._locked=!0,this.red=s,this.green=u,this.blue=h,this.alpha=l,this._locked=!1,this.update(f)},setGLTo:function(s,u,h,l){return l===void 0&&(l=1),this._locked=!0,this.redGL=s,this.greenGL=u,this.blueGL=h,this.alphaGL=l,this._locked=!1,this.update(!0)},setFromRGB:function(s){return this._locked=!0,this.red=s.r,this.green=s.g,this.blue=s.b,s.hasOwnProperty("a")&&(this.alpha=s.a),this._locked=!1,this.update(!0)},setFromHSV:function(s,u,h){return o(s,u,h,this)},update:function(s){if(s===void 0&&(s=!1),this._locked)return this;var u=this.r,h=this.g,l=this.b,f=this.a;return this._color=d(u,h,l),this._color32=r(u,h,l,f),this._rgba="rgba("+u+","+h+","+l+","+f/255+")",s&&n(u,h,l,this),this},updateHSV:function(){var s=this.r,u=this.g,h=this.b;return n(s,u,h,this),this},clone:function(){return new i(this.r,this.g,this.b,this.a)},gray:function(s){return this.setTo(s,s,s)},random:function(s,u){s===void 0&&(s=0),u===void 0&&(u=255);var h=Math.floor(s+Math.random()*(u-s)),l=Math.floor(s+Math.random()*(u-s)),f=Math.floor(s+Math.random()*(u-s));return this.setTo(h,l,f)},randomGray:function(s,u){s===void 0&&(s=0),u===void 0&&(u=255);var h=Math.floor(s+Math.random()*(u-s));return this.setTo(h,h,h)},saturate:function(s){return this.s+=s/100,this},desaturate:function(s){return this.s-=s/100,this},lighten:function(s){return this.v+=s/100,this},darken:function(s){return this.v-=s/100,this},brighten:function(s){var u=this.r,h=this.g,l=this.b;return u=Math.max(0,Math.min(255,u-Math.round(255*-(s/100)))),h=Math.max(0,Math.min(255,h-Math.round(255*-(s/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(s/100)))),this.setTo(u,h,l)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(s){this.gl[0]=Math.min(Math.abs(s),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(s){this.gl[1]=Math.min(Math.abs(s),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(s){this.gl[2]=Math.min(Math.abs(s),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(s){this.gl[3]=Math.min(Math.abs(s),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(s){s=Math.floor(Math.abs(s)),this.r=Math.min(s,255),this.gl[0]=s/255,this.update(!0)}},green:{get:function(){return this.g},set:function(s){s=Math.floor(Math.abs(s)),this.g=Math.min(s,255),this.gl[1]=s/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(s){s=Math.floor(Math.abs(s)),this.b=Math.min(s,255),this.gl[2]=s/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(s){s=Math.floor(Math.abs(s)),this.a=Math.min(s,255),this.gl[3]=s/255,this.update()}},h:{get:function(){return this._h},set:function(s){this._h=s,o(s,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(s){this._s=s,o(this._h,s,this._v,this)}},v:{get:function(){return this._v},set:function(s){this._v=s,o(this._h,this._s,s,this)}}});a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o,n,i){this.x=0,this.y=0,this.z=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=n||0,this.z=i||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this},max:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this},clone:function(){return new d(this.x,this.y,this.z)},addVectors:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this},crossVectors:function(r,o){var n=r.x,i=r.y,s=r.z,u=o.x,h=o.y,l=o.z;return this.x=i*l-s*h,this.y=s*u-n*l,this.z=n*h-i*u,this},equals:function(r){return this.x===r.x&&this.y===r.y&&this.z===r.z},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z||0,this},set:function(r,o,n){return typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):(this.x=r||0,this.y=o||0,this.z=n||0),this},setFromMatrixPosition:function(r){return this.fromArray(r.val,12)},setFromMatrixColumn:function(r,o){return this.fromArray(r.val,o*4)},fromArray:function(r,o){return o===void 0&&(o=0),this.x=r[o],this.y=r[o+1],this.z=r[o+2],this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z||0,this},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this},addScale:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o||0,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z||0,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z||1,this},scale:function(r){return isFinite(r)?(this.x*=r,this.y*=r,this.z*=r):(this.x=0,this.y=0,this.z=0),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(r){var o=r.x-this.x,n=r.y-this.y,i=r.z-this.z||0;return Math.sqrt(o*o+n*n+i*i)},distanceSq:function(r){var o=r.x-this.x,n=r.y-this.y,i=r.z-this.z||0;return o*o+n*n+i*i},length:function(){var r=this.x,o=this.y,n=this.z;return Math.sqrt(r*r+o*o+n*n)},lengthSq:function(){var r=this.x,o=this.y,n=this.z;return r*r+o*o+n*n},normalize:function(){var r=this.x,o=this.y,n=this.z,i=r*r+o*o+n*n;return i>0&&(i=1/Math.sqrt(i),this.x=r*i,this.y=o*i,this.z=n*i),this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},cross:function(r){var o=this.x,n=this.y,i=this.z,s=r.x,u=r.y,h=r.z;return this.x=n*h-i*u,this.y=i*s-o*h,this.z=o*u-n*s,this},lerp:function(r,o){o===void 0&&(o=0);var n=this.x,i=this.y,s=this.z;return this.x=n+o*(r.x-n),this.y=i+o*(r.y-i),this.z=s+o*(r.z-s),this},applyMatrix3:function(r){var o=this.x,n=this.y,i=this.z,s=r.val;return this.x=s[0]*o+s[3]*n+s[6]*i,this.y=s[1]*o+s[4]*n+s[7]*i,this.z=s[2]*o+s[5]*n+s[8]*i,this},applyMatrix4:function(r){var o=this.x,n=this.y,i=this.z,s=r.val,u=1/(s[3]*o+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*o+s[4]*n+s[8]*i+s[12])*u,this.y=(s[1]*o+s[5]*n+s[9]*i+s[13])*u,this.z=(s[2]*o+s[6]*n+s[10]*i+s[14])*u,this},transformMat3:function(r){var o=this.x,n=this.y,i=this.z,s=r.val;return this.x=o*s[0]+n*s[3]+i*s[6],this.y=o*s[1]+n*s[4]+i*s[7],this.z=o*s[2]+n*s[5]+i*s[8],this},transformMat4:function(r){var o=this.x,n=this.y,i=this.z,s=r.val;return this.x=s[0]*o+s[4]*n+s[8]*i+s[12],this.y=s[1]*o+s[5]*n+s[9]*i+s[13],this.z=s[2]*o+s[6]*n+s[10]*i+s[14],this},transformCoordinates:function(r){var o=this.x,n=this.y,i=this.z,s=r.val,u=o*s[0]+n*s[4]+i*s[8]+s[12],h=o*s[1]+n*s[5]+i*s[9]+s[13],l=o*s[2]+n*s[6]+i*s[10]+s[14],f=o*s[3]+n*s[7]+i*s[11]+s[15];return this.x=u/f,this.y=h/f,this.z=l/f,this},transformQuat:function(r){var o=this.x,n=this.y,i=this.z,s=r.x,u=r.y,h=r.z,l=r.w,f=l*o+u*i-h*n,v=l*n+h*o-s*i,c=l*i+s*n-u*o,p=-s*o-u*n-h*i;return this.x=f*l+p*-s+v*-h-c*-u,this.y=v*l+p*-u+c*-s-f*-h,this.z=c*l+p*-h+f*-u-v*-s,this},project:function(r){var o=this.x,n=this.y,i=this.z,s=r.val,u=s[0],h=s[1],l=s[2],f=s[3],v=s[4],c=s[5],p=s[6],m=s[7],y=s[8],T=s[9],E=s[10],S=s[11],P=s[12],M=s[13],O=s[14],L=s[15],F=1/(o*f+n*m+i*S+L);return this.x=(o*u+n*v+i*y+P)*F,this.y=(o*h+n*c+i*T+M)*F,this.z=(o*l+n*p+i*E+O)*F,this},projectViewMatrix:function(r,o){return this.applyMatrix4(r).applyMatrix4(o)},unprojectViewMatrix:function(r,o){return this.applyMatrix4(r).applyMatrix4(o)},unproject:function(r,o){var n=r.x,i=r.y,s=r.z,u=r.w,h=this.x-n,l=u-this.y-1-i,f=this.z;return this.x=2*h/s-1,this.y=2*l/u-1,this.z=2*f-1,this.project(o)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});d.ZERO=new d,d.RIGHT=new d(1,0,0),d.LEFT=new d(-1,0,0),d.UP=new d(0,-1,0),d.DOWN=new d(0,1,0),d.FORWARD=new d(0,0,1),d.BACK=new d(0,0,-1),d.ONE=new d(1,1,1),a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(a,x,t){var e={};a.exports=e;var d=t(64),r=t(83),o=t(165),n=t(32),i=t(84),s=t(271);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(h){var l={id:n.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!h.hasOwnProperty("position")&&h.hasOwnProperty("vertices")?h.position=d.centre(h.vertices):h.hasOwnProperty("vertices")||(l.vertices=d.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var f=n.extend(l,h);return u(f,h),f.setOnCollideWith=function(v,c){return c?this.onCollideWith[v.id]=c:delete this.onCollideWith[v.id],this},f},e.nextGroup=function(h){return h?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var u=function(h,l){l=l||{},e.set(h,{bounds:h.bounds||i.create(h.vertices),positionPrev:h.positionPrev||r.clone(h.position),anglePrev:h.anglePrev||h.angle,vertices:h.vertices,parts:h.parts||[h],isStatic:h.isStatic,isSleeping:h.isSleeping,parent:h.parent||h});var f=h.bounds;if(d.rotate(h.vertices,h.angle,h.position),s.rotate(h.axes,h.angle),i.update(f,h.vertices,h.velocity),e.set(h,{axes:l.axes||h.axes,area:l.area||h.area,mass:l.mass||h.mass,inertia:l.inertia||h.inertia}),h.parts.length===1){var v=h.centerOfMass,c=h.centerOffset,p=f.max.x-f.min.x,m=f.max.y-f.min.y;v.x=-(f.min.x-h.position.x)/p,v.y=-(f.min.y-h.position.y)/m,c.x=p*v.x,c.y=m*v.y}};e.set=function(h,l,f){var v;typeof l=="string"&&(v=l,l={},l[v]=f);for(v in l)if(Object.prototype.hasOwnProperty.call(l,v))switch(f=l[v],v){case"isStatic":e.setStatic(h,f);break;case"isSleeping":o.set(h,f);break;case"mass":e.setMass(h,f);break;case"density":e.setDensity(h,f);break;case"inertia":e.setInertia(h,f);break;case"vertices":e.setVertices(h,f);break;case"position":e.setPosition(h,f);break;case"angle":e.setAngle(h,f);break;case"velocity":e.setVelocity(h,f);break;case"angularVelocity":e.setAngularVelocity(h,f);break;case"parts":e.setParts(h,f);break;case"centre":e.setCentre(h,f);break;default:h[v]=f}},e.setStatic=function(h,l){for(var f=0;f<h.parts.length;f++){var v=h.parts[f];v.isStatic=l,l?(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia},v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null)}},e.setMass=function(h,l){var f=h.inertia/(h.mass/6);h.inertia=f*(l/6),h.inverseInertia=1/h.inertia,h.mass=l,h.inverseMass=1/h.mass,h.density=h.mass/h.area},e.setDensity=function(h,l){e.setMass(h,l*h.area),h.density=l},e.setInertia=function(h,l){h.inertia=l,h.inverseInertia=1/h.inertia},e.setVertices=function(h,l){l[0].body===h?h.vertices=l:h.vertices=d.create(l,h),h.axes=s.fromVertices(h.vertices),h.area=d.area(h.vertices),e.setMass(h,h.density*h.area);var f=d.centre(h.vertices);d.translate(h.vertices,f,-1),e.setInertia(h,e._inertiaScale*d.inertia(h.vertices,h.mass)),d.translate(h.vertices,h.position),i.update(h.bounds,h.vertices,h.velocity)},e.setParts=function(h,l,f){var v;for(l=l.slice(0),h.parts.length=0,h.parts.push(h),h.parent=h,v=0;v<l.length;v++){var c=l[v];c!==h&&(c.parent=h,h.parts.push(c))}if(h.parts.length!==1){if(f=typeof f<"u"?f:!0,f){var p=[];for(v=0;v<l.length;v++)p=p.concat(l[v].vertices);d.clockwiseSort(p);var m=d.hull(p),y=d.centre(m);e.setVertices(h,m),d.translate(h.vertices,y)}var T=e._totalProperties(h),E=T.centre.x,S=T.centre.y,P=h.bounds,M=h.centerOfMass,O=h.centerOffset;i.update(P,h.vertices,h.velocity),M.x=-(P.min.x-E)/(P.max.x-P.min.x),M.y=-(P.min.y-S)/(P.max.y-P.min.y),O.x=E,O.y=S,h.area=T.area,h.parent=h,h.position.x=E,h.position.y=S,h.positionPrev.x=E,h.positionPrev.y=S,e.setMass(h,T.mass),e.setInertia(h,T.inertia),e.setPosition(h,T.centre)}},e.setCentre=function(h,l,f){f?(h.positionPrev.x+=l.x,h.positionPrev.y+=l.y,h.position.x+=l.x,h.position.y+=l.y):(h.positionPrev.x=l.x-(h.position.x-h.positionPrev.x),h.positionPrev.y=l.y-(h.position.y-h.positionPrev.y),h.position.x=l.x,h.position.y=l.y)},e.setPosition=function(h,l){var f=r.sub(l,h.position);h.positionPrev.x+=f.x,h.positionPrev.y+=f.y;for(var v=0;v<h.parts.length;v++){var c=h.parts[v];c.position.x+=f.x,c.position.y+=f.y,d.translate(c.vertices,f),i.update(c.bounds,c.vertices,h.velocity)}},e.setAngle=function(h,l){var f=l-h.angle;h.anglePrev+=f;for(var v=0;v<h.parts.length;v++){var c=h.parts[v];c.angle+=f,d.rotate(c.vertices,f,h.position),s.rotate(c.axes,f),i.update(c.bounds,c.vertices,h.velocity),v>0&&r.rotateAbout(c.position,f,h.position,c.position)}},e.setVelocity=function(h,l){h.positionPrev.x=h.position.x-l.x,h.positionPrev.y=h.position.y-l.y,h.velocity.x=l.x,h.velocity.y=l.y,h.speed=r.magnitude(h.velocity)},e.setAngularVelocity=function(h,l){h.anglePrev=h.angle-l,h.angularVelocity=l,h.angularSpeed=Math.abs(h.angularVelocity)},e.translate=function(h,l){e.setPosition(h,r.add(h.position,l))},e.rotate=function(h,l,f){if(!f)e.setAngle(h,h.angle+l);else{var v=Math.cos(l),c=Math.sin(l),p=h.position.x-f.x,m=h.position.y-f.y;e.setPosition(h,{x:f.x+(p*v-m*c),y:f.y+(p*c+m*v)}),e.setAngle(h,h.angle+l)}},e.scale=function(h,l,f,v){var c=0,p=0;v=v||h.position;for(var m=0;m<h.parts.length;m++){var y=h.parts[m];y.scale.x=l,y.scale.y=f,d.scale(y.vertices,l,f,v),y.axes=s.fromVertices(y.vertices),y.area=d.area(y.vertices),e.setMass(y,h.density*y.area),d.translate(y.vertices,{x:-y.position.x,y:-y.position.y}),e.setInertia(y,e._inertiaScale*d.inertia(y.vertices,y.mass)),d.translate(y.vertices,{x:y.position.x,y:y.position.y}),m>0&&(c+=y.area,p+=y.inertia),y.position.x=v.x+(y.position.x-v.x)*l,y.position.y=v.y+(y.position.y-v.y)*f,i.update(y.bounds,y.vertices,h.velocity)}h.parts.length>1&&(h.area=c,h.isStatic||(e.setMass(h,h.density*c),e.setInertia(h,p))),h.circleRadius&&(l===f?h.circleRadius*=l:h.circleRadius=null)},e.update=function(h,l,f,v){var c=Math.pow(l*f*h.timeScale,2),p=1-h.frictionAir*f*h.timeScale,m=h.position.x-h.positionPrev.x,y=h.position.y-h.positionPrev.y;h.velocity.x=m*p*v+h.force.x/h.mass*c,h.velocity.y=y*p*v+h.force.y/h.mass*c,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.position.x+=h.velocity.x,h.position.y+=h.velocity.y,h.angularVelocity=(h.angle-h.anglePrev)*p*v+h.torque/h.inertia*c,h.anglePrev=h.angle,h.angle+=h.angularVelocity,h.speed=r.magnitude(h.velocity),h.angularSpeed=Math.abs(h.angularVelocity);for(var T=0;T<h.parts.length;T++){var E=h.parts[T];d.translate(E.vertices,h.velocity),T>0&&(E.position.x+=h.velocity.x,E.position.y+=h.velocity.y),h.angularVelocity!==0&&(d.rotate(E.vertices,h.angularVelocity,h.position),s.rotate(E.axes,h.angularVelocity),T>0&&r.rotateAbout(E.position,h.angularVelocity,h.position,E.position)),i.update(E.bounds,E.vertices,h.velocity)}},e.applyForce=function(h,l,f){h.force.x+=f.x,h.force.y+=f.y;var v={x:l.x-h.position.x,y:l.y-h.position.y};h.torque+=v.x*f.y-v.y*f.x},e._totalProperties=function(h){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},f=h.parts.length===1?0:1;f<h.parts.length;f++){var v=h.parts[f],c=v.mass!==1/0?v.mass:1;l.mass+=c,l.area+=v.area,l.inertia+=v.inertia,l.centre=r.add(l.centre,r.mult(v.position,c))}return l.centre=r.div(l.centre,l.mass),l}})()},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.y+e.height-e.height*e.originY};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x-e.width*e.originX};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x+e.width-e.width*e.originX};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.y-e.height*e.originY};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n,i){o===void 0&&(o=0),n===void 0&&(n=0),i===void 0&&(i=1);var s,u=0,h=e.length;if(i===1)for(s=n;s<h;s++)e[s][d]+=r+u*o,u++;else for(s=n;s>=0;s--)e[s][d]+=r+u*o,u++;return e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(307),r=t(172),o=t(56),n=t(173),i=t(3),s=new e({initialize:function(h,l,f,v){h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=0),this.type=o.LINE,this.x1=h,this.y1=l,this.x2=f,this.y2=v},getPoint:function(u,h){return d(this,u,h)},getPoints:function(u,h,l){return r(this,u,h,l)},getRandomPoint:function(u){return n(this,u)},setTo:function(u,h,l,f){return u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=0),this.x1=u,this.y1=h,this.x2=l,this.y2=f,this},getPointA:function(u){return u===void 0&&(u=new i),u.set(this.x1,this.y1),u},getPointB:function(u){return u===void 0&&(u=new i),u.set(this.x2,this.y2),u},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(u){this.x1<=this.x2?this.x1=u:this.x2=u}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(u){this.x1>this.x2?this.x1=u:this.x2=u}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(u){this.y1<=this.y2?this.y1=u:this.y2=u}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(u){this.y1>this.y2?this.y1=u:this.y2=u}}});a.exports=s},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=r||d.fillColor,i=o||d.fillAlpha,s=(n&16711680)>>>16,u=(n&65280)>>>8,h=n&255;e.fillStyle="rgba("+s+","+u+","+h+","+i+")"};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o,n,i,s){var u=[];s.forEach(function(l){l&&u.push(l)}),this.loader=o,this.type=n,this.key=i,this.multiKeyIndex=o.multiKeyIndex++,this.files=u,this.complete=!1,this.pending=u.length,this.failed=0,this.config={},this.baseURL=o.baseURL,this.path=o.path,this.prefix=o.prefix;for(var h=0;h<u.length;h++)u[h].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(r){return this.files.push(r),r.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(r){var o=this.files.indexOf(r);o!==-1&&this.pending--},onFileFailed:function(r){var o=this.files.indexOf(r);o!==-1&&this.failed++}});a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=e-r,i=d-o;return Math.sqrt(n*n+i*i)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BOOT:t(922),DESTROY:t(923),DRAG_END:t(924),DRAG_ENTER:t(925),DRAG:t(926),DRAG_LEAVE:t(927),DRAG_OVER:t(928),DRAG_START:t(929),DROP:t(930),GAME_OUT:t(931),GAME_OVER:t(932),GAMEOBJECT_DOWN:t(933),GAMEOBJECT_DRAG_END:t(934),GAMEOBJECT_DRAG_ENTER:t(935),GAMEOBJECT_DRAG:t(936),GAMEOBJECT_DRAG_LEAVE:t(937),GAMEOBJECT_DRAG_OVER:t(938),GAMEOBJECT_DRAG_START:t(939),GAMEOBJECT_DROP:t(940),GAMEOBJECT_MOVE:t(941),GAMEOBJECT_OUT:t(942),GAMEOBJECT_OVER:t(943),GAMEOBJECT_POINTER_DOWN:t(944),GAMEOBJECT_POINTER_MOVE:t(945),GAMEOBJECT_POINTER_OUT:t(946),GAMEOBJECT_POINTER_OVER:t(947),GAMEOBJECT_POINTER_UP:t(948),GAMEOBJECT_POINTER_WHEEL:t(949),GAMEOBJECT_UP:t(950),GAMEOBJECT_WHEEL:t(951),MANAGER_BOOT:t(952),MANAGER_PROCESS:t(953),MANAGER_UPDATE:t(954),POINTER_DOWN:t(955),POINTER_DOWN_OUTSIDE:t(956),POINTER_MOVE:t(957),POINTER_OUT:t(958),POINTER_OVER:t(959),POINTER_UP:t(960),POINTER_UP_OUTSIDE:t(961),POINTER_WHEEL:t(962),POINTERLOCK_CHANGE:t(963),PRE_UPDATE:t(964),SHUTDOWN:t(965),START:t(966),UPDATE:t(967)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.y=d+e.height*e.originY,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.x=d+e.width*e.originX,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.x=d-e.width+e.width*e.originX,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.y=d-e.height+e.height*e.originY,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return e.width<=0||e.height<=0?!1:e.x<=d&&e.x+e.width>=d&&e.y<=r&&e.y+e.height>=r};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(175),r=t(9),o=t(374),n=t(2),i=t(69),s=t(91),u=t(141),h=t(12),l=t(375),f=new e({Extends:r,initialize:function(c){r.call(this);var p=c.game,m=p.renderer,y=m.gl;this.name=n(c,"name","WebGLPipeline"),this.game=p,this.renderer=m,this.manager,this.gl=y,this.view=p.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=n(c,"topology",y.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=n(c,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=c,this.glReset=!1},boot:function(){var v,c=this.gl,p=this.config,m=this.renderer;this.isPostFX||(this.projectionMatrix=new i().identity());var y=this.renderTargets,T=n(p,"renderTarget",!1);typeof T=="boolean"&&T&&(T=1);var E=m.width,S=m.height;if(typeof T=="number")for(v=0;v<T;v++)y.push(new u(m,E,S,1,0,!0));else if(Array.isArray(T))for(v=0;v<T.length;v++){var P=n(T[v],"scale",1),M=n(T[v],"minFilter",0),O=n(T[v],"autoClear",1);y.push(new u(m,E,S,P,M,O))}y.length&&(this.currentRenderTarget=y[0]),this.setShadersFromConfig(p);var L=this.shaders,F=0;for(v=0;v<L.length;v++)L[v].vertexSize>F&&(F=L[v].vertexSize);var b=n(p,"batchSize",m.config.batchSize);this.vertexCapacity=b*6;var B=new ArrayBuffer(this.vertexCapacity*F);this.vertexData=B,this.bytes=new Uint8Array(B),this.vertexViewF32=new Float32Array(B),this.vertexViewU32=new Uint32Array(B);var U=n(p,"vertices",null);for(U?(this.vertexViewF32.set(U),this.vertexBuffer=m.createVertexBuffer(B,c.STATIC_DRAW)):this.vertexBuffer=m.createVertexBuffer(B.byteLength,c.DYNAMIC_DRAW),this.setVertexBuffer(),v=L.length-1;v>=0;v--)L[v].rebind();this.hasBooted=!0,m.on(s.RESIZE,this.resize,this),m.on(s.PRE_RENDER,this.onPreRender,this),m.on(s.RENDER,this.onRender,this),m.on(s.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(v,c){var p=this.renderer;if(v!==this.currentShader||p.currentProgram!==this.currentShader.program){this.flush(),p.resetTextures();var m=this.setVertexBuffer();m&&!c&&(c=!0),v.bind(c,!1),this.currentShader=v}return this},getShaderByName:function(v){for(var c=this.shaders,p=0;p<c.length;p++)if(c[p].name===v)return c[p]},setShadersFromConfig:function(v){var c,p=this.shaders,m=this.renderer;for(c=0;c<p.length;c++)p[c].destroy();var y="vertShader",T="fragShader",E="attributes",S=n(v,y,null),P=h.parseFragmentShaderMaxTextures(n(v,T,null),m.maxTextures),M=n(v,E,null),O=n(v,"shaders",[]),L=O.length;if(L===0)S&&P&&(this.shaders=[new l(this,"default",S,P,d(M))]);else{var F=[];for(c=0;c<L;c++){var b=O[c],B=n(b,"name","default"),U=n(b,y,S),X=h.parseFragmentShaderMaxTextures(n(b,T,P),m.maxTextures),W=n(b,E,M);U&&X&&F.push(new l(this,B,U,X,d(W)))}this.shaders=F}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(v,c){return c===void 0&&(c=v.frame),this.currentUnit=this.renderer.setTextureSource(c.source),this.currentUnit},shouldFlush:function(v){return v===void 0&&(v=0),this.vertexCount+v>this.vertexCapacity},resize:function(v,c){(v!==this.width||c!==this.height)&&this.flush(),this.width=v,this.height=c;for(var p=this.renderTargets,m=0;m<p.length;m++)p[m].resize(v,c);return this.setProjectionMatrix(v,c),this.emit(o.RESIZE,v,c,this),this.onResize(v,c),this},setProjectionMatrix:function(v,c){var p=this.projectionMatrix;if(!p)return this;this.projectionWidth=v,this.projectionHeight=c,p.ortho(0,v,c,0,-1e3,1e3);for(var m=this.shaders,y="uProjectionMatrix",T=0;T<m.length;T++){var E=m[T];E.hasUniform(y)&&(E.resetUniform(y),E.setMatrix4fv(y,!1,p.val,E))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var v=this.renderer.projectionWidth,c=this.renderer.projectionHeight;(this.projectionWidth!==v||this.projectionHeight!==c)&&this.setProjectionMatrix(v,c)}},bind:function(v){if(v===void 0&&(v=this.currentShader),this.glReset)return this.rebind(v);var c=this.setVertexBuffer();return v.bind(c),this.currentShader=v,this.emit(o.BIND,this,v),this.onActive(v),this},rebind:function(v){this.setVertexBuffer();for(var c=this.shaders,p=c.length-1;p>=0;p--){var m=c[p].rebind();(!v||m===v)&&(this.currentShader=m)}return this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var v=this.gl,c=this.vertexBuffer;return v.getParameter(v.ARRAY_BUFFER_BINDING)!==c?(v.bindBuffer(v.ARRAY_BUFFER,c),!0):!1},preBatch:function(v){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(v),this},postBatch:function(v){return this.onDraw(this.currentRenderTarget),this.onPostBatch(v),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(v){if(v===void 0&&(v=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,v),this.onBeforeFlush(v);var c=this.gl,p=this.vertexCount,m=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),p===this.vertexCapacity?c.bufferData(c.ARRAY_BUFFER,this.vertexData,c.DYNAMIC_DRAW):c.bufferSubData(c.ARRAY_BUFFER,0,this.bytes.subarray(0,p*m)),c.drawArrays(this.topology,0,p)),this.vertexCount=0,this.emit(o.AFTER_FLUSH,this,v),this.onAfterFlush(v)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(v,c,p,m,y,T,E){var S=this.vertexViewF32,P=this.vertexViewU32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;S[++M]=v,S[++M]=c,S[++M]=p,S[++M]=m,S[++M]=y,S[++M]=T,P[++M]=E,this.vertexCount++},batchQuad:function(v,c,p,m,y,T,E,S,P,M,O,L,F,b,B,U,X,W,Z,J){J===void 0&&(J=this.currentUnit);var N=!1;return this.shouldFlush(6)&&(this.flush(),N=!0,J=this.setTexture2D(Z)),this.batchVert(c,p,M,O,J,W,b),this.batchVert(m,y,M,F,J,W,U),this.batchVert(T,E,L,F,J,W,X),this.batchVert(c,p,M,O,J,W,b),this.batchVert(T,E,L,F,J,W,X),this.batchVert(S,P,L,O,J,W,B),this.onBatch(v),N},batchTri:function(v,c,p,m,y,T,E,S,P,M,O,L,F,b,B,U,X){X===void 0&&(X=this.currentUnit);var W=!1;return this.shouldFlush(3)&&(this.flush(),W=!0,X=this.setTexture2D(U)),this.batchVert(c,p,S,P,X,B,L),this.batchVert(m,y,S,O,X,B,F),this.batchVert(T,E,M,O,X,B,b),this.onBatch(v),W},drawFillRect:function(v,c,p,m,y,T,E,S){E===void 0&&(E=this.renderer.whiteTexture.glTexture),S===void 0&&(S=!0),v=Math.floor(v),c=Math.floor(c);var P=Math.floor(v+p),M=Math.floor(c+m),O=this.setTexture2D(E),L=h.getTintAppendFloatAlphaAndSwap(y,T),F=0,b=0,B=1,U=1;S&&(b=1,U=0),this.batchQuad(null,v,c,v,M,P,M,P,c,F,b,B,U,L,L,L,L,0,E,O)},setTexture2D:function(v){return v===void 0&&(v=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(v),this.currentUnit},bindTexture:function(v,c){c===void 0&&(c=0);var p=this.gl;return p.activeTexture(p.TEXTURE0+c),p.bindTexture(p.TEXTURE_2D,v),this},bindRenderTarget:function(v,c){return this.bindTexture(v.texture,c)},setTime:function(v){return this.set1f(v,this.game.loop.getDuration()),this},set1f:function(v,c,p){return p===void 0&&(p=this.currentShader),p.set1f(v,c),this},set2f:function(v,c,p,m){return m===void 0&&(m=this.currentShader),m.set2f(v,c,p),this},set3f:function(v,c,p,m,y){return y===void 0&&(y=this.currentShader),y.set3f(v,c,p,m),this},set4f:function(v,c,p,m,y,T){return T===void 0&&(T=this.currentShader),T.set4f(v,c,p,m,y),this},set1fv:function(v,c,p){return p===void 0&&(p=this.currentShader),p.set1fv(v,c),this},set2fv:function(v,c,p){return p===void 0&&(p=this.currentShader),p.set2fv(v,c),this},set3fv:function(v,c,p){return p===void 0&&(p=this.currentShader),p.set3fv(v,c),this},set4fv:function(v,c,p){return p===void 0&&(p=this.currentShader),p.set4fv(v,c),this},set1iv:function(v,c,p){return p===void 0&&(p=this.currentShader),p.set1iv(v,c),this},set2iv:function(v,c,p){return p===void 0&&(p=this.currentShader),p.set2iv(v,c),this},set3iv:function(v,c,p){return p===void 0&&(p=this.currentShader),p.set3iv(v,c),this},set4iv:function(v,c,p){return p===void 0&&(p=this.currentShader),p.set4iv(v,c),this},set1i:function(v,c,p){return p===void 0&&(p=this.currentShader),p.set1i(v,c),this},set2i:function(v,c,p,m){return m===void 0&&(m=this.currentShader),m.set2i(v,c,p),this},set3i:function(v,c,p,m,y){return y===void 0&&(y=this.currentShader),y.set3i(v,c,p,m),this},set4i:function(v,c,p,m,y,T){return T===void 0&&(T=this.currentShader),T.set4i(v,c,p,m,y),this},setMatrix2fv:function(v,c,p,m){return m===void 0&&(m=this.currentShader),m.setMatrix2fv(v,c,p),this},setMatrix3fv:function(v,c,p,m){return m===void 0&&(m=this.currentShader),m.setMatrix3fv(v,c,p),this},setMatrix4fv:function(v,c,p,m){return m===void 0&&(m=this.currentShader),m.setMatrix4fv(v,c,p),this},destroy:function(){this.emit(o.DESTROY,this);var v,c=this.shaders;for(v=0;v<c.length;v++)c[v].destroy();var p=this.renderTargets;for(v=0;v<p.length;v++)p[v].destroy();this.gl.deleteBuffer(this.vertexBuffer);var m=this.renderer;return m.off(s.RESIZE,this.resize,this),m.off(s.PRE_RENDER,this.onPreRender,this),m.off(s.RENDER,this.onRender,this),m.off(s.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});a.exports=f},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(I,G,V){V=V||2;var Y=G&&G.length,z=Y?G[0]*V:I.length,H=d(I,0,z,V,!0),$=[];if(!H||H.next===H.prev)return $;var Q,k,tt,it,st,ot,rt;if(Y&&(H=h(I,G,H,V)),I.length>80*V){Q=tt=I[0],k=it=I[1];for(var ut=V;ut<z;ut+=V)st=I[ut],ot=I[ut+1],st<Q&&(Q=st),ot<k&&(k=ot),st>tt&&(tt=st),ot>it&&(it=ot);rt=Math.max(tt-Q,it-k),rt=rt!==0?1/rt:0}return o(H,$,V,Q,k,rt),$}function d(I,G,V,Y,z){var H,$;if(z===N(I,G,V,Y)>0)for(H=G;H<V;H+=Y)$=W(H,I[H],I[H+1],$);else for(H=V-Y;H>=G;H-=Y)$=W(H,I[H],I[H+1],$);return $&&M($,$.next)&&(Z($),$=$.next),$}function r(I,G){if(!I)return I;G||(G=I);var V=I,Y;do if(Y=!1,!V.steiner&&(M(V,V.next)||P(V.prev,V,V.next)===0)){if(Z(V),V=G=V.prev,V===V.next)break;Y=!0}else V=V.next;while(Y||V!==G);return G}function o(I,G,V,Y,z,H,$){if(I){!$&&H&&p(I,Y,z,H);for(var Q=I,k,tt;I.prev!==I.next;){if(k=I.prev,tt=I.next,H?i(I,Y,z,H):n(I)){G.push(k.i/V),G.push(I.i/V),G.push(tt.i/V),Z(I),I=tt.next,Q=tt.next;continue}if(I=tt,I===Q){$?$===1?(I=s(r(I),G,V),o(I,G,V,Y,z,H,2)):$===2&&u(I,G,V,Y,z,H):o(r(I),G,V,Y,z,H,1);break}}}}function n(I){var G=I.prev,V=I,Y=I.next;if(P(G,V,Y)>=0)return!1;for(var z=I.next.next;z!==I.prev;){if(E(G.x,G.y,V.x,V.y,Y.x,Y.y,z.x,z.y)&&P(z.prev,z,z.next)>=0)return!1;z=z.next}return!0}function i(I,G,V,Y){var z=I.prev,H=I,$=I.next;if(P(z,H,$)>=0)return!1;for(var Q=z.x<H.x?z.x<$.x?z.x:$.x:H.x<$.x?H.x:$.x,k=z.y<H.y?z.y<$.y?z.y:$.y:H.y<$.y?H.y:$.y,tt=z.x>H.x?z.x>$.x?z.x:$.x:H.x>$.x?H.x:$.x,it=z.y>H.y?z.y>$.y?z.y:$.y:H.y>$.y?H.y:$.y,st=y(Q,k,G,V,Y),ot=y(tt,it,G,V,Y),rt=I.prevZ,ut=I.nextZ;rt&&rt.z>=st&&ut&&ut.z<=ot;){if(rt!==I.prev&&rt!==I.next&&E(z.x,z.y,H.x,H.y,$.x,$.y,rt.x,rt.y)&&P(rt.prev,rt,rt.next)>=0||(rt=rt.prevZ,ut!==I.prev&&ut!==I.next&&E(z.x,z.y,H.x,H.y,$.x,$.y,ut.x,ut.y)&&P(ut.prev,ut,ut.next)>=0))return!1;ut=ut.nextZ}for(;rt&&rt.z>=st;){if(rt!==I.prev&&rt!==I.next&&E(z.x,z.y,H.x,H.y,$.x,$.y,rt.x,rt.y)&&P(rt.prev,rt,rt.next)>=0)return!1;rt=rt.prevZ}for(;ut&&ut.z<=ot;){if(ut!==I.prev&&ut!==I.next&&E(z.x,z.y,H.x,H.y,$.x,$.y,ut.x,ut.y)&&P(ut.prev,ut,ut.next)>=0)return!1;ut=ut.nextZ}return!0}function s(I,G,V){var Y=I;do{var z=Y.prev,H=Y.next.next;!M(z,H)&&O(z,Y,Y.next,H)&&B(z,H)&&B(H,z)&&(G.push(z.i/V),G.push(Y.i/V),G.push(H.i/V),Z(Y),Z(Y.next),Y=I=H),Y=Y.next}while(Y!==I);return r(Y)}function u(I,G,V,Y,z,H){var $=I;do{for(var Q=$.next.next;Q!==$.prev;){if($.i!==Q.i&&S($,Q)){var k=X($,Q);$=r($,$.next),k=r(k,k.next),o($,G,V,Y,z,H),o(k,G,V,Y,z,H);return}Q=Q.next}$=$.next}while($!==I)}function h(I,G,V,Y){var z=[],H,$,Q,k,tt;for(H=0,$=G.length;H<$;H++)Q=G[H]*Y,k=H<$-1?G[H+1]*Y:I.length,tt=d(I,Q,k,Y,!1),tt===tt.next&&(tt.steiner=!0),z.push(T(tt));for(z.sort(l),H=0;H<z.length;H++)f(z[H],V),V=r(V,V.next);return V}function l(I,G){return I.x-G.x}function f(I,G){if(G=v(I,G),G){var V=X(G,I);r(G,G.next),r(V,V.next)}}function v(I,G){var V=G,Y=I.x,z=I.y,H=-1/0,$;do{if(z<=V.y&&z>=V.next.y&&V.next.y!==V.y){var Q=V.x+(z-V.y)*(V.next.x-V.x)/(V.next.y-V.y);if(Q<=Y&&Q>H){if(H=Q,Q===Y){if(z===V.y)return V;if(z===V.next.y)return V.next}$=V.x<V.next.x?V:V.next}}V=V.next}while(V!==G);if(!$)return null;if(Y===H)return $;var k=$,tt=$.x,it=$.y,st=1/0,ot;V=$;do Y>=V.x&&V.x>=tt&&Y!==V.x&&E(z<it?Y:H,z,tt,it,z<it?H:Y,z,V.x,V.y)&&(ot=Math.abs(z-V.y)/(Y-V.x),B(V,I)&&(ot<st||ot===st&&(V.x>$.x||V.x===$.x&&c($,V)))&&($=V,st=ot)),V=V.next;while(V!==k);return $}function c(I,G){return P(I.prev,I,G.prev)<0&&P(G.next,I,I.next)<0}function p(I,G,V,Y){var z=I;do z.z===null&&(z.z=y(z.x,z.y,G,V,Y)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==I);z.prevZ.nextZ=null,z.prevZ=null,m(z)}function m(I){var G,V,Y,z,H,$,Q,k,tt=1;do{for(V=I,I=null,H=null,$=0;V;){for($++,Y=V,Q=0,G=0;G<tt&&(Q++,Y=Y.nextZ,!!Y);G++);for(k=tt;Q>0||k>0&&Y;)Q!==0&&(k===0||!Y||V.z<=Y.z)?(z=V,V=V.nextZ,Q--):(z=Y,Y=Y.nextZ,k--),H?H.nextZ=z:I=z,z.prevZ=H,H=z;V=Y}H.nextZ=null,tt*=2}while($>1);return I}function y(I,G,V,Y,z){return I=32767*(I-V)*z,G=32767*(G-Y)*z,I=(I|I<<8)&16711935,I=(I|I<<4)&252645135,I=(I|I<<2)&858993459,I=(I|I<<1)&1431655765,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,I|G<<1}function T(I){var G=I,V=I;do(G.x<V.x||G.x===V.x&&G.y<V.y)&&(V=G),G=G.next;while(G!==I);return V}function E(I,G,V,Y,z,H,$,Q){return(z-$)*(G-Q)-(I-$)*(H-Q)>=0&&(I-$)*(Y-Q)-(V-$)*(G-Q)>=0&&(V-$)*(H-Q)-(z-$)*(Y-Q)>=0}function S(I,G){return I.next.i!==G.i&&I.prev.i!==G.i&&!b(I,G)&&(B(I,G)&&B(G,I)&&U(I,G)&&(P(I.prev,I,G.prev)||P(I,G.prev,G))||M(I,G)&&P(I.prev,I,I.next)>0&&P(G.prev,G,G.next)>0)}function P(I,G,V){return(G.y-I.y)*(V.x-G.x)-(G.x-I.x)*(V.y-G.y)}function M(I,G){return I.x===G.x&&I.y===G.y}function O(I,G,V,Y){var z=F(P(I,G,V)),H=F(P(I,G,Y)),$=F(P(V,Y,I)),Q=F(P(V,Y,G));return!!(z!==H&&$!==Q||z===0&&L(I,V,G)||H===0&&L(I,Y,G)||$===0&&L(V,I,Y)||Q===0&&L(V,G,Y))}function L(I,G,V){return G.x<=Math.max(I.x,V.x)&&G.x>=Math.min(I.x,V.x)&&G.y<=Math.max(I.y,V.y)&&G.y>=Math.min(I.y,V.y)}function F(I){return I>0?1:I<0?-1:0}function b(I,G){var V=I;do{if(V.i!==I.i&&V.next.i!==I.i&&V.i!==G.i&&V.next.i!==G.i&&O(V,V.next,I,G))return!0;V=V.next}while(V!==I);return!1}function B(I,G){return P(I.prev,I,I.next)<0?P(I,G,I.next)>=0&&P(I,I.prev,G)>=0:P(I,G,I.prev)<0||P(I,I.next,G)<0}function U(I,G){var V=I,Y=!1,z=(I.x+G.x)/2,H=(I.y+G.y)/2;do V.y>H!=V.next.y>H&&V.next.y!==V.y&&z<(V.next.x-V.x)*(H-V.y)/(V.next.y-V.y)+V.x&&(Y=!Y),V=V.next;while(V!==I);return Y}function X(I,G){var V=new J(I.i,I.x,I.y),Y=new J(G.i,G.x,G.y),z=I.next,H=G.prev;return I.next=G,G.prev=I,V.next=z,z.prev=V,Y.next=V,V.prev=Y,H.next=Y,Y.prev=H,Y}function W(I,G,V,Y){var z=new J(I,G,V);return Y?(z.next=Y.next,z.prev=Y,Y.next.prev=z,Y.next=z):(z.prev=z,z.next=z),z}function Z(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function J(I,G,V){this.i=I,this.x=G,this.y=V,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}e.deviation=function(I,G,V,Y){var z=G&&G.length,H=z?G[0]*V:I.length,$=Math.abs(N(I,0,H,V));if(z)for(var Q=0,k=G.length;Q<k;Q++){var tt=G[Q]*V,it=Q<k-1?G[Q+1]*V:I.length;$-=Math.abs(N(I,tt,it,V))}var st=0;for(Q=0;Q<Y.length;Q+=3){var ot=Y[Q]*V,rt=Y[Q+1]*V,ut=Y[Q+2]*V;st+=Math.abs((I[ot]-I[ut])*(I[rt+1]-I[ot+1])-(I[ot]-I[rt])*(I[ut+1]-I[ot+1]))}return $===0&&st===0?0:Math.abs((st-$)/$)};function N(I,G,V,Y){for(var z=0,H=G,$=V-Y;H<V;H+=Y)z+=(I[$]-I[H])*(I[H+1]+I[$+1]),$=H;return z}e.flatten=function(I){for(var G=I[0][0].length,V={vertices:[],holes:[],dimensions:G},Y=0,z=0;z<I.length;z++){for(var H=0;H<I[z].length;H++)for(var $=0;$<G;$++)V.vertices.push(I[z][H][$]);z>0&&(Y+=I[z-1].length,V.holes.push(Y))}return V},a.exports=e},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=r||d.strokeColor,i=o||d.strokeAlpha,s=(n&16711680)>>>16,u=(n&65280)>>>8,h=n&255;e.strokeStyle="rgba("+s+","+u+","+h+","+i+")",e.lineWidth=d.lineWidth};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(6),s=t(7),u=new e({Extends:r,initialize:function(l,f,v,c,p){var m="json";if(s(f)){var y=f;f=n(y,"key"),v=n(y,"url"),c=n(y,"xhrSettings"),m=n(y,"extension",m),p=n(y,"dataKey",p)}var T={type:"json",cache:l.cacheManager.json,extension:m,responseType:"text",key:f,url:v,xhrSettings:c,config:p};r.call(this,l,T),s(v)&&(p?this.data=i(v,p):this.data=v,this.state=d.FILE_POPULATED)},onProcess:function(){if(this.state!==d.FILE_POPULATED){this.state=d.FILE_PROCESSING;try{var h=JSON.parse(this.xhrLoader.responseText)}catch(f){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),f}var l=this.config;typeof l=="string"?this.data=i(h,l,h):this.data=h}this.onProcessComplete()}});o.register("json",function(h,l,f,v){if(Array.isArray(h))for(var c=0;c<h.length;c++)this.addFile(new u(this,h[c]));else this.addFile(new u(this,h,l,v,f));return this}),a.exports=u},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(158),d=t(26),r=function(o,n,i,s,u){for(var h=null,l=null,f=null,v=null,c=d(o,n,i,s,null,u),p=0;p<c.length;p++){var m=c[p];m&&(m.collides?(h=e(m.x,m.y-1,!0,u),l=e(m.x,m.y+1,!0,u),f=e(m.x-1,m.y,!0,u),v=e(m.x+1,m.y,!0,u),m.faceTop=!(h&&h.collides),m.faceBottom=!(l&&l.collides),m.faceLeft=!(f&&f.collides),m.faceRight=!(v&&v.collides)):m.resetFaces())}};a.exports=r},function(a,x,t){var e={};a.exports=e;var d=t(83),r=t(32);(function(){e.create=function(o,n){for(var i=[],s=0;s<o.length;s++){var u=o[s],h={x:u.x,y:u.y,index:s,body:n,isInternal:!1,contact:null,offset:null};h.contact={vertex:h,normalImpulse:0,tangentImpulse:0},i.push(h)}return i},e.fromPath=function(o,n){var i=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,s=[];return o.replace(i,function(u,h,l){s.push({x:parseFloat(h),y:parseFloat(l)})}),e.create(s,n)},e.centre=function(o){for(var n=e.area(o,!0),i={x:0,y:0},s,u,h,l=0;l<o.length;l++)h=(l+1)%o.length,s=d.cross(o[l],o[h]),u=d.mult(d.add(o[l],o[h]),s),i=d.add(i,u);return d.div(i,6*n)},e.mean=function(o){for(var n={x:0,y:0},i=0;i<o.length;i++)n.x+=o[i].x,n.y+=o[i].y;return d.div(n,o.length)},e.area=function(o,n){for(var i=0,s=o.length-1,u=0;u<o.length;u++)i+=(o[s].x-o[u].x)*(o[s].y+o[u].y),s=u;return n?i/2:Math.abs(i)/2},e.inertia=function(o,n){for(var i=0,s=0,u=o,h,l,f=0;f<u.length;f++)l=(f+1)%u.length,h=Math.abs(d.cross(u[l],u[f])),i+=h*(d.dot(u[l],u[l])+d.dot(u[l],u[f])+d.dot(u[f],u[f])),s+=h;return n/6*(i/s)},e.translate=function(o,n,i){var s;if(i)for(s=0;s<o.length;s++)o[s].x+=n.x*i,o[s].y+=n.y*i;else for(s=0;s<o.length;s++)o[s].x+=n.x,o[s].y+=n.y;return o},e.rotate=function(o,n,i){if(n!==0){for(var s=Math.cos(n),u=Math.sin(n),h=0;h<o.length;h++){var l=o[h],f=l.x-i.x,v=l.y-i.y;l.x=i.x+(f*s-v*u),l.y=i.y+(f*u+v*s)}return o}},e.contains=function(o,n){for(var i=0;i<o.length;i++){var s=o[i],u=o[(i+1)%o.length];if((n.x-s.x)*(u.y-s.y)+(n.y-s.y)*(s.x-u.x)>0)return!1}return!0},e.scale=function(o,n,i,s){if(n===1&&i===1)return o;s=s||e.centre(o);for(var u,h,l=0;l<o.length;l++)u=o[l],h=d.sub(u,s),o[l].x=s.x+h.x*n,o[l].y=s.y+h.y*i;return o},e.chamfer=function(o,n,i,s,u){typeof n=="number"?n=[n]:n=n||[8],i=typeof i<"u"?i:-1,s=s||2,u=u||14;for(var h=[],l=0;l<o.length;l++){var f=o[l-1>=0?l-1:o.length-1],v=o[l],c=o[(l+1)%o.length],p=n[l<n.length?l:n.length-1];if(p===0){h.push(v);continue}var m=d.normalise({x:v.y-f.y,y:f.x-v.x}),y=d.normalise({x:c.y-v.y,y:v.x-c.x}),T=Math.sqrt(2*Math.pow(p,2)),E=d.mult(r.clone(m),p),S=d.normalise(d.mult(d.add(m,y),.5)),P=d.sub(v,d.mult(S,T)),M=i;i===-1&&(M=Math.pow(p,.32)*1.75),M=r.clamp(M,s,u),M%2===1&&(M+=1);for(var O=Math.acos(d.dot(m,y)),L=O/M,F=0;F<M;F++)h.push(d.add(d.rotate(E,L*F),P))}return h},e.clockwiseSort=function(o){var n=e.mean(o);return o.sort(function(i,s){return d.angle(n,i)-d.angle(n,s)}),o},e.isConvex=function(o){var n=0,i=o.length,s,u,h,l;if(i<3)return null;for(s=0;s<i;s++)if(u=(s+1)%i,h=(s+2)%i,l=(o[u].x-o[s].x)*(o[h].y-o[u].y),l-=(o[u].y-o[s].y)*(o[h].x-o[u].x),l<0?n|=1:l>0&&(n|=2),n===3)return!1;return n!==0?!0:null},e.hull=function(o){var n=[],i=[],s,u;for(o=o.slice(0),o.sort(function(h,l){var f=h.x-l.x;return f!==0?f:h.y-l.y}),u=0;u<o.length;u+=1){for(s=o[u];i.length>=2&&d.cross3(i[i.length-2],i[i.length-1],s)<=0;)i.pop();i.push(s)}for(u=o.length-1;u>=0;u-=1){for(s=o[u];n.length>=2&&d.cross3(n[n.length-2],n[n.length-1],s)<=0;)n.pop();n.push(s)}return n.pop(),i.pop(),n.concat(i)}})()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(66),r=t(300),o=t(301),n=t(56),i=t(170),s=new e({initialize:function(h,l,f){h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=0),this.type=n.CIRCLE,this.x=h,this.y=l,this._radius=f,this._diameter=f*2},contains:function(u,h){return d(this,u,h)},getPoint:function(u,h){return r(this,u,h)},getPoints:function(u,h,l){return o(this,u,h,l)},getRandomPoint:function(u){return i(this,u)},setTo:function(u,h,l){return this.x=u,this.y=h,this._radius=l,this._diameter=l*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(u,h){return h===void 0&&(h=u),this.x=u,this.y=h,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this._diameter=u*2}},diameter:{get:function(){return this._diameter},set:function(u){this._diameter=u,this._radius=u*.5}},left:{get:function(){return this.x-this._radius},set:function(u){this.x=u+this._radius}},right:{get:function(){return this.x+this._radius},set:function(u){this.x=u-this._radius}},top:{get:function(){return this.y-this._radius},set:function(u){this.y=u+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(u){this.y=u-this._radius}}});a.exports=s},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){if(e.radius>0&&d>=e.left&&d<=e.right&&r>=e.top&&r<=e.bottom){var o=(e.x-d)*(e.x-d),n=(e.y-r)*(e.y-r);return o+n<=e.radius*e.radius}else return!1};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=r-d;return d+((e-d)%o+o)%o};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(39),r=1e-6,o=new e({initialize:function(f){this.val=new Float32Array(16),f?this.copy(f):this.identity()},clone:function(){return new o(this)},set:function(l){return this.copy(l)},setValues:function(l,f,v,c,p,m,y,T,E,S,P,M,O,L,F,b){var B=this.val;return B[0]=l,B[1]=f,B[2]=v,B[3]=c,B[4]=p,B[5]=m,B[6]=y,B[7]=T,B[8]=E,B[9]=S,B[10]=P,B[11]=M,B[12]=O,B[13]=L,B[14]=F,B[15]=b,this},copy:function(l){var f=l.val;return this.setValues(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])},fromArray:function(l){return this.setValues(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(l,f,v){var c=n.fromQuat(v),p=c.val,m=f.x,y=f.y,T=f.z;return this.setValues(p[0]*m,p[1]*m,p[2]*m,0,p[4]*y,p[5]*y,p[6]*y,0,p[8]*T,p[9]*T,p[10]*T,0,l.x,l.y,l.z,1)},xyz:function(l,f,v){this.identity();var c=this.val;return c[12]=l,c[13]=f,c[14]=v,this},scaling:function(l,f,v){this.zero();var c=this.val;return c[0]=l,c[5]=f,c[10]=v,c[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var l=this.val,f=l[1],v=l[2],c=l[3],p=l[6],m=l[7],y=l[11];return l[1]=l[4],l[2]=l[8],l[3]=l[12],l[4]=f,l[6]=l[9],l[7]=l[13],l[8]=v,l[9]=p,l[11]=l[14],l[12]=c,l[13]=m,l[14]=y,this},getInverse:function(l){return this.copy(l),this.invert()},invert:function(){var l=this.val,f=l[0],v=l[1],c=l[2],p=l[3],m=l[4],y=l[5],T=l[6],E=l[7],S=l[8],P=l[9],M=l[10],O=l[11],L=l[12],F=l[13],b=l[14],B=l[15],U=f*y-v*m,X=f*T-c*m,W=f*E-p*m,Z=v*T-c*y,J=v*E-p*y,N=c*E-p*T,I=S*F-P*L,G=S*b-M*L,V=S*B-O*L,Y=P*b-M*F,z=P*B-O*F,H=M*B-O*b,$=U*H-X*z+W*Y+Z*V-J*G+N*I;return $?($=1/$,this.setValues((y*H-T*z+E*Y)*$,(c*z-v*H-p*Y)*$,(F*N-b*J+B*Z)*$,(M*J-P*N-O*Z)*$,(T*V-m*H-E*G)*$,(f*H-c*V+p*G)*$,(b*W-L*N-B*X)*$,(S*N-M*W+O*X)*$,(m*z-y*V+E*I)*$,(v*V-f*z-p*I)*$,(L*J-F*W+B*U)*$,(P*W-S*J-O*U)*$,(y*G-m*Y-T*I)*$,(f*Y-v*G+c*I)*$,(F*X-L*Z-b*U)*$,(S*Z-P*X+M*U)*$)):this},adjoint:function(){var l=this.val,f=l[0],v=l[1],c=l[2],p=l[3],m=l[4],y=l[5],T=l[6],E=l[7],S=l[8],P=l[9],M=l[10],O=l[11],L=l[12],F=l[13],b=l[14],B=l[15];return this.setValues(y*(M*B-O*b)-P*(T*B-E*b)+F*(T*O-E*M),-(v*(M*B-O*b)-P*(c*B-p*b)+F*(c*O-p*M)),v*(T*B-E*b)-y*(c*B-p*b)+F*(c*E-p*T),-(v*(T*O-E*M)-y*(c*O-p*M)+P*(c*E-p*T)),-(m*(M*B-O*b)-S*(T*B-E*b)+L*(T*O-E*M)),f*(M*B-O*b)-S*(c*B-p*b)+L*(c*O-p*M),-(f*(T*B-E*b)-m*(c*B-p*b)+L*(c*E-p*T)),f*(T*O-E*M)-m*(c*O-p*M)+S*(c*E-p*T),m*(P*B-O*F)-S*(y*B-E*F)+L*(y*O-E*P),-(f*(P*B-O*F)-S*(v*B-p*F)+L*(v*O-p*P)),f*(y*B-E*F)-m*(v*B-p*F)+L*(v*E-p*y),-(f*(y*O-E*P)-m*(v*O-p*P)+S*(v*E-p*y)),-(m*(P*b-M*F)-S*(y*b-T*F)+L*(y*M-T*P)),f*(P*b-M*F)-S*(v*b-c*F)+L*(v*M-c*P),-(f*(y*b-T*F)-m*(v*b-c*F)+L*(v*T-c*y)),f*(y*M-T*P)-m*(v*M-c*P)+S*(v*T-c*y))},determinant:function(){var l=this.val,f=l[0],v=l[1],c=l[2],p=l[3],m=l[4],y=l[5],T=l[6],E=l[7],S=l[8],P=l[9],M=l[10],O=l[11],L=l[12],F=l[13],b=l[14],B=l[15],U=f*y-v*m,X=f*T-c*m,W=f*E-p*m,Z=v*T-c*y,J=v*E-p*y,N=c*E-p*T,I=S*F-P*L,G=S*b-M*L,V=S*B-O*L,Y=P*b-M*F,z=P*B-O*F,H=M*B-O*b;return U*H-X*z+W*Y+Z*V-J*G+N*I},multiply:function(l){var f=this.val,v=f[0],c=f[1],p=f[2],m=f[3],y=f[4],T=f[5],E=f[6],S=f[7],P=f[8],M=f[9],O=f[10],L=f[11],F=f[12],b=f[13],B=f[14],U=f[15],X=l.val,W=X[0],Z=X[1],J=X[2],N=X[3];return f[0]=W*v+Z*y+J*P+N*F,f[1]=W*c+Z*T+J*M+N*b,f[2]=W*p+Z*E+J*O+N*B,f[3]=W*m+Z*S+J*L+N*U,W=X[4],Z=X[5],J=X[6],N=X[7],f[4]=W*v+Z*y+J*P+N*F,f[5]=W*c+Z*T+J*M+N*b,f[6]=W*p+Z*E+J*O+N*B,f[7]=W*m+Z*S+J*L+N*U,W=X[8],Z=X[9],J=X[10],N=X[11],f[8]=W*v+Z*y+J*P+N*F,f[9]=W*c+Z*T+J*M+N*b,f[10]=W*p+Z*E+J*O+N*B,f[11]=W*m+Z*S+J*L+N*U,W=X[12],Z=X[13],J=X[14],N=X[15],f[12]=W*v+Z*y+J*P+N*F,f[13]=W*c+Z*T+J*M+N*b,f[14]=W*p+Z*E+J*O+N*B,f[15]=W*m+Z*S+J*L+N*U,this},multiplyLocal:function(l){var f=this.val,v=l.val;return this.setValues(f[0]*v[0]+f[1]*v[4]+f[2]*v[8]+f[3]*v[12],f[0]*v[1]+f[1]*v[5]+f[2]*v[9]+f[3]*v[13],f[0]*v[2]+f[1]*v[6]+f[2]*v[10]+f[3]*v[14],f[0]*v[3]+f[1]*v[7]+f[2]*v[11]+f[3]*v[15],f[4]*v[0]+f[5]*v[4]+f[6]*v[8]+f[7]*v[12],f[4]*v[1]+f[5]*v[5]+f[6]*v[9]+f[7]*v[13],f[4]*v[2]+f[5]*v[6]+f[6]*v[10]+f[7]*v[14],f[4]*v[3]+f[5]*v[7]+f[6]*v[11]+f[7]*v[15],f[8]*v[0]+f[9]*v[4]+f[10]*v[8]+f[11]*v[12],f[8]*v[1]+f[9]*v[5]+f[10]*v[9]+f[11]*v[13],f[8]*v[2]+f[9]*v[6]+f[10]*v[10]+f[11]*v[14],f[8]*v[3]+f[9]*v[7]+f[10]*v[11]+f[11]*v[15],f[12]*v[0]+f[13]*v[4]+f[14]*v[8]+f[15]*v[12],f[12]*v[1]+f[13]*v[5]+f[14]*v[9]+f[15]*v[13],f[12]*v[2]+f[13]*v[6]+f[14]*v[10]+f[15]*v[14],f[12]*v[3]+f[13]*v[7]+f[14]*v[11]+f[15]*v[15])},premultiply:function(l){return this.multiplyMatrices(l,this)},multiplyMatrices:function(l,f){var v=l.val,c=f.val,p=v[0],m=v[4],y=v[8],T=v[12],E=v[1],S=v[5],P=v[9],M=v[13],O=v[2],L=v[6],F=v[10],b=v[14],B=v[3],U=v[7],X=v[11],W=v[15],Z=c[0],J=c[4],N=c[8],I=c[12],G=c[1],V=c[5],Y=c[9],z=c[13],H=c[2],$=c[6],Q=c[10],k=c[14],tt=c[3],it=c[7],st=c[11],ot=c[15];return this.setValues(p*Z+m*G+y*H+T*tt,E*Z+S*G+P*H+M*tt,O*Z+L*G+F*H+b*tt,B*Z+U*G+X*H+W*tt,p*J+m*V+y*$+T*it,E*J+S*V+P*$+M*it,O*J+L*V+F*$+b*it,B*J+U*V+X*$+W*it,p*N+m*Y+y*Q+T*st,E*N+S*Y+P*Q+M*st,O*N+L*Y+F*Q+b*st,B*N+U*Y+X*Q+W*st,p*I+m*z+y*k+T*ot,E*I+S*z+P*k+M*ot,O*I+L*z+F*k+b*ot,B*I+U*z+X*k+W*ot)},translate:function(l){return this.translateXYZ(l.x,l.y,l.z)},translateXYZ:function(l,f,v){var c=this.val;return c[12]=c[0]*l+c[4]*f+c[8]*v+c[12],c[13]=c[1]*l+c[5]*f+c[9]*v+c[13],c[14]=c[2]*l+c[6]*f+c[10]*v+c[14],c[15]=c[3]*l+c[7]*f+c[11]*v+c[15],this},scale:function(l){return this.scaleXYZ(l.x,l.y,l.z)},scaleXYZ:function(l,f,v){var c=this.val;return c[0]=c[0]*l,c[1]=c[1]*l,c[2]=c[2]*l,c[3]=c[3]*l,c[4]=c[4]*f,c[5]=c[5]*f,c[6]=c[6]*f,c[7]=c[7]*f,c[8]=c[8]*v,c[9]=c[9]*v,c[10]=c[10]*v,c[11]=c[11]*v,this},makeRotationAxis:function(l,f){var v=Math.cos(f),c=Math.sin(f),p=1-v,m=l.x,y=l.y,T=l.z,E=p*m,S=p*y;return this.setValues(E*m+v,E*y-c*T,E*T+c*y,0,E*y+c*T,S*y+v,S*T-c*m,0,E*T-c*y,S*T+c*m,p*T*T+v,0,0,0,0,1)},rotate:function(l,f){var v=this.val,c=f.x,p=f.y,m=f.z,y=Math.sqrt(c*c+p*p+m*m);if(Math.abs(y)<r)return this;y=1/y,c*=y,p*=y,m*=y;var T=Math.sin(l),E=Math.cos(l),S=1-E,P=v[0],M=v[1],O=v[2],L=v[3],F=v[4],b=v[5],B=v[6],U=v[7],X=v[8],W=v[9],Z=v[10],J=v[11],N=v[12],I=v[13],G=v[14],V=v[15],Y=c*c*S+E,z=p*c*S+m*T,H=m*c*S-p*T,$=c*p*S-m*T,Q=p*p*S+E,k=m*p*S+c*T,tt=c*m*S+p*T,it=p*m*S-c*T,st=m*m*S+E;return this.setValues(P*Y+F*z+X*H,M*Y+b*z+W*H,O*Y+B*z+Z*H,L*Y+U*z+J*H,P*$+F*Q+X*k,M*$+b*Q+W*k,O*$+B*Q+Z*k,L*$+U*Q+J*k,P*tt+F*it+X*st,M*tt+b*it+W*st,O*tt+B*it+Z*st,L*tt+U*it+J*st,N,I,G,V)},rotateX:function(l){var f=this.val,v=Math.sin(l),c=Math.cos(l),p=f[4],m=f[5],y=f[6],T=f[7],E=f[8],S=f[9],P=f[10],M=f[11];return f[4]=p*c+E*v,f[5]=m*c+S*v,f[6]=y*c+P*v,f[7]=T*c+M*v,f[8]=E*c-p*v,f[9]=S*c-m*v,f[10]=P*c-y*v,f[11]=M*c-T*v,this},rotateY:function(l){var f=this.val,v=Math.sin(l),c=Math.cos(l),p=f[0],m=f[1],y=f[2],T=f[3],E=f[8],S=f[9],P=f[10],M=f[11];return f[0]=p*c-E*v,f[1]=m*c-S*v,f[2]=y*c-P*v,f[3]=T*c-M*v,f[8]=p*v+E*c,f[9]=m*v+S*c,f[10]=y*v+P*c,f[11]=T*v+M*c,this},rotateZ:function(l){var f=this.val,v=Math.sin(l),c=Math.cos(l),p=f[0],m=f[1],y=f[2],T=f[3],E=f[4],S=f[5],P=f[6],M=f[7];return f[0]=p*c+E*v,f[1]=m*c+S*v,f[2]=y*c+P*v,f[3]=T*c+M*v,f[4]=E*c-p*v,f[5]=S*c-m*v,f[6]=P*c-y*v,f[7]=M*c-T*v,this},fromRotationTranslation:function(l,f){var v=l.x,c=l.y,p=l.z,m=l.w,y=v+v,T=c+c,E=p+p,S=v*y,P=v*T,M=v*E,O=c*T,L=c*E,F=p*E,b=m*y,B=m*T,U=m*E;return this.setValues(1-(O+F),P+U,M-B,0,P-U,1-(S+F),L+b,0,M+B,L-b,1-(S+O),0,f.x,f.y,f.z,1)},fromQuat:function(l){var f=l.x,v=l.y,c=l.z,p=l.w,m=f+f,y=v+v,T=c+c,E=f*m,S=f*y,P=f*T,M=v*y,O=v*T,L=c*T,F=p*m,b=p*y,B=p*T;return this.setValues(1-(M+L),S+B,P-b,0,S-B,1-(E+L),O+F,0,P+b,O-F,1-(E+M),0,0,0,0,1)},frustum:function(l,f,v,c,p,m){var y=1/(f-l),T=1/(c-v),E=1/(p-m);return this.setValues(p*2*y,0,0,0,0,p*2*T,0,0,(f+l)*y,(c+v)*T,(m+p)*E,-1,0,0,m*p*2*E,0)},perspective:function(l,f,v,c){var p=1/Math.tan(l/2),m=1/(v-c);return this.setValues(p/f,0,0,0,0,p,0,0,0,0,(c+v)*m,-1,0,0,2*c*v*m,0)},perspectiveLH:function(l,f,v,c){return this.setValues(2*v/l,0,0,0,0,2*v/f,0,0,0,0,-c/(v-c),1,0,0,v*c/(v-c),0)},ortho:function(l,f,v,c,p,m){var y=l-f,T=v-c,E=p-m;return y=y===0?y:1/y,T=T===0?T:1/T,E=E===0?E:1/E,this.setValues(-2*y,0,0,0,0,-2*T,0,0,0,0,2*E,0,(l+f)*y,(c+v)*T,(m+p)*E,1)},lookAtRH:function(l,f,v){var c=this.val;return h.subVectors(l,f),h.getLengthSquared()===0&&(h.z=1),h.normalize(),s.crossVectors(v,h),s.getLengthSquared()===0&&(Math.abs(v.z)===1?h.x+=1e-4:h.z+=1e-4,h.normalize(),s.crossVectors(v,h)),s.normalize(),u.crossVectors(h,s),c[0]=s.x,c[1]=s.y,c[2]=s.z,c[4]=u.x,c[5]=u.y,c[6]=u.z,c[8]=h.x,c[9]=h.y,c[10]=h.z,this},lookAt:function(l,f,v){var c=l.x,p=l.y,m=l.z,y=v.x,T=v.y,E=v.z,S=f.x,P=f.y,M=f.z;if(Math.abs(c-S)<r&&Math.abs(p-P)<r&&Math.abs(m-M)<r)return this.identity();var O=c-S,L=p-P,F=m-M,b=1/Math.sqrt(O*O+L*L+F*F);O*=b,L*=b,F*=b;var B=T*F-E*L,U=E*O-y*F,X=y*L-T*O;b=Math.sqrt(B*B+U*U+X*X),b?(b=1/b,B*=b,U*=b,X*=b):(B=0,U=0,X=0);var W=L*X-F*U,Z=F*B-O*X,J=O*U-L*B;return b=Math.sqrt(W*W+Z*Z+J*J),b?(b=1/b,W*=b,Z*=b,J*=b):(W=0,Z=0,J=0),this.setValues(B,W,O,0,U,Z,L,0,X,J,F,0,-(B*c+U*p+X*m),-(W*c+Z*p+J*m),-(O*c+L*p+F*m),1)},yawPitchRoll:function(l,f,v){this.zero(),n.zero(),i.zero();var c=this.val,p=n.val,m=i.val,y=Math.sin(v),T=Math.cos(v);return c[10]=1,c[15]=1,c[0]=T,c[1]=y,c[4]=-y,c[5]=T,y=Math.sin(f),T=Math.cos(f),p[0]=1,p[15]=1,p[5]=T,p[10]=T,p[9]=-y,p[6]=y,y=Math.sin(l),T=Math.cos(l),m[5]=1,m[15]=1,m[0]=T,m[2]=-y,m[8]=y,m[10]=T,this.multiplyLocal(n),this.multiplyLocal(i),this},setWorldMatrix:function(l,f,v,c,p){return this.yawPitchRoll(l.y,l.x,l.z),n.scaling(v.x,v.y,v.z),i.xyz(f.x,f.y,f.z),this.multiplyLocal(n),this.multiplyLocal(i),c&&this.multiplyLocal(c),p&&this.multiplyLocal(p),this},multiplyToMat4:function(l,f){var v=this.val,c=l.val,p=v[0],m=v[1],y=v[2],T=v[3],E=v[4],S=v[5],P=v[6],M=v[7],O=v[8],L=v[9],F=v[10],b=v[11],B=v[12],U=v[13],X=v[14],W=v[15],Z=c[0],J=c[1],N=c[2],I=c[3],G=c[4],V=c[5],Y=c[6],z=c[7],H=c[8],$=c[9],Q=c[10],k=c[11],tt=c[12],it=c[13],st=c[14],ot=c[15];return f.setValues(Z*p+J*E+N*O+I*B,J*m+J*S+N*L+I*U,N*y+J*P+N*F+I*X,I*T+J*M+N*b+I*W,G*p+V*E+Y*O+z*B,G*m+V*S+Y*L+z*U,G*y+V*P+Y*F+z*X,G*T+V*M+Y*b+z*W,H*p+$*E+Q*O+k*B,H*m+$*S+Q*L+k*U,H*y+$*P+Q*F+k*X,H*T+$*M+Q*b+k*W,tt*p+it*E+st*O+ot*B,tt*m+it*S+st*L+ot*U,tt*y+it*P+st*F+ot*X,tt*T+it*M+st*b+ot*W)},fromRotationXYTranslation:function(l,f,v){var c=f.x,p=f.y,m=f.z,y=Math.sin(l.x),T=Math.cos(l.x),E=Math.sin(l.y),S=Math.cos(l.y),P=c,M=p,O=m,L=-y,F=0-L*E,b=0-T*E,B=L*S,U=T*S;return v||(P=S*c+E*m,M=F*c+T*p+B*m,O=b*c+y*p+U*m),this.setValues(S,F,b,0,0,T,y,0,E,B,U,0,P,M,O,1)},getMaxScaleOnAxis:function(){var l=this.val,f=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],v=l[4]*l[4]+l[5]*l[5]+l[6]*l[6],c=l[8]*l[8]+l[9]*l[9]+l[10]*l[10];return Math.sqrt(Math.max(f,v,c))}}),n=new o,i=new o,s=new d,u=new d,h=new d;a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={COMPLETE:t(987),DECODED:t(988),DECODED_ALL:t(989),DESTROY:t(990),DETUNE:t(991),GLOBAL_DETUNE:t(992),GLOBAL_MUTE:t(993),GLOBAL_RATE:t(994),GLOBAL_VOLUME:t(995),LOOP:t(996),LOOPED:t(997),MUTE:t(998),PAN:t(999),PAUSE_ALL:t(1e3),PAUSE:t(1001),PLAY:t(1002),RATE:t(1003),RESUME_ALL:t(1004),RESUME:t(1005),SEEK:t(1006),STOP_ALL:t(1007),STOP:t(1008),UNLOCKED:t(1009),VOLUME:t(1010)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=new e({Extends:r,initialize:function u(h,l,f,v,c){var p="png",m;if(i(l)){var y=l;l=n(y,"key"),f=n(y,"url"),m=n(y,"normalMap"),v=n(y,"xhrSettings"),p=n(y,"extension",p),c=n(y,"frameConfig")}Array.isArray(f)&&(m=f[1],f=f[0]);var T={type:"image",cache:h.textureManager,extension:p,responseType:"blob",key:l,url:f,xhrSettings:v,config:c};if(r.call(this,h,T),m){var E=new u(h,this.key,m,v,c);E.type="normalMap",this.setLink(E),h.addFile(E)}},onProcess:function(){this.state=d.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var u=this;this.data.onload=function(){r.revokeObjectURL(u.data),u.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(u.data),u.onProcessError()},r.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var u,h=this.linkFile;h&&h.state===d.FILE_COMPLETE?(this.type==="image"?u=this.cache.addImage(this.key,this.data,h.data):u=this.cache.addImage(h.key,h.data,this.data),this.pendingDestroy(u),h.pendingDestroy(u)):h||(u=this.cache.addImage(this.key,this.data),this.pendingDestroy(u))}});o.register("image",function(u,h,l){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new s(this,u[f]));else this.addFile(new s(this,u,h,l));return this}),a.exports=s},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){d?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(164),d=t(0),r=t(11),o=t(15),n=t(1065),i=new d({Extends:o,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,n],initialize:function(u,h,l,f,v){o.call(this,u,"Sprite"),this._crop=this.resetCropObject(),this.anims=new e(this),this.setTexture(f,v),this.setPosition(h,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(s,u){this.anims.update(s,u)},play:function(s,u){return this.anims.play(s,u)},playReverse:function(s,u){return this.anims.playReverse(s,u)},playAfterDelay:function(s,u){return this.anims.playAfterDelay(s,u)},playAfterRepeat:function(s,u){return this.anims.playAfterRepeat(s,u)},chain:function(s){return this.anims.chain(s)},stop:function(){return this.anims.stop()},stopAfterDelay:function(s){return this.anims.stopAfterDelay(s)},stopAfterRepeat:function(s){return this.anims.stopAfterRepeat(s)},stopOnFrame:function(s){return this.anims.stopOnFrame(s)},toJSON:function(){return r.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});a.exports=i},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){if(!(d>=e.length)){for(var r=e.length-1,o=e[d],n=d;n<r;n++)e[n]=e[n+1];return e.length=r,o}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ADDED_TO_SCENE:t(643),DESTROY:t(644),REMOVED_FROM_SCENE:t(645),VIDEO_COMPLETE:t(646),VIDEO_CREATED:t(647),VIDEO_ERROR:t(648),VIDEO_LOOP:t(649),VIDEO_PLAY:t(650),VIDEO_SEEKED:t(651),VIDEO_SEEKING:t(652),VIDEO_STOP:t(653),VIDEO_TIMEOUT:t(654),VIDEO_UNLOCKED:t(655)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){return r===void 0&&(r=0),d===0?e:(e-=r,e=d*Math.floor(e/d),o?(r+e)/d:r+e)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d={};for(var r in e)Array.isArray(e[r])?d[r]=e[r].slice(0):d[r]=e[r];return d};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=e.length;if(d<0||d>n||d>=r||r>n||d+r>n){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(o,n){return String(o).localeCompare(n)}function e(o,n){var i=o.length;if(i<=1)return o;for(var s=new Array(i),u=1;u<i;u*=2){d(o,n,u,s);var h=o;o=s,s=h}return o}function d(o,n,i,s){var u=o.length,h=0,l=i*2,f,v,c,p,m;for(f=0;f<u;f+=l)for(v=f+i,c=v+i,v>u&&(v=u),c>u&&(c=u),p=f,m=v;;)if(p<v&&m<c)n(o[p],o[m])<=0?s[h++]=o[p++]:s[h++]=o[m++];else if(p<v)s[h++]=o[p++];else if(m<c)s[h++]=o[m++];else break}var r=function(o,n){n===void 0&&(n=t);var i=e(o,n);return i!==o&&d(i,null,o.length,o),o};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(134),d=t(205),r=function(o,n){var i=e.Power0;if(typeof o=="string")if(e.hasOwnProperty(o))i=e[o];else{var s="";o.indexOf(".")&&(s=o.substr(o.indexOf(".")+1),s.toLowerCase()==="in"?s="easeIn":s.toLowerCase()==="out"?s="easeOut":s.toLowerCase()==="inout"&&(s="easeInOut")),o=d(o.substr(0,o.indexOf(".")+1)+s),e.hasOwnProperty(o)&&(i=e[o])}else typeof o=="function"?i=o:Array.isArray(o)&&o.length;if(!n)return i;var u=n.slice(0);return u.unshift(0),function(h){return u[0]=h,i.apply(this,u)}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),d=function(r,o,n,i,s){var u=r.strokeTint,h=e.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*n);u.TL=h,u.TR=h,u.BL=h,u.BR=h;var l=o.pathData,f=l.length-1,v=o.lineWidth,c=v/2,p=l[0]-i,m=l[1]-s;o.closePath||(f-=2);for(var y=2;y<f;y+=2){var T=l[y]-i,E=l[y+1]-s;r.batchLine(p,m,T,E,c,c,v,y-2,o.closePath?y===f-1:!1),p=T,m=E}};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(115),r=t(476),o=t(477),n=t(56),i=t(47),s=t(181),u=new e({initialize:function(l,f,v,c,p,m){l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=0),this.type=n.TRIANGLE,this.x1=l,this.y1=f,this.x2=v,this.y2=c,this.x3=p,this.y3=m},contains:function(h,l){return d(this,h,l)},getPoint:function(h,l){return r(this,h,l)},getPoints:function(h,l,f){return o(this,h,l,f)},getRandomPoint:function(h){return s(this,h)},setTo:function(h,l,f,v,c,p){return h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=0),this.x1=h,this.y1=l,this.x2=f,this.y2=v,this.x3=c,this.y3=p,this},getLineA:function(h){return h===void 0&&(h=new i),h.setTo(this.x1,this.y1,this.x2,this.y2),h},getLineB:function(h){return h===void 0&&(h=new i),h.setTo(this.x2,this.y2,this.x3,this.y3),h},getLineC:function(h){return h===void 0&&(h=new i),h.setTo(this.x3,this.y3,this.x1,this.y1),h},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(h){var l=0;this.x1<=this.x2&&this.x1<=this.x3?l=this.x1-h:this.x2<=this.x1&&this.x2<=this.x3?l=this.x2-h:l=this.x3-h,this.x1-=l,this.x2-=l,this.x3-=l}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(h){var l=0;this.x1>=this.x2&&this.x1>=this.x3?l=this.x1-h:this.x2>=this.x1&&this.x2>=this.x3?l=this.x2-h:l=this.x3-h,this.x1-=l,this.x2-=l,this.x3-=l}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(h){var l=0;this.y1<=this.y2&&this.y1<=this.y3?l=this.y1-h:this.y2<=this.y1&&this.y2<=this.y3?l=this.y2-h:l=this.y3-h,this.y1-=l,this.y2-=l,this.y3-=l}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(h){var l=0;this.y1>=this.y2&&this.y1>=this.y3?l=this.y1-h:this.y2>=this.y1&&this.y2>=this.y3?l=this.y2-h:l=this.y3-h,this.y1-=l,this.y2-=l,this.y3-=l}}});a.exports=u},function(a,x){var t={};a.exports=t,function(){t.create=function(e,d){return{x:e||0,y:d||0}},t.clone=function(e){return{x:e.x,y:e.y}},t.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},t.rotate=function(e,d,r){var o=Math.cos(d),n=Math.sin(d);r||(r={});var i=e.x*o-e.y*n;return r.y=e.x*n+e.y*o,r.x=i,r},t.rotateAbout=function(e,d,r,o){var n=Math.cos(d),i=Math.sin(d);o||(o={});var s=r.x+((e.x-r.x)*n-(e.y-r.y)*i);return o.y=r.y+((e.x-r.x)*i+(e.y-r.y)*n),o.x=s,o},t.normalise=function(e){var d=t.magnitude(e);return d===0?{x:0,y:0}:{x:e.x/d,y:e.y/d}},t.dot=function(e,d){return e.x*d.x+e.y*d.y},t.cross=function(e,d){return e.x*d.y-e.y*d.x},t.cross3=function(e,d,r){return(d.x-e.x)*(r.y-e.y)-(d.y-e.y)*(r.x-e.x)},t.add=function(e,d,r){return r||(r={}),r.x=e.x+d.x,r.y=e.y+d.y,r},t.sub=function(e,d,r){return r||(r={}),r.x=e.x-d.x,r.y=e.y-d.y,r},t.mult=function(e,d){return{x:e.x*d,y:e.y*d}},t.div=function(e,d){return{x:e.x/d,y:e.y/d}},t.perp=function(e,d){return d=d===!0?-1:1,{x:d*-e.y,y:d*e.x}},t.neg=function(e){return{x:-e.x,y:-e.y}},t.angle=function(e,d){return Math.atan2(d.y-e.y,d.x-e.x)},t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]}()},function(a,x){var t={};a.exports=t,function(){t.create=function(e){var d={min:{x:0,y:0},max:{x:0,y:0}};return e&&t.update(d,e),d},t.update=function(e,d,r){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var o=0;o<d.length;o++){var n=d[o];n.x>e.max.x&&(e.max.x=n.x),n.x<e.min.x&&(e.min.x=n.x),n.y>e.max.y&&(e.max.y=n.y),n.y<e.min.y&&(e.min.y=n.y)}r&&(r.x>0?e.max.x+=r.x:e.min.x+=r.x,r.y>0?e.max.y+=r.y:e.min.y+=r.y)},t.contains=function(e,d){return d.x>=e.min.x&&d.x<=e.max.x&&d.y>=e.min.y&&d.y<=e.max.y},t.overlaps=function(e,d){return e.min.x<=d.max.x&&e.max.x>=d.min.x&&e.max.y>=d.min.y&&e.min.y<=d.max.y},t.translate=function(e,d){e.min.x+=d.x,e.max.x+=d.x,e.min.y+=d.y,e.max.y+=d.y},t.shift=function(e,d){var r=e.max.x-e.min.x,o=e.max.y-e.min.y;e.min.x=d.x,e.max.x=d.x+r,e.min.y=d.y,e.max.y=d.y+o}}()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),d=t(0),r=t(11),o=t(502),n=new d({Mixins:[r.Alpha,r.Flip,r.Visible],initialize:function(s,u,h,l,f,v,c,p){this.layer=s,this.index=u,this.x=h,this.y=l,this.width=f,this.height=v,this.right,this.bottom,this.baseWidth=c!==void 0?c:f,this.baseHeight=p!==void 0?p:v,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(i,s){return!(i<this.pixelX||s<this.pixelY||i>this.right||s>this.bottom)},copy:function(i){return this.index=i.index,this.alpha=i.alpha,this.properties=i.properties,this.visible=i.visible,this.setFlip(i.flipX,i.flipY),this.tint=i.tint,this.rotation=i.rotation,this.collideUp=i.collideUp,this.collideDown=i.collideDown,this.collideLeft=i.collideLeft,this.collideRight=i.collideRight,this.collisionCallback=i.collisionCallback,this.collisionCallbackContext=i.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(i){var s=this.tilemapLayer;return s?s.tileToWorldX(this.x,i):this.x*this.baseWidth},getRight:function(i){var s=this.tilemapLayer;return s?this.getLeft(i)+this.width*s.scaleX:this.getLeft(i)+this.width},getTop:function(i){var s=this.tilemapLayer;return s?s.tileToWorldY(this.y,i)-(this.height-this.baseHeight)*s.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(i){var s=this.tilemapLayer;return s?this.getTop(i)+this.height*s.scaleY:this.getTop(i)+this.height},getBounds:function(i,s){return s===void 0&&(s=new o),s.x=this.getLeft(),s.y=this.getTop(),s.width=this.getRight()-s.x,s.height=this.getBottom()-s.y,s},getCenterX:function(i){return(this.getLeft(i)+this.getRight(i))/2},getCenterY:function(i){return(this.getTop(i)+this.getBottom(i))/2},intersects:function(i,s,u,h){return!(u<=this.pixelX||h<=this.pixelY||i>=this.right||s>=this.bottom)},isInteresting:function(i,s){return i&&s?this.canCollide||this.hasInterestingFace:i?this.collides:s?this.hasInterestingFace:!1},resetCollision:function(i){if(i===void 0&&(i=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,i){var s=this.tilemapLayer;s&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(i,s,u,h,l){if(s===void 0&&(s=i),u===void 0&&(u=i),h===void 0&&(h=i),l===void 0&&(l=!0),this.collideLeft=i,this.collideRight=s,this.collideUp=u,this.collideDown=h,this.faceLeft=i,this.faceRight=s,this.faceTop=u,this.faceBottom=h,l){var f=this.tilemapLayer;f&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(i,s){return i===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=i,this.collisionCallbackContext=s),this},setSize:function(i,s,u,h){return i!==void 0&&(this.width=i),s!==void 0&&(this.height=s),u!==void 0&&(this.baseWidth=u),h!==void 0&&(this.baseHeight=h),this.updatePixelXY(),this},updatePixelXY:function(){var i=this.layer.orientation;if(i===e.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(i===e.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(i===e.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(i===e.HEXAGONAL){var s=this.layer.hexSideLength,u=(this.baseHeight-s)/2+s;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*u}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var i=this.layer.tilemapLayer;if(i){var s=i.gidMap[this.index];if(s)return s}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var i=this.tilemapLayer;return i?i.tilemap:null}}});a.exports=n},function(a,x,t){var e={};a.exports=e;var d=t(64),r=t(32),o=t(41),n=t(84),i=t(83),s=t(1393);(function(){e.rectangle=function(u,h,l,f,v){v=v||{};var c={label:"Rectangle Body",position:{x:u,y:h},vertices:d.fromPath("L 0 0 L "+l+" 0 L "+l+" "+f+" L 0 "+f)};if(v.chamfer){var p=v.chamfer;c.vertices=d.chamfer(c.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete v.chamfer}return o.create(r.extend({},c,v))},e.trapezoid=function(u,h,l,f,v,c){c=c||{},v*=.5;var p=(1-v*2)*l,m=l*v,y=m+p,T=y+m,E;v<.5?E="L 0 0 L "+m+" "+-f+" L "+y+" "+-f+" L "+T+" 0":E="L 0 0 L "+y+" "+-f+" L "+T+" 0";var S={label:"Trapezoid Body",position:{x:u,y:h},vertices:d.fromPath(E)};if(c.chamfer){var P=c.chamfer;S.vertices=d.chamfer(S.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete c.chamfer}return o.create(r.extend({},S,c))},e.circle=function(u,h,l,f,v){f=f||{};var c={label:"Circle Body",circleRadius:l};v=v||25;var p=Math.ceil(Math.max(10,Math.min(v,l)));return p%2===1&&(p+=1),e.polygon(u,h,p,l,r.extend({},c,f))},e.polygon=function(u,h,l,f,v){if(v=v||{},l<3)return e.circle(u,h,f,v);for(var c=2*Math.PI/l,p="",m=c*.5,y=0;y<l;y+=1){var T=m+y*c,E=Math.cos(T)*f,S=Math.sin(T)*f;p+="L "+E.toFixed(3)+" "+S.toFixed(3)+" "}var P={label:"Polygon Body",position:{x:u,y:h},vertices:d.fromPath(p)};if(v.chamfer){var M=v.chamfer;P.vertices=d.chamfer(P.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete v.chamfer}return o.create(r.extend({},P,v))},e.fromVertices=function(u,h,l,f,v,c,p){var m,y,T,E,S,P;for(f=f||{},y=[],v=typeof v<"u"?v:!1,c=typeof c<"u"?c:.01,p=typeof p<"u"?p:10,s||r.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),r.isArray(l[0])||(l=[l]),P=0;P<l.length;P+=1)if(E=l[P],T=d.isConvex(E),T||!s)T?E=d.clockwiseSort(E):E=d.hull(E),y.push({position:{x:u,y:h},vertices:E});else{var M=E.map(function(b){return[b.x,b.y]});s.makeCCW(M),c!==!1&&s.removeCollinearPoints(M,c);var O=s.quickDecomp(M);for(S=0;S<O.length;S++){var L=O[S],F=L.map(function(b){return{x:b[0],y:b[1]}});p>0&&d.area(F)<p||y.push({position:d.centre(F),vertices:F})}}for(S=0;S<y.length;S++)y[S]=o.create(r.extend(y[S],f));return v&&e.flagCoincidentParts(y,5),y.length>1?(m=o.create(r.extend({parts:y.slice(0)},f)),o.setPosition(m,{x:u,y:h}),m):y[0]},e.flagCoincidentParts=function(u,h){h===void 0&&(h=5);for(var l=0;l<u.length;l++)for(var f=u[l],v=l+1;v<u.length;v++){var c=u[v];if(n.overlaps(f.bounds,c.bounds))for(var p=f.vertices,m=c.vertices,y=0;y<f.vertices.length;y++)for(var T=0;T<c.vertices.length;T++){var E=i.magnitudeSquared(i.sub(p[(y+1)%p.length],m[T])),S=i.magnitudeSquared(i.sub(p[y],m[(T+1)%m.length]));E<h&&S<h&&(p[y].isInternal=!0,m[T].isInternal=!0)}}return u}})()},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x-e.width*e.originX+e.width*.5};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.width*e.originX;return e.x=d+r-e.width*.5,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.y-e.height*e.originY+e.height*.5};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.height*e.originY;return e.y=d+r-e.height*.5,e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={POST_RENDER:t(628),PRE_RENDER:t(629),RENDER:t(630),RESIZE:t(631)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(74),d=function(r,o,n,i){i===void 0&&(i=r);var s;if(!Array.isArray(o))return s=r.indexOf(o),s!==-1?(e(r,s),n&&n.call(i,o),o):null;for(var u=o.length-1,h=[];u>=0;){var l=o[u];s=r.indexOf(l),s!==-1&&(e(r,s),h.push(l),n&&n.call(i,l)),u--}return h};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(199),r=t(10),o=t(3),n=new e({initialize:function(s){this.type=s,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(i,s){return s===void 0&&(s=32),i.strokePoints(this.getPoints(s))},getBounds:function(i,s){i||(i=new r),s===void 0&&(s=16);var u=this.getLength();s>u&&(s=u/2);var h=Math.max(1,Math.round(u/s));return d(this.getSpacedPoints(h),i)},getDistancePoints:function(i){var s=this.getLength(),u=Math.max(1,s/i);return this.getSpacedPoints(u)},getEndPoint:function(i){return i===void 0&&(i=new o),this.getPointAt(1,i)},getLength:function(){var i=this.getLengths();return i[i.length-1]},getLengths:function(i){if(i===void 0&&(i=this.arcLengthDivisions),this.cacheArcLengths.length===i+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var s=[],u,h=this.getPoint(0,this._tmpVec2A),l=0;s.push(0);for(var f=1;f<=i;f++)u=this.getPoint(f/i,this._tmpVec2B),l+=u.distance(h),s.push(l),h.copy(u);return this.cacheArcLengths=s,s},getPointAt:function(i,s){var u=this.getUtoTmapping(i);return this.getPoint(u,s)},getPoints:function(i,s,u){u===void 0&&(u=[]),i||(s?i=this.getLength()/s:i=this.defaultDivisions);for(var h=0;h<=i;h++)u.push(this.getPoint(h/i));return u},getRandomPoint:function(i){return i===void 0&&(i=new o),this.getPoint(Math.random(),i)},getSpacedPoints:function(i,s,u){u===void 0&&(u=[]),i||(s?i=this.getLength()/s:i=this.defaultDivisions);for(var h=0;h<=i;h++){var l=this.getUtoTmapping(h/i,null,i);u.push(this.getPoint(l))}return u},getStartPoint:function(i){return i===void 0&&(i=new o),this.getPointAt(0,i)},getTangent:function(i,s){s===void 0&&(s=new o);var u=1e-4,h=i-u,l=i+u;return h<0&&(h=0),l>1&&(l=1),this.getPoint(h,this._tmpVec2A),this.getPoint(l,s),s.subtract(this._tmpVec2A).normalize()},getTangentAt:function(i,s){var u=this.getUtoTmapping(i);return this.getTangent(u,s)},getTFromDistance:function(i,s){return i<=0?0:this.getUtoTmapping(0,i,s)},getUtoTmapping:function(i,s,u){var h=this.getLengths(u),l=0,f=h.length,v;s?v=Math.min(s,h[f-1]):v=i*h[f-1];for(var c=0,p=f-1,m;c<=p;)if(l=Math.floor(c+(p-c)/2),m=h[l]-v,m<0)c=l+1;else if(m>0)p=l-1;else{p=l;break}if(l=p,h[l]===v)return l/(f-1);var y=h[l],T=h[l+1],E=T-y,S=(v-y)/E;return(l+S)/(f-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ADD:t(968),COMPLETE:t(969),FILE_COMPLETE:t(970),FILE_KEY_COMPLETE:t(971),FILE_LOAD_ERROR:t(972),FILE_LOAD:t(973),FILE_PROGRESS:t(974),POST_PROCESS:t(975),PROGRESS:t(976),START:t(977)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o,n){n===void 0&&(n=new e);var i=r.x1,s=r.y1,u=r.x2,h=r.y2,l=o.x1,f=o.y1,v=o.x2,c=o.y2,p=(v-l)*(s-f)-(c-f)*(i-l),m=(u-i)*(s-f)-(h-s)*(i-l),y=(c-f)*(u-i)-(v-l)*(h-s);if(y===0)return!1;var T=p/y,E=m/y;return T>=0&&T<=1&&E>=0&&E<=1?(n.x=i+T*(u-i),n.y=s+T*(h-s),!0):!1};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),d=function(r,o,n){return r=e(r,0,1),(n-o)*r+o};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return e&&e.hasOwnProperty(d)?e[d]:r};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(315),r=new e({initialize:function(n,i){this.parent=n,this.events=i,i||(this.events=n.events?n.events:n),this.list={},this.values={},this._frozen=!1,!n.hasOwnProperty("sys")&&this.events&&this.events.once(d.DESTROY,this.destroy,this)},get:function(o){var n=this.list;if(Array.isArray(o)){for(var i=[],s=0;s<o.length;s++)i.push(n[o[s]]);return i}else return n[o]},getAll:function(){var o={};for(var n in this.list)this.list.hasOwnProperty(n)&&(o[n]=this.list[n]);return o},query:function(o){var n={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(o)&&(n[i]=this.list[i]);return n},set:function(o,n){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,n);for(var i in o)this.setValue(i,o[i]);return this},inc:function(o,n){if(this._frozen)return this;n===void 0&&(n=1);var i=this.get(o);return i===void 0&&(i=0),this.set(o,i+n),this},toggle:function(o){return this._frozen?this:(this.set(o,!this.get(o)),this)},setValue:function(o,n){if(this._frozen)return this;if(this.has(o))this.values[o]=n;else{var i=this,s=this.list,u=this.events,h=this.parent;Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return s[o]},set:function(l){if(!i._frozen){var f=s[o];s[o]=l,u.emit(d.CHANGE_DATA,h,o,l,f),u.emit(d.CHANGE_DATA_KEY+o,h,l,f)}}}),s[o]=n,u.emit(d.SET_DATA,h,o,n)}return this},each:function(o,n){for(var i=[this.parent,null,void 0],s=1;s<arguments.length;s++)i.push(arguments[s]);for(var u in this.list)i[1]=u,i[2]=this.list[u],o.apply(n,i);return this},merge:function(o,n){n===void 0&&(n=!0);for(var i in o)o.hasOwnProperty(i)&&(n||!n&&!this.has(i))&&this.setValue(i,o[i]);return this},remove:function(o){if(this._frozen)return this;if(Array.isArray(o))for(var n=0;n<o.length;n++)this.removeValue(o[n]);else return this.removeValue(o);return this},removeValue:function(o){if(this.has(o)){var n=this.list[o];delete this.list[o],delete this.values[o],this.events.emit(d.REMOVE_DATA,this.parent,o,n)}return this},pop:function(o){var n=void 0;return!this._frozen&&this.has(o)&&(n=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(d.REMOVE_DATA,this.parent,o,n)),n},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(d.CHANGE_DATA),this.events.off(d.SET_DATA),this.events.off(d.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var n in this.list)this.list[n]!==void 0&&o++;return o}}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o){if(this.entries={},this.size=0,Array.isArray(o))for(var n=0;n<o.length;n++)this.set(o[n][0],o[n][1])},set:function(r,o){return this.has(r)||this.size++,this.entries[r]=o,this},get:function(r){if(this.has(r))return this.entries[r]},getArray:function(){var r=[],o=this.entries;for(var n in o)r.push(o[n]);return r},has:function(r){return this.entries.hasOwnProperty(r)},delete:function(r){return this.has(r)&&(delete this.entries[r],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(r){delete this.entries[r]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var r=[],o=this.entries;for(var n in o)r.push(o[n]);return r},dump:function(){var r=this.entries;console.group("Map");for(var o in r)console.log(o,r[o]);console.groupEnd()},each:function(r){var o=this.entries;for(var n in o)if(r(n,o[n])===!1)break;return this},contains:function(r){var o=this.entries;for(var n in o)if(o[n]===r)return!0;return!1},merge:function(r,o){o===void 0&&(o=!1);var n=this.entries,i=r.entries;for(var s in i)n.hasOwnProperty(s)&&o?n[s]=i[s]:this.set(s,i[s]);return this}});a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return e<<16|d<<8|r};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ENTER_FULLSCREEN:t(800),FULLSCREEN_FAILED:t(801),FULLSCREEN_UNSUPPORTED:t(802),LEAVE_FULLSCREEN:t(803),ORIENTATION_CHANGE:t(804),RESIZE:t(805)}},function(a,x,t){(function(e){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var d={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function r(){if(typeof importScripts=="function")return d;var o=navigator.userAgent;/Windows/.test(o)?d.windows=!0:/Mac OS/.test(o)&&!/like Mac OS/.test(o)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(d.iOS=!0,d.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),d.iOSVersion=parseInt(RegExp.$1,10)):d.macOS=!0:/Android/.test(o)?d.android=!0:/Linux/.test(o)?d.linux=!0:/iP[ao]d|iPhone/i.test(o)?(d.iOS=!0,navigator.appVersion.match(/OS (\d+)/),d.iOSVersion=parseInt(RegExp.$1,10),d.iPhone=o.toLowerCase().indexOf("iphone")!==-1,d.iPad=o.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(o)||/\bKF[A-Z][A-Z]+/.test(o)||/Silk.*Mobile Safari/.test(o)?d.kindle=!0:/CrOS/.test(o)&&(d.chromeOS=!0),(/Windows Phone/i.test(o)||/IEMobile/i.test(o))&&(d.android=!1,d.iOS=!1,d.macOS=!1,d.windows=!0,d.windowsPhone=!0);var n=/Silk/.test(o);return(d.windows||d.macOS||d.linux&&!n||d.chromeOS)&&(d.desktop=!0),(d.windowsPhone||/Windows NT/i.test(o)&&/Touch/i.test(o))&&(d.desktop=!1),navigator.standalone&&(d.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(d.cordova=!0),window.ejecta!==void 0&&(d.ejecta=!0)),typeof e<"u"&&e.versions&&e.versions.node&&(d.node=!0),d.node&&typeof e.versions=="object"&&(d.nodeWebkit=!!e.versions["node-webkit"],d.electron=!!e.versions.electron),/Crosswalk/.test(o)&&(d.crosswalk=!0),d.pixelRatio=window.devicePixelRatio||1,d}a.exports=r()}).call(this,t(807))},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ADD:t(861),ERROR:t(862),LOAD:t(863),READY:t(864),REMOVE:t(865)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(59),r=t(2),o=t(878),n=t(879),i=t(25),s=t(12),u=t(107),h=t(58),l=new e({Extends:h,initialize:function(v){var c=v.game.renderer,p=r(v,"fragShader",o);v.fragShader=s.parseFragmentShaderMaxTextures(p,c.maxTextures),v.vertShader=r(v,"vertShader",n),v.attributes=r(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:u.UNSIGNED_BYTE,normalized:!0}]),h.call(this,v),this._tempMatrix1=new i,this._tempMatrix2=new i,this._tempMatrix3=new i,this.calcMatrix=new i,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){h.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(f,v,c){this.manager.set(this,f);var p=this._tempMatrix1,m=this._tempMatrix2,y=this._tempMatrix3,T=f.frame,E=T.glTexture,S=T.u0,P=T.v0,M=T.u1,O=T.v1,L=T.x,F=T.y,b=T.cutWidth,B=T.cutHeight,U=T.customPivot,X=f.displayOriginX,W=f.displayOriginY,Z=-X+L,J=-W+F;if(f.isCropped){var N=f._crop;(N.flipX!==f.flipX||N.flipY!==f.flipY)&&T.updateCropUVs(N,f.flipX,f.flipY),S=N.u0,P=N.v0,M=N.u1,O=N.v1,b=N.width,B=N.height,L=N.x,F=N.y,Z=-X+L,J=-W+F}var I=1,G=1;f.flipX&&(U||(Z+=-T.realWidth+X*2),I=-1),(f.flipY||T.source.isGLTexture&&!E.flipY)&&(U||(J+=-T.realHeight+W*2),G=-1),m.applyITRS(f.x,f.y,f.rotation,f.scaleX*I,f.scaleY*G),p.copyFrom(v.matrix),c?(p.multiplyWithOffset(c,-v.scrollX*f.scrollFactorX,-v.scrollY*f.scrollFactorY),m.e=f.x,m.f=f.y):(m.e-=v.scrollX*f.scrollFactorX,m.f-=v.scrollY*f.scrollFactorY),p.multiply(m,y);var V=Z+b,Y=J+B,z=v.roundPixels,H=y.getXRound(Z,J,z),$=y.getYRound(Z,J,z),Q=y.getXRound(Z,Y,z),k=y.getYRound(Z,Y,z),tt=y.getXRound(V,Y,z),it=y.getYRound(V,Y,z),st=y.getXRound(V,J,z),ot=y.getYRound(V,J,z),rt=s.getTintAppendFloatAlpha,ut=v.alpha,gt=rt(f.tintTopLeft,ut*f._alphaTL),mt=rt(f.tintTopRight,ut*f._alphaTR),dt=rt(f.tintBottomLeft,ut*f._alphaBL),at=rt(f.tintBottomRight,ut*f._alphaBR);this.shouldFlush(6)&&this.flush();var Rt=this.setGameObject(f,T);this.manager.preBatch(f),this.batchQuad(f,H,$,Q,k,tt,it,st,ot,S,P,M,O,gt,mt,dt,at,f.tintFill,E,Rt),this.manager.postBatch(f)},batchTexture:function(f,v,c,p,m,y,T,E,S,P,M,O,L,F,b,B,U,X,W,Z,J,N,I,G,V,Y,z,H,$,Q,k,tt){this.manager.set(this,f);var it=this._tempMatrix1,st=this._tempMatrix2,ot=this._tempMatrix3,rt=X/c+z,ut=W/p+H,gt=(X+Z)/c+z,mt=(W+J)/p+H,dt=T,at=E,Rt=-B,ct=-U;if(f.isCropped){var yt=f._crop,$t=yt.width,q=yt.height;dt=$t,at=q,T=$t,E=q,X=yt.x,W=yt.y;var et=X,nt=W;O&&(et=Z-yt.x-$t),L&&(nt=J-yt.y-q),rt=et/c+z,ut=nt/p+H,gt=(et+$t)/c+z,mt=(nt+q)/p+H,Rt=-B+X,ct=-U+W}L=L^(!k&&v.isRenderTexture?1:0),O&&(dt*=-1,Rt+=T),L&&(at*=-1,ct+=E);var ht=Rt+dt,ft=ct+at;st.applyITRS(m,y,M,S,P),it.copyFrom($.matrix),Q?(it.multiplyWithOffset(Q,-$.scrollX*F,-$.scrollY*b),st.e=m,st.f=y):(st.e-=$.scrollX*F,st.f-=$.scrollY*b),it.multiply(st,ot);var Mt=$.roundPixels,pt=ot.getXRound(Rt,ct,Mt),Et=ot.getYRound(Rt,ct,Mt),vt=ot.getXRound(Rt,ft,Mt),Ct=ot.getYRound(Rt,ft,Mt),At=ot.getXRound(ht,ft,Mt),Ut=ot.getYRound(ht,ft,Mt),Qt=ot.getXRound(ht,ct,Mt),Ze=ot.getYRound(ht,ct,Mt);tt===void 0&&(tt=this.renderer.setTexture2D(v)),f&&this.manager.preBatch(f),this.batchQuad(f,pt,Et,vt,Ct,At,Ut,Qt,Ze,rt,ut,gt,mt,N,I,G,V,Y,v,tt),f&&this.manager.postBatch(f)},batchTextureFrame:function(f,v,c,p,m,y,T){this.manager.set(this);var E=this._tempMatrix1.copyFrom(y),S=this._tempMatrix2,P=v+f.width,M=c+f.height;T?E.multiply(T,S):S=E;var O=S.getX(v,c),L=S.getY(v,c),F=S.getX(v,M),b=S.getY(v,M),B=S.getX(P,M),U=S.getY(P,M),X=S.getX(P,c),W=S.getY(P,c),Z=this.renderer.setTextureSource(f.source);p=s.getTintAppendFloatAlpha(p,m),this.batchQuad(null,O,L,F,b,B,U,X,W,f.u0,f.v0,f.u1,f.v1,p,p,p,p,0,f.glTexture,Z)},batchFillRect:function(f,v,c,p,m,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(m,T);var E=f+c,S=v+p,P=T.getX(f,v),M=T.getY(f,v),O=T.getX(f,S),L=T.getY(f,S),F=T.getX(E,S),b=T.getY(E,S),B=T.getX(E,v),U=T.getY(E,v),X=this.fillTint;this.batchQuad(null,P,M,O,L,F,b,B,U,0,0,1,1,X.TL,X.TR,X.BL,X.BR,2)},batchFillTriangle:function(f,v,c,p,m,y,T,E){this.renderer.pipelines.set(this);var S=this.calcMatrix;E&&E.multiply(T,S);var P=S.getX(f,v),M=S.getY(f,v),O=S.getX(c,p),L=S.getY(c,p),F=S.getX(m,y),b=S.getY(m,y),B=this.fillTint;this.batchTri(null,P,M,O,L,F,b,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(f,v,c,p,m,y,T,E,S){var P=this.tempTriangle;P[0].x=f,P[0].y=v,P[0].width=T,P[1].x=c,P[1].y=p,P[1].width=T,P[2].x=m,P[2].y=y,P[2].width=T,P[3].x=f,P[3].y=v,P[3].width=T,this.batchStrokePath(P,T,!1,E,S)},batchFillPath:function(f,v,c){this.renderer.pipelines.set(this);var p=this.calcMatrix;c&&c.multiply(v,p);for(var m=f.length,y=this.polygonCache,T,E,S=this.fillTint.TL,P=this.fillTint.TR,M=this.fillTint.BL,O=0;O<m;++O)E=f[O],y.push(E.x,E.y);T=d(y),m=T.length;for(var L=0;L<m;L+=3){var F=T[L+0]*2,b=T[L+1]*2,B=T[L+2]*2,U=y[F+0],X=y[F+1],W=y[b+0],Z=y[b+1],J=y[B+0],N=y[B+1],I=p.getX(U,X),G=p.getY(U,X),V=p.getX(W,Z),Y=p.getY(W,Z),z=p.getX(J,N),H=p.getY(J,N);this.batchTri(null,I,G,V,Y,z,H,0,0,1,1,S,P,M,2)}y.length=0},batchStrokePath:function(f,v,c,p,m){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=f.length-1,T=0;T<y;T++){var E=f[T],S=f[T+1];this.batchLine(E.x,E.y,S.x,S.y,E.width/2,S.width/2,v,T,!c&&T===y-1,p,m)}},batchLine:function(f,v,c,p,m,y,T,E,S,P,M){this.renderer.pipelines.set(this);var O=this.calcMatrix;M&&M.multiply(P,O);var L=c-f,F=p-v,b=Math.sqrt(L*L+F*F),B=m*(p-v)/b,U=m*(f-c)/b,X=y*(p-v)/b,W=y*(f-c)/b,Z=c-X,J=p-W,N=f-B,I=v-U,G=c+X,V=p+W,Y=f+B,z=v+U,H=O.getX(Z,J),$=O.getY(Z,J),Q=O.getX(N,I),k=O.getY(N,I),tt=O.getX(G,V),it=O.getY(G,V),st=O.getX(Y,z),ot=O.getY(Y,z),rt=this.strokeTint,ut=rt.TL,gt=rt.TR,mt=rt.BL,dt=rt.BR;if(this.batchQuad(null,st,ot,Q,k,H,$,tt,it,0,0,1,1,ut,gt,mt,dt,2),!(T<=2)){var at=this.prevQuad,Rt=this.firstQuad;E>0&&at[4]?this.batchQuad(null,st,ot,Q,k,at[0],at[1],at[2],at[3],0,0,1,1,ut,gt,mt,dt,2):(Rt[0]=st,Rt[1]=ot,Rt[2]=Q,Rt[3]=k,Rt[4]=1),S&&Rt[4]?this.batchQuad(null,H,$,tt,it,Rt[0],Rt[1],Rt[2],Rt[3],0,0,1,1,ut,gt,mt,dt,2):(at[0]=H,at[1]=$,at[2]=tt,at[3]=it,at[4]=1)}}});a.exports=l},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(18),r=t(17),o=new e({initialize:function(i,s,u,h,l,f,v){this.texture=i,this.name=s,this.source=i.source[u],this.sourceIndex=u,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(f,v,h,l)},setSize:function(n,i,s,u){s===void 0&&(s=0),u===void 0&&(u=0),this.cutX=s,this.cutY=u,this.cutWidth=n,this.cutHeight=i,this.width=n,this.height=i,this.halfWidth=Math.floor(n*.5),this.halfHeight=Math.floor(i*.5),this.centerX=Math.floor(n/2),this.centerY=Math.floor(i/2);var h=this.data,l=h.cut;l.x=s,l.y=u,l.w=n,l.h=i,l.r=s+n,l.b=u+i,h.sourceSize.w=n,h.sourceSize.h=i,h.spriteSourceSize.w=n,h.spriteSourceSize.h=i,h.radius=.5*Math.sqrt(n*n+i*i);var f=h.drawImage;return f.x=s,f.y=u,f.width=n,f.height=i,this.updateUVs()},setTrim:function(n,i,s,u,h,l){var f=this.data,v=f.spriteSourceSize;return f.trim=!0,f.sourceSize.w=n,f.sourceSize.h=i,v.x=s,v.y=u,v.w=h,v.h=l,v.r=s+h,v.b=u+l,this.x=s,this.y=u,this.width=h,this.height=l,this.halfWidth=h*.5,this.halfHeight=l*.5,this.centerX=Math.floor(h/2),this.centerY=Math.floor(l/2),this.updateUVs()},setCropUVs:function(n,i,s,u,h,l,f){var v=this.cutX,c=this.cutY,p=this.cutWidth,m=this.cutHeight,y=this.realWidth,T=this.realHeight;i=d(i,0,y),s=d(s,0,T),u=d(u,0,y-i),h=d(h,0,T-s);var E=v+i,S=c+s,P=u,M=h,O=this.data;if(O.trim){var L=O.spriteSourceSize;u=d(u,0,p-i),h=d(h,0,m-s);var F=i+u,b=s+h,B=!(L.r<i||L.b<s||L.x>F||L.y>b);if(B){var U=Math.max(L.x,i),X=Math.max(L.y,s),W=Math.min(L.r,F)-U,Z=Math.min(L.b,b)-X;P=W,M=Z,l?E=v+(p-(U-L.x)-W):E=v+(U-L.x),f?S=c+(m-(X-L.y)-Z):S=c+(X-L.y),i=U,s=X,u=W,h=Z}else E=0,S=0,P=0,M=0}else l&&(E=v+(p-i-u)),f&&(S=c+(m-s-h));var J=this.source.width,N=this.source.height;return n.u0=Math.max(0,E/J),n.v0=Math.max(0,S/N),n.u1=Math.min(1,(E+P)/J),n.v1=Math.min(1,(S+M)/N),n.x=i,n.y=s,n.cx=E,n.cy=S,n.cw=P,n.ch=M,n.width=u,n.height=h,n.flipX=l,n.flipY=f,n},updateCropUVs:function(n,i,s){return this.setCropUVs(n,n.x,n.y,n.width,n.height,i,s)},setUVs:function(n,i,s,u,h,l){var f=this.data.drawImage;return f.width=n,f.height=i,this.u0=s,this.v0=u,this.u1=h,this.v1=l,this},updateUVs:function(){var n=this.cutX,i=this.cutY,s=this.cutWidth,u=this.cutHeight,h=this.data.drawImage;h.width=s,h.height=u;var l=this.source.width,f=this.source.height;return this.u0=n/l,this.v0=i/f,this.u1=(n+s)/l,this.v1=(i+u)/f,this},updateUVsInverted:function(){var n=this.source.width,i=this.source.height;return this.u0=(this.cutX+this.cutHeight)/n,this.v0=this.cutY/i,this.u1=this.cutX/n,this.v1=(this.cutY+this.cutWidth)/i,this},clone:function(){var n=new o(this.texture,this.name,this.sourceIndex);return n.cutX=this.cutX,n.cutY=this.cutY,n.cutWidth=this.cutWidth,n.cutHeight=this.cutHeight,n.x=this.x,n.y=this.y,n.width=this.width,n.height=this.height,n.halfWidth=this.halfWidth,n.halfHeight=this.halfHeight,n.centerX=this.centerX,n.centerY=this.centerY,n.rotated=this.rotated,n.data=r(!0,n.data,this.data),n.updateUVs(),n},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(208),d=t(0),r=t(1),o=t(79),n=new d({initialize:function(s){this.parent=s,this.list=[],this.position=0,this.addCallback=r,this.removeCallback=r,this._sortKey=""},add:function(i,s){return s?e.Add(this.list,i):e.Add(this.list,i,0,this.addCallback,this)},addAt:function(i,s,u){return u?e.AddAt(this.list,i,s):e.AddAt(this.list,i,s,0,this.addCallback,this)},getAt:function(i){return this.list[i]},getIndex:function(i){return this.list.indexOf(i)},sort:function(i,s){return i?(s===void 0&&(s=function(u,h){return u[i]-h[i]}),o(this.list,s),this):this},getByName:function(i){return e.GetFirst(this.list,"name",i)},getRandom:function(i,s){return e.GetRandom(this.list,i,s)},getFirst:function(i,s,u,h){return e.GetFirst(this.list,i,s,u,h)},getAll:function(i,s,u,h){return e.GetAll(this.list,i,s,u,h)},count:function(i,s){return e.CountAllMatching(this.list,i,s)},swap:function(i,s){e.Swap(this.list,i,s)},moveTo:function(i,s){return e.MoveTo(this.list,i,s)},moveAbove:function(i,s){return e.MoveAbove(this.list,i,s)},moveBelow:function(i,s){return e.MoveBelow(this.list,i,s)},remove:function(i,s){return s?e.Remove(this.list,i):e.Remove(this.list,i,this.removeCallback,this)},removeAt:function(i,s){return s?e.RemoveAt(this.list,i):e.RemoveAt(this.list,i,this.removeCallback,this)},removeBetween:function(i,s,u){return u?e.RemoveBetween(this.list,i,s):e.RemoveBetween(this.list,i,s,this.removeCallback,this)},removeAll:function(i){for(var s=this.list.length;s--;)this.remove(this.list[s],i);return this},bringToTop:function(i){return e.BringToTop(this.list,i)},sendToBack:function(i){return e.SendToBack(this.list,i)},moveUp:function(i){return e.MoveUp(this.list,i),i},moveDown:function(i){return e.MoveDown(this.list,i),i},reverse:function(){return this.list.reverse(),this},shuffle:function(){return e.Shuffle(this.list),this},replace:function(i,s){return e.Replace(this.list,i,s)},exists:function(i){return this.list.indexOf(i)>-1},setAll:function(i,s,u,h){return e.SetAll(this.list,i,s,u,h),this},each:function(i,s){for(var u=[null],h=2;h<arguments.length;h++)u.push(arguments[h]);for(h=0;h<this.list.length;h++)u[0]=this.list[h],i.apply(s,u)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(112),r=t(445),o=t(446),n=t(56),i=t(180),s=new e({initialize:function(h,l,f,v){h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=0),this.type=n.ELLIPSE,this.x=h,this.y=l,this.width=f,this.height=v},contains:function(u,h){return d(this,u,h)},getPoint:function(u,h){return r(this,u,h)},getPoints:function(u,h,l){return o(this,u,h,l)},getRandomPoint:function(u){return i(this,u)},setTo:function(u,h,l,f){return this.x=u,this.y=h,this.width=l,this.height=f,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(u,h){return h===void 0&&(h=u),this.x=u,this.y=h,this},setSize:function(u,h){return h===void 0&&(h=u),this.width=u,this.height=h,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(u){this.x=u+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(u){this.x=u-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(u){this.y=u+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(u){this.y=u-this.height/2}}});a.exports=s},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){if(e.width<=0||e.height<=0)return!1;var o=(d-e.x)/e.width,n=(r-e.y)/e.height;return o*=o,n*=n,o+n<.25};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(275),d=t(0),r=t(75),o=t(9),n=t(207),i=t(2),s=t(6),u=t(7),h=t(437),l=t(149),f=t(73),v=new d({Extends:o,initialize:function(p,m,y){o.call(this),y?m&&!Array.isArray(m)&&(m=[m]):Array.isArray(m)?u(m[0])&&(y=m,m=null):u(m)&&(y=m,m=null),this.scene=p,this.children=new l,this.isParent=!0,this.type="Group",this.classType=i(y,"classType",f),this.name=i(y,"name",""),this.active=i(y,"active",!0),this.maxSize=i(y,"maxSize",-1),this.defaultKey=i(y,"defaultKey",null),this.defaultFrame=i(y,"defaultFrame",null),this.runChildUpdate=i(y,"runChildUpdate",!1),this.createCallback=i(y,"createCallback",null),this.removeCallback=i(y,"removeCallback",null),this.createMultipleCallback=i(y,"createMultipleCallback",null),this.internalCreateCallback=i(y,"internalCreateCallback",null),this.internalRemoveCallback=i(y,"internalRemoveCallback",null),m&&this.addMultiple(m),y&&this.createMultiple(y),this.on(r.ADDED_TO_SCENE,this.addedToScene,this),this.on(r.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(c,p,m,y,T,E){if(c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=this.defaultKey),y===void 0&&(y=this.defaultFrame),T===void 0&&(T=!0),E===void 0&&(E=!0),this.isFull())return null;var S=new this.classType(this.scene,c,p,m,y);return S.addToDisplayList(this.scene.sys.displayList),S.addToUpdateList(),S.visible=T,S.setActive(E),this.add(S),S},createMultiple:function(c){if(this.isFull())return[];Array.isArray(c)||(c=[c]);var p=[];if(c[0].key)for(var m=0;m<c.length;m++){var y=this.createFromConfig(c[m]);p=p.concat(y)}return p},createFromConfig:function(c){if(this.isFull())return[];this.classType=i(c,"classType",this.classType);var p=i(c,"key",void 0),m=i(c,"frame",null),y=i(c,"visible",!0),T=i(c,"active",!0),E=[];if(p===void 0)return E;Array.isArray(p)||(p=[p]),Array.isArray(m)||(m=[m]);var S=i(c,"repeat",0),P=i(c,"randomKey",!1),M=i(c,"randomFrame",!1),O=i(c,"yoyo",!1),L=i(c,"quantity",!1),F=i(c,"frameQuantity",1),b=i(c,"max",0),B=h(p,m,{max:b,qty:L||F,random:P,randomB:M,repeat:S,yoyo:O});c.createCallback&&(this.createCallback=c.createCallback),c.removeCallback&&(this.removeCallback=c.removeCallback);for(var U=0;U<B.length;U++){var X=this.create(0,0,B[U].a,B[U].b,y,T);if(!X)break;E.push(X)}var W=s(c,"setXY.x",0),Z=s(c,"setXY.y",0),J=s(c,"setXY.stepX",0),N=s(c,"setXY.stepY",0);e.SetXY(E,W,Z,J,N);var I=s(c,"setRotation.value",0),G=s(c,"setRotation.step",0);e.SetRotation(E,I,G);var V=s(c,"setScale.x",1),Y=s(c,"setScale.y",V),z=s(c,"setScale.stepX",0),H=s(c,"setScale.stepY",0);e.SetScale(E,V,Y,z,H);var $=s(c,"setOrigin.x",.5),Q=s(c,"setOrigin.y",$),k=s(c,"setOrigin.stepX",0),tt=s(c,"setOrigin.stepY",0);e.SetOrigin(E,$,Q,k,tt);var it=s(c,"setAlpha.value",1),st=s(c,"setAlpha.step",0);e.SetAlpha(E,it,st);var ot=s(c,"setDepth.value",0),rt=s(c,"setDepth.step",0);e.SetDepth(E,ot,rt);var ut=s(c,"setScrollFactor.x",1),gt=s(c,"setScrollFactor.y",ut),mt=s(c,"setScrollFactor.stepX",0),dt=s(c,"setScrollFactor.stepY",0);e.SetScrollFactor(E,ut,gt,mt,dt);var at=i(c,"hitArea",null),Rt=i(c,"hitAreaCallback",null);at&&e.SetHitArea(E,at,Rt);var ct=i(c,"gridAlign",!1);return ct&&e.GridAlign(E,ct),this.createMultipleCallback&&this.createMultipleCallback.call(this,E),E},preUpdate:function(c,p){if(!(!this.runChildUpdate||this.children.size===0))for(var m=this.children.entries.slice(),y=0;y<m.length;y++){var T=m[y];T.active&&T.update(c,p)}},add:function(c,p){return p===void 0&&(p=!1),this.isFull()?this:(this.children.set(c),this.internalCreateCallback&&this.internalCreateCallback.call(this,c),this.createCallback&&this.createCallback.call(this,c),p&&(c.addToDisplayList(this.scene.sys.displayList),c.addToUpdateList()),c.on(r.DESTROY,this.remove,this),this)},addMultiple:function(c,p){if(p===void 0&&(p=!1),Array.isArray(c))for(var m=0;m<c.length;m++)this.add(c[m],p);return this},remove:function(c,p,m){return p===void 0&&(p=!1),m===void 0&&(m=!1),this.children.contains(c)?(this.children.delete(c),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,c),this.removeCallback&&this.removeCallback.call(this,c),c.off(r.DESTROY,this.remove,this),m?c.destroy():p&&(c.removeFromDisplayList(),c.removeFromUpdateList()),this):this},clear:function(c,p){c===void 0&&(c=!1),p===void 0&&(p=!1);for(var m=this.children,y=0;y<m.size;y++){var T=m.entries[y];T.off(r.DESTROY,this.remove,this),p?T.destroy():c&&(T.removeFromDisplayList(),T.removeFromUpdateList())}return this.children.clear(),this},contains:function(c){return this.children.contains(c)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(c,p,m,y){return n(this.children.entries,c,p,m,y)},getFirst:function(c,p,m,y,T,E,S){return this.getHandler(!0,1,c,p,m,y,T,E,S)},getFirstNth:function(c,p,m,y,T,E,S,P){return this.getHandler(!0,c,p,m,y,T,E,S,P)},getLast:function(c,p,m,y,T,E,S){return this.getHandler(!1,1,c,p,m,y,T,E,S)},getLastNth:function(c,p,m,y,T,E,S,P){return this.getHandler(!1,c,p,m,y,T,E,S,P)},getHandler:function(c,p,m,y,T,E,S,P,M){m===void 0&&(m=!1),y===void 0&&(y=!1);var O,L,F=0,b=this.children.entries;if(c)for(L=0;L<b.length;L++)if(O=b[L],O.active===m){if(F++,F===p)break}else O=null;else for(L=b.length-1;L>=0;L--)if(O=b[L],O.active===m){if(F++,F===p)break}else O=null;return O?(typeof T=="number"&&(O.x=T),typeof E=="number"&&(O.y=E),O):y?this.create(T,E,S,P,M):null},get:function(c,p,m,y,T){return this.getFirst(!1,!0,c,p,m,y,T)},getFirstAlive:function(c,p,m,y,T,E){return this.getFirst(!0,c,p,m,y,T,E)},getFirstDead:function(c,p,m,y,T,E){return this.getFirst(!1,c,p,m,y,T,E)},playAnimation:function(c,p){return e.PlayAnimation(this.children.entries,c,p),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(c){c===void 0&&(c=!0);for(var p=0,m=0;m<this.children.size;m++)this.children.entries[m].active===c&&p++;return p},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var c=this.getTotalUsed(),p=this.maxSize===-1?999999999999:this.maxSize;return p-c},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},propertyValueSet:function(c,p,m,y,T){return e.PropertyValueSet(this.children.entries,c,p,m,y,T),this},propertyValueInc:function(c,p,m,y,T){return e.PropertyValueInc(this.children.entries,c,p,m,y,T),this},setX:function(c,p){return e.SetX(this.children.entries,c,p),this},setY:function(c,p){return e.SetY(this.children.entries,c,p),this},setXY:function(c,p,m,y){return e.SetXY(this.children.entries,c,p,m,y),this},incX:function(c,p){return e.IncX(this.children.entries,c,p),this},incY:function(c,p){return e.IncY(this.children.entries,c,p),this},incXY:function(c,p,m,y){return e.IncXY(this.children.entries,c,p,m,y),this},shiftPosition:function(c,p,m){return e.ShiftPosition(this.children.entries,c,p,m),this},angle:function(c,p){return e.Angle(this.children.entries,c,p),this},rotate:function(c,p){return e.Rotate(this.children.entries,c,p),this},rotateAround:function(c,p){return e.RotateAround(this.children.entries,c,p),this},rotateAroundDistance:function(c,p,m){return e.RotateAroundDistance(this.children.entries,c,p,m),this},setAlpha:function(c,p){return e.SetAlpha(this.children.entries,c,p),this},setTint:function(c,p,m,y){return e.SetTint(this.children.entries,c,p,m,y),this},setOrigin:function(c,p,m,y){return e.SetOrigin(this.children.entries,c,p,m,y),this},scaleX:function(c,p){return e.ScaleX(this.children.entries,c,p),this},scaleY:function(c,p){return e.ScaleY(this.children.entries,c,p),this},scaleXY:function(c,p,m,y){return e.ScaleXY(this.children.entries,c,p,m,y),this},setDepth:function(c,p){return e.SetDepth(this.children.entries,c,p),this},setBlendMode:function(c){return e.SetBlendMode(this.children.entries,c),this},setHitArea:function(c,p){return e.SetHitArea(this.children.entries,c,p),this},shuffle:function(){return e.Shuffle(this.children.entries),this},kill:function(c){this.children.contains(c)&&c.setActive(!1)},killAndHide:function(c){this.children.contains(c)&&(c.setActive(!1),c.setVisible(!1))},setVisible:function(c,p,m){return e.SetVisible(this.children.entries,c,p,m),this},toggleVisible:function(){return e.ToggleVisible(this.children.entries),this},destroy:function(c,p){c===void 0&&(c=!1),p===void 0&&(p=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(r.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(p,c),this.scene=void 0,this.children=void 0)}});a.exports=v},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),d=function(r,o,n,i,s,u){for(var h=e.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*i),l=n.pathData,f=n.pathIndexes,v=0;v<f.length;v+=3){var c=f[v]*2,p=f[v+1]*2,m=f[v+2]*2,y=l[c+0]-s,T=l[c+1]-u,E=l[p+0]-s,S=l[p+1]-u,P=l[m+0]-s,M=l[m+1]-u,O=o.getX(y,T),L=o.getY(y,T),F=o.getX(E,S),b=o.getY(E,S),B=o.getX(P,M),U=o.getY(P,M);r.batchTri(n,O,L,F,b,B,U,0,0,1,1,h,h,h,2)}};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=e.x3-e.x1,n=e.y3-e.y1,i=e.x2-e.x1,s=e.y2-e.y1,u=d-e.x1,h=r-e.y1,l=o*o+n*n,f=o*i+n*s,v=o*u+n*h,c=i*i+s*s,p=i*u+s*h,m=l*c-f*f,y=m===0?0:1/m,T=(c*v-f*p)*y,E=(l*p-f*v)*y;return T>=0&&E>=0&&T+E<1};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(10),r=t(3);function o(i,s,u,h){var l=i-u,f=s-h,v=l*l+f*f;return Math.sqrt(v)}var n=new e({initialize:function(s,u,h){this.vertex1=s,this.vertex2=u,this.vertex3=h,this.bounds=new d,this._inCenter=new r},getInCenter:function(i){i===void 0&&(i=!0);var s=this.vertex1,u=this.vertex2,h=this.vertex3,l,f,v,c,p,m;i?(l=s.x,f=s.y,v=u.x,c=u.y,p=h.x,m=h.y):(l=s.vx,f=s.vy,v=u.vx,c=u.vy,p=h.vx,m=h.vy);var y=o(p,m,v,c),T=o(l,f,p,m),E=o(v,c,l,f),S=y+T+E;return this._inCenter.set((l*y+v*T+p*E)/S,(f*y+c*T+m*E)/S)},contains:function(i,s,u){var h=this.vertex1,l=this.vertex2,f=this.vertex3,v=h.vx,c=h.vy,p=l.vx,m=l.vy,y=f.vx,T=f.vy;if(u){var E=u.a,S=u.b,P=u.c,M=u.d,O=u.e,L=u.f;v=h.vx*E+h.vy*P+O,c=h.vx*S+h.vy*M+L,p=l.vx*E+l.vy*P+O,m=l.vx*S+l.vy*M+L,y=f.vx*E+f.vy*P+O,T=f.vx*S+f.vy*M+L}var F=y-v,b=T-c,B=p-v,U=m-c,X=i-v,W=s-c,Z=F*F+b*b,J=F*B+b*U,N=F*X+b*W,I=B*B+U*U,G=B*X+U*W,V=Z*I-J*J,Y=V===0?0:1/V,z=(I*N-J*G)*Y,H=(Z*G-J*N)*Y;return z>=0&&H>=0&&z+H<1},isCounterClockwise:function(i){var s=this.vertex1,u=this.vertex2,h=this.vertex3,l=(u.vx-s.vx)*(h.vy-s.vy)-(u.vy-s.vy)*(h.vx-s.vx);return i<=0?l>=0:l<0},load:function(i,s,u,h,l){return u=this.vertex1.load(i,s,u,h,l),u=this.vertex2.load(i,s,u,h,l),u=this.vertex3.load(i,s,u,h,l),u},transformCoordinatesLocal:function(i,s,u,h){return this.vertex1.transformCoordinatesLocal(i,s,u,h),this.vertex2.transformCoordinatesLocal(i,s,u,h),this.vertex3.transformCoordinatesLocal(i,s,u,h),this},updateBounds:function(){var i=this.vertex1,s=this.vertex2,u=this.vertex3,h=this.bounds;return h.x=Math.min(i.vx,s.vx,u.vx),h.y=Math.min(i.vy,s.vy,u.vy),h.width=Math.max(i.vx,s.vx,u.vx)-h.x,h.height=Math.max(i.vy,s.vy,u.vy)-h.y,this},isInView:function(i,s,u,h,l,f,v,c,p,m,y){var T=this.vertex1.update(l,f,v,c,p,m,y,h),E=this.vertex2.update(l,f,v,c,p,m,y,h),S=this.vertex3.update(l,f,v,c,p,m,y,h);if(T.ta<=0&&E.ta<=0&&S.ta<=0||s&&!this.isCounterClockwise(u))return!1;var P=this.bounds;P.x=Math.min(T.tx,E.tx,S.tx),P.y=Math.min(T.ty,E.ty,S.ty),P.width=Math.max(T.tx,E.tx,S.tx)-P.x,P.height=Math.max(T.ty,E.ty,S.ty)-P.y;var M=i.x+i.width,O=i.y+i.height;return P.width<=0||P.height<=0||i.width<=0||i.height<=0?!1:!(P.right<i.x||P.bottom<i.y||P.x>M||P.y>O)},translate:function(i,s){s===void 0&&(s=0);var u=this.vertex1,h=this.vertex2,l=this.vertex3;return u.x+=i,u.y+=s,h.x+=i,h.y+=s,l.x+=i,l.y+=s,this},x:{get:function(){return this.getInCenter().x},set:function(i){var s=this.getInCenter();this.translate(i-s.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(i){var s=this.getInCenter();this.translate(0,i-s.y)}},alpha:{get:function(){var i=this.vertex1,s=this.vertex2,u=this.vertex3;return(i.alpha+s.alpha+u.alpha)/3},set:function(i){this.vertex1.alpha=i,this.vertex2.alpha=i,this.vertex3.alpha=i}},depth:{get:function(){var i=this.vertex1,s=this.vertex2,u=this.vertex3;return(i.vz+s.vz+u.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(12),r=t(39),o=new e({Extends:r,initialize:function(i,s,u,h,l,f,v,c,p,m){f===void 0&&(f=16777215),v===void 0&&(v=1),c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=0),r.call(this,i,s,u),this.vx=0,this.vy=0,this.vz=0,this.nx=c,this.ny=p,this.nz=m,this.u=h,this.v=l,this.color=f,this.alpha=v,this.tx=0,this.ty=0,this.ta=0},setUVs:function(n,i){return this.u=n,this.v=i,this},transformCoordinatesLocal:function(n,i,s,u){var h=this.x,l=this.y,f=this.z,v=n.val,c=h*v[0]+l*v[4]+f*v[8]+v[12],p=h*v[1]+l*v[5]+f*v[9]+v[13],m=h*v[2]+l*v[6]+f*v[10]+v[14],y=h*v[3]+l*v[7]+f*v[11]+v[15];this.vx=c/y*i,this.vy=-(p/y)*s,u<=0?this.vz=m/y:this.vz=-(m/y)},update:function(n,i,s,u,h,l,f,v){var c=this.vx*n+this.vy*s+h,p=this.vx*i+this.vy*u+l;return f&&(c=Math.round(c),p=Math.round(p)),this.tx=c,this.ty=p,this.ta=this.alpha*v,this},load:function(n,i,s,u,h){return n[++s]=this.tx,n[++s]=this.ty,n[++s]=this.u,n[++s]=this.v,n[++s]=u,n[++s]=h,i[++s]=d.getTintAppendFloatAlpha(this.color,this.ta),s}});a.exports=o},function(a,x,t){var e={};a.exports=e;var d=t(166),r=t(32),o=t(84),n=t(41);(function(){e.create=function(i){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},i)},e.setModified=function(i,s,u,h){if(d.trigger(i,"compositeModified",i),i.isModified=s,u&&i.parent&&e.setModified(i.parent,s,u,h),h)for(var l=0;l<i.composites.length;l++){var f=i.composites[l];e.setModified(f,s,u,h)}},e.add=function(i,s){var u=[].concat(s);d.trigger(i,"beforeAdd",{object:s});for(var h=0;h<u.length;h++){var l=u[h];switch(l.type){case"body":if(l.parent!==l){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(i,l);break;case"constraint":e.addConstraint(i,l);break;case"composite":e.addComposite(i,l);break;case"mouseConstraint":e.addConstraint(i,l.constraint);break}}return d.trigger(i,"afterAdd",{object:s}),i},e.remove=function(i,s,u){var h=[].concat(s);d.trigger(i,"beforeRemove",{object:s});for(var l=0;l<h.length;l++){var f=h[l];switch(f.type){case"body":e.removeBody(i,f,u);break;case"constraint":e.removeConstraint(i,f,u);break;case"composite":e.removeComposite(i,f,u);break;case"mouseConstraint":e.removeConstraint(i,f.constraint);break}}return d.trigger(i,"afterRemove",{object:s}),i},e.addComposite=function(i,s){return i.composites.push(s),s.parent=i,e.setModified(i,!0,!0,!1),i},e.removeComposite=function(i,s,u){var h=i.composites.indexOf(s);if(h!==-1&&(e.removeCompositeAt(i,h),e.setModified(i,!0,!0,!1)),u)for(var l=0;l<i.composites.length;l++)e.removeComposite(i.composites[l],s,!0);return i},e.removeCompositeAt=function(i,s){return i.composites.splice(s,1),e.setModified(i,!0,!0,!1),i},e.addBody=function(i,s){return i.bodies.push(s),e.setModified(i,!0,!0,!1),i},e.removeBody=function(i,s,u){var h=i.bodies.indexOf(s);if(h!==-1&&(e.removeBodyAt(i,h),e.setModified(i,!0,!0,!1)),u)for(var l=0;l<i.composites.length;l++)e.removeBody(i.composites[l],s,!0);return i},e.removeBodyAt=function(i,s){return i.bodies.splice(s,1),e.setModified(i,!0,!0,!1),i},e.addConstraint=function(i,s){return i.constraints.push(s),e.setModified(i,!0,!0,!1),i},e.removeConstraint=function(i,s,u){var h=i.constraints.indexOf(s);if(h!==-1&&e.removeConstraintAt(i,h),u)for(var l=0;l<i.composites.length;l++)e.removeConstraint(i.composites[l],s,!0);return i},e.removeConstraintAt=function(i,s){return i.constraints.splice(s,1),e.setModified(i,!0,!0,!1),i},e.clear=function(i,s,u){if(u)for(var h=0;h<i.composites.length;h++)e.clear(i.composites[h],s,!0);return s?i.bodies=i.bodies.filter(function(l){return l.isStatic}):i.bodies.length=0,i.constraints.length=0,i.composites.length=0,e.setModified(i,!0,!0,!1),i},e.allBodies=function(i){for(var s=[].concat(i.bodies),u=0;u<i.composites.length;u++)s=s.concat(e.allBodies(i.composites[u]));return s},e.allConstraints=function(i){for(var s=[].concat(i.constraints),u=0;u<i.composites.length;u++)s=s.concat(e.allConstraints(i.composites[u]));return s},e.allComposites=function(i){for(var s=[].concat(i.composites),u=0;u<i.composites.length;u++)s=s.concat(e.allComposites(i.composites[u]));return s},e.get=function(i,s,u){var h,l;switch(u){case"body":h=e.allBodies(i);break;case"constraint":h=e.allConstraints(i);break;case"composite":h=e.allComposites(i).concat(i);break}return h?(l=h.filter(function(f){return f.id.toString()===s.toString()}),l.length===0?null:l[0]):null},e.move=function(i,s,u){return e.remove(i,s),e.add(u,s),i},e.rebase=function(i){for(var s=e.allBodies(i).concat(e.allConstraints(i)).concat(e.allComposites(i)),u=0;u<s.length;u++)s[u].id=r.nextId();return e.setModified(i,!0,!0,!1),i},e.translate=function(i,s,u){for(var h=u?e.allBodies(i):i.bodies,l=0;l<h.length;l++)n.translate(h[l],s);return e.setModified(i,!0,!0,!1),i},e.rotate=function(i,s,u,h){for(var l=Math.cos(s),f=Math.sin(s),v=h?e.allBodies(i):i.bodies,c=0;c<v.length;c++){var p=v[c],m=p.position.x-u.x,y=p.position.y-u.y;n.setPosition(p,{x:u.x+(m*l-y*f),y:u.y+(m*f+y*l)}),n.rotate(p,s)}return e.setModified(i,!0,!0,!1),i},e.scale=function(i,s,u,h,l){for(var f=l?e.allBodies(i):i.bodies,v=0;v<f.length;v++){var c=f[v],p=c.position.x-h.x,m=c.position.y-h.y;n.setPosition(c,{x:h.x+p*s,y:h.y+m*u}),n.scale(c,s,u)}return e.setModified(i,!0,!0,!1),i},e.bounds=function(i){for(var s=e.allBodies(i),u=[],h=0;h<s.length;h+=1){var l=s[h];u.push(l.bounds.min,l.bounds.max)}return o.create(u)}})()},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return e>=0&&e<r.width&&d>=0&&d<r.height};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(29),r=t(2),o=new e({initialize:function(i){i===void 0&&(i={}),this.name=r(i,"name","layer"),this.x=r(i,"x",0),this.y=r(i,"y",0),this.width=r(i,"width",0),this.height=r(i,"height",0),this.tileWidth=r(i,"tileWidth",0),this.tileHeight=r(i,"tileHeight",0),this.baseTileWidth=r(i,"baseTileWidth",this.tileWidth),this.baseTileHeight=r(i,"baseTileHeight",this.tileHeight),this.orientation=r(i,"orientation",d.ORTHOGONAL),this.widthInPixels=r(i,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=r(i,"heightInPixels",this.height*this.baseTileHeight),this.alpha=r(i,"alpha",1),this.visible=r(i,"visible",!0),this.properties=r(i,"properties",[]),this.indexes=r(i,"indexes",[]),this.collideIndexes=r(i,"collideIndexes",[]),this.callbacks=r(i,"callbacks",[]),this.bodies=r(i,"bodies",[]),this.data=r(i,"data",[]),this.tilemapLayer=r(i,"tilemapLayer",null),this.hexSideLength=r(i,"hexSideLength",0)}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(29),r=t(2),o=new e({initialize:function(i){i===void 0&&(i={}),this.name=r(i,"name","map"),this.width=r(i,"width",0),this.height=r(i,"height",0),this.infinite=r(i,"infinite",!1),this.tileWidth=r(i,"tileWidth",0),this.tileHeight=r(i,"tileHeight",0),this.widthInPixels=r(i,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=r(i,"heightInPixels",this.height*this.tileHeight),this.format=r(i,"format",null),this.orientation=r(i,"orientation",d.ORTHOGONAL),this.renderOrder=r(i,"renderOrder","right-down"),this.version=r(i,"version","1"),this.properties=r(i,"properties",{}),this.layers=r(i,"layers",[]),this.images=r(i,"images",[]),this.objects=r(i,"objects",{}),this.collision=r(i,"collision",{}),this.tilesets=r(i,"tilesets",[]),this.imageCollections=r(i,"imageCollections",[]),this.tiles=r(i,"tiles",[]),this.hexSideLength=r(i,"hexSideLength",0)}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o,n,i,s,u,h,l,f){(i===void 0||i<=0)&&(i=32),(s===void 0||s<=0)&&(s=32),u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l={}),f===void 0&&(f={}),this.name=o,this.firstgid=n,this.tileWidth=i,this.tileHeight=s,this.tileMargin=u,this.tileSpacing=h,this.tileProperties=l,this.tileData=f,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(r){return this.containsTileIndex(r)?this.tileProperties[r-this.firstgid]:null},getTileData:function(r){return this.containsTileIndex(r)?this.tileData[r-this.firstgid]:null},getTileCollisionGroup:function(r){var o=this.getTileData(r);return o&&o.objectgroup?o.objectgroup:null},containsTileIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},getTileTextureCoordinates:function(r){return this.containsTileIndex(r)?this.texCoordinates[r-this.firstgid]:null},setImage:function(r){return this.image=r,this.glTexture=r.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(r,o){return r!==void 0&&(this.tileWidth=r),o!==void 0&&(this.tileHeight=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(r,o){return r!==void 0&&(this.tileMargin=r),o!==void 0&&(this.tileSpacing=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(r,o){var n=(o-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),i=(r-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(n%1!==0||i%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),i=Math.floor(i),this.rows=n,this.columns=i,this.total=n*i,this.texCoordinates.length=0;for(var s=this.tileMargin,u=this.tileMargin,h=0;h<this.rows;h++){for(var l=0;l<this.columns;l++)this.texCoordinates.push({x:s,y:u}),s+=this.tileWidth+this.tileSpacing;s=this.tileMargin,u+=this.tileHeight+this.tileSpacing}return this}});a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return r===void 0&&(r=1e-4),Math.abs(e-d)<r};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(11),r=t(15),o=t(1068),n=new e({Extends:r,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Size,d.TextureCrop,d.Tint,d.Transform,d.Visible,o],initialize:function(s,u,h,l,f){r.call(this,s,"Image"),this._crop=this.resetCropObject(),this.setTexture(l,f),this.setPosition(u,h),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.hasOwnProperty(d)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),d=function(r,o){var n=e(r);for(var i in o)n.hasOwnProperty(i)||(n[i]=o[i]);return n};a.exports=d},function(a,x,t){var e={};a.exports=e;var d=t(64),r=t(83),o=t(165),n=t(84),i=t(271),s=t(32);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(u){var h=u;h.bodyA&&!h.pointA&&(h.pointA={x:0,y:0}),h.bodyB&&!h.pointB&&(h.pointB={x:0,y:0});var l=h.bodyA?r.add(h.bodyA.position,h.pointA):h.pointA,f=h.bodyB?r.add(h.bodyB.position,h.pointB):h.pointB,v=r.magnitude(r.sub(l,f));h.length=typeof h.length<"u"?h.length:v,h.id=h.id||s.nextId(),h.label=h.label||"Constraint",h.type="constraint",h.stiffness=h.stiffness||(h.length>0?1:.7),h.damping=h.damping||0,h.angularStiffness=h.angularStiffness||0,h.angleA=h.bodyA?h.bodyA.angle:h.angleA,h.angleB=h.bodyB?h.bodyB.angle:h.angleB,h.plugin={};var c={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return h.length===0&&h.stiffness>.1?(c.type="pin",c.anchors=!1):h.stiffness<.9&&(c.type="spring"),h.render=s.extend(c,h.render),h},e.preSolveAll=function(u){for(var h=0;h<u.length;h+=1){var l=u[h],f=l.constraintImpulse;l.isStatic||f.x===0&&f.y===0&&f.angle===0||(l.position.x+=f.x,l.position.y+=f.y,l.angle+=f.angle)}},e.solveAll=function(u,h){for(var l=0;l<u.length;l+=1){var f=u[l],v=!f.bodyA||f.bodyA&&f.bodyA.isStatic,c=!f.bodyB||f.bodyB&&f.bodyB.isStatic;(v||c)&&e.solve(u[l],h)}for(l=0;l<u.length;l+=1)f=u[l],v=!f.bodyA||f.bodyA&&f.bodyA.isStatic,c=!f.bodyB||f.bodyB&&f.bodyB.isStatic,!v&&!c&&e.solve(u[l],h)},e.solve=function(u,h){var l=u.bodyA,f=u.bodyB,v=u.pointA,c=u.pointB;if(!(!l&&!f)){l&&!l.isStatic&&(r.rotate(v,l.angle-u.angleA,v),u.angleA=l.angle),f&&!f.isStatic&&(r.rotate(c,f.angle-u.angleB,c),u.angleB=f.angle);var p=v,m=c;if(l&&(p=r.add(l.position,v)),f&&(m=r.add(f.position,c)),!(!p||!m)){var y=r.sub(p,m),T=r.magnitude(y);T<e._minLength&&(T=e._minLength);var E=(T-u.length)/T,S=u.stiffness<1?u.stiffness*h:u.stiffness,P=r.mult(y,E*S),M=(l?l.inverseMass:0)+(f?f.inverseMass:0),O=(l?l.inverseInertia:0)+(f?f.inverseInertia:0),L=M+O,F,b,B,U,X;if(u.damping){var W=r.create();B=r.div(y,T),X=r.sub(f&&r.sub(f.position,f.positionPrev)||W,l&&r.sub(l.position,l.positionPrev)||W),U=r.dot(B,X)}l&&!l.isStatic&&(b=l.inverseMass/M,l.constraintImpulse.x-=P.x*b,l.constraintImpulse.y-=P.y*b,l.position.x-=P.x*b,l.position.y-=P.y*b,u.damping&&(l.positionPrev.x-=u.damping*B.x*U*b,l.positionPrev.y-=u.damping*B.y*U*b),F=r.cross(v,P)/L*e._torqueDampen*l.inverseInertia*(1-u.angularStiffness),l.constraintImpulse.angle-=F,l.angle-=F),f&&!f.isStatic&&(b=f.inverseMass/M,f.constraintImpulse.x+=P.x*b,f.constraintImpulse.y+=P.y*b,f.position.x+=P.x*b,f.position.y+=P.y*b,u.damping&&(f.positionPrev.x+=u.damping*B.x*U*b,f.positionPrev.y+=u.damping*B.y*U*b),F=r.cross(c,P)/L*e._torqueDampen*f.inverseInertia*(1-u.angularStiffness),f.constraintImpulse.angle+=F,f.angle+=F)}}},e.postSolveAll=function(u){for(var h=0;h<u.length;h++){var l=u[h],f=l.constraintImpulse;if(!(l.isStatic||f.x===0&&f.y===0&&f.angle===0)){o.set(l,!1);for(var v=0;v<l.parts.length;v++){var c=l.parts[v];d.translate(c.vertices,f),v>0&&(c.position.x+=f.x,c.position.y+=f.y),f.angle!==0&&(d.rotate(c.vertices,f.angle,l.position),i.rotate(c.axes,f.angle),v>0&&r.rotateAbout(c.position,f.angle,l.position,c.position)),n.update(c.bounds,c.vertices,l.velocity)}f.angle*=e._warming,f.x*=e._warming,f.y*=e._warming}}},e.pointAWorld=function(u){return{x:(u.bodyA?u.bodyA.position.x:0)+u.pointA.x,y:(u.bodyA?u.bodyA.position.y:0)+u.pointA.y}},e.pointBWorld=function(u){return{x:(u.bodyB?u.bodyB.position.x:0)+u.pointB.x,y:(u.bodyB?u.bodyB.position.y:0)+u.pointB.y}}})()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),d=t(65),r=t(66),o=t(0),n=t(11),i=t(15),s=t(10),u=t(57),h=new o({Extends:i,Mixins:[n.Depth,n.GetBounds,n.Origin,n.Transform,n.ScrollFactor,n.Visible],initialize:function(f,v,c,p,m){p===void 0&&(p=1),m===void 0&&(m=p),i.call(this,f,"Zone"),this.setPosition(v,c),this.width=p,this.height=m,this.blendMode=e.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}},setSize:function(l,f,v){v===void 0&&(v=!0),this.width=l,this.height=f,this.updateDisplayOrigin();var c=this.input;return v&&c&&!c.customHitArea&&(c.hitArea.width=l,c.hitArea.height=f),this},setDisplaySize:function(l,f){return this.displayWidth=l,this.displayHeight=f,this},setCircleDropZone:function(l){return this.setDropZone(new d(0,0,l),r)},setRectangleDropZone:function(l,f){return this.setDropZone(new s(0,0,l,f),u)},setDropZone:function(l,f){return l===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(l,f,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(l,f,v){v.addToRenderList(f)},renderWebGL:function(l,f,v){v.addToRenderList(f)}});a.exports=h},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 2*(e.width+e.height)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var d=e.length-1;d>0;d--){var r=Math.floor(Math.random()*(d+1)),o=e[d];e[d]=e[r],e[r]=o}return e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ADD_ANIMATION:t(724),ANIMATION_COMPLETE:t(725),ANIMATION_COMPLETE_KEY:t(726),ANIMATION_REPEAT:t(727),ANIMATION_RESTART:t(728),ANIMATION_START:t(729),ANIMATION_STOP:t(730),ANIMATION_UPDATE:t(731),PAUSE_ALL:t(732),REMOVE_ANIMATION:t(733),RESUME_ALL:t(734)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(11),r=t(36),o=t(9),n=t(37),i=t(10),s=t(25),u=t(187),h=t(3),l=new e({Extends:o,Mixins:[d.Alpha,d.Visible],initialize:function(v,c,p,m){v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new i,this.dirty=!0,this._x=v,this._y=c,this._width=p,this._height=m,this._bounds=new i,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new s,this.transparent=!0,this.backgroundColor=u("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new h(p/2,m/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(f){this.renderList.push(f)},setOrigin:function(f,v){return f===void 0&&(f=.5),v===void 0&&(v=f),this.originX=f,this.originY=v,this},getScroll:function(f,v,c){c===void 0&&(c=new h);var p=this.width*.5,m=this.height*.5;return c.x=f-p,c.y=v-m,this.useBounds&&(c.x=this.clampX(c.x),c.y=this.clampY(c.y)),c},centerOnX:function(f){var v=this.width*.5;return this.midPoint.x=f,this.scrollX=f-v,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(f){var v=this.height*.5;return this.midPoint.y=f,this.scrollY=f-v,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(f,v){return this.centerOnX(f),this.centerOnY(v),this},centerToBounds:function(){if(this.useBounds){var f=this._bounds,v=this.width*.5,c=this.height*.5;this.midPoint.set(f.centerX,f.centerY),this.scrollX=f.centerX-v,this.scrollY=f.centerY-c}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(f){if(this.disableCull)return f;var v=this.matrix.matrix,c=v[0],p=v[1],m=v[2],y=v[3],T=c*y-p*m;if(!T)return f;var E=v[4],S=v[5],P=this.scrollX,M=this.scrollY,O=this.width,L=this.height,F=this.y,b=F+L,B=this.x,U=B+O,X=this.culledObjects,W=f.length;T=1/T,X.length=0;for(var Z=0;Z<W;++Z){var J=f[Z];if(!J.hasOwnProperty("width")||J.parentContainer){X.push(J);continue}var N=J.width,I=J.height,G=J.x-P*J.scrollFactorX-N*J.originX,V=J.y-M*J.scrollFactorY-I*J.originY,Y=G*c+V*m+E,z=G*p+V*y+S,H=(G+N)*c+(V+I)*m+E,$=(G+N)*p+(V+I)*y+S;H>B&&Y<U&&$>F&&z<b&&X.push(J)}return X},getWorldPoint:function(f,v,c){c===void 0&&(c=new h);var p=this.matrix.matrix,m=p[0],y=p[1],T=p[2],E=p[3],S=p[4],P=p[5],M=m*E-y*T;if(!M)return c.x=f,c.y=v,c;M=1/M;var O=E*M,L=-y*M,F=-T*M,b=m*M,B=(T*P-E*S)*M,U=(y*S-m*P)*M,X=Math.cos(this.rotation),W=Math.sin(this.rotation),Z=this.zoomX,J=this.zoomY,N=this.scrollX,I=this.scrollY,G=f+(N*X-I*W)*Z,V=v+(N*W+I*X)*J;return c.x=G*O+V*F+B,c.y=G*L+V*b+U,c},ignore:function(f){var v=this.id;Array.isArray(f)||(f=[f]);for(var c=0;c<f.length;c++){var p=f[c];Array.isArray(p)?this.ignore(p):p.isParent?this.ignore(p.getChildren()):p.cameraFilter|=v}return this},preRender:function(){this.renderList.length=0;var f=this.width,v=this.height,c=f*.5,p=v*.5,m=this.zoomX,y=this.zoomY,T=this.matrix,E=f*this.originX,S=v*this.originY,P=this.scrollX,M=this.scrollY;this.useBounds&&(P=this.clampX(P),M=this.clampY(M)),this.roundPixels&&(E=Math.round(E),S=Math.round(S)),this.scrollX=P,this.scrollY=M;var O=P+c,L=M+p;this.midPoint.set(O,L);var F=f/m,b=v/y;this.worldView.setTo(O-F/2,L-b/2,F,b),T.applyITRS(this.x+E,this.y+S,this.rotation,m,y),T.translate(-E,-S)},clampX:function(f){var v=this._bounds,c=this.displayWidth,p=v.x+(c-this.width)/2,m=Math.max(p,p+v.width-c);return f<p?f=p:f>m&&(f=m),f},clampY:function(f){var v=this._bounds,c=this.displayHeight,p=v.y+(c-this.height)/2,m=Math.max(p,p+v.height-c);return f<p?f=p:f>m&&(f=m),f},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(f){return f===void 0&&(f=0),this.rotation=r(f),this},setBackgroundColor:function(f){return f===void 0&&(f="rgba(0,0,0,0)"),this.backgroundColor=u(f),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(f,v,c,p,m){return m===void 0&&(m=!1),this._bounds.setTo(f,v,c,p),this.dirty=!0,this.useBounds=!0,m?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(f){f===void 0&&(f=new i);var v=this._bounds;return f.setTo(v.x,v.y,v.width,v.height),f},setName:function(f){return f===void 0&&(f=""),this.name=f,this},setPosition:function(f,v){return v===void 0&&(v=f),this.x=f,this.y=v,this},setRotation:function(f){return f===void 0&&(f=0),this.rotation=f,this},setRoundPixels:function(f){return this.roundPixels=f,this},setScene:function(f){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=f;var v=f.sys;return this.sceneManager=v.game.scene,this.scaleManager=v.scale,this.cameraManager=v.cameras,this.updateSystem(),this},setScroll:function(f,v){return v===void 0&&(v=f),this.scrollX=f,this.scrollY=v,this},setSize:function(f,v){return v===void 0&&(v=f),this.width=f,this.height=v,this},setViewport:function(f,v,c,p){return this.x=f,this.y=v,this.width=c,this.height=p,this},setZoom:function(f,v){return f===void 0&&(f=1),v===void 0&&(v=f),f===0&&(f=.001),v===0&&(v=.001),this.zoomX=f,this.zoomY=v,this},setMask:function(f,v){return v===void 0&&(v=!0),this.mask=f,this._maskCamera=v?this.cameraManager.default:this,this},clearMask:function(f){return f===void 0&&(f=!1),f&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var f={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(f.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),f},update:function(){},updateSystem:function(){if(this.scaleManager){var f=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,v=this.sceneManager;f&&!this._customViewport?v.customViewports++:!f&&this._customViewport&&v.customViewports--,this.dirty=!0,this._customViewport=f}},destroy:function(){this.emit(n.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(f){this._x=f,this.updateSystem()}},y:{get:function(){return this._y},set:function(f){this._y=f,this.updateSystem()}},width:{get:function(){return this._width},set:function(f){this._width=f,this.updateSystem()}},height:{get:function(){return this._height},set:function(f){this._height=f,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(f){this._scrollX=f,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(f){this._scrollY=f,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(f){this._zoomX=f,this._zoomY=f,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(f){this._zoomX=f,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(f){this._zoomY=f,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(f){this._rotation=f,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});a.exports=l},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(334),d=t(335),r=t(336),o=t(337),n=t(338),i=t(339),s=t(340),u=t(341),h=t(342),l=t(343),f=t(344),v=t(345);a.exports={Power0:s,Power1:u.Out,Power2:o.Out,Power3:h.Out,Power4:l.Out,Linear:s,Quad:u.Out,Cubic:o.Out,Quart:h.Out,Quint:l.Out,Sine:f.Out,Expo:i.Out,Circ:r.Out,Elastic:n.Out,Back:e.Out,Bounce:d.Out,Stepped:v,"Quad.easeIn":u.In,"Cubic.easeIn":o.In,"Quart.easeIn":h.In,"Quint.easeIn":l.In,"Sine.easeIn":f.In,"Expo.easeIn":i.In,"Circ.easeIn":r.In,"Elastic.easeIn":n.In,"Back.easeIn":e.In,"Bounce.easeIn":d.In,"Quad.easeOut":u.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":h.Out,"Quint.easeOut":l.Out,"Sine.easeOut":f.Out,"Expo.easeOut":i.Out,"Circ.easeOut":r.Out,"Elastic.easeOut":n.Out,"Back.easeOut":e.Out,"Bounce.easeOut":d.Out,"Quad.easeInOut":u.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":h.InOut,"Quint.easeInOut":l.InOut,"Sine.easeInOut":f.InOut,"Expo.easeInOut":i.InOut,"Circ.easeInOut":r.InOut,"Elastic.easeInOut":n.InOut,"Back.easeInOut":e.InOut,"Bounce.easeInOut":d.InOut}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return(d-e)*r+e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(105),d={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function r(){var o=navigator.userAgent;return/Edge\/\d+/.test(o)?d.edge=!0:/Chrome\/(\d+)/.test(o)&&!e.windowsPhone?(d.chrome=!0,d.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(o)?(d.firefox=!0,d.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(o)&&e.iOS?d.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(o)?(d.ie=!0,d.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(o)?d.opera=!0:/Safari/.test(o)&&!e.windowsPhone?d.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(o)&&(d.ie=!0,d.trident=!0,d.tridentVersion=parseInt(RegExp.$1,10),d.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(o)&&(d.silk=!0),d}a.exports=r()},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return Math.random()*(d-e)+e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e>0&&(e&e-1)===0&&d>0&&(d&d-1)===0};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){return r===void 0&&(r=0),d===0?e:(e-=r,e=d*Math.ceil(e/d),o?(r+e)/d:r+e)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o,n,i,s){this.x=0,this.y=0,this.z=0,this.w=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=n||0,this.z=i||0,this.w=s||0)},clone:function(){return new d(this.x,this.y,this.z,this.w)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z||0,this.w=r.w||0,this},equals:function(r){return this.x===r.x&&this.y===r.y&&this.z===r.z&&this.w===r.w},set:function(r,o,n,i){return typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0,this.w=r.w||0):(this.x=r||0,this.y=o||0,this.z=n||0,this.w=i||0),this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z||0,this.w+=r.w||0,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z||0,this.w-=r.w||0,this},scale:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},length:function(){var r=this.x,o=this.y,n=this.z,i=this.w;return Math.sqrt(r*r+o*o+n*n+i*i)},lengthSq:function(){var r=this.x,o=this.y,n=this.z,i=this.w;return r*r+o*o+n*n+i*i},normalize:function(){var r=this.x,o=this.y,n=this.z,i=this.w,s=r*r+o*o+n*n+i*i;return s>0&&(s=1/Math.sqrt(s),this.x=r*s,this.y=o*s,this.z=n*s,this.w=i*s),this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w},lerp:function(r,o){o===void 0&&(o=0);var n=this.x,i=this.y,s=this.z,u=this.w;return this.x=n+o*(r.x-n),this.y=i+o*(r.y-i),this.z=s+o*(r.z-s),this.w=u+o*(r.w-u),this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z||1,this.w*=r.w||1,this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z||1,this.w/=r.w||1,this},distance:function(r){var o=r.x-this.x,n=r.y-this.y,i=r.z-this.z||0,s=r.w-this.w||0;return Math.sqrt(o*o+n*n+i*i+s*s)},distanceSq:function(r){var o=r.x-this.x,n=r.y-this.y,i=r.z-this.z||0,s=r.w-this.w||0;return o*o+n*n+i*i+s*s},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(r){var o=this.x,n=this.y,i=this.z,s=this.w,u=r.val;return this.x=u[0]*o+u[4]*n+u[8]*i+u[12]*s,this.y=u[1]*o+u[5]*n+u[9]*i+u[13]*s,this.z=u[2]*o+u[6]*n+u[10]*i+u[14]*s,this.w=u[3]*o+u[7]*n+u[11]*i+u[15]*s,this},transformQuat:function(r){var o=this.x,n=this.y,i=this.z,s=r.x,u=r.y,h=r.z,l=r.w,f=l*o+u*i-h*n,v=l*n+h*o-s*i,c=l*i+s*n-u*o,p=-s*o-u*n-h*i;return this.x=f*l+p*-s+v*-h-c*-u,this.y=v*l+p*-u+c*-s-f*-h,this.z=c*l+p*-h+f*-u-v*-s,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});d.prototype.sub=d.prototype.subtract,d.prototype.mul=d.prototype.multiply,d.prototype.div=d.prototype.divide,d.prototype.dist=d.prototype.distance,d.prototype.distSq=d.prototype.distanceSq,d.prototype.len=d.prototype.length,d.prototype.lenSq=d.prototype.lengthSq,a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(91),r=new e({initialize:function(n,i,s,u,h,l,f){u===void 0&&(u=1),h===void 0&&(h=0),l===void 0&&(l=!0),f===void 0&&(f=!1),this.renderer=n,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=u,this.minFilter=h,this.autoClear=l,this.autoResize=!1,this.resize(i,s),f&&this.setAutoResize(!0)},setAutoResize:function(o){return o&&!this.autoResize?(this.renderer.on(d.RESIZE,this.resize,this),this.autoResize=!0):!o&&this.autoResize&&(this.renderer.off(d.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(o,n){var i=o*this.scale,s=n*this.scale;if(i!==this.width||s!==this.height){var u=this.renderer;u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),o*=this.scale,n*=this.scale,o=Math.round(o),n=Math.round(n),o<=0&&(o=1),n<=0&&(n=1),this.texture=u.createTextureFromSource(null,o,n,this.minFilter),this.framebuffer=u.createFramebuffer(o,n,this.texture,!1),this.width=o,this.height=n}return this},bind:function(o,n,i){if(o===void 0&&(o=!1),o&&this.renderer.flush(),n&&i&&this.resize(n,i),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),o&&this.adjustViewport(),this.autoClear){var s=this.renderer.gl;s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT)}},adjustViewport:function(){var o=this.renderer.gl;o.viewport(0,0,this.width,this.height),o.disable(o.SCISSOR_TEST)},clear:function(){var o=this.renderer,n=o.gl;o.pushFramebuffer(this.framebuffer),n.disable(n.SCISSOR_TEST),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),o.popFramebuffer(),o.resetScissor()},unbind:function(o){o===void 0&&(o=!1);var n=this.renderer;return o&&n.flush(),n.popFramebuffer()},destroy:function(){var o=this.renderer;o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),o.off(d.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r;if(d)typeof d=="string"?r=document.getElementById(d):typeof d=="object"&&d.nodeType===1&&(r=d);else if(e.parentElement||d===null)return e;return r||(r=document.body),r.appendChild(e),e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(77),r=t(9),o=t(70),n=t(22),i=t(1),s=t(207),u=t(428),h=new e({Extends:r,initialize:function(f){r.call(this),this.game=f,this.jsonCache=f.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,f.events.on(n.BLUR,this.onGameBlur,this),f.events.on(n.FOCUS,this.onGameFocus,this),f.events.on(n.PRE_STEP,this.update,this),f.events.once(n.DESTROY,this.destroy,this)},add:i,addAudioSprite:function(l,f){f===void 0&&(f={});var v=this.add(l,f);v.spritemap=this.jsonCache.get(l).spritemap;for(var c in v.spritemap)if(v.spritemap.hasOwnProperty(c)){var p=d(f),m=v.spritemap[c];p.loop=m.hasOwnProperty("loop")?m.loop:!1,v.addMarker({name:c,start:m.start,duration:m.end-m.start,config:p})}return v},get:function(l){return u(this.sounds,"key",l)},getAll:function(l){return s(this.sounds,"key",l)},play:function(l,f){var v=this.add(l);return v.once(o.COMPLETE,v.destroy,v),f?f.name?(v.addMarker(f),v.play(f.name)):v.play(f):v.play()},playAudioSprite:function(l,f,v){var c=this.addAudioSprite(l);return c.once(o.COMPLETE,c.destroy,c),c.play(f,v)},remove:function(l){var f=this.sounds.indexOf(l);return f!==-1?(l.destroy(),this.sounds.splice(f,1),!0):!1},removeAll:function(){this.sounds.forEach(function(l){l.destroy()}),this.sounds.length=0},removeByKey:function(l){for(var f=0,v=this.sounds.length-1;v>=0;v--){var c=this.sounds[v];c.key===l&&(c.destroy(),this.sounds.splice(v,1),f++)}return f},pauseAll:function(){this.forEachActiveSound(function(l){l.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(l){l.resume()}),this.emit(o.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(l){l.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(l){var f=0;return this.getAll(l).forEach(function(v){v.stop()&&f++}),f},unlock:i,onBlur:i,onFocus:i,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(l,f){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var v=this.sounds.length-1;v>=0;v--)this.sounds[v].pendingRemove&&this.sounds.splice(v,1);this.sounds.forEach(function(c){c.update(l,f)})},destroy:function(){this.game.events.off(n.BLUR,this.onGameBlur,this),this.game.events.off(n.FOCUS,this.onGameFocus,this),this.game.events.off(n.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(l,f){var v=this;this.sounds.forEach(function(c,p){c&&!c.pendingRemove&&l.call(f||v,c,p,v.sounds)})},setRate:function(l){return this.rate=l,this},rate:{get:function(){return this._rate},set:function(l){this._rate=l,this.forEachActiveSound(function(f){f.calculateRate()}),this.emit(o.GLOBAL_RATE,this,l)}},setDetune:function(l){return this.detune=l,this},detune:{get:function(){return this._detune},set:function(l){this._detune=l,this.forEachActiveSound(function(f){f.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,l)}}});a.exports=h},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(9),r=t(70),o=t(17),n=t(1),i=new e({Extends:d,initialize:function(u,h,l){d.call(this),this.manager=u,this.key=h,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,l),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(s){return!s||!s.name||typeof s.name!="string"?!1:this.markers[s.name]?(console.error("addMarker "+s.name+" already exists in Sound"),!1):(s=o(!0,{name:"",start:0,duration:this.totalDuration-(s.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},s),this.markers[s.name]=s,!0)},updateMarker:function(s){return!s||!s.name||typeof s.name!="string"?!1:this.markers[s.name]?(this.markers[s.name]=o(!0,this.markers[s.name],s),!0):(console.warn("Audio Marker: "+s.name+" missing in Sound: "+this.key),!1)},removeMarker:function(s){var u=this.markers[s];return u?(this.markers[s]=null,u):null},play:function(s,u){if(s===void 0&&(s=""),typeof s=="object"&&(u=s,s=""),typeof s!="string")return!1;if(!s)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[s])return console.warn("Marker: "+s+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[s],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=o(this.currentConfig,u),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:n,calculateRate:function(){var s=1.0005777895065548,u=this.currentConfig.detune+this.manager.detune,h=Math.pow(s,u);this.totalRate=this.currentConfig.rate*this.manager.rate*h},destroy:function(){this.pendingRemove||(this.emit(r.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(209),d=t(435),r=function(o,n){if(n===void 0&&(n=90),!e(o))return null;if(typeof n!="string"&&(n=(n%360+360)%360),n===90||n===-270||n==="rotateLeft")o=d(o),o.reverse();else if(n===-90||n===270||n==="rotateRight")o.reverse(),o=d(o);else if(Math.abs(n)===180||n==="rotate180"){for(var i=0;i<o.length;i++)o[i].reverse();o.reverse()}return o};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(18),r=t(11),o=t(15),n=t(1043),i=t(1044),s=t(212),u=t(10),h=t(1045),l=new e({Extends:o,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Texture,r.Tint,r.Transform,r.Visible,h],initialize:function(v,c,p,m,y,T,E){y===void 0&&(y=""),E===void 0&&(E=0),o.call(this,v,"BitmapText"),this.font=m;var S=this.scene.sys.cache.bitmapFont.get(m);S||console.warn("Invalid BitmapText key: "+m),this.fontData=S.data,this._text="",this._fontSize=T||this.fontData.size,this._letterSpacing=0,this._align=E,this._bounds=n(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=S.fromAtlas,this.setTexture(S.texture,S.frame),this.setPosition(c,p),this.setOrigin(0,0),this.initPipeline(),this.setText(y)},setLeftAlign:function(){return this._align=l.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=l.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=l.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(f){return this._fontSize=f,this._dirty=!0,this},setLetterSpacing:function(f){return f===void 0&&(f=0),this._letterSpacing=f,this._dirty=!0,this},setText:function(f){return!f&&f!==0&&(f=""),Array.isArray(f)&&(f=f.join(`
`)),f!==this.text&&(this._text=f.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(f,v,c,p){return f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=.5),this.dropShadowX=f,this.dropShadowY=v,this.dropShadowColor=c,this.dropShadowAlpha=p,this},setCharacterTint:function(f,v,c,p,m,y,T){f===void 0&&(f=0),v===void 0&&(v=1),c===void 0&&(c=!1),p===void 0&&(p=-1),m===void 0&&(m=p,y=p,T=p);var E=this.text.length;v===-1&&(v=E),f<0&&(f=E+f),f=d(f,0,E-1);for(var S=d(f+v,f,E),P=this.charColors,M=f;M<S;M++){var O=P[M];if(p===-1)P[M]=null;else{var L=c?1:0;O?(O.tintEffect=L,O.tintTL=p,O.tintTR=m,O.tintBL=y,O.tintBR=T):P[M]={tintEffect:L,tintTL:p,tintTR:m,tintBL:y,tintBR:T}}}return this},setWordTint:function(f,v,c,p,m,y,T){v===void 0&&(v=1);for(var E=this.getTextBounds(),S=E.words,P=typeof f=="number",M=0,O=0;O<S.length;O++){var L=S[O];if((P&&O===f||!P&&L.word===f)&&(this.setCharacterTint(L.i,L.word.length,c,p,m,y,T),M++,M===v))return this}return this},getTextBounds:function(f){var v=this._bounds;return(this._dirty||f||this.scaleX!==v.scaleX||this.scaleY!==v.scaleY)&&(n(this,f,!0,v),this._dirty=!1),v},getCharacterAt:function(f,v,c){for(var p=this.getLocalPoint(f,v,null,c),m=this.getTextBounds(),y=m.characters,T=new u,E=0;E<y.length;E++){var S=y[E];if(T.setTo(S.x,S.t,S.r-S.x,S.b),T.contains(p.x,p.y))return S}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(f,v,c){if(v===void 0&&(v=this._fontSize),c===void 0&&(c=this._align),f!==this.font){var p=this.scene.sys.cache.bitmapFont.get(f);p&&(this.font=f,this.fontData=p.data,this._fontSize=v,this._align=c,this.fromAtlas=p.fromAtlas===!0,this.setTexture(p.texture,p.frame),n(this,!1,!0,this._bounds))}return this},setMaxWidth:function(f,v){return this._maxWidth=f,this._dirty=!0,v!==void 0&&(this.wordWrapCharCode=v),this},align:{set:function(f){this._align=f,this._dirty=!0},get:function(){return this._align}},text:{set:function(f){this.setText(f)},get:function(){return this._text}},fontSize:{set:function(f){this._fontSize=f,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(f){this._letterSpacing=f,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(f){this._maxWidth=f,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var f=r.ToJSON(this),v={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return f.data=v,f},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});l.ALIGN_LEFT=0,l.ALIGN_CENTER=1,l.ALIGN_RIGHT=2,l.ParseFromAtlas=i,l.ParseXMLBitmapFont=s,a.exports=l},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o){if(this.entries=[],Array.isArray(o))for(var n=0;n<o.length;n++)this.set(o[n])},set:function(r){return this.entries.indexOf(r)===-1&&this.entries.push(r),this},get:function(r,o){for(var n=0;n<this.entries.length;n++){var i=this.entries[n];if(i[r]===o)return i}},getArray:function(){return this.entries.slice(0)},delete:function(r){var o=this.entries.indexOf(r);return o>-1&&this.entries.splice(o,1),this},dump:function(){console.group("Set");for(var r=0;r<this.entries.length;r++){var o=this.entries[r];console.log(o)}console.groupEnd()},each:function(r,o){var n,i=this.entries.slice(),s=i.length;if(o)for(n=0;n<s&&r.call(o,i[n],n)!==!1;n++);else for(n=0;n<s&&r(i[n],n)!==!1;n++);return this},iterate:function(r,o){var n,i=this.entries.length;if(o)for(n=0;n<i&&r.call(o,this.entries[n],n)!==!1;n++);else for(n=0;n<i&&r(this.entries[n],n)!==!1;n++);return this},iterateLocal:function(r){var o,n=[];for(o=1;o<arguments.length;o++)n.push(arguments[o]);var i=this.entries.length;for(o=0;o<i;o++){var s=this.entries[o];s[r].apply(s,n)}return this},clear:function(){return this.entries.length=0,this},contains:function(r){return this.entries.indexOf(r)>-1},union:function(r){var o=new d;return r.entries.forEach(function(n){o.set(n)}),this.entries.forEach(function(n){o.set(n)}),o},intersect:function(r){var o=new d;return this.entries.forEach(function(n){r.contains(n)&&o.set(n)}),o},difference:function(r){var o=new d;return this.entries.forEach(function(n){r.contains(n)||o.set(n)}),o},size:{get:function(){return this.entries.length},set:function(r){return r<this.entries.length?this.entries.length=r:this.entries.length}}});a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(11),r=t(15),o=t(189),n=t(92),i=t(1182),s=new e({Extends:r,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.GetBounds,d.Mask,d.Pipeline,d.ScrollFactor,d.Transform,d.Visible,i],initialize:function(h,l,f,v,c,p,m){v===void 0&&(v=16777215),c===void 0&&(c=128),p===void 0&&(p=1),m===void 0&&(m=.1),r.call(this,h,"PointLight"),this.initPipeline(n.POINTLIGHT_PIPELINE),this.setPosition(l,f),this.color=o(v),this.intensity=p,this.attenuation=m,this.width=c*2,this.height=c*2,this._radius=c},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this.width=u*2,this.height=u*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});a.exports=s},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=d.width/2,o=d.height/2,n=Math.abs(e.x-d.x-r),i=Math.abs(e.y-d.y-o),s=r+e.radius,u=o+e.radius;if(n>s||i>u)return!1;if(n<=r||i<=o)return!0;var h=n-r,l=i-o,f=h*h,v=l*l,c=e.radius*e.radius;return f+v<=c};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.width<=0||e.height<=0||d.width<=0||d.height<=0?!1:!(e.right<d.x||e.bottom<d.y||e.x>d.right||e.y>d.bottom)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),d={},r={};r.register=function(o,n,i,s,u){d[o]={plugin:n,mapping:i,settingsKey:s,configKey:u}},r.getPlugin=function(o){return d[o]},r.install=function(o){var n=o.scene.sys,i=n.settings.input,s=n.game.config;for(var u in d){var h=d[u].plugin,l=d[u].mapping,f=d[u].settingsKey,v=d[u].configKey;e(i,f,s[v])&&(o[l]=new h(o))}},r.remove=function(o){d.hasOwnProperty(o)&&delete d[o]},a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ANY_KEY_DOWN:t(1323),ANY_KEY_UP:t(1324),COMBO_MATCH:t(1325),DOWN:t(1326),KEY_DOWN:t(1327),KEY_UP:t(1328),UP:t(1329)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.url?e.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?e.url:d+e.url:!1};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n,i){return e===void 0&&(e=""),d===void 0&&(d=!0),r===void 0&&(r=""),o===void 0&&(o=""),n===void 0&&(n=0),i===void 0&&(i=!1),{responseType:e,async:d,user:r,password:o,timeout:n,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:i}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(243),r=t(73),o=new e({Extends:r,Mixins:[d.Acceleration,d.Angular,d.Bounce,d.Debug,d.Drag,d.Enable,d.Friction,d.Gravity,d.Immovable,d.Mass,d.Pushable,d.Size,d.Velocity],initialize:function(i,s,u,h,l){r.call(this,i,s,u,h,l),this.body=null}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(119),d=function(r,o,n,i){if(n===void 0&&(n=!1),e(r,o,i)){var s=i.data[o][r]||null;return s?s.index===-1?n?s:null:s:null}else return null};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=e.data,i=e.width,s=e.height,u=e.tilemapLayer,h=Math.max(0,d.left),l=Math.min(i,d.right),f=Math.max(0,d.top),v=Math.min(s,d.bottom),c,p,m;if(r===0)for(p=f;p<v;p++)for(c=h;n[p]&&c<l;c++)m=n[p][c],!(!m||m.index===-1||!m.visible||m.alpha===0)&&o.push(m);else if(r===1)for(p=f;p<v;p++)for(c=l;n[p]&&c>=h;c--)m=n[p][c],!(!m||m.index===-1||!m.visible||m.alpha===0)&&o.push(m);else if(r===2)for(p=v;p>=f;p--)for(c=h;n[p]&&c<l;c++)m=n[p][c],!(!m||m.index===-1||!m.visible||m.alpha===0)&&o.push(m);else if(r===3)for(p=v;p>=f;p--)for(c=l;n[p]&&c>=h;c--)m=n[p][c],!(!m||m.index===-1||!m.visible||m.alpha===0)&&o.push(m);return u.tilesDrawn=o.length,u.tilesTotal=i*s,o};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=r.collideIndexes.indexOf(e);d&&o===-1?r.collideIndexes.push(e):!d&&o!==-1&&r.collideIndexes.splice(o,1)};a.exports=t},function(a,x,t){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),d=function(r,o,n){if(!o)return{i:0,layers:r.layers,name:"",opacity:1,visible:!0,x:0,y:0};var i=o.x+e(o,"startx",0)*r.tilewidth+e(o,"offsetx",0),s=o.y+e(o,"starty",0)*r.tileheight+e(o,"offsety",0);return{i:0,layers:o.layers,name:n.name+o.name+"/",opacity:n.opacity*o.opacity,visible:n.visible&&o.visible,x:n.x+i,y:n.y+s}};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o;if(e.hasOwnProperty(d)){var n=typeof e[d];n==="function"?o=function(i,s,u,h,l,f){return e[d](i,s,u,h,l,f)}:o=function(){return e[d]}}else typeof r=="function"?o=r:o=function(){return r};return o};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(265),d=t(13),r=t(99),o=t(80),n=t(162),i=t(583),s=t(263),u=t(6),h=t(264),l=t(266),f=t(268),v=function(c,p,m){m===void 0&&(m=e);for(var y=m.targets?m.targets:s(p),T=i(p),E=n(p,"delay",m.delay),S=n(p,"duration",m.duration),P=u(p,"easeParams",m.easeParams),M=o(u(p,"ease",m.ease),P),O=n(p,"hold",m.hold),L=n(p,"repeat",m.repeat),F=n(p,"repeatDelay",m.repeatDelay),b=r(p,"yoyo",m.yoyo),B=r(p,"flipX",m.flipX),U=r(p,"flipY",m.flipY),X=[],W=0;W<T.length;W++)for(var Z=T[W].key,J=T[W].value,N=0;N<y.length;N++){var I=h(Z,J),G=f(y[N],N,Z,I.getEnd,I.getStart,I.getActive,o(u(J,"ease",M),u(J,"easeParams",P)),n(J,"delay",E),n(J,"duration",S),r(J,"yoyo",b),n(J,"hold",O),n(J,"repeat",L),n(J,"repeatDelay",F),r(J,"flipX",B),r(J,"flipY",U));X.push(G)}var V=new l(c,X,y);V.offset=d(p,"offset",null),V.completeDelay=d(p,"completeDelay",0),V.loop=Math.round(d(p,"loop",0)),V.loopDelay=Math.round(d(p,"loopDelay",0)),V.paused=r(p,"paused",!1),V.useFrames=r(p,"useFrames",!1);for(var Y=u(p,"callbackScope",V),z=[V,null],H=l.TYPES,$=0;$<H.length;$++){var Q=H[$],k=u(p,Q,!1);if(k){var tt=u(p,Q+"Scope",Y),it=u(p,Q+"Params",[]);V.setCallback(Q,k,z.concat(it),tt)}}return V};a.exports=v},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(102),r=t(2),o=t(132),n=t(185),i=new e({initialize:function(u){this.parent=u,this.animationManager=u.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(s){var u=this.parent;if(s===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,u;Array.isArray(s)||(s=[s]);for(var h=0;h<s.length;h++){var l=s[h];this.nextAnim===null?this.nextAnim=l:this.nextAnimsQueue.push(l)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(s){this.isPlaying&&this.stop();var u=this.animationManager,h=typeof s=="string"?s:r(s,"key",null),l=this.exists(h)?this.get(h):u.get(h);if(!l)console.warn("Missing animation: "+h);else{this.currentAnim=l;var f=l.getTotalFrames(),v=r(s,"frameRate",l.frameRate),c=r(s,"duration",l.duration);l.calculateDuration(this,f,c,v),this.delay=r(s,"delay",l.delay),this.repeat=r(s,"repeat",l.repeat),this.repeatDelay=r(s,"repeatDelay",l.repeatDelay),this.yoyo=r(s,"yoyo",l.yoyo),this.showOnStart=r(s,"showOnStart",l.showOnStart),this.hideOnComplete=r(s,"hideOnComplete",l.hideOnComplete),this.skipMissedFrames=r(s,"skipMissedFrames",l.skipMissedFrames),this.timeScale=r(s,"timeScale",this.timeScale);var p=r(s,"startFrame",0);p>l.getTotalFrames()&&(p=0);var m=l.frames[p];p===0&&!this.forward&&(m=l.getLastFrame()),this.currentFrame=m}return this.parent},pause:function(s){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),s!==void 0&&this.setCurrentFrame(s),this.parent},resume:function(s){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),s!==void 0&&this.setCurrentFrame(s),this.parent},playAfterDelay:function(s,u){if(!this.isPlaying)this.delayCounter=u,this.play(s,!0);else{var h=this.nextAnim,l=this.nextAnimsQueue;h&&l.unshift(h),this.nextAnim=s,this._pendingStop=1,this._pendingStopValue=u}return this.parent},playAfterRepeat:function(s,u){if(u===void 0&&(u=1),!this.isPlaying)this.play(s);else{var h=this.nextAnim,l=this.nextAnimsQueue;h&&l.unshift(h),this.repeatCounter!==-1&&u>this.repeatCounter&&(u=this.repeatCounter),this.nextAnim=s,this._pendingStop=2,this._pendingStopValue=u}return this.parent},play:function(s,u){u===void 0&&(u=!1);var h=this.currentAnim,l=this.parent,f=typeof s=="string"?s:s.key;if(u&&this.isPlaying&&h.key===f)return l;if(h&&this.isPlaying){var v=this.animationManager.getMix(h.key,s);if(v>0)return this.playAfterDelay(s,v)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(s)},playReverse:function(s,u){u===void 0&&(u=!1);var h=typeof s=="string"?s:s.key;return u&&this.isPlaying&&this.currentAnim.key===h?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(s))},startAnimation:function(s){this.load(s);var u=this.currentAnim,h=this.parent;return u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,u.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),h},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(s,u){var h=this.currentAnim,l=this.currentFrame,f=this.parent,v=l.textureFrame;f.emit(s,h,l,f,v),u&&f.emit(u+h.key,h,l,f,v)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var s=this.currentFrame;if(!s)return 0;var u=s.progress;return this.inReverse&&(u*=-1),u},setProgress:function(s){return this.forward||(s=1-s),this.setCurrentFrame(this.currentAnim.getFrameByProgress(s)),this.parent},setRepeat:function(s){return this.repeatCounter=s===-1?Number.MAX_VALUE:s,this.parent},globalRemove:function(s,u){u===void 0&&(u=this.currentAnim),this.isPlaying&&u.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(s,u){s===void 0&&(s=!1),u===void 0&&(u=!1);var h=this.currentAnim,l=this.parent;return h?(u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),h.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!s,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(h.frames[0]),this.parent):l},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var s=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(s)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var s=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(s)}return this.parent},stopAfterDelay:function(s){return this._pendingStop=1,this._pendingStopValue=s,this.parent},stopAfterRepeat:function(s){return s===void 0&&(s=1),this.repeatCounter!==-1&&s>this.repeatCounter&&(s=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=s,this.parent},stopOnFrame:function(s){return this._pendingStop=3,this._pendingStopValue=s,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(s,u){var h=this.currentAnim;if(!(!this.isPlaying||!h||h.paused)){if(this.accumulator+=u*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=u,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?h.nextFrame(this):h.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var l=0;do this.forward?h.nextFrame(this):h.previousFrame(this),l++;while(this.isPlaying&&this.accumulator>this.nextTick&&l<60)}}},setCurrentFrame:function(s){var u=this.parent;return this.currentFrame=s,u.texture=s.frame.texture,u.frame=s.frame,u.isCropped&&u.frame.updateCropUVs(u._crop,u.flipX,u.flipY),s.setAlpha&&(u.alpha=s.alpha),u.setSizeToFrame(),u._originComponent&&(s.frame.customPivot?u.setOrigin(s.frame.pivotX,s.frame.pivotY):u.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===s&&this.stop()),u},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(s){return this.anims?this.anims.get(s):null},exists:function(s){return this.anims?this.anims.has(s):!1},create:function(s){var u=s.key,h=!1;return u&&(h=this.get(u),h||(h=new n(this,u,s),this.anims||(this.anims=new d),this.anims.set(u,h))),h},generateFrameNames:function(s,u){return this.animationManager.generateFrameNames(s,u)},generateFrameNumbers:function(s,u){return this.animationManager.generateFrameNumbers(s,u)},remove:function(s){var u=this.get(s);return u&&(this.currentAnim===u&&this.stop(),this.anims.delete(s)),u},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});a.exports=i},function(a,x,t){var e={};a.exports=e;var d=t(166);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(r,o){for(var n=o*o*o,i=0;i<r.length;i++){var s=r[i],u=s.speed*s.speed+s.angularSpeed*s.angularSpeed;if(s.force.x!==0||s.force.y!==0){e.set(s,!1);continue}var h=Math.min(s.motion,u),l=Math.max(s.motion,u);s.motion=e._minBias*h+(1-e._minBias)*l,s.sleepThreshold>0&&s.motion<e._motionSleepThreshold*n?(s.sleepCounter+=1,s.sleepCounter>=s.sleepThreshold&&e.set(s,!0)):s.sleepCounter>0&&(s.sleepCounter-=1)}},e.afterCollisions=function(r,o){for(var n=o*o*o,i=0;i<r.length;i++){var s=r[i];if(s.isActive){var u=s.collision,h=u.bodyA.parent,l=u.bodyB.parent;if(!(h.isSleeping&&l.isSleeping||h.isStatic||l.isStatic)&&(h.isSleeping||l.isSleeping)){var f=h.isSleeping&&!h.isStatic?h:l,v=f===h?l:h;!f.isStatic&&v.motion>e._motionWakeThreshold*n&&e.set(f,!1)}}}},e.set=function(r,o){var n=r.isSleeping;o?(r.isSleeping=!0,r.sleepCounter=r.sleepThreshold,r.positionImpulse.x=0,r.positionImpulse.y=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.speed=0,r.angularSpeed=0,r.motion=0,n||d.trigger(r,"sleepStart")):(r.isSleeping=!1,r.sleepCounter=0,n&&d.trigger(r,"sleepEnd"))}})()},function(a,x,t){var e={};a.exports=e;var d=t(32);(function(){e.on=function(r,o,n){for(var i=o.split(" "),s,u=0;u<i.length;u++)s=i[u],r.events=r.events||{},r.events[s]=r.events[s]||[],r.events[s].push(n);return n},e.off=function(r,o,n){if(!o){r.events={};return}typeof o=="function"&&(n=o,o=d.keys(r.events).join(" "));for(var i=o.split(" "),s=0;s<i.length;s++){var u=r.events[i[s]],h=[];if(n&&u)for(var l=0;l<u.length;l++)u[l]!==n&&h.push(u[l]);r.events[i[s]]=h}},e.trigger=function(r,o,n){var i,s,u,h,l=r.events;if(l&&d.keys(l).length>0){n||(n={}),i=o.split(" ");for(var f=0;f<i.length;f++)if(s=i[f],u=l[s],u){h=d.clone(n,!1),h.name=s,h.source=r;for(var v=0;v<u.length;v++)u[v].apply(r,[h])}}}})()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(175),d=t(92),r=t(74),o={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(n){n===void 0&&(n=d.MULTI_PIPELINE);var i=this.scene.sys.renderer;if(!i)return!1;var s=i.pipelines;if(this.postPipelines=[],this.pipelineData={},s){var u=s.get(n);if(u)return this.defaultPipeline=u,this.pipeline=u,!0}return!1},setPipeline:function(n,i,s){var u=this.scene.sys.renderer;if(!u)return this;var h=u.pipelines;if(h){var l=h.get(n);l&&(this.pipeline=l),i&&(this.pipelineData=s?e(i):i)}return this},setPostPipeline:function(n,i,s){var u=this.scene.sys.renderer;if(!u)return this;var h=u.pipelines;if(h){Array.isArray(n)||(n=[n]);for(var l=0;l<n.length;l++){var f=h.getPostPipeline(n[l],this);f&&this.postPipelines.push(f)}i&&(this.pipelineData=s?e(i):i)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(n,i){var s=this.pipelineData;return i===void 0?delete s[n]:s[n]=i,this},getPostPipeline:function(n){for(var i=this.postPipelines,s=[],u=0;u<i.length;u++){var h=i[u];(typeof n=="string"&&h.name===n||h instanceof n)&&s.push(h)}return s.length===1?s[0]:s},resetPipeline:function(n,i){return n===void 0&&(n=!1),i===void 0&&(i=!1),this.pipeline=this.defaultPipeline,n&&(this.postPipelines=[],this.hasPostPipeline=!1),i&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(n){n===void 0&&(n=!1);for(var i=this.postPipelines,s=0;s<i.length;s++)i[s].destroy();this.postPipelines=[],this.hasPostPipeline=!1,n&&(this.pipelineData={})},removePostPipeline:function(n){for(var i=this.postPipelines,s=i.length-1;s>=0;s--){var u=i[s];(typeof n=="string"&&u.name===n||typeof n!="string"&&u instanceof n)&&(u.destroy(),r(i,s))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DEFAULT:0,LINEAR:0,NEAREST:1};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o,n){return n===void 0&&(n=new e),n.x=r.x+r.radius*Math.cos(o),n.y=r.y+r.radius*Math.sin(o),n};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o){o===void 0&&(o=new e);var n=2*Math.PI*Math.random(),i=Math.random()+Math.random(),s=i>1?2-i:i,u=s*Math.cos(n),h=s*Math.sin(n);return o.x=r.x+u*r.radius,o.y=r.y+h*r.radius,o};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(130),d=t(4),r=function(o,n,i){if(i===void 0&&(i=new d),n<=0||n>=1)return i.x=o.x,i.y=o.y,i;var s=e(o)*n;return n>.5?(s-=o.width+o.height,s<=o.width?(i.x=o.right-s,i.y=o.bottom):(i.x=o.x,i.y=o.bottom-(s-o.width))):s<=o.width?(i.x=o.x+s,i.y=o.y):(i.x=o.right,i.y=o.y+(s-o.width)),i};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),d=t(4),r=function(o,n,i,s){s===void 0&&(s=[]),!n&&i>0&&(n=e(o)/i);for(var u=o.x1,h=o.y1,l=o.x2,f=o.y2,v=0;v<n;v++){var c=v/n,p=u+(l-u)*c,m=h+(f-h)*c;s.push(new d(p,m))}return s};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o){o===void 0&&(o=new e);var n=Math.random();return o.x=r.x1+n*(r.x2-r.x1),o.y=r.y1+n*(r.y2-r.y1),o};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o){return o===void 0&&(o=new e),o.x=r.x+Math.random()*r.width,o.y=r.y+Math.random()*r.height,o};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d,r,o;if(typeof e!="object"||e===null)return e;d=Array.isArray(e)?[]:{};for(o in e)r=e[o],d[o]=t(r);return d};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(d.textureKey=e.texture.key,d.frameKey=e.frame.name),d};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),d=function(r,o,n,i,s,u,h,l){l===void 0&&(l=new e);var f=Math.sin(s),v=Math.cos(s),c=v*u,p=f*u,m=-f*h,y=v*h,T=1/(c*y+m*-p);return l.x=y*T*r+-m*T*o+(i*m-n*y)*T,l.y=c*T*o+-p*T*r+(-i*c+n*p)*T,l};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){d===void 0&&(d=1);for(var r=null,o=0;o<d;o++)r=e.shift(),e.push(r);return r};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){d===void 0&&(d=1);for(var r=null,o=0;o<d;o++)r=e.pop(),e.unshift(r);return r};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o){o===void 0&&(o=new e);var n=Math.random()*Math.PI*2,i=Math.sqrt(Math.random());return o.x=r.x+i*Math.cos(n)*r.width/2,o.y=r.y+i*Math.sin(n)*r.height/2,o};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o){o===void 0&&(o=new e);var n=r.x2-r.x1,i=r.y2-r.y1,s=r.x3-r.x1,u=r.y3-r.y1,h=Math.random(),l=Math.random();return h+l>=1&&(h=1-h,l=1-l),o.x=r.x1+(n*h+s*l),o.y=r.y1+(i*h+u*l),o};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n){var i=o+Math.atan2(e.y-r,e.x-d);return e.x=d+n*Math.cos(i),e.y=r+n*Math.sin(i),e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return e=Math.max(0,Math.min(1,(e-d)/(r-d))),e*e*e*(e*(e*6-15)+10)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return e<=d?0:e>=r?1:(e=(e-d)/(r-d),e*e*(3-2*e))};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),d=t(0),r=t(132),o=t(318),n=t(319),i=t(6),s=t(320),u=new d({initialize:function(l,f,v){this.manager=l,this.key=f,this.type="frame",this.frames=this.getFrames(l.textureManager,i(v,"frames",[]),i(v,"defaultTextureKey",null),i(v,"sortFrames",!0)),this.frameRate=i(v,"frameRate",null),this.duration=i(v,"duration",null),this.msPerFrame,this.skipMissedFrames=i(v,"skipMissedFrames",!0),this.delay=i(v,"delay",0),this.repeat=i(v,"repeat",0),this.repeatDelay=i(v,"repeatDelay",0),this.yoyo=i(v,"yoyo",!1),this.showOnStart=i(v,"showOnStart",!1),this.hideOnComplete=i(v,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(r.PAUSE_ALL,this.pause,this),this.manager.on(r.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(h,l,f,v){f===null&&v===null?(h.frameRate=24,h.duration=24/l*1e3):f&&v===null?(h.duration=f,h.frameRate=l/(f/1e3)):(h.frameRate=v,h.duration=l/v*1e3),h.msPerFrame=1e3/h.frameRate},addFrame:function(h){return this.addFrameAt(this.frames.length,h)},addFrameAt:function(h,l){var f=this.getFrames(this.manager.textureManager,l);if(f.length>0){if(h===0)this.frames=f.concat(this.frames);else if(h===this.frames.length)this.frames=this.frames.concat(f);else{var v=this.frames.slice(0,h),c=this.frames.slice(h);this.frames=v.concat(f,c)}this.updateFrameSequence()}return this},checkFrame:function(h){return h>=0&&h<this.frames.length},getFirstTick:function(h){h.accumulator=0,h.nextTick=h.msPerFrame+h.currentFrame.duration},getFrameAt:function(h){return this.frames[h]},getFrames:function(h,l,f,v){v===void 0&&(v=!0);var c=[],p,m,y=1,T,E;if(typeof l=="string"){E=l;var S=h.get(E),P=S.getFrameNames();v&&s(P),l=[],P.forEach(function(B){l.push({key:E,frame:B})})}if(!Array.isArray(l)||l.length===0)return c;for(T=0;T<l.length;T++){var M=l[T],O=i(M,"key",f);if(O){var L=i(M,"frame",0),F=h.getFrame(O,L);m=new n(O,L,y,F),m.duration=i(M,"duration",0),m.isFirst=!p,p&&(p.nextFrame=m,m.prevFrame=p),c.push(m),p=m,y++}}if(c.length>0){m.isLast=!0,m.nextFrame=c[0],c[0].prevFrame=m;var b=1/(c.length-1);for(T=0;T<c.length;T++)c[T].progress=T*b}return c},getNextTick:function(h){h.accumulator-=h.nextTick,h.nextTick=h.msPerFrame+h.currentFrame.duration},getFrameByProgress:function(h){return h=e(h,0,1),o(h,this.frames,"progress")},nextFrame:function(h){var l=h.currentFrame;l.isLast?h.yoyo?this.handleYoyoFrame(h,!1):h.repeatCounter>0?h.inReverse&&h.forward?h.forward=!1:this.repeatAnimation(h):h.complete():this.updateAndGetNextTick(h,l.nextFrame)},handleYoyoFrame:function(h,l){if(l||(l=!1),h.inReverse===!l&&h.repeatCounter>0){(h.repeatDelay===0||h.pendingRepeat)&&(h.forward=l),this.repeatAnimation(h);return}if(h.inReverse!==l&&h.repeatCounter===0){h.complete();return}h.forward=l;var f=l?h.currentFrame.nextFrame:h.currentFrame.prevFrame;this.updateAndGetNextTick(h,f)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(h){var l=h.currentFrame;l.isFirst?h.yoyo?this.handleYoyoFrame(h,!0):h.repeatCounter>0?h.inReverse&&!h.forward?this.repeatAnimation(h):(h.forward=!0,this.repeatAnimation(h)):h.complete():this.updateAndGetNextTick(h,l.prevFrame)},updateAndGetNextTick:function(h,l){h.setCurrentFrame(l),this.getNextTick(h)},removeFrame:function(h){var l=this.frames.indexOf(h);return l!==-1&&this.removeFrameAt(l),this},removeFrameAt:function(h){return this.frames.splice(h,1),this.updateFrameSequence(),this},repeatAnimation:function(h){if(h._pendingStop===2){if(h._pendingStopValue===0)return h.stop();h._pendingStopValue--}h.repeatDelay>0&&!h.pendingRepeat?(h.pendingRepeat=!0,h.accumulator-=h.nextTick,h.nextTick+=h.repeatDelay):(h.repeatCounter--,h.forward?h.setCurrentFrame(h.currentFrame.nextFrame):h.setCurrentFrame(h.currentFrame.prevFrame),h.isPlaying&&(this.getNextTick(h),h.handleRepeat()))},toJSON:function(){var h={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(l){h.frames.push(l.toJSON())}),h},updateFrameSequence:function(){for(var h=this.frames.length,l=1/(h-1),f,v=0;v<h;v++)f=this.frames[v],f.index=v+1,f.isFirst=!1,f.isLast=!1,f.progress=v*l,v===0?(f.isFirst=!0,h===1?(f.isLast=!0,f.nextFrame=f,f.prevFrame=f):(f.isLast=!1,f.prevFrame=this.frames[h-1],f.nextFrame=this.frames[v+1])):v===h-1&&h>1?(f.isLast=!0,f.prevFrame=this.frames[h-2],f.nextFrame=this.frames[0]):h>1&&(f.prevFrame=this.frames[v-1],f.nextFrame=this.frames[v+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(r.PAUSE_ALL,this.pause,this),this.manager.off(r.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var h=0;h<this.frames.length;h++)this.frames[h].destroy();this.frames=[],this.manager=null}});a.exports=u},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){d===void 0&&(d=0),r===void 0&&(r=" "),o===void 0&&(o=3),e=e.toString();var n=0;if(d+1>=e.length)switch(o){case 1:e=new Array(d+1-e.length).join(r)+e;break;case 3:var i=Math.ceil((n=d-e.length)/2),s=n-i;e=new Array(s+1).join(r)+e+new Array(i+1).join(r);break;default:e=e+new Array(d+1-e.length).join(r);break}return e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(327),d=t(189),r=t(331),o=t(332),n=function(i){var s=typeof i;switch(s){case"string":return i.substr(0,3).toLowerCase()==="rgb"?o(i):e(i);case"number":return d(i);case"object":return r(i)}};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(103);function d(o,n,i,s){var u=(o+n*6)%6,h=Math.min(u,4-u,1);return Math.round(255*(s-s*i*Math.max(0,h)))}var r=function(o,n,i,s){n===void 0&&(n=1),i===void 0&&(i=1);var u=d(5,o,n,i),h=d(3,o,n,i),l=d(1,o,n,i);return s?s.setTo?s.setTo(u,h,l,s.alpha,!1):(s.r=u,s.g=h,s.b=l,s.color=e(u,h,l),s):{r:u,g:h,b:l,color:e(u,h,l)}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),d=t(330),r=function(o){var n=d(o);return new e(n.r,n.g,n.b,n.a)};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return e.x=d-e.width/2,e.y=r-e.height/2,e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(105),d=t(136),r=t(31),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function n(){var s=new ArrayBuffer(4),u=new Uint8Array(s),h=new Uint32Array(s);return u[0]=161,u[1]=178,u[2]=195,u[3]=212,h[0]===3569595041?!0:h[0]===2712847316?!1:null}function i(){if(typeof importScripts=="function")return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch{o.localStorage=!1}o.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,o.fileSystem=!!window.requestFileSystem;var s=!1,u=function(){if(window.WebGLRenderingContext)try{var h=r.createWebGL(this),l=h.getContext("webgl")||h.getContext("experimental-webgl"),f=r.create2D(this),v=f.getContext("2d"),c=v.createImageData(1,1);return s=c.data instanceof Uint8ClampedArray,r.remove(h),r.remove(f),!!l}catch{return!1}return!1};return o.webGL=u(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,d.firefox&&d.firefoxVersion<21&&(o.getUserMedia=!1),!e.iOS&&(d.ie||d.firefox||d.chrome)&&(o.canvasBitBltShift=!0),(d.safari||d.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(o.littleEndian=n()),o.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&o.littleEndian!==null&&s,o}a.exports=i()},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="",e=function(){var d=function(i){for(var s=["i","webkitI","msI","mozI","oI"],u=0;u<s.length;u++){var h=s[u]+"mageSmoothingEnabled";if(h in i)return h}return null},r=function(i){return t===""&&(t=d(i)),t&&(i[t]=!0),i},o=function(i){return t===""&&(t=d(i)),t&&(i[t]=!1),i},n=function(i){return t!==null?i[t]:null};return{disable:o,enable:r,getPrefix:d,isEnabled:n}};a.exports=e()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),d=t(17),r={Angle:t(812),Distance:t(821),Easing:t(826),Fuzzy:t(827),Interpolation:t(830),Pow2:t(835),Snap:t(837),RandomDataGenerator:t(839),Average:t(840),Bernstein:t(356),Between:t(195),CatmullRom:t(194),CeilTo:t(841),Clamp:t(18),DegToRad:t(36),Difference:t(842),Euler:t(843),Factorial:t(357),FloatBetween:t(137),FloorTo:t(844),FromPercent:t(98),GetSpeed:t(845),IsEven:t(846),IsEvenStrict:t(847),Linear:t(135),MaxAdd:t(848),Median:t(849),MinSub:t(850),Percent:t(851),RadToDeg:t(196),RandomXY:t(852),RandomXYZ:t(853),RandomXYZW:t(854),Rotate:t(362),RotateAround:t(308),RotateAroundDistance:t(182),RotateTo:t(855),RoundAwayFromZero:t(363),RoundTo:t(856),SinCosTableGenerator:t(857),SmootherStep:t(183),SmoothStep:t(184),ToXY:t(858),TransformXY:t(177),Within:t(859),Wrap:t(68),Vector2:t(3),Vector3:t(39),Vector4:t(140),Matrix3:t(364),Matrix4:t(69),Quaternion:t(365),RotateVec3:t(860)};r=d(!1,r,e),a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n){var i=(o-d)*.5,s=(n-r)*.5,u=e*e,h=e*u;return(2*r-2*o+i+s)*h+(-3*r+3*o-2*i-s)*u+i*e+r};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return Math.floor(Math.random()*(d-e+1)+e)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),d=function(r){return r*e.RAD_TO_DEG};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};a.exports=e},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(r){return this._matrix=r,this._dirty=!0,this},reset:function(){var r=this._matrix;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=1,r[7]=0,r[8]=0,r[9]=0,r[10]=0,r[11]=0,r[12]=1,r[13]=0,r[14]=0,r[15]=0,r[16]=0,r[17]=0,r[18]=1,r[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var r=new Float32Array(this._matrix);r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,this._data=r,this._dirty=!1}return this._data},brightness:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var n=r;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],o)},saturate:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var n=r*2/3+1,i=(n-1)*-.5;return this.multiply([n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0],o)},desaturate:function(r){return r===void 0&&(r=!1),this.saturate(-1,r)},hue:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1),r=r/180*Math.PI;var n=Math.cos(r),i=Math.sin(r),s=.213,u=.715,h=.072;return this.multiply([s+n*(1-s)+i*-s,u+n*-u+i*-u,h+n*-h+i*(1-h),0,0,s+n*-s+i*.143,u+n*(1-u)+i*.14,h+n*-h+i*-.283,0,0,s+n*-s+i*-(1-s),u+n*-u+i*u,h+n*(1-h)+i*h,0,0,0,0,0,1,0],o)},grayscale:function(r,o){return r===void 0&&(r=1),o===void 0&&(o=!1),this.saturate(-r,o)},blackWhite:function(r){return r===void 0&&(r=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],r)},contrast:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var n=r+1,i=-.5*(n-1);return this.multiply([n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0],o)},negative:function(r){return r===void 0&&(r=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],r)},desaturateLuminance:function(r){return r===void 0&&(r=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],r)},sepia:function(r){return r===void 0&&(r=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],r)},night:function(r,o){return r===void 0&&(r=.1),o===void 0&&(o=!1),this.multiply([r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0],o)},lsd:function(r){return r===void 0&&(r=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],r)},brown:function(r){return r===void 0&&(r=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],r)},vintagePinhole:function(r){return r===void 0&&(r=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],r)},kodachrome:function(r){return r===void 0&&(r=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],r)},technicolor:function(r){return r===void 0&&(r=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],r)},polaroid:function(r){return r===void 0&&(r=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],r)},shiftToBGR:function(r){return r===void 0&&(r=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],r)},multiply:function(r,o){o||this.reset();for(var n=this._matrix,i=[],s=0;s<20;s++)i[s]=n[s];return n[0]=i[0]*r[0]+i[1]*r[5]+i[2]*r[10]+i[3]*r[15],n[1]=i[0]*r[1]+i[1]*r[6]+i[2]*r[11]+i[3]*r[16],n[2]=i[0]*r[2]+i[1]*r[7]+i[2]*r[12]+i[3]*r[17],n[3]=i[0]*r[3]+i[1]*r[8]+i[2]*r[13]+i[3]*r[18],n[4]=i[0]*r[4]+i[1]*r[9]+i[2]*r[14]+i[3]*r[19]+i[4],n[5]=i[5]*r[0]+i[6]*r[5]+i[7]*r[10]+i[8]*r[15],n[6]=i[5]*r[1]+i[6]*r[6]+i[7]*r[11]+i[8]*r[16],n[7]=i[5]*r[2]+i[6]*r[7]+i[7]*r[12]+i[8]*r[17],n[8]=i[5]*r[3]+i[6]*r[8]+i[7]*r[13]+i[8]*r[18],n[9]=i[5]*r[4]+i[6]*r[9]+i[7]*r[14]+i[8]*r[19]+i[9],n[10]=i[10]*r[0]+i[11]*r[5]+i[12]*r[10]+i[13]*r[15],n[11]=i[10]*r[1]+i[11]*r[6]+i[12]*r[11]+i[13]*r[16],n[12]=i[10]*r[2]+i[11]*r[7]+i[12]*r[12]+i[13]*r[17],n[13]=i[10]*r[3]+i[11]*r[8]+i[12]*r[13]+i[13]*r[18],n[14]=i[10]*r[4]+i[11]*r[9]+i[12]*r[14]+i[13]*r[19]+i[14],n[15]=i[15]*r[0]+i[16]*r[5]+i[17]*r[10]+i[18]*r[15],n[16]=i[15]*r[1]+i[16]*r[6]+i[17]*r[11]+i[18]*r[16],n[17]=i[15]*r[2]+i[16]*r[7]+i[17]*r[12]+i[18]*r[17],n[18]=i[15]*r[3]+i[16]*r[8]+i[17]*r[13]+i[18]*r[18],n[19]=i[15]*r[4]+i[16]*r[9]+i[17]*r[14]+i[18]*r[19]+i[19],this._dirty=!0,this}});a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),d=t(14),r=function(o,n){if(n===void 0&&(n=new e),o.length===0)return n;for(var i=Number.MAX_VALUE,s=Number.MAX_VALUE,u=d.MIN_SAFE_INTEGER,h=d.MIN_SAFE_INTEGER,l,f,v,c=0;c<o.length;c++)l=o[c],Array.isArray(l)?(f=l[0],v=l[1]):(f=l.x,v=l.y),i=Math.min(i,f),s=Math.min(s,v),u=Math.max(u,f),h=Math.max(h,v);return n.x=i,n.y=s,n.width=u-i,n.height=h-s,n};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(1),r=new e({initialize:function(n,i,s){this._rgb=[0,0,0],this.onChangeCallback=d,this.dirty=!1,this.set(n,i,s)},set:function(o,n,i){return o===void 0&&(o=0),n===void 0&&(n=0),i===void 0&&(i=0),this._rgb=[o,n,i],this.onChange(),this},equals:function(o,n,i){var s=this._rgb;return s.r===o&&s.g===n&&s.b===i},onChange:function(){this.dirty=!0;var o=this._rgb;this.onChangeCallback.call(this,o[0],o[1],o[2])},r:{get:function(){return this._rgb[0]},set:function(o){this._rgb[0]=o,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(o){this._rgb[1]=o,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(o){this._rgb[2]=o,this.onChange()}},destroy:function(){this.onChangeCallback=null}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={CENTER:t(403),ORIENTATION:t(404),SCALE_MODE:t(405),ZOOM:t(406)};a.exports=e},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){e.parentNode&&e.parentNode.removeChild(e)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(144),r=t(197),o=t(20),n=t(419),i=t(420),s=t(33),u=t(1),h=t(421),l=new e({initialize:function(v,c){this.scene=v,this.game,this.renderer,this.config=c,this.settings=h.create(c),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=u},init:function(f){this.settings.status=d.INIT,this.sceneUpdate=u,this.game=f,this.renderer=f.renderer,this.canvas=f.canvas,this.context=f.context;var v=f.plugins;this.plugins=v,v.addToScene(this,r.Global,[r.CoreScene,i(this),n(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(f,v){var c=this.events;c.emit(o.PRE_UPDATE,f,v),c.emit(o.UPDATE,f,v),this.sceneUpdate.call(this.scene,f,v),c.emit(o.POST_UPDATE,f,v)},render:function(f){var v=this.displayList;v.depthSort(),this.events.emit(o.PRE_RENDER,f),this.cameras.render(f,v),this.events.emit(o.RENDER,f)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(f){var v=this.events,c=this.settings;return this.settings.active&&(c.status=d.PAUSED,c.active=!1,v.emit(o.PAUSE,this,f)),this},resume:function(f){var v=this.events,c=this.settings;return this.settings.active||(c.status=d.RUNNING,c.active=!0,v.emit(o.RESUME,this,f)),this},sleep:function(f){var v=this.events,c=this.settings;return c.status=d.SLEEPING,c.active=!1,c.visible=!1,v.emit(o.SLEEP,this,f),this},wake:function(f){var v=this.events,c=this.settings;return c.status=d.RUNNING,c.active=!0,c.visible=!0,v.emit(o.WAKE,this,f),c.isTransition&&v.emit(o.TRANSITION_WAKE,c.transitionFrom,c.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===d.SLEEPING},isActive:function(){return this.settings.status===d.RUNNING},isPaused:function(){return this.settings.status===d.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(f){return this.settings.visible=f,this},setActive:function(f,v){return f?this.resume(v):this.pause(v)},start:function(f){var v=this.events,c=this.settings;f&&(c.data=f),c.status=d.START,c.active=!0,c.visible=!0,v.emit(o.START,this),v.emit(o.READY,this,f)},shutdown:function(f){var v=this.events,c=this.settings;v.off(o.TRANSITION_INIT),v.off(o.TRANSITION_START),v.off(o.TRANSITION_COMPLETE),v.off(o.TRANSITION_OUT),c.status=d.SHUTDOWN,c.active=!1,c.visible=!1,this.renderer===s.WEBGL&&this.renderer.resetTextures(!0),v.emit(o.SHUTDOWN,this,f)},destroy:function(){var f=this.events,v=this.settings;v.status=d.DESTROYED,v.active=!1,v.visible=!1,f.emit(o.DESTROY,this),f.removeAllListeners();for(var c=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],p=0;p<c.length;p++)this[c[p]]=null}});a.exports=l},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e&&e[0].toUpperCase()+e.slice(1)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(33),d=t(0),r=t(109),o=t(424),n="Texture.frame missing: ",i=new d({initialize:function(u,h,l,f,v){Array.isArray(l)||(l=[l]),this.manager=u,this.key=h,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var c=0;c<l.length;c++)this.source.push(new o(this,l[c],f,v))},add:function(s,u,h,l,f,v){if(this.has(s))return null;var c=new r(this,s,u,h,l,f,v);return this.frames[s]=c,this.firstFrame==="__BASE"&&(this.firstFrame=s),this.frameTotal++,c},remove:function(s){if(this.has(s)){var u=this.get(s);return u.destroy(),delete this.frames[s],!0}return!1},has:function(s){return this.frames[s]},get:function(s){s||(s=this.firstFrame);var u=this.frames[s];return u||(console.warn(n+s),u=this.frames[this.firstFrame]),u},getTextureSourceIndex:function(s){for(var u=0;u<this.source.length;u++)if(this.source[u]===s)return u;return-1},getFramesFromTextureSource:function(s,u){u===void 0&&(u=!1);var h=[];for(var l in this.frames)if(!(l==="__BASE"&&!u)){var f=this.frames[l];f.sourceIndex===s&&h.push(f)}return h},getFrameNames:function(s){s===void 0&&(s=!1);var u=Object.keys(this.frames);if(!s){var h=u.indexOf("__BASE");h!==-1&&u.splice(h,1)}return u},getSourceImage:function(s){(s==null||this.frameTotal===1)&&(s="__BASE");var u=this.frames[s];return u?u.source.image:(console.warn(n+s),this.frames.__BASE.source.image)},getDataSourceImage:function(s){(s==null||this.frameTotal===1)&&(s="__BASE");var u=this.frames[s],h;return u?h=u.sourceIndex:(console.warn(n+s),h=this.frames.__BASE.sourceIndex),this.dataSource[h].image},setDataSource:function(s){Array.isArray(s)||(s=[s]);for(var u=0;u<s.length;u++){var h=this.source[u];this.dataSource.push(new o(this,s[u],h.width,h.height))}},setFilter:function(s){var u;for(u=0;u<this.source.length;u++)this.source[u].setFilter(s);for(u=0;u<this.dataSource.length;u++)this.dataSource[u].setFilter(s)},destroy:function(){var s;for(s=0;s<this.source.length;s++)this.source[s].destroy();for(s=0;s<this.dataSource.length;s++)this.dataSource[s].destroy();for(var u in this.frames){var h=this.frames[u];h.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var l=this.manager.game.renderer;l&&l.type===e.WEBGL&&l.resetTextures(!0),this.manager=null}});a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),d=function(r,o,n,i,s){i===void 0&&(i=0),s===void 0&&(s=r.length);var u=[];if(e(r,i,s))for(var h=i;h<s;h++){var l=r[h];(!o||o&&n===void 0&&l.hasOwnProperty(o)||o&&n!==void 0&&l[o]===n)&&u.push(l)}return u};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Matrix:t(1013),Add:t(1021),AddAt:t(1022),BringToTop:t(1023),CountAllMatching:t(1024),Each:t(1025),EachInRange:t(1026),FindClosestInSorted:t(318),GetAll:t(207),GetFirst:t(428),GetRandom:t(210),MoveDown:t(1027),MoveTo:t(1028),MoveUp:t(1029),MoveAbove:t(1030),MoveBelow:t(1031),NumberArray:t(322),NumberArrayStep:t(1032),QuickSelect:t(436),Range:t(437),Remove:t(93),RemoveAt:t(1033),RemoveBetween:t(1034),RemoveRandomElement:t(1035),Replace:t(1036),RotateLeft:t(178),RotateRight:t(179),SafeRange:t(78),SendToBack:t(1037),SetAll:t(1038),Shuffle:t(131),SortByDigits:t(320),SpliceOne:t(74),StableSort:t(79),Swap:t(1039)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(!Array.isArray(e)||e.length<2||!Array.isArray(e[0]))return!1;for(var d=e[0].length,r=1;r<e.length;r++)if(e[r].length!==d)return!1;return!0};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){d===void 0&&(d=0),r===void 0&&(r=e.length);var o=d+Math.floor(Math.random()*r);return e[o]===void 0?null:e[o]};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(9),r=t(438),o=new e({Extends:d,initialize:function(){d.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(n){return this._pending.push(n),this._toProcess++,n},remove:function(n){return this._destroy.push(n),this._toProcess++,n},removeAll:function(){for(var n=this._active,i=this._destroy,s=n.length;s--;)i.push(n[s]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var n=this._destroy,i=this._active,s,u;for(s=0;s<n.length;s++){u=n[s];var h=i.indexOf(u);h!==-1&&(i.splice(h,1),this.emit(r.PROCESS_QUEUE_REMOVE,u))}for(n.length=0,n=this._pending,s=0;s<n.length;s++)u=n[s],(!this.checkQueue||this.checkQueue&&i.indexOf(u)===-1)&&(i.push(u),this.emit(r.PROCESS_QUEUE_ADD,u));return n.length=0,this._toProcess=0,i},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(d,r){return parseInt(d.getAttribute(r),10)}var e=function(d,r,o,n,i){o===void 0&&(o=0),n===void 0&&(n=0);var s=r.cutX,u=r.cutY,h=r.source.width,l=r.source.height,f=r.sourceIndex,v={},c=d.getElementsByTagName("info")[0],p=d.getElementsByTagName("common")[0];v.font=c.getAttribute("face"),v.size=t(c,"size"),v.lineHeight=t(p,"lineHeight")+n,v.chars={};var m=d.getElementsByTagName("char"),y=r!==void 0&&r.trimmed;if(y)var T=r.height,E=r.width;for(var S=0;S<m.length;S++){var P=m[S],M=t(P,"id"),O=String.fromCharCode(M),L=t(P,"x"),F=t(P,"y"),b=t(P,"width"),B=t(P,"height");y&&(L<E&&(E=L),F<T&&(T=F)),y&&T!==0&&E!==0&&(L-=r.x,F-=r.y);var U=(s+L)/h,X=(u+F)/l,W=(s+L+b)/h,Z=(u+F+B)/l;if(v.chars[M]={x:L,y:F,width:b,height:B,centerX:Math.floor(b/2),centerY:Math.floor(B/2),xOffset:t(P,"xoffset"),yOffset:t(P,"yoffset"),xAdvance:t(P,"xadvance")+o,data:{},kerning:{},u0:U,v0:X,u1:W,v1:Z},i&&b!==0&&B!==0){var J=i.add(O,f,L,F,b,B);J&&J.setUVs(b,B,U,X,W,Z)}}var N=d.getElementsByTagName("kerning");for(S=0;S<N.length;S++){var I=N[S],G=t(I,"first"),V=t(I,"second"),Y=t(I,"amount");v.chars[V].kerning[G]=Y}return v};a.exports=e},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1049),d=t(440),r=t(0),o=t(11),n=t(109),i=t(15),s=t(110),u=new r({Extends:i,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,e],initialize:function(l,f,v,c,p){i.call(this,l,"Blitter"),this.setTexture(c,p),this.setPosition(f,v),this.initPipeline(),this.children=new s,this.renderList=[],this.dirty=!1},create:function(h,l,f,v,c){v===void 0&&(v=!0),c===void 0&&(c=this.children.length),f===void 0?f=this.frame:f instanceof n||(f=this.texture.get(f));var p=new d(this,h,l,f,v);return this.children.addAt(p,c,!1),this.dirty=!0,p},createFromCallback:function(h,l,f,v){for(var c=this.createMultiple(l,f,v),p=0;p<c.length;p++){var m=c[p];h.call(this,m,p)}return c},createMultiple:function(h,l,f){l===void 0&&(l=this.frame.name),f===void 0&&(f=!0),Array.isArray(l)||(l=[l]);var v=[],c=this;return l.forEach(function(p){for(var m=0;m<h;m++)v.push(c.create(0,0,p,f))}),v},childCanRender:function(h){return h.visible&&h.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(208),d=t(35),r=t(0),o=t(11),n=t(75),i=t(15),s=t(10),u=t(1052),h=t(441),l=t(3),f=new r({Extends:i,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,u],initialize:function(c,p,m,y){i.call(this,c,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=c.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(p,m),this.clearAlpha(),this.setBlendMode(d.SKIP_CHECK),y&&this.add(y)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(v){return v===void 0&&(v=!0),this.exclusive=v,this},getBounds:function(v){if(v===void 0&&(v=new s),v.setTo(this.x,this.y,0,0),this.parentContainer){var c=this.parentContainer.getBoundsTransformMatrix(),p=c.transformPoint(this.x,this.y);v.setTo(p.x,p.y,0,0)}if(this.list.length>0){var m=this.list,y=new s,T=!1;v.setEmpty();for(var E=0;E<m.length;E++){var S=m[E];S.getBounds&&(S.getBounds(y),T?h(y,v,v):(v.setTo(y.x,y.y,y.width,y.height),T=!0))}}return v},addHandler:function(v){v.once(n.DESTROY,this.remove,this),this.exclusive&&(v.parentContainer&&v.parentContainer.remove(v),v.removeFromDisplayList(),v.parentContainer=this)},removeHandler:function(v){v.off(n.DESTROY,this.remove),this.exclusive&&(v.parentContainer=null,v.addToDisplayList())},pointToContainer:function(v,c){c===void 0&&(c=new l),this.parentContainer?this.parentContainer.pointToContainer(v,c):c=new l(v.x,v.y);var p=this.tempTransformMatrix;return p.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),p.invert(),p.transformPoint(v.x,v.y,c),c},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(v){return e.Add(this.list,v,this.maxSize,this.addHandler,this),this},addAt:function(v,c){return e.AddAt(this.list,v,c,this.maxSize,this.addHandler,this),this},getAt:function(v){return this.list[v]},getIndex:function(v){return this.list.indexOf(v)},sort:function(v,c){return v?(c===void 0&&(c=function(p,m){return p[v]-m[v]}),e.StableSort(this.list,c),this):this},getByName:function(v){return e.GetFirst(this.list,"name",v)},getRandom:function(v,c){return e.GetRandom(this.list,v,c)},getFirst:function(v,c,p,m){return e.GetFirst(this.list,v,c,p,m)},getAll:function(v,c,p,m){return e.GetAll(this.list,v,c,p,m)},count:function(v,c,p,m){return e.CountAllMatching(this.list,v,c,p,m)},swap:function(v,c){return e.Swap(this.list,v,c),this},moveTo:function(v,c){return e.MoveTo(this.list,v,c),this},moveAbove:function(v,c){return e.MoveAbove(this.list,v,c),this},moveBelow:function(v,c){return e.MoveBelow(this.list,v,c),this},remove:function(v,c){var p=e.Remove(this.list,v,this.removeHandler,this);if(c&&p){Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++)p[m].destroy()}return this},removeAt:function(v,c){var p=e.RemoveAt(this.list,v,this.removeHandler,this);return c&&p&&p.destroy(),this},removeBetween:function(v,c,p){var m=e.RemoveBetween(this.list,v,c,this.removeHandler,this);if(p)for(var y=0;y<m.length;y++)m[y].destroy();return this},removeAll:function(v){var c=e.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(v)for(var p=0;p<c.length;p++)c[p].destroy();return this},bringToTop:function(v){return e.BringToTop(this.list,v),this},sendToBack:function(v){return e.SendToBack(this.list,v),this},moveUp:function(v){return e.MoveUp(this.list,v),this},moveDown:function(v){return e.MoveDown(this.list,v),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return e.Shuffle(this.list),this},replace:function(v,c,p){var m=e.Replace(this.list,v,c);return m&&(this.addHandler(c),this.removeHandler(v),p&&v.destroy()),this},exists:function(v){return this.list.indexOf(v)>-1},setAll:function(v,c,p,m){return e.SetAll(this.list,v,c,p,m),this},each:function(v,c){var p=[null],m,y=this.list.slice(),T=y.length;for(m=2;m<arguments.length;m++)p.push(arguments[m]);for(m=0;m<T;m++)p[0]=y[m],v.apply(c,p);return this},iterate:function(v,c){var p=[null],m;for(m=2;m<arguments.length;m++)p.push(arguments[m]);for(m=0;m<this.list.length;m++)p[0]=this.list[m],v.apply(c,p);return this},setScrollFactor:function(v,c,p){return c===void 0&&(c=v),p===void 0&&(p=!1),this.scrollFactorX=v,this.scrollFactorY=c,p&&(e.SetAll(this.list,"scrollFactorX",v),e.SetAll(this.list,"scrollFactorY",c)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});a.exports=f},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(148),d=t(0),r=t(1057),o=new d({Extends:e,Mixins:[r],initialize:function(i,s,u,h,l,f,v){e.call(this,i,s,u,h,l,f,v),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(n,i){return this.cropWidth=n,this.cropHeight=i,this},setDisplayCallback:function(n){return this.displayCallback=n,this},setScrollX:function(n){return this.scrollX=n,this},setScrollY:function(n){return this.scrollY=n,this}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(133),d=t(0),r=t(217),o=t(303),n=t(304),i=t(305),s=t(309),u=t(167),h=t(312),l=t(313),f=t(314),v=t(111),c=t(15),p=t(2),m=t(6),y=t(14),T=t(1063),E=new d({Extends:c,Mixins:[o,n,i,s,u,l,f,h,T],initialize:function(P,M){var O=m(M,"x",0),L=m(M,"y",0);c.call(this,P,"Graphics"),this.setPosition(O,L),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(M)},setDefaultStyles:function(S){return m(S,"lineStyle",null)&&(this.defaultStrokeWidth=m(S,"lineStyle.width",1),this.defaultStrokeColor=m(S,"lineStyle.color",16777215),this.defaultStrokeAlpha=m(S,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),m(S,"fillStyle",null)&&(this.defaultFillColor=m(S,"fillStyle.color",16777215),this.defaultFillAlpha=m(S,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(S,P,M){return M===void 0&&(M=1),this.commandBuffer.push(r.LINE_STYLE,S,P,M),this._lineWidth=S,this},fillStyle:function(S,P){return P===void 0&&(P=1),this.commandBuffer.push(r.FILL_STYLE,S,P),this},fillGradientStyle:function(S,P,M,O,L,F,b,B){return L===void 0&&(L=1),F===void 0&&(F=L),b===void 0&&(b=L),B===void 0&&(B=L),this.commandBuffer.push(r.GRADIENT_FILL_STYLE,L,F,b,B,S,P,M,O),this},lineGradientStyle:function(S,P,M,O,L,F){return F===void 0&&(F=1),this.commandBuffer.push(r.GRADIENT_LINE_STYLE,S,F,P,M,O,L),this},beginPath:function(){return this.commandBuffer.push(r.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(r.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(r.FILL_PATH),this},fill:function(){return this.commandBuffer.push(r.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(r.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(r.STROKE_PATH),this},fillCircleShape:function(S){return this.fillCircle(S.x,S.y,S.radius)},strokeCircleShape:function(S){return this.strokeCircle(S.x,S.y,S.radius)},fillCircle:function(S,P,M){return this.beginPath(),this.arc(S,P,M,0,y.PI2),this.fillPath(),this},strokeCircle:function(S,P,M){return this.beginPath(),this.arc(S,P,M,0,y.PI2),this.strokePath(),this},fillRectShape:function(S){return this.fillRect(S.x,S.y,S.width,S.height)},strokeRectShape:function(S){return this.strokeRect(S.x,S.y,S.width,S.height)},fillRect:function(S,P,M,O){return this.commandBuffer.push(r.FILL_RECT,S,P,M,O),this},strokeRect:function(S,P,M,O){var L=this._lineWidth/2,F=S-L,b=S+L;return this.beginPath(),this.moveTo(S,P),this.lineTo(S,P+O),this.strokePath(),this.beginPath(),this.moveTo(S+M,P),this.lineTo(S+M,P+O),this.strokePath(),this.beginPath(),this.moveTo(F,P),this.lineTo(b+M,P),this.strokePath(),this.beginPath(),this.moveTo(F,P+O),this.lineTo(b+M,P+O),this.strokePath(),this},fillRoundedRect:function(S,P,M,O,L){L===void 0&&(L=20);var F=L,b=L,B=L,U=L;return typeof L!="number"&&(F=p(L,"tl",20),b=p(L,"tr",20),B=p(L,"bl",20),U=p(L,"br",20)),this.beginPath(),this.moveTo(S+F,P),this.lineTo(S+M-b,P),this.arc(S+M-b,P+b,b,-y.TAU,0),this.lineTo(S+M,P+O-U),this.arc(S+M-U,P+O-U,U,0,y.TAU),this.lineTo(S+B,P+O),this.arc(S+B,P+O-B,B,y.TAU,Math.PI),this.lineTo(S,P+F),this.arc(S+F,P+F,F,-Math.PI,-y.TAU),this.fillPath(),this},strokeRoundedRect:function(S,P,M,O,L){L===void 0&&(L=20);var F=L,b=L,B=L,U=L;return typeof L!="number"&&(F=p(L,"tl",20),b=p(L,"tr",20),B=p(L,"bl",20),U=p(L,"br",20)),this.beginPath(),this.moveTo(S+F,P),this.lineTo(S+M-b,P),this.moveTo(S+M-b,P),this.arc(S+M-b,P+b,b,-y.TAU,0),this.lineTo(S+M,P+O-U),this.moveTo(S+M,P+O-U),this.arc(S+M-U,P+O-U,U,0,y.TAU),this.lineTo(S+B,P+O),this.moveTo(S+B,P+O),this.arc(S+B,P+O-B,B,y.TAU,Math.PI),this.lineTo(S,P+F),this.moveTo(S,P+F),this.arc(S+F,P+F,F,-Math.PI,-y.TAU),this.strokePath(),this},fillPointShape:function(S,P){return this.fillPoint(S.x,S.y,P)},fillPoint:function(S,P,M){return!M||M<1?M=1:(S-=M/2,P-=M/2),this.commandBuffer.push(r.FILL_RECT,S,P,M,M),this},fillTriangleShape:function(S){return this.fillTriangle(S.x1,S.y1,S.x2,S.y2,S.x3,S.y3)},strokeTriangleShape:function(S){return this.strokeTriangle(S.x1,S.y1,S.x2,S.y2,S.x3,S.y3)},fillTriangle:function(S,P,M,O,L,F){return this.commandBuffer.push(r.FILL_TRIANGLE,S,P,M,O,L,F),this},strokeTriangle:function(S,P,M,O,L,F){return this.commandBuffer.push(r.STROKE_TRIANGLE,S,P,M,O,L,F),this},strokeLineShape:function(S){return this.lineBetween(S.x1,S.y1,S.x2,S.y2)},lineBetween:function(S,P,M,O){return this.beginPath(),this.moveTo(S,P),this.lineTo(M,O),this.strokePath(),this},lineTo:function(S,P){return this.commandBuffer.push(r.LINE_TO,S,P),this},moveTo:function(S,P){return this.commandBuffer.push(r.MOVE_TO,S,P),this},strokePoints:function(S,P,M,O){P===void 0&&(P=!1),M===void 0&&(M=!1),O===void 0&&(O=S.length),this.beginPath(),this.moveTo(S[0].x,S[0].y);for(var L=1;L<O;L++)this.lineTo(S[L].x,S[L].y);return P&&this.lineTo(S[0].x,S[0].y),M&&this.closePath(),this.strokePath(),this},fillPoints:function(S,P,M,O){P===void 0&&(P=!1),M===void 0&&(M=!1),O===void 0&&(O=S.length),this.beginPath(),this.moveTo(S[0].x,S[0].y);for(var L=1;L<O;L++)this.lineTo(S[L].x,S[L].y);return P&&this.lineTo(S[0].x,S[0].y),M&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(S,P){P===void 0&&(P=32);var M=S.getPoints(P);return this.strokePoints(M,!0)},strokeEllipse:function(S,P,M,O,L){L===void 0&&(L=32);var F=new v(S,P,M,O),b=F.getPoints(L);return this.strokePoints(b,!0)},fillEllipseShape:function(S,P){P===void 0&&(P=32);var M=S.getPoints(P);return this.fillPoints(M,!0)},fillEllipse:function(S,P,M,O,L){L===void 0&&(L=32);var F=new v(S,P,M,O),b=F.getPoints(L);return this.fillPoints(b,!0)},arc:function(S,P,M,O,L,F,b){return F===void 0&&(F=!1),b===void 0&&(b=0),this.commandBuffer.push(r.ARC,S,P,M,O,L,F,b),this},slice:function(S,P,M,O,L,F,b){return F===void 0&&(F=!1),b===void 0&&(b=0),this.commandBuffer.push(r.BEGIN_PATH),this.commandBuffer.push(r.MOVE_TO,S,P),this.commandBuffer.push(r.ARC,S,P,M,O,L,F,b),this.commandBuffer.push(r.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(r.SAVE),this},restore:function(){return this.commandBuffer.push(r.RESTORE),this},translateCanvas:function(S,P){return this.commandBuffer.push(r.TRANSLATE,S,P),this},scaleCanvas:function(S,P){return this.commandBuffer.push(r.SCALE,S,P),this},rotateCanvas:function(S){return this.commandBuffer.push(r.ROTATE,S),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(S,P,M){var O=this.scene.sys,L=O.game.renderer;P===void 0&&(P=O.scale.width),M===void 0&&(M=O.scale.height),E.TargetCamera.setScene(this.scene),E.TargetCamera.setViewport(0,0,P,M),E.TargetCamera.scrollX=this.x,E.TargetCamera.scrollY=this.y;var F,b;if(typeof S=="string")if(O.textures.exists(S)){F=O.textures.get(S);var B=F.getSourceImage();B instanceof HTMLCanvasElement&&(b=B.getContext("2d"))}else F=O.textures.createCanvas(S,P,M),b=F.getSourceImage().getContext("2d");else S instanceof HTMLCanvasElement&&(b=S.getContext("2d"));return b&&(this.renderCanvas(L,this,E.TargetCamera,null,b,!1),F&&F.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});E.TargetCamera=new e,a.exports=E},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o,n){n===void 0&&(n=new e);var i=r.width/2,s=r.height/2;return n.x=r.x+i*Math.cos(o),n.y=r.y+s*Math.sin(o),n};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),d=t(0),r=t(11),o=t(176),n=t(101),i=t(9),s=t(75),u=t(110),h=t(1071),l=t(20),f=t(79),v=new d({Extends:u,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.Visible,i,h],initialize:function(p,m){u.call(this,p),i.call(this),this.scene=p,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=p.sys,this.events=p.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(e.SKIP_CHECK),m&&this.add(m),p.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new n(this)),this},setData:function(c,p){return this.data||(this.data=new n(this)),this.data.set(c,p),this},incData:function(c,p){return this.data||(this.data=new n(this)),this.data.inc(c,p),this},toggleData:function(c){return this.data||(this.data=new n(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new n(this)),this.data.get(c)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(c){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,p=this.parentContainer,m=[];p&&(m.unshift(p.getIndex(c)),c=p,p.parentContainer);)p=p.parentContainer;return m.unshift(this.displayList.getIndex(c)),m},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(s.ADDED_TO_SCENE,c,this.scene),this.events.emit(l.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(s.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,c,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(f(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,p){return c._depth-p._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(s.DESTROY,this);for(var c=this.list.length;c--;)this.list[c].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});a.exports=v},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(11),r=t(15),o=t(450),n=t(110),i=t(452),s=t(1075),u=new e({Extends:r,Mixins:[d.Depth,d.Mask,d.Pipeline,d.Transform,d.Visible,s],initialize:function(l,f,v,c){if(r.call(this,l,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],v!==null&&(typeof v=="object"||Array.isArray(v))&&(c=v,v=null),this.setTexture(f,v),this.initPipeline(),this.emitters=new n(this),this.wells=new n(this),c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++)this.createEmitter(c[p])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(h,l){return this.texture=this.scene.sys.textures.get(h),this.setFrame(l)},setFrame:function(h){this.frame=this.texture.get(h);var l=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),f=[];return l.forEach(function(v){f.push(v.name)}),this.frameNames=f,this.defaultFrame=this.frame,this},setEmitterFrames:function(h,l){Array.isArray(h)||(h=[h]);var f=l.frames;f.length=0;for(var v=0;v<h.length;v++){var c=h[v];this.frameNames.indexOf(c)!==-1&&f.push(this.texture.get(c))}return f.length>0?l.defaultFrame=f[0]:l.defaultFrame=this.defaultFrame,this},addEmitter:function(h){return this.emitters.add(h)},createEmitter:function(h){return this.addEmitter(new i(this,h))},removeEmitter:function(h){return this.emitters.remove(h,!0)},addGravityWell:function(h){return this.wells.add(h)},createGravityWell:function(h){return this.addGravityWell(new o(h))},emitParticle:function(h,l,f){for(var v=this.emitters.list,c=0;c<v.length;c++){var p=v[c];p.active&&p.emitParticle(h,l,f)}return this},emitParticleAt:function(h,l,f){return this.emitParticle(f,h,l)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(h,l){l*=this.timeScale;for(var f=this.emitters.list,v=0;v<f.length;v++){var c=f[v];c.active&&c.preUpdate(h,l)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),d=t(133),r=t(31),o=t(0),n=t(11),i=t(33),s=t(109),u=t(15),h=t(1),l=t(92),f=t(1079),v=t(141),c=t(12),p=t(222),m=new o({Extends:u,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Crop,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Tint,n.Transform,n.Visible,f],initialize:function(T,E,S,P,M,O,L){E===void 0&&(E=0),S===void 0&&(S=0),P===void 0&&(P=32),M===void 0&&(M=32),u.call(this,T,"RenderTexture"),this.renderer=T.sys.renderer,this.textureManager=T.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,O===void 0?(this.canvas=r.create2D(this,P,M),this.texture=T.sys.textures.addCanvas(p(),this.canvas),this.frame=this.texture.get()):(this.texture=T.sys.textures.get(O),this.frame=this.texture.get(L),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new d(0,0,P,M),this.renderTarget=null;var F=this.renderer;F?F.type===i.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new v(F,P,M,1,0,!1)):F.type===i.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=h,this.camera.setScene(T),this.setPosition(E,S),O===void 0&&this.setSize(P,M),this.setOrigin(0,0),this.initPipeline(l.SINGLE_PIPELINE)},setSize:function(y,T){return this.resize(y,T)},resize:function(y,T){T===void 0&&(T=y);var E=this.frame;if(y!==this.width||T!==this.height){if(E.name==="__BASE"){this.canvas.width=y,this.canvas.height=T,this.texture.width=y,this.texture.height=T;var S=this.renderTarget;S&&(S.resize(y,T),E.glTexture=S.texture,E.source.isRenderTexture=!0,E.source.isGLTexture=!0,E.source.glTexture=S.texture),this.camera.setSize(y,T),E.source.width=y,E.source.height=T,E.setSize(y,T),this.width=y,this.height=T}}else{var P=this.texture.getSourceImage();E.cutX+y>P.width&&(y=P.width-E.cutX),E.cutY+T>P.height&&(T=P.height-E.cutY),E.setSize(y,T,E.cutX,E.cutY)}this.updateDisplayOrigin();var M=this.input;return M&&!M.customHitArea&&(M.hitArea.width=y,M.hitArea.height=T),this},setGlobalTint:function(y){return this.globalTint=y,this},setGlobalAlpha:function(y){return this.globalAlpha=y,this},saveTexture:function(y){return this.textureManager.renameTexture(this.texture.key,y),this._saved=!0,this.texture},fill:function(y,T,E,S,P,M){var O=this.frame,L=this.camera,F=this.renderer;T===void 0&&(T=1),E===void 0&&(E=0),S===void 0&&(S=0),P===void 0&&(P=O.cutWidth),M===void 0&&(M=O.cutHeight);var b=(y>>16&255)/255,B=(y>>8&255)/255,U=(y&255)/255,X=this.renderTarget;if(L.preRender(),X){X.bind(!0);var W=this.pipeline;W.manager.set(W);var Z=X.width,J=X.height,N=F.width,I=F.height,G=N/Z,V=I/J;W.drawFillRect(E*G,S*V,P*G,M*V,c.getTintFromFloats(U,B,b,1),T),X.unbind(!0)}else{var Y=this.context;F.setContext(Y),Y.fillStyle="rgba("+b+","+B+","+U+","+T+")",Y.fillRect(E+O.cutX,S+O.cutY,P,M),F.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var y=this.renderTarget;if(y)y.clear();else{var T=this.context;T.save(),T.setTransform(1,0,0,1,0,0),T.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),T.restore()}this.dirty=!1}return this},erase:function(y,T,E){return this._eraseMode=!0,this.draw(y,T,E,1,16777215),this._eraseMode=!1,this},draw:function(y,T,E,S,P){return this.beginDraw(),this.batchDraw(y,T,E,S,P),this.endDraw(),this},drawFrame:function(y,T,E,S,P,M){return this.beginDraw(),this.batchDrawFrame(y,T,E,S,P,M),this.endDraw(),this},beginDraw:function(){var y=this.camera,T=this.renderer,E=this.renderTarget;return y.preRender(),E?T.beginCapture(E.width,E.height):T.setContext(this.context),this},batchDraw:function(y,T,E,S,P){return S===void 0&&(S=this.globalAlpha),P===void 0?P=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):P=(P>>16)+(P&65280)+((P&255)<<16),Array.isArray(y)||(y=[y]),this.batchList(y,T,E,S,P),this},batchDrawFrame:function(y,T,E,S,P,M){E===void 0&&(E=0),S===void 0&&(S=0),P===void 0&&(P=this.globalAlpha),M===void 0?M=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):M=(M>>16)+(M&65280)+((M&255)<<16);var O=this.textureManager.getFrame(y,T);return O&&(this.renderTarget?this.pipeline.batchTextureFrame(O,E,S,M,P,this.camera.matrix,null):this.batchTextureFrame(O,E+this.frame.cutX,S+this.frame.cutY,P,M)),this},endDraw:function(y){y===void 0&&(y=this._eraseMode);var T=this.renderer,E=this.renderTarget;if(E){var S=T.endCapture(),P=T.pipelines.setUtility();P.blitFrame(S,E,1,!1,!1,y),T.resetScissor(),T.resetViewport()}else T.setContext();return this.dirty=!0,this},batchList:function(y,T,E,S,P){for(var M=0;M<y.length;M++){var O=y[M];!O||O===this||(O.renderWebGL||O.renderCanvas?this.drawGameObject(O,T,E):O.isParent||O.list?this.batchGroup(O.getChildren(),T,E):typeof O=="string"?this.batchTextureFrameKey(O,null,T,E,S,P):O instanceof s?this.batchTextureFrame(O,T,E,S,P):Array.isArray(O)&&this.batchList(O,T,E,S,P))}},batchGroup:function(y,T,E){T===void 0&&(T=0),E===void 0&&(E=0),T+=this.frame.cutX,E+=this.frame.cutY;for(var S=0;S<y.length;S++){var P=y[S];if(P.willRender(this.camera)){var M=P.x+T,O=P.y+E;this.drawGameObject(P,M,O)}}},batchGameObjectWebGL:function(y,T,E){T===void 0&&(T=y.x),E===void 0&&(E=y.y);var S=y.x,P=y.y;y.setPosition(T+this.frame.cutX,E+this.frame.cutY),y.renderDirect?y.renderDirect(this.renderer,y,this.camera):y.renderWebGL(this.renderer,y,this.camera),y.setPosition(S,P)},batchGameObjectCanvas:function(y,T,E){T===void 0&&(T=y.x),E===void 0&&(E=y.y);var S=y.x,P=y.y;if(this._eraseMode){var M=y.blendMode;y.blendMode=e.ERASE}y.setPosition(T+this.frame.cutX,E+this.frame.cutY),y.renderCanvas(this.renderer,y,this.camera,null),y.setPosition(S,P),this._eraseMode&&(y.blendMode=M)},batchTextureFrameKey:function(y,T,E,S,P,M){var O=this.textureManager.getFrame(y,T);O&&this.batchTextureFrame(O,E,S,P,M)},batchTextureFrame:function(y,T,E,S,P){T===void 0&&(T=0),E===void 0&&(E=0),T+=this.frame.cutX,E+=this.frame.cutY;var M=this.renderTarget;if(M)this.pipeline.batchTextureFrame(y,T,E,P,S,this.camera.matrix,null);else{var O=this.context,L=y.canvasData,F=y.source.image,b=this.camera.matrix;O.save(),O.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",O.globalAlpha=S,b.setToContext(O),O.drawImage(F,L.x,L.y,L.width,L.height,T,E,L.width,L.height),O.restore()}},snapshotArea:function(y,T,E,S,P,M,O){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,P,!1,y,T,E,S,M,O):this.renderer.snapshotCanvas(this.canvas,P,!1,y,T,E,S,M,O),this},snapshot:function(y,T,E){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,y,!1,0,0,this.width,this.height,T,E):this.renderer.snapshotCanvas(this.canvas,y,!1,0,0,this.width,this.height,T,E),this},snapshotPixel:function(y,T,E){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,E,!0,y,T):this.renderer.snapshotCanvas(this.canvas,E,!0,y,T),this},preDestroy:function(){this._saved||(r.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});a.exports=m},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=Math.random()*16|0,r=e==="x"?d:d&3|8;return r.toString(16)})};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(164),d=t(0),r=t(11),o=t(15),n=t(92),i=t(1085),s=t(3),u=new d({Extends:o,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Flip,r.Mask,r.Pipeline,r.Size,r.Texture,r.Transform,r.Visible,r.ScrollFactor,i],initialize:function(l,f,v,c,p,m,y,T,E){c===void 0&&(c="__DEFAULT"),m===void 0&&(m=2),y===void 0&&(y=!0),o.call(this,l,"Rope"),this.anims=new e(this),this.points=m,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=c==="__DEFAULT",this.dirty=!1,this.horizontal=y,this._flipX=!1,this._flipY=!1,this._perp=new s,this.debugCallback=null,this.debugGraphic=null,this.setTexture(c,p),this.setPosition(f,v),this.setSizeToFrame(),this.initPipeline(n.ROPE_PIPELINE),Array.isArray(m)&&this.resizeArrays(m.length),this.setPoints(m,T,E),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(h,l){var f=this.anims.currentFrame;this.anims.update(h,l),this.anims.currentFrame!==f&&(this.updateUVs(),this.updateVertices())},play:function(h,l,f){return this.anims.play(h,l,f),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(h,l,f){return h===void 0&&(h=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(h,l,f))},setVertical:function(h,l,f){return h===void 0&&(h=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(h,l,f)):this},setTintFill:function(h){return h===void 0&&(h=!1),this.tintFill=h,this},setAlphas:function(h,l){var f=this.points.length;if(f<1)return this;var v=this.alphas;h===void 0?h=[1]:!Array.isArray(h)&&l===void 0&&(h=[h]);var c,p=0;if(l!==void 0)for(c=0;c<f;c++)p=c*2,v[p]=h,v[p+1]=l;else if(h.length===f)for(c=0;c<f;c++)p=c*2,v[p]=h[c],v[p+1]=h[c];else{var m=h[0];for(c=0;c<f;c++)p=c*2,h.length>p&&(m=h[p]),v[p]=m,h.length>p+1&&(m=h[p+1]),v[p+1]=m}return this},setColors:function(h){var l=this.points.length;if(l<1)return this;var f=this.colors;h===void 0?h=[16777215]:Array.isArray(h)||(h=[h]);var v,c=0;if(h.length===l)for(v=0;v<l;v++)c=v*2,f[c]=h[v],f[c+1]=h[v];else{var p=h[0];for(v=0;v<l;v++)c=v*2,h.length>c&&(p=h[c]),f[c]=p,h.length>c+1&&(p=h[c+1]),f[c+1]=p}return this},setPoints:function(h,l,f){if(h===void 0&&(h=2),typeof h=="number"){var v=h;v<2&&(v=2),h=[];var c,p,m;if(this.horizontal)for(m=-this.frame.halfWidth,p=this.frame.width/(v-1),c=0;c<v;c++)h.push({x:m+c*p,y:0});else for(m=-this.frame.halfHeight,p=this.frame.height/(v-1),c=0;c<v;c++)h.push({x:0,y:m+c*p})}var y=h.length,T=this.points.length;return y<1?(console.warn("Rope: Not enough points given"),this):(y===1&&(h.unshift({x:0,y:0}),y++),T!==y&&this.resizeArrays(y),this.points=h,this.updateUVs(),l!=null&&this.setColors(l),f!=null&&this.setAlphas(f),this)},updateUVs:function(){for(var h=this.uv,l=this.points.length,f=this.frame.u0,v=this.frame.v0,c=this.frame.u1,p=this.frame.v1,m=(c-f)/(l-1),y=(p-v)/(l-1),T=0;T<l;T++){var E=T*4,S,P,M,O;this.horizontal?(this._flipX?(S=c-T*m,M=c-T*m):(S=f+T*m,M=f+T*m),this._flipY?(P=p,O=v):(P=v,O=p)):(this._flipX?(S=f,M=c):(S=c,M=f),this._flipY?(P=p-T*y,O=p-T*y):(P=v+T*y,O=v+T*y)),h[E+0]=S,h[E+1]=P,h[E+2]=M,h[E+3]=O}return this},resizeArrays:function(h){var l=this.colors,f=this.alphas;this.vertices=new Float32Array(h*4),this.uv=new Float32Array(h*4),l=new Uint32Array(h*2),f=new Float32Array(h*2);for(var v=0;v<h*2;v++)l[v]=16777215,f[v]=1;return this.colors=l,this.alphas=f,this.dirty=!0,this},updateVertices:function(){var h=this._perp,l=this.points,f=this.vertices,v=l.length;if(this.dirty=!1,!(v<1)){for(var c,p=l[0],m=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,y=0;y<v;y++){var T=l[y],E=y*4;y<v-1?c=l[y+1]:c=T,h.x=c.y-p.y,h.y=-(c.x-p.x);var S=h.length();h.x/=S,h.y/=S,h.x*=m,h.y*=m,f[E]=T.x+h.x,f[E+1]=T.y+h.y,f[E+2]=T.x-h.x,f[E+3]=T.y-h.y,p=T}return this}},setDebug:function(h,l){return this.debugGraphic=h,!h&&!l?this.debugCallback=null:l?this.debugCallback=l:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(h,l,f){var v=h.debugGraphic,c=f[0],p=f[1],m=f[2],y=f[3];v.lineBetween(c,p,m,y);for(var T=4;T<l;T+=4){var E=f[T+0],S=f[T+1],P=f[T+2],M=f[T+3];v.lineBetween(c,p,E,S),v.lineBetween(m,y,P,M),v.lineBetween(m,y,E,S),v.lineBetween(E,S,P,M),c=E,p=S,m=P,y=M}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(h){return this._flipX=h,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(h){return this._flipY=h,this.updateUVs()}}});a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(142),d=t(31),r=t(0),o=t(11),n=t(22),i=t(15),s=t(458),u=t(6),h=t(202),l=t(1088),f=t(459),v=new r({Extends:i,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,l],initialize:function(p,m,y,T,E){m===void 0&&(m=0),y===void 0&&(y=0),i.call(this,p,"Text"),this.renderer=p.sys.renderer,this.setPosition(m,y),this.setOrigin(0,0),this.initPipeline(),this.canvas=d.create(this),this.context=this.canvas.getContext("2d"),this.style=new f(this,E),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=p.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(T),E&&E.padding&&this.setPadding(E.padding),E&&E.lineSpacing&&this.setLineSpacing(E.lineSpacing),p.sys.game.events.on(n.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",e(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(c){var p=this.style;if(p.wordWrapCallback){var m=p.wordWrapCallback.call(p.wordWrapCallbackScope,c,this);return Array.isArray(m)&&(m=m.join(`
`)),m}else return p.wordWrapWidth?p.wordWrapUseAdvanced?this.advancedWordWrap(c,this.context,this.style.wordWrapWidth):this.basicWordWrap(c,this.context,this.style.wordWrapWidth):c},advancedWordWrap:function(c,p,m){for(var y="",T=c.replace(/ +/gi," ").split(this.splitRegExp),E=T.length,S=0;S<E;S++){var P=T[S],M="";P=P.replace(/^ *|\s*$/gi,"");var O=p.measureText(P).width;if(O<m){y+=P+`
`;continue}for(var L=m,F=P.split(" "),b=0;b<F.length;b++){var B=F[b],U=B+" ",X=p.measureText(U).width;if(X>L){if(b===0){for(var W=U;W.length&&(W=W.slice(0,-1),X=p.measureText(W).width,!(X<=L)););if(!W.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var Z=B.substr(W.length);F[b]=Z,M+=W}var J=F[b].length?b:b+1,N=F.slice(J).join(" ").replace(/[ \n]*$/gi,"");T[S+1]=N+" "+(T[S+1]||""),E=T.length;break}else M+=U,L-=X}y+=M.replace(/[ \n]*$/gi,"")+`
`}return y=y.replace(/[\s|\n]*$/gi,""),y},basicWordWrap:function(c,p,m){for(var y="",T=c.split(this.splitRegExp),E=T.length-1,S=p.measureText(" ").width,P=0;P<=E;P++){for(var M=m,O=T[P].split(" "),L=O.length-1,F=0;F<=L;F++){var b=O[F],B=p.measureText(b).width,U=B;F<L&&(U+=S),U>M&&F>0&&(y+=`
`,M=m),y+=b,F<L?(y+=" ",M-=U):M-=B}P<E&&(y+=`
`)}return y},getWrappedText:function(c){c===void 0&&(c=this._text),this.style.syncFont(this.canvas,this.context);var p=this.runWordWrap(c);return p.split(this.splitRegExp)},setText:function(c){return!c&&c!==0&&(c=""),Array.isArray(c)&&(c=c.join(`
`)),c!==this._text&&(this._text=c.toString(),this.updateText()),this},setStyle:function(c){return this.style.setStyle(c)},setFont:function(c){return this.style.setFont(c)},setFontFamily:function(c){return this.style.setFontFamily(c)},setFontSize:function(c){return this.style.setFontSize(c)},setFontStyle:function(c){return this.style.setFontStyle(c)},setFixedSize:function(c,p){return this.style.setFixedSize(c,p)},setBackgroundColor:function(c){return this.style.setBackgroundColor(c)},setFill:function(c){return this.style.setFill(c)},setColor:function(c){return this.style.setColor(c)},setStroke:function(c,p){return this.style.setStroke(c,p)},setShadow:function(c,p,m,y,T,E){return this.style.setShadow(c,p,m,y,T,E)},setShadowOffset:function(c,p){return this.style.setShadowOffset(c,p)},setShadowColor:function(c){return this.style.setShadowColor(c)},setShadowBlur:function(c){return this.style.setShadowBlur(c)},setShadowStroke:function(c){return this.style.setShadowStroke(c)},setShadowFill:function(c){return this.style.setShadowFill(c)},setWordWrapWidth:function(c,p){return this.style.setWordWrapWidth(c,p)},setWordWrapCallback:function(c,p){return this.style.setWordWrapCallback(c,p)},setAlign:function(c){return this.style.setAlign(c)},setResolution:function(c){return this.style.setResolution(c)},setLineSpacing:function(c){return this.lineSpacing=c,this.updateText()},setPadding:function(c,p,m,y){if(typeof c=="object"){var T=c,E=u(T,"x",null);E!==null?(c=E,m=E):(c=u(T,"left",0),m=u(T,"right",c));var S=u(T,"y",null);S!==null?(p=S,y=S):(p=u(T,"top",0),y=u(T,"bottom",p))}else c===void 0&&(c=0),p===void 0&&(p=c),m===void 0&&(m=c),y===void 0&&(y=p);return this.padding.left=c,this.padding.top=p,this.padding.right=m,this.padding.bottom=y,this.updateText()},setMaxLines:function(c){return this.style.setMaxLines(c)},updateText:function(){var c=this.canvas,p=this.context,m=this.style,y=m.resolution,T=m.metrics;m.syncFont(c,p);var E=this._text;(m.wordWrapWidth||m.wordWrapCallback)&&(E=this.runWordWrap(this._text));var S=E.split(this.splitRegExp),P=s(this,T,S),M=this.padding,O;m.fixedWidth===0?(this.width=P.width+M.left+M.right,O=P.width):(this.width=m.fixedWidth,O=this.width-M.left-M.right,O<P.width&&(O=P.width)),m.fixedHeight===0?this.height=P.height+M.top+M.bottom:this.height=m.fixedHeight;var L=this.width,F=this.height;this.updateDisplayOrigin(),L*=y,F*=y,L=Math.max(L,1),F=Math.max(F,1),c.width!==L||c.height!==F?(c.width=L,c.height=F,this.frame.setSize(L,F),m.syncFont(c,p)):p.clearRect(0,0,L,F),p.save(),p.scale(y,y),m.backgroundColor&&(p.fillStyle=m.backgroundColor,p.fillRect(0,0,L,F)),m.syncStyle(c,p),p.textBaseline="alphabetic",p.translate(M.left,M.top);for(var b,B,U=0;U<P.lines;U++){if(b=m.strokeThickness/2,B=m.strokeThickness/2+U*P.lineHeight+T.ascent,U>0&&(B+=P.lineSpacing*U),m.rtl)b=L-b;else if(m.align==="right")b+=O-P.lineWidths[U];else if(m.align==="center")b+=(O-P.lineWidths[U])/2;else if(m.align==="justify"){var X=.85;if(P.lineWidths[U]/P.width>=X){var W=P.width-P.lineWidths[U],Z=p.measureText(" ").width,J=S[U].trim(),N=J.split(" ");W+=(S[U].length-J.length)*Z;for(var I=Math.floor(W/Z),G=0;I>0;)N[G]+=" ",G=(G+1)%(N.length-1||1),--I;S[U]=N.join(" ")}}this.autoRound&&(b=Math.round(b),B=Math.round(B)),m.strokeThickness&&(this.style.syncShadow(p,m.shadowStroke),p.strokeText(S[U],b,B)),m.color&&(this.style.syncShadow(p,m.shadowFill),p.fillText(S[U],b,B))}p.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(c,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var V=this.input;return V&&!V.customHitArea&&(V.hitArea.width=this.width,V.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(c){this.setText(c)}},toJSON:function(){var c=o.ToJSON(this),p={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return c.data=p,c},preDestroy:function(){this.style.rtl&&h(this.canvas),d.remove(this.canvas),this.texture.destroy()}});a.exports=v},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),d=t(0),r=t(11),o=t(22),n=t(15),i=t(361),s=t(192),u=t(1091),h=t(3),l=8,f=new d({Extends:n,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,u],initialize:function(c,p,m,y,T,E,S){var P=c.sys.renderer;n.call(this,c,"TileSprite");var M=c.sys.textures.get(E),O=M.get(S);!y||!T?(y=O.width,T=O.height):(y=Math.floor(y),T=Math.floor(T)),this._tilePosition=new h,this._tileScale=new h(1,1),this.dirty=!1,this.renderer=P,this.canvas=e.create(this,y,T),this.context=this.canvas.getContext("2d"),this.displayTexture=M,this.displayFrame=O,this._crop=this.resetCropObject(),this.texture=c.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=i(O.width),this.potHeight=i(O.height),this.fillCanvas=e.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(p,m),this.setSize(y,T),this.setFrame(S),this.setOriginFromFrame(),this.initPipeline(),c.sys.game.events.on(o.CONTEXT_RESTORED,function(L){if(L){var F=L.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=L.createTexture2D(0,F.LINEAR,F.LINEAR,F.REPEAT,F.REPEAT,F.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(v,c){return this.displayTexture=this.scene.sys.textures.get(v),this.setFrame(c)},setFrame:function(v){var c=this.displayTexture.get(v);return this.potWidth=i(c.width),this.potHeight=i(c.height),this.canvas.width=0,!c.cutWidth||!c.cutHeight?this.renderFlags&=~l:this.renderFlags|=l,this.displayFrame=c,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(v,c){return v!==void 0&&(this.tilePositionX=v),c!==void 0&&(this.tilePositionY=c),this},setTileScale:function(v,c){return v===void 0&&(v=this.tileScaleX),c===void 0&&(c=v),this.tileScaleX=v,this.tileScaleY=c,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var v=this.displayFrame;if(v.source.isRenderTexture||v.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var c=this.fillContext,p=this.fillCanvas,m=this.potWidth,y=this.potHeight;(!this.renderer||!this.renderer.gl)&&(m=v.cutWidth,y=v.cutHeight),c.clearRect(0,0,m,y),p.width=m,p.height=y,c.drawImage(v.source.image,v.cutX,v.cutY,v.cutWidth,v.cutHeight,0,0,m,y),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(p,this.fillPattern):this.fillPattern=c.createPattern(p,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var v=this.canvas;if((v.width!==this.width||v.height!==this.height)&&(v.width=this.width,v.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var c=this.context;this.scene.sys.game.config.antialias||s.disable(c);var p=this._tileScale.x,m=this._tileScale.y,y=this._tilePosition.x,T=this._tilePosition.y;c.clearRect(0,0,this.width,this.height),c.save(),c.scale(p,m),c.translate(-y,-T),c.fillStyle=this.fillPattern,c.fillRect(y,T,this.width/p,this.height/m),c.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),e.remove(this.canvas),e.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(v){this._tilePosition.x=v,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(v){this._tilePosition.y=v,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(v){this._tileScale.x=v,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(v){this._tileScale.y=v,this.dirty=!0}}});a.exports=f},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(18),r=t(11),o=t(75),n=t(22),i=t(51),s=t(15),u=t(70),h=t(222),l=t(1094),f=t(14),v=new e({Extends:s,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,l],initialize:function(p,m,y,T){s.call(this,p,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=h(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=f.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(m,y),this.initPipeline(),T&&this.changeSource(T,!1);var E=p.sys.game.events;E.on(n.PAUSE,this.globalPause,this),E.on(n.RESUME,this.globalResume,this);var S=p.sys.sound;S&&S.on(u.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(c,p,m){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var y=this.video;if(!y)return console.warn("Video not loaded"),this;c===void 0&&(c=y.loop);var T=this.scene.sys.sound;T&&T.mute&&this.setMute(!0),isNaN(p)||(this._markerIn=p),!isNaN(m)&&m>p&&(this._markerOut=m),y.loop=c;var E=this._callbacks,S=y.play();return S!==void 0?S.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(y.addEventListener("playing",E.play,!0),y.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),y.addEventListener("ended",E.end,!0),y.addEventListener("timeupdate",E.time,!0),y.addEventListener("seeking",E.seeking,!0),y.addEventListener("seeked",E.seeked,!0),this},changeSource:function(c,p,m,y,T){p===void 0&&(p=!0);var E=this.video;E&&this.stop();var S=this.scene.sys.cache.video.get(c);return S?(this.video=S,this._cacheKey=c,this._codePaused=S.paused,this._codeMuted=S.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,S,S.videoWidth,S.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,S.videoWidth,S.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,S.videoWidth,S.videoHeight)):this.updateTexture(),S.currentTime=0,this._lastUpdate=0,p&&this.play(m,y,T)):this.video=null,this},addMarker:function(c,p,m){return!isNaN(p)&&p>=0&&!isNaN(m)&&(this.markers[c]=[p,m]),this},playMarker:function(c,p){var m=this.markers[c];return m&&this.play(p,m[0],m[1]),this},removeMarker:function(c){return delete this.markers[c],this},snapshot:function(c,p){return c===void 0&&(c=this.width),p===void 0&&(p=this.height),this.snapshotArea(0,0,this.width,this.height,c,p)},snapshotArea:function(c,p,m,y,T,E){c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=this.width),y===void 0&&(y=this.height),T===void 0&&(T=m),E===void 0&&(E=y);var S=this.video,P=this.snapshotTexture;return P?(P.setSize(T,E),S&&P.context.drawImage(S,c,p,m,y,0,0,T,E)):(P=this.scene.sys.textures.createCanvas(h(),T,E),this.snapshotTexture=P,S&&P.context.drawImage(S,c,p,m,y,0,0,T,E)),P.update()},saveSnapshotTexture:function(c){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,c):this.snapshotTexture=this.scene.sys.textures.createCanvas(c,this.width,this.height),this.snapshotTexture},loadURL:function(c,p,m){m===void 0&&(m=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var y=document.createElement("video");return y.controls=!1,m&&(y.muted=!0,y.defaultMuted=!0,y.setAttribute("autoplay","autoplay")),y.setAttribute("playsinline","playsinline"),y.setAttribute("preload","auto"),y.addEventListener("error",this._callbacks.error,!0),y.src=c,y.load(),this.video=y,this},loadMediaStream:function(c,p,m){m===void 0&&(m=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var y=document.createElement("video");y.controls=!1,m&&(y.muted=!0,y.defaultMuted=!0,y.setAttribute("autoplay","autoplay")),y.setAttribute("playsinline","playsinline"),y.setAttribute("preload","auto"),y.addEventListener("error",this._callbacks.error,!0);try{y.srcObject=c}catch{y.src=window.URL.createObjectURL(c)}return y.load(),this.video=y,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(c){this.scene.sys.input.once(i.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(o.VIDEO_ERROR,this,c)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(c){this.stop(),this.emit(o.VIDEO_ERROR,this,c)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(o.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(o.VIDEO_PLAY,this)},completeHandler:function(){this.emit(o.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(o.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var c=this.video;if(c){var p=c.currentTime;p!==this._lastUpdate&&(this._lastUpdate=p,this.updateTexture(),p>=this._markerOut&&(c.loop?(c.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=p,this.emit(o.VIDEO_LOOP,this)):(this.emit(o.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(o.VIDEO_TIMEOUT,this))},updateTexture:function(){var c=this.video,p=c.videoWidth,m=c.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,c,p,m),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,p,m),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,p,m);else{var y=this.videoTextureSource;y.source!==c&&(y.source=c,y.width=p,y.height=m),y.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(c){var p=this.video;if(p){var m=p.duration;if(m!==1/0&&!isNaN(m)){var y=m*c;this.setCurrentTime(y)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(c){var p=this.video;if(p){if(typeof c=="string"){var m=c[0],y=parseFloat(c.substr(1));m==="+"?c=p.currentTime+y:m==="-"&&(c=p.currentTime-y)}p.currentTime=c,this._lastUpdate=c}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(o.VIDEO_SEEKED,this);var c=this.video;c&&this.updateTexture()},getProgress:function(){var c=this.video;if(c){var p=c.currentTime,m=c.duration;if(m!==1/0&&!isNaN(m))return p/m}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(c){c===void 0&&(c=!0),this._codeMuted=c;var p=this.video;return p&&(p.muted=this._systemMuted?!0:c),this},isMuted:function(){return this._codeMuted},globalMute:function(c,p){this._systemMuted=p;var m=this.video;m&&(m.muted=this._codeMuted?!0:p)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(c){c===void 0&&(c=!0);var p=this.video;return this._codePaused=c,p&&(c?p.paused||p.pause():c||p.paused&&!this._systemPaused&&p.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(c){return c===void 0&&(c=1),this.video&&(this.video.volume=d(c,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(c){return this.video&&(this.video.playbackRate=c),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(c){return c===void 0&&(c=!0),this.video&&(this.video.loop=c),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(c,p){return p===void 0&&(p=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,c),this._key=c,this.flipY=p,this.videoTextureSource&&this.videoTextureSource.setFlipY(p),this.videoTexture},stop:function(){var c=this.video;if(c){var p=this._callbacks;for(var m in p)c.removeEventListener(m,p[m],!0);c.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var c=this.video;if(c){for(c.parentNode&&c.parentNode.removeChild(c);c.hasChildNodes();)c.removeChild(c.firstChild);c.removeAttribute("autoplay"),c.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var c=this.scene.sys.game.events;c.off(n.PAUSE,this.globalPause,this),c.off(n.RESUME,this.globalResume,this);var p=this.scene.sys.sound;p&&p.off(u.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});a.exports=v},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(228),r=t(470),o=t(56),n=new e({initialize:function(s){this.type=o.POLYGON,this.area=0,this.points=[],s&&this.setTo(s)},contains:function(i,s){return d(this,i,s)},setTo:function(i){if(this.area=0,this.points=[],typeof i=="string"&&(i=i.split(" ")),!Array.isArray(i))return this;for(var s,u=Number.MAX_VALUE,h=0;h<i.length;h++)s={x:0,y:0},typeof i[h]=="number"||typeof i[h]=="string"?(s.x=parseFloat(i[h]),s.y=parseFloat(i[h+1]),h++):Array.isArray(i[h])?(s.x=i[h][0],s.y=i[h][1]):(s.x=i[h].x,s.y=i[h].y),this.points.push(s),s.y<u&&(u=s.y);return this.calculateArea(u),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var i=0,s,u,h=0;h<this.points.length-1;h++)s=this.points[h],u=this.points[h+1],i+=(u.x-s.x)*(s.y+u.y);return s=this.points[0],u=this.points[this.points.length-1],i+=(s.x-u.x)*(u.y+s.y),this.area=-i*.5,this.area},getPoints:function(i,s,u){return r(this,i,s,u)}});a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){for(var o=!1,n=-1,i=e.points.length-1;++n<e.points.length;i=n){var s=e.points[n].x,u=e.points[n].y,h=e.points[i].x,l=e.points[i].y;(u<=r&&r<l||l<=r&&r<u)&&d<(h-s)*(r-u)/(l-u)+s&&(o=!o)}return o};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(11),r=t(15),o=t(2),n=t(17),i=t(478),s=t(1176),u=t(25),h=new e({Extends:r,Mixins:[d.ComputedSize,d.Depth,d.GetBounds,d.Mask,d.Origin,d.ScrollFactor,d.Transform,d.Visible,s],initialize:function(f,v,c,p,m,y,T,E){c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=128),y===void 0&&(y=128),r.call(this,f,"Shader"),this.blendMode=-1,this.shader;var S=f.sys.renderer;this.renderer=S,this.gl=S.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=S.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new u,this._tempMatrix2=new u,this._tempMatrix3=new u,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=S.width,this._rendererHeight=S.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(c,p),this.setSize(m,y),this.setOrigin(.5,.5),this.setShader(v,T,E)},willRender:function(l){return this.renderToTexture?!0:!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&l.id)},setRenderToTexture:function(l,f){if(f===void 0&&(f=!1),!this.renderToTexture){var v=this.width,c=this.height,p=this.renderer;this.glTexture=p.createTextureFromSource(null,v,c,0),this.glTexture.flipY=f,this.framebuffer=p.createFramebuffer(v,c,this.glTexture,!1),this._rendererWidth=v,this._rendererHeight=c,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),l&&(this.texture=this.scene.sys.textures.addGLTexture(l,this.glTexture,v,c))}return this.shader&&(p.pipelines.clear(),this.load(),this.flush(),p.pipelines.rebind()),this},setShader:function(l,f,v){if(f===void 0&&(f=[]),typeof l=="string"){var c=this.scene.sys.cache.shader;if(!c.has(l))return console.warn("Shader missing: "+l),this;this.shader=c.get(l)}else this.shader=l;var p=this.gl,m=this.renderer;this.program&&p.deleteProgram(this.program);var y=m.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);p.uniformMatrix4fv(p.getUniformLocation(y,"uViewMatrix"),!1,this.viewMatrix),p.uniformMatrix4fv(p.getUniformLocation(y,"uProjectionMatrix"),!1,this.projectionMatrix),p.uniform2f(p.getUniformLocation(y,"uResolution"),this.width,this.height),this.program=y;var T=new Date,E={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[T.getFullYear(),T.getMonth(),T.getDate(),T.getHours()*60*60+T.getMinutes()*60+T.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=n(!0,{},this.shader.uniforms,E):this.uniforms=E;for(var S=0;S<4;S++)f[S]&&this.setSampler2D("iChannel"+S,f[S],S,v);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(l){return this.pointer=l,this},projOrtho:function(l,f,v,c){var p=-1e3,m=1e3,y=1/(l-f),T=1/(v-c),E=1/(p-m),S=this.projectionMatrix;S[0]=-2*y,S[5]=-2*T,S[10]=2*E,S[12]=(l+f)*y,S[13]=(c+v)*T,S[14]=(m+p)*E;var P=this.program,M=this.gl,O=this.renderer;O.setProgram(P),M.uniformMatrix4fv(M.getUniformLocation(P,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=f,this._rendererHeight=v},initUniforms:function(){var l=this.gl,f=this.renderer.glFuncMap,v=this.program;this._textureCount=0;for(var c in this.uniforms){var p=this.uniforms[c],m=p.type,y=f[m];p.uniformLocation=l.getUniformLocation(v,c),m!=="sampler2D"&&(p.glMatrix=y.matrix,p.glValueLength=y.length,p.glFunc=y.func)}},setSampler2DBuffer:function(l,f,v,c,p,m){p===void 0&&(p=0),m===void 0&&(m={});var y=this.uniforms[l];return y.value=f,m.width=v,m.height=c,y.textureData=m,this._textureCount=p,this.initSampler2D(y),this},setSampler2D:function(l,f,v,c){v===void 0&&(v=0);var p=this.scene.sys.textures;if(p.exists(f)){var m=p.getFrame(f);if(m.glTexture&&m.glTexture.isRenderTexture)return this.setSampler2DBuffer(l,m.glTexture,m.width,m.height,v,c);var y=this.uniforms[l],T=m.source;y.textureKey=f,y.source=T.image,y.value=m.glTexture,T.isGLTexture&&(c||(c={}),c.width=T.width,c.height=T.height),c&&(y.textureData=c),this._textureCount=v,this.initSampler2D(y)}return this},setUniform:function(l,f){return i(this.uniforms,l,f),this},getUniform:function(l){return o(this.uniforms,l,null)},setChannel0:function(l,f){return this.setSampler2D("iChannel0",l,0,f)},setChannel1:function(l,f){return this.setSampler2D("iChannel1",l,1,f)},setChannel2:function(l,f){return this.setSampler2D("iChannel2",l,2,f)},setChannel3:function(l,f){return this.setSampler2D("iChannel3",l,3,f)},initSampler2D:function(l){if(l.value){var f=this.gl;f.activeTexture(f.TEXTURE0+this._textureCount),f.bindTexture(f.TEXTURE_2D,l.value);var v=l.textureData;if(v&&!l.value.isRenderTexture){var c=f[o(v,"magFilter","linear").toUpperCase()],p=f[o(v,"minFilter","linear").toUpperCase()],m=f[o(v,"wrapS","repeat").toUpperCase()],y=f[o(v,"wrapT","repeat").toUpperCase()],T=f[o(v,"format","rgba").toUpperCase()];if(v.repeat&&(m=f.REPEAT,y=f.REPEAT),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!!v.flipY),v.width){var E=o(v,"width",512),S=o(v,"height",2),P=o(v,"border",0);f.texImage2D(f.TEXTURE_2D,0,T,E,S,P,T,f.UNSIGNED_BYTE,null)}else f.texImage2D(f.TEXTURE_2D,0,T,f.RGBA,f.UNSIGNED_BYTE,l.source);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,c),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,p),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,m),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,y)}this.renderer.setProgram(this.program),f.uniform1i(l.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var l=this.gl,f=this.uniforms,v,c,p,m,y,T=0;for(var E in f)v=f[E],p=v.glFunc,c=v.glValueLength,m=v.uniformLocation,y=v.value,y!==null&&(c===1?v.glMatrix?p.call(l,m,v.transpose,y):p.call(l,m,y):c===2?p.call(l,m,y.x,y.y):c===3?p.call(l,m,y.x,y.y,y.z):c===4?p.call(l,m,y.x,y.y,y.z,y.w):v.type==="sampler2D"&&(l.activeTexture(l.TEXTURE0+T),l.bindTexture(l.TEXTURE_2D,y),l.uniform1i(m,T),T++))},load:function(l){var f=this.gl,v=this.width,c=this.height,p=this.renderer,m=this.program,y=this.viewMatrix;if(!this.renderToTexture){var T=-this._displayOriginX,E=-this._displayOriginY;y[0]=l[0],y[1]=l[1],y[4]=l[2],y[5]=l[3],y[8]=l[4],y[9]=l[5],y[12]=y[0]*T+y[4]*E,y[13]=y[1]*T+y[5]*E}f.useProgram(m),f.uniformMatrix4fv(f.getUniformLocation(m,"uViewMatrix"),!1,y),f.uniform2f(f.getUniformLocation(m,"uResolution"),this.width,this.height);var S=this.uniforms,P=S.resolution;P.value.x=v,P.value.y=c,S.time.value=p.game.loop.getDuration();var M=this.pointer;if(M){var O=S.mouse,L=M.x/v,F=1-M.y/c;O.value.x=L.toFixed(2),O.value.y=F.toFixed(2)}this.syncUniforms()},flush:function(){var l=this.width,f=this.height,v=this.program,c=this.gl,p=this.vertexBuffer,m=this.renderer,y=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(m.setFramebuffer(this.framebuffer),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT)),c.bindBuffer(c.ARRAY_BUFFER,p);var T=c.getAttribLocation(v,"inPosition");T!==-1&&(c.enableVertexAttribArray(T),c.vertexAttribPointer(T,2,c.FLOAT,!1,y,0));var E=this.vertexViewF32;E[3]=f,E[4]=l,E[5]=f,E[8]=l,E[9]=f,E[10]=l;var S=6;c.bufferSubData(c.ARRAY_BUFFER,0,this.bytes.subarray(0,S*y)),c.drawArrays(c.TRIANGLES,0,S),this.renderToTexture&&m.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var l=this.gl;l.deleteProgram(this.program),l.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});a.exports=h},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(11),r=t(36),o=t(116),n=t(15),i=t(479),s=t(480),u=t(19),h=t(69),l=t(1179),f=t(79),v=t(39),c=t(117),p=new e({Extends:n,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.Mask,d.Pipeline,d.Size,d.Texture,d.Transform,d.Visible,d.ScrollFactor,l],initialize:function(y,T,E,S,P,M,O,L,F,b,B,U){T===void 0&&(T=0),E===void 0&&(E=0),S===void 0&&(S="__WHITE"),n.call(this,y,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new v,this.modelScale=new v(1,1,1),this.modelRotation=new v,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new h,this.viewPosition=new v,this.viewMatrix=new h,this.projectionMatrix=new h,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var X=y.sys.renderer;this.setPosition(T,E),this.setTexture(S,P),this.setSize(X.width,X.height),this.initPipeline(),this.setPerspective(X.width,X.height),M&&this.addVertices(M,O,L,F,b,B,U)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(m){return this.viewPosition.addScale(v.LEFT,m),this.dirtyCache[10]=1,this},panY:function(m){return this.viewPosition.y+=v.DOWN.y*m,this.dirtyCache[10]=1,this},panZ:function(m){return this.viewPosition.z+=m,this.dirtyCache[10]=1,this},setPerspective:function(m,y,T,E,S){return T===void 0&&(T=45),E===void 0&&(E=.01),S===void 0&&(S=1e3),this.projectionMatrix.perspective(r(T),m/y,E,S),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(m,y,T,E){return m===void 0&&(m=this.scene.sys.renderer.getAspectRatio()),y===void 0&&(y=1),T===void 0&&(T=-1e3),E===void 0&&(E=1e3),this.projectionMatrix.ortho(-m,m,-y,y,T,E),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(m){m.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(m,y,T,E,S,P,M,O,L){var F=this.scene.sys.cache.obj.get(m);return F&&s(F,this,y,T,E,S,P,M,O,L),this},sortByDepth:function(m,y){return m.depth-y.depth},depthSort:function(){return f(this.faces,this.sortByDepth),this},addVertex:function(m,y,T,E,S,P,M){var O=new c(m,y,T,E,S,P,M);return this.vertices.push(O),O},addFace:function(m,y,T){var E=new o(m,y,T);return this.faces.push(E),this.dirtyCache[9]=-1,E},addVertices:function(m,y,T,E,S,P,M){var O=i(m,y,T,E,S,P,M);return O&&(this.faces=this.faces.concat(O.faces),this.vertices=this.vertices.concat(O.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(m){return this.faces[m]},getFaceAt:function(m,y,T){T===void 0&&(T=this.scene.sys.cameras.main);for(var E=u(this,T).calc,S=this.faces,P=[],M=0;M<S.length;M++){var O=S[M];O.contains(m,y,E)&&P.push(O)}return f(P,this.sortByDepth)},setDebug:function(m,y){return this.debugGraphic=m,!m&&!y?this.debugCallback=null:y?this.debugCallback=y:this.debugCallback=this.renderDebug,this},isDirty:function(){var m=this.modelPosition,y=this.modelRotation,T=this.modelScale,E=this.dirtyCache,S=m.x,P=m.y,M=m.z,O=y.x,L=y.y,F=y.z,b=T.x,B=T.y,U=T.z,X=this.getFaceCount(),W=E[0],Z=E[1],J=E[2],N=E[3],I=E[4],G=E[5],V=E[6],Y=E[7],z=E[8],H=E[9];return E[0]=S,E[1]=P,E[2]=M,E[3]=O,E[4]=L,E[5]=F,E[6]=b,E[7]=B,E[8]=U,E[9]=X,W!==S||Z!==P||J!==M||N!==O||I!==L||G!==F||V!==b||Y!==B||z!==U||H!==X},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var m=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!m[10]&&!this.isDirty())){var y=this.width,T=this.height,E=this.viewMatrix,S=this.viewPosition;m[10]&&(E.identity(),E.translate(S),E.invert(),m[10]=0);var P=this.transformMatrix;P.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var M=S.z,O=this.faces,L=0;L<O.length;L++)O[L].transformCoordinatesLocal(P,y,T,M);this.depthSort()}},renderDebug:function(m,y){for(var T=m.debugGraphic,E=0;E<y.length;E++){var S=y[E],P=S.vertex1.tx,M=S.vertex1.ty,O=S.vertex2.tx,L=S.vertex2.ty,F=S.vertex3.tx,b=S.vertex3.ty;T.strokeTriangle(P,M,O,L,F,b)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});a.exports=p},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(50),d=function(r,o){return e(r.x,r.y,o.x,o.y)<=r.radius+o.radius};a.exports=d},function(a,x,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=t(233),r=function(o,n,i){if(i===void 0&&(i=[]),d(o,n)){var s=o.x1,u=o.y1,h=o.x2,l=o.y2,f=n.x,v=n.y,c=n.radius,p=h-s,m=l-u,y=s-f,T=u-v,E=p*p+m*m,S=2*(p*y+m*T),P=y*y+T*T-c*c,M=S*S-4*E*P,O,L;if(M===0){var F=-S/(2*E);O=s+F*p,L=u+F*m,F>=0&&F<=1&&i.push(new e(O,L))}else if(M>0){var b=(-S-Math.sqrt(M))/(2*E);O=s+b*p,L=u+b*m,b>=0&&b<=1&&i.push(new e(O,L));var B=(-S+Math.sqrt(M))/(2*E);O=s+B*p,L=u+B*m,B>=0&&B<=1&&i.push(new e(O,L))}}return i};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),d=t(4),r=new d,o=function(n,i,s){if(s===void 0&&(s=r),e(i,n.x1,n.y1))return s.x=n.x1,s.y=n.y1,!0;if(e(i,n.x2,n.y2))return s.x=n.x2,s.y=n.y2,!0;var u=n.x2-n.x1,h=n.y2-n.y1,l=i.x-n.x1,f=i.y-n.y1,v=u*u+h*h,c=u,p=h;if(v>0){var m=(l*u+f*h)/v;c*=m,p*=m}s.x=n.x1+c,s.y=n.y1+p;var y=c*c+p*p;return y<=v&&c*u+p*h>=0&&e(i,s.x,s.y)};a.exports=o},function(a,x,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=t(96),r=t(488),o=function(n,i,s){if(s===void 0&&(s=[]),r(n,i))for(var u=i.getLineA(),h=i.getLineB(),l=i.getLineC(),f=i.getLineD(),v=[new e,new e,new e,new e],c=[d(u,n,v[0]),d(h,n,v[1]),d(l,n,v[2]),d(f,n,v[3])],p=0;p<4;p++)c[p]&&s.push(v[p]);return s};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){r===void 0&&(r=!1),o===void 0&&(o=[]);for(var n=e.x3-e.x1,i=e.y3-e.y1,s=e.x2-e.x1,u=e.y2-e.y1,h=n*n+i*i,l=n*s+i*u,f=s*s+u*u,v=h*f-l*l,c=v===0?0:1/v,p,m,y,T,E,S,P=e.x1,M=e.y1,O=0;O<d.length&&(y=d[O].x-P,T=d[O].y-M,E=n*y+i*T,S=s*y+u*T,p=(f*E-l*S)*c,m=(h*S-l*E)*c,!(p>=0&&m>=0&&p+m<1&&(o.push({x:d[O].x,y:d[O].y}),r)));O++);return o};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=Math.cos(o),i=Math.sin(o),s=e.x1-d,u=e.y1-r;return e.x1=s*n-u*i+d,e.y1=s*i+u*n+r,s=e.x2-d,u=e.y2-r,e.x2=s*n-u*i+d,e.y2=s*i+u*n+r,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.height===0?NaN:e.width/e.height};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=Math.cos(o),i=Math.sin(o),s=e.x1-d,u=e.y1-r;return e.x1=s*n-u*i+d,e.y1=s*i+u*n+r,s=e.x2-d,u=e.y2-r,e.x2=s*n-u*i+d,e.y2=s*i+u*n+r,s=e.x3-d,u=e.y3-r,e.x3=s*n-u*i+d,e.y3=s*i+u*n+r,e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BUTTON_DOWN:t(1310),BUTTON_UP:t(1311),CONNECTED:t(1312),DISCONNECTED:t(1313),GAMEPAD_BUTTON_DOWN:t(1314),GAMEPAD_BUTTON_UP:t(1315)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),d=t(156),r=function(o,n){var i=o===void 0?d():e({},o);if(n)for(var s in n)n[s]!==void 0&&(i[s]=n[s]);return i};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=t(408),u=new e({Extends:r,initialize:function(l,f,v,c){var p="xml";if(i(f)){var m=f;f=n(m,"key"),v=n(m,"url"),c=n(m,"xhrSettings"),p=n(m,"extension",p)}var y={type:"xml",cache:l.cacheManager.xml,extension:p,responseType:"text",key:f,url:v,xhrSettings:c};r.call(this,l,y)},onProcess:function(){this.state=d.FILE_PROCESSING,this.data=s(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});o.register("xml",function(h,l,f){if(Array.isArray(h))for(var v=0;v<h.length;v++)this.addFile(new u(this,h[v]));else this.addFile(new u(this,h,l,f));return this}),a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=new e({Extends:r,initialize:function(h,l,f,v){var c="text",p="txt",m=h.cacheManager.text;if(i(l)){var y=l;l=n(y,"key"),f=n(y,"url"),v=n(y,"xhrSettings"),p=n(y,"extension",p),c=n(y,"type",c),m=n(y,"cache",m)}var T={type:c,cache:m,extension:p,responseType:"text",key:l,url:f,xhrSettings:v};r.call(this,h,T)},onProcess:function(){this.state=d.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",function(u,h,l){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new s(this,u[f]));else this.addFile(new s(this,u,h,l));return this}),a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Acceleration:t(1368),Angular:t(1369),Bounce:t(1370),Debug:t(1371),Drag:t(1372),Enable:t(1373),Friction:t(1374),Gravity:t(1375),Immovable:t(1376),Mass:t(1377),OverlapCirc:t(523),OverlapRect:t(244),Pushable:t(1378),Size:t(1379),Velocity:t(1380)}},function(a,x){var t=function(e,d,r,o,n,i,s){i===void 0&&(i=!0),s===void 0&&(s=!1);var u=[],h=[],l=e.treeMinMax;if(l.minX=d,l.minY=r,l.maxX=d+o,l.maxY=r+n,s&&(h=e.staticTree.search(l)),i&&e.useTree)u=e.tree.search(l);else if(i){var f=e.bodies,v={position:{x:d,y:r},left:d,top:r,right:d+o,bottom:r+n,isCircle:!1},c=e.intersects;f.iterate(function(p){c(p,v)&&u.push(p)})}return h.concat(u)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={COLLIDE:t(1381),OVERLAP:t(1382),PAUSE:t(1383),RESUME:t(1384),TILE_COLLIDE:t(1385),TILE_OVERLAP:t(1386),WORLD_BOUNDS:t(1387),WORLD_STEP:t(1388)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(62),d=function(r,o,n,i){var s=0,u=r.deltaAbsX()+o.deltaAbsX()+i;return r._dx===0&&o._dx===0?(r.embedded=!0,o.embedded=!0):r._dx>o._dx?(s=r.right-o.x,s>u&&!n||r.checkCollision.right===!1||o.checkCollision.left===!1?s=0:(r.touching.none=!1,r.touching.right=!0,o.touching.none=!1,o.touching.left=!0,o.physicsType===e.STATIC_BODY&&!n&&(r.blocked.none=!1,r.blocked.right=!0),r.physicsType===e.STATIC_BODY&&!n&&(o.blocked.none=!1,o.blocked.left=!0))):r._dx<o._dx&&(s=r.x-o.width-o.x,-s>u&&!n||r.checkCollision.left===!1||o.checkCollision.right===!1?s=0:(r.touching.none=!1,r.touching.left=!0,o.touching.none=!1,o.touching.right=!0,o.physicsType===e.STATIC_BODY&&!n&&(r.blocked.none=!1,r.blocked.left=!0),r.physicsType===e.STATIC_BODY&&!n&&(o.blocked.none=!1,o.blocked.right=!0))),r.overlapX=s,o.overlapX=s,s};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(62),d=function(r,o,n,i){var s=0,u=r.deltaAbsY()+o.deltaAbsY()+i;return r._dy===0&&o._dy===0?(r.embedded=!0,o.embedded=!0):r._dy>o._dy?(s=r.bottom-o.y,s>u&&!n||r.checkCollision.down===!1||o.checkCollision.up===!1?s=0:(r.touching.none=!1,r.touching.down=!0,o.touching.none=!1,o.touching.up=!0,o.physicsType===e.STATIC_BODY&&!n&&(r.blocked.none=!1,r.blocked.down=!0),r.physicsType===e.STATIC_BODY&&!n&&(o.blocked.none=!1,o.blocked.up=!0))):r._dy<o._dy&&(s=r.y-o.bottom,-s>u&&!n||r.checkCollision.up===!1||o.checkCollision.down===!1?s=0:(r.touching.none=!1,r.touching.up=!0,o.touching.none=!1,o.touching.down=!0,o.physicsType===e.STATIC_BODY&&!n&&(r.blocked.none=!1,r.blocked.up=!0),r.physicsType===e.STATIC_BODY&&!n&&(o.blocked.none=!1,o.blocked.down=!0))),r.overlapY=s,o.overlapY=s,s};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return!(d.right<=e.left||d.bottom<=e.top||d.position.x>=e.right||d.position.y>=e.bottom)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Bounce:t(1495),Collision:t(1496),Force:t(1497),Friction:t(1498),Gravity:t(1499),Mass:t(1500),Sensor:t(1501),SetBody:t(1502),Sleep:t(1503),Static:t(1520),Transform:t(1521),Velocity:t(1522)}},function(a,x){var t={};a.exports=t,function(){t.create=function(e,d){var r=e.bodyA,o=e.bodyB,n={id:t.id(r,o),bodyA:r,bodyB:o,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||o.isSensor,timeCreated:d,timeUpdated:d,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(n,e,d),n},t.update=function(e,d,r){if(e.collision=d,d.collided){var o=d.supports,n=e.activeContacts,i=d.parentA,s=d.parentB;e.inverseMass=i.inverseMass+s.inverseMass,e.friction=Math.min(i.friction,s.friction),e.frictionStatic=Math.max(i.frictionStatic,s.frictionStatic),e.restitution=Math.max(i.restitution,s.restitution),e.slop=Math.max(i.slop,s.slop);for(var u=0;u<o.length;u++)n[u]=o[u].contact;var h=o.length;h<n.length&&(n.length=h),e.separation=d.depth,t.setActive(e,!0,r)}else e.isActive===!0&&t.setActive(e,!1,r)},t.setActive=function(e,d,r){d?(e.isActive=!0,e.timeUpdated=r):(e.isActive=!1,e.activeContacts.length=0)},t.id=function(e,d){return e.id<d.id?"A"+e.id+"B"+d.id:"A"+d.id+"B"+e.id}}()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CalculateFacesAt:t(252),CalculateFacesWithin:t(63),CheckIsoBounds:t(541),Copy:t(1420),CreateFromTiles:t(1421),CullBounds:t(543),CullTiles:t(544),Fill:t(1422),FilterTiles:t(1423),FindByIndex:t(1424),FindTile:t(1425),ForEachTile:t(1426),GetCullTilesFunction:t(1427),GetTileAt:t(158),GetTileAtWorldXY:t(1428),GetTilesWithin:t(26),GetTilesWithinShape:t(1429),GetTilesWithinWorldXY:t(529),GetTileToWorldXFunction:t(1430),GetTileToWorldXYFunction:t(1431),GetTileToWorldYFunction:t(1432),GetWorldToTileXFunction:t(1433),GetWorldToTileXYFunction:t(1434),GetWorldToTileYFunction:t(1435),HasTileAt:t(562),HasTileAtWorldXY:t(1436),HexagonalCullBounds:t(546),HexagonalCullTiles:t(545),HexagonalTileToWorldXY:t(550),HexagonalTileToWorldY:t(554),HexagonalWorldToTileXY:t(556),HexagonalWorldToTileY:t(560),IsInLayerBounds:t(119),IsometricCullTiles:t(547),IsometricTileToWorldXY:t(551),IsometricWorldToTileXY:t(557),PutTileAt:t(257),PutTileAtWorldXY:t(1437),PutTilesAt:t(1438),Randomize:t(1439),RemoveTileAt:t(563),RemoveTileAtWorldXY:t(1440),RenderDebug:t(1441),ReplaceByIndex:t(542),RunCull:t(159),SetCollision:t(1442),SetCollisionBetween:t(1443),SetCollisionByExclusion:t(1444),SetCollisionByProperty:t(1445),SetCollisionFromCollisionGroup:t(1446),SetLayerCollisionIndex:t(160),SetTileCollision:t(72),SetTileIndexCallback:t(1447),SetTileLocationCallback:t(1448),Shuffle:t(1449),StaggeredCullBounds:t(549),StaggeredCullTiles:t(548),StaggeredTileToWorldXY:t(552),StaggeredTileToWorldY:t(555),StaggeredWorldToTileXY:t(558),StaggeredWorldToTileY:t(561),SwapByIndex:t(1450),TileToWorldX:t(253),TileToWorldXY:t(553),TileToWorldY:t(254),WeightedRandomize:t(1451),WorldToTileX:t(255),WorldToTileXY:t(559),WorldToTileY:t(256)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(158),d=function(r,o,n){var i=e(r,o,!0,n),s=e(r,o-1,!0,n),u=e(r,o+1,!0,n),h=e(r-1,o,!0,n),l=e(r+1,o,!0,n),f=i&&i.collides;return f&&(i.faceTop=!0,i.faceBottom=!0,i.faceLeft=!0,i.faceRight=!0),s&&s.collides&&(f&&(i.faceTop=!1),s.faceBottom=!f),u&&u.collides&&(f&&(i.faceBottom=!1),u.faceTop=!f),h&&h.collides&&(f&&(i.faceLeft=!1),h.faceRight=!f),l&&l.collides&&(f&&(i.faceRight=!1),l.faceLeft=!f),i&&!i.collides&&i.resetFaces(),i};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=r.baseTileWidth,n=r.tilemapLayer,i=0;return n&&(d||(d=n.scene.cameras.main),i=n.x+d.scrollX*(1-n.scrollFactorX),o*=n.scaleX),i+e*o};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=r.baseTileHeight,n=r.tilemapLayer,i=0;return n&&(d||(d=n.scene.cameras.main),i=n.y+d.scrollY*(1-n.scrollFactorY),o*=n.scaleY),i+e*o};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){d===void 0&&(d=!0);var n=o.baseTileWidth,i=o.tilemapLayer;return i&&(r||(r=i.scene.cameras.main),e=e-(i.x+r.scrollX*(1-i.scrollFactorX)),n*=i.scaleX),d?Math.floor(e/n):e/n};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){d===void 0&&(d=!0);var n=o.baseTileHeight,i=o.tilemapLayer;return i&&(r||(r=i.scene.cameras.main),e=e-(i.y+r.scrollY*(1-i.scrollFactorY)),n*=i.scaleY),d?Math.floor(e/n):e/n};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(85),d=t(119),r=t(252),o=t(72),n=function(i,s,u,h,l){if(h===void 0&&(h=!0),!d(s,u,l))return null;var f=l.data[u][s],v=f&&f.collides;if(i instanceof e)l.data[u][s]===null&&(l.data[u][s]=new e(l,i.index,s,u,l.tileWidth,l.tileHeight)),l.data[u][s].copy(i);else{var c=i;l.data[u][s]===null?l.data[u][s]=new e(l,c,s,u,l.tileWidth,l.tileHeight):l.data[u][s].index=c}var p=l.data[u][s],m=l.collideIndexes.indexOf(p.index)!==-1;return o(p,m),h&&v!==p.collides&&r(s,u,l),p};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),d=function(r){return r=r.toLowerCase(),r==="isometric"?e.ISOMETRIC:r==="staggered"?e.STAGGERED:r==="hexagonal"?e.HEXAGONAL:e.ORTHOGONAL};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),d=t(120),r=t(121),o=t(85),n=function(i,s,u,h,l){for(var f=new d({tileWidth:u,tileHeight:h}),v=new r({name:i,tileWidth:u,tileHeight:h,format:e.ARRAY_2D,layers:[f]}),c=[],p=s.length,m=0,y=0;y<s.length;y++){c[y]=[];for(var T=s[y],E=0;E<T.length;E++){var S=parseInt(T[E],10);isNaN(S)||S===-1?c[y][E]=l?null:new o(f,-1,E,y,u,h):c[y][E]=new o(f,S,E,y,u,h)}m===0&&(m=T.length)}return v.width=f.width=m,v.height=f.height=p,v.widthInPixels=f.widthInPixels=m*u,v.heightInPixels=f.heightInPixels=p*h,f.data=c,v};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(571),d=t(261),r=function(i){return{x:i.x,y:i.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"],n=function(i,s,u){s===void 0&&(s=0),u===void 0&&(u=0);var h=e(i,o);if(h.x+=s,h.y+=u,i.gid){var l=d(i.gid);h.gid=l.gid,h.flippedHorizontal=l.flippedHorizontal,h.flippedVertical=l.flippedVertical,h.flippedAntiDiagonal=l.flippedAntiDiagonal}else i.polyline?h.polyline=i.polyline.map(r):i.polygon?h.polygon=i.polygon.map(r):i.ellipse?h.ellipse=i.ellipse:i.text?h.text=i.text:i.point?h.point=!0:h.rectangle=!0;return h};a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=2147483648,e=1073741824,d=536870912,r=function(o){var n=!!(o&t),i=!!(o&e),s=!!(o&d);o=o&~(t|e|d);var u=0,h=!1;return n&&i&&s?(u=Math.PI/2,h=!0):n&&i&&!s?(u=Math.PI,h=!1):n&&!i&&s?(u=Math.PI/2,h=!1):n&&!i&&!s?(u=0,h=!0):!n&&i&&s?(u=3*Math.PI/2,h=!1):!n&&i&&!s?(u=Math.PI,h=!0):!n&&!i&&s?(u=3*Math.PI/2,h=!0):!n&&!i&&!s&&(u=0,h=!1),{gid:o,flippedHorizontal:n,flippedVertical:i,flippedAntiDiagonal:s,rotation:u,flipped:h}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),d=t(121),r=t(564),o=t(580),n=function(i,s,u,h,l,f,v,c){u===void 0&&(u=32),h===void 0&&(h=32),l===void 0&&(l=10),f===void 0&&(f=10),c===void 0&&(c=!1);var p=null;if(Array.isArray(v)){var m=s!==void 0?s:"map";p=r(m,e.ARRAY_2D,v,u,h,c)}else if(s!==void 0){var y=i.cache.tilemap.get(s);y?p=r(s,y.format,y.data,u,h,c):console.warn("No map data found for key "+s)}return p===null&&(p=new d({tileWidth:u,tileHeight:h,width:l,height:f})),new o(i,p)};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),d=function(r){var o=e(r,"targets",null);return o===null||(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o])),o};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(n){return!!n.getActive&&typeof n.getActive=="function"}function e(n){return!!n.getStart&&typeof n.getStart=="function"}function d(n){return!!n.getEnd&&typeof n.getEnd=="function"}function r(n){return e(n)||d(n)||t(n)}var o=function(n,i){var s,u=function(S,P,M){return M},h=function(S,P,M){return M},l=null,f=typeof i;if(f==="number")u=function(){return i};else if(f==="string"){var v=i[0],c=parseFloat(i.substr(2));switch(v){case"+":u=function(S,P,M){return M+c};break;case"-":u=function(S,P,M){return M-c};break;case"*":u=function(S,P,M){return M*c};break;case"/":u=function(S,P,M){return M/c};break;default:u=function(){return parseFloat(i)}}}else if(f==="function")u=i;else if(f==="object")if(r(i))t(i)&&(l=i.getActive),d(i)&&(u=i.getEnd),e(i)&&(h=i.getStart);else if(i.hasOwnProperty("value"))s=o(n,i.value);else{var p=i.hasOwnProperty("to"),m=i.hasOwnProperty("from"),y=i.hasOwnProperty("start");if(p&&(m||y)){if(s=o(n,i.to),y){var T=o(n,i.start);s.getActive=T.getEnd}if(m){var E=o(n,i.from);s.getStart=E.getEnd}}}return s||(s={getActive:l,getEnd:u,getStart:h}),s};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(9),r=t(267),o=t(16),n=t(5),i=t(100),s=t(14),u=new e({Extends:d,initialize:function(l,f,v){d.call(this),this.parent=l,this.parentIsTimeline=l.hasOwnProperty("isTimeline"),this.data=f,this.totalData=f.length,this.targets=v,this.totalTargets=v.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=i.PENDING_ADD,this._pausedState=i.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(h){return h===void 0&&(h=0),this.data[h].current},setTimeScale:function(h){return this.timeScale=h,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===i.ACTIVE},isPaused:function(){return this.state===i.PAUSED},hasTarget:function(h){return this.targets.indexOf(h)!==-1},updateTo:function(h,l,f){f===void 0&&(f=!1);for(var v=0;v<this.totalData;v++){var c=this.data[v];c.key===h&&(c.end=l,f&&(c.start=c.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===i.ACTIVE?this.seek(0):this.state===i.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===i.PENDING_ADD?this:this.play()},calcDuration:function(){for(var h=0,l=s.MAX_SAFE_INTEGER,f=this.data,v=0;v<this.totalData;v++){var c=f[v];c.t1=c.duration+c.hold,c.yoyo&&(c.t1+=c.duration),c.t2=c.t1+c.repeatDelay,c.totalDuration=c.delay+c.t1,c.repeat===-1?c.totalDuration+=c.t2*999999999999:c.repeat>0&&(c.totalDuration+=c.t2*c.repeat),c.totalDuration>h&&(h=c.totalDuration),c.delay<l&&(l=c.delay)}this.duration=Math.max(h,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=l},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=i.PENDING_ADD,this._pausedState=i.INIT,!1;for(var h=this.data,l=this.totalTargets,f=0;f<this.totalData;f++){var v=h[f],c=v.target,p=v.gen,m=v.key,y=v.index;v.delay=p.delay(c,m,0,y,l,this),v.duration=Math.max(p.duration(c,m,0,y,l,this),.001),v.hold=p.hold(c,m,0,y,l,this),v.repeat=p.repeat(c,m,0,y,l,this),v.repeatDelay=p.repeatDelay(c,m,0,y,l,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=i.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(r.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=i.LOOP_DELAY):(this.state=i.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=i.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=i.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===i.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=i.PAUSED,this)},play:function(h){h===void 0&&(h=!1);var l=this.state;return l===i.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=i.ACTIVE,this):l===i.ACTIVE||l===i.PENDING_ADD&&this._pausedState===i.PENDING_ADD?this:!this.parentIsTimeline&&(l===i.PENDING_REMOVE||l===i.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(h),this.calculatedOffset===0?this.state=i.ACTIVE:(this.countdown=this.calculatedOffset,this.state=i.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(h),this.state=i.ACTIVE,this.makeActive()),this)},resetTweenData:function(h){for(var l=this.data,f=this.totalData,v=this.totalTargets,c=0;c<f;c++){var p=l[c],m=p.target,y=p.key,T=p.index;p.progress=0,p.elapsed=0,p.repeatCounter=p.repeat===-1?999999999999:p.repeat,h?(p.start=p.getStartValue(m,y,p.start,T,v,this),p.end=p.getEndValue(m,y,p.end,T,v,this),p.current=p.start,p.state=i.PLAYING_FORWARD):p.state=i.PENDING_RENDER,p.delay>0&&(p.elapsed=p.delay,p.state=i.DELAY),p.getActiveValue&&(m[y]=p.getActiveValue(p.target,p.key,p.start))}},resume:function(){return this.state===i.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(h,l){l===void 0&&(l=16.6),this.state===i.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var f=this.data,v=this.totalTargets,c=0;c<this.totalData;c++){var p=f[c],m=p.target,y=p.gen,T=p.key,E=p.index;p.progress=0,p.elapsed=0,p.repeatCounter=p.repeat===-1?999999999999:p.repeat,p.delay=y.delay(m,T,0,E,v,this),p.duration=Math.max(y.duration(m,T,0,E,v,this),.001),p.hold=y.hold(m,T,0,E,v,this),p.repeat=y.repeat(m,T,0,E,v,this),p.repeatDelay=y.repeatDelay(m,T,0,E,v,this),p.current=p.start,p.state=i.PLAYING_FORWARD,this.updateTweenData(this,p,0,E,v),p.delay>0&&(p.elapsed=p.delay,p.state=i.DELAY)}this.calcDuration();var S=!1;this.state===i.PAUSED&&(S=!0,this.state=i.ACTIVE),this.isSeeking=!0;do this.update(0,l);while(this.totalProgress<h);return this.isSeeking=!1,S&&(this.state=i.PAUSED),this},setCallback:function(h,l,f,v){return this.callbacks[h]={func:l,scope:v,params:f},this},complete:function(h){return h===void 0&&(h=0),h?(this.state=i.COMPLETE_DELAY,this.countdown=h):(this.state=i.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(h){return this.state===i.ACTIVE&&h!==void 0&&this.seek(h),this.state!==i.REMOVED&&((this.state===i.PAUSED||this.state===i.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(r.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=i.PENDING_REMOVE),this},update:function(h,l){if(this.state===i.PAUSED)return!1;switch(this.useFrames&&(l=1*this.parent.timeScale),l*=this.timeScale,this.elapsed+=l,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=l,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case i.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=l,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(r.TWEEN_START,this.callbacks.onStart)));for(var f=!1,v=0;v<this.totalData;v++){var c=this.data[v];this.updateTweenData(this,c,l)&&(f=!0)}f||this.nextState();break;case i.LOOP_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=i.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop));break;case i.OFFSET_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=i.ACTIVE);break;case i.COMPLETE_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=i.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===i.PENDING_REMOVE},dispatchTweenDataEvent:function(h,l,f){this.isSeeking||(this.emit(h,this,f.key,f.target,f.current,f.previous),l&&(l.params[1]=f.target,l.func.apply(l.scope,l.params)))},dispatchTweenEvent:function(h,l){this.isSeeking||(this.emit(h,this,this.targets),l&&(l.params[1]=this.targets,l.func.apply(l.scope,l.params)))},setStateFromEnd:function(h,l,f){return l.yoyo?(l.elapsed=f,l.progress=f/l.duration,l.flipX&&l.target.toggleFlipX(),l.flipY&&l.target.toggleFlipY(),this.dispatchTweenDataEvent(r.TWEEN_YOYO,h.callbacks.onYoyo,l),l.start=l.getStartValue(l.target,l.key,l.start,l.index,h.totalTargets,h),i.PLAYING_BACKWARD):l.repeatCounter>0?(l.repeatCounter--,l.elapsed=f,l.progress=f/l.duration,l.flipX&&l.target.toggleFlipX(),l.flipY&&l.target.toggleFlipY(),l.start=l.getStartValue(l.target,l.key,l.start,l.index,h.totalTargets,h),l.end=l.getEndValue(l.target,l.key,l.start,l.index,h.totalTargets,h),l.repeatDelay>0?(l.elapsed=l.repeatDelay-f,l.current=l.start,l.target[l.key]=l.current,i.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,h.callbacks.onRepeat,l),i.PLAYING_FORWARD)):i.COMPLETE},setStateFromStart:function(h,l,f){return l.repeatCounter>0?(l.repeatCounter--,l.elapsed=f,l.progress=f/l.duration,l.flipX&&l.target.toggleFlipX(),l.flipY&&l.target.toggleFlipY(),l.end=l.getEndValue(l.target,l.key,l.start,l.index,h.totalTargets,h),l.repeatDelay>0?(l.elapsed=l.repeatDelay-f,l.current=l.start,l.target[l.key]=l.current,i.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,h.callbacks.onRepeat,l),i.PLAYING_FORWARD)):i.COMPLETE},updateTweenData:function(h,l,f){var v=l.target;switch(l.state){case i.PLAYING_FORWARD:case i.PLAYING_BACKWARD:if(!v){l.state=i.COMPLETE;break}var c=l.elapsed,p=l.duration,m=0;c+=f,c>p&&(m=c-p,c=p);var y=l.state===i.PLAYING_FORWARD,T=c/p;if(l.elapsed=c,l.progress=T,l.previous=l.current,T===1)y?(l.current=l.end,v[l.key]=l.end,l.hold>0?(l.elapsed=l.hold-m,l.state=i.HOLD_DELAY):l.state=this.setStateFromEnd(h,l,m)):(l.current=l.start,v[l.key]=l.start,l.state=this.setStateFromStart(h,l,m));else{var E=y?l.ease(T):l.ease(1-T);l.current=l.start+(l.end-l.start)*E,v[l.key]=l.current}this.dispatchTweenDataEvent(r.TWEEN_UPDATE,h.callbacks.onUpdate,l);break;case i.DELAY:l.elapsed-=f,l.elapsed<=0&&(l.elapsed=Math.abs(l.elapsed),l.state=i.PENDING_RENDER);break;case i.REPEAT_DELAY:l.elapsed-=f,l.elapsed<=0&&(l.elapsed=Math.abs(l.elapsed),l.state=i.PLAYING_FORWARD,this.dispatchTweenDataEvent(r.TWEEN_REPEAT,h.callbacks.onRepeat,l));break;case i.HOLD_DELAY:l.elapsed-=f,l.elapsed<=0&&(l.state=this.setStateFromEnd(h,l,Math.abs(l.elapsed)));break;case i.PENDING_RENDER:v?(l.start=l.getStartValue(v,l.key,v[l.key],l.index,h.totalTargets,h),l.end=l.getEndValue(v,l.key,l.start,l.index,h.totalTargets,h),l.current=l.start,v[l.key]=l.start,l.state=i.PLAYING_FORWARD):l.state=i.COMPLETE;break}return l.state!==i.COMPLETE}});u.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],n.register("tween",function(h){return this.scene.sys.tweens.add(h)}),o.register("tween",function(h){return this.scene.sys.tweens.create(h)}),a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={TIMELINE_COMPLETE:t(1466),TIMELINE_LOOP:t(1467),TIMELINE_PAUSE:t(1468),TIMELINE_RESUME:t(1469),TIMELINE_START:t(1470),TIMELINE_UPDATE:t(1471),TWEEN_ACTIVE:t(1472),TWEEN_COMPLETE:t(1473),TWEEN_LOOP:t(1474),TWEEN_REPEAT:t(1475),TWEEN_START:t(1476),TWEEN_STOP:t(1477),TWEEN_UPDATE:t(1478),TWEEN_YOYO:t(1479)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n,i,s,u,h,l,f,v,c,p,m){return{target:e,index:d,key:r,getActiveValue:i,getEndValue:o,getStartValue:n,ease:s,duration:0,totalDuration:0,delay:0,yoyo:l,hold:0,repeat:0,repeatDelay:0,flipX:p,flipY:m,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:u,duration:h,hold:f,repeat:v,repeatDelay:c},state:0}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(68),d=function(r){return e(r,-Math.PI,Math.PI)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(68),d=function(r){return e(r,-180,180)};a.exports=d},function(a,x,t){var e={};a.exports=e;var d=t(83),r=t(32);(function(){e.fromVertices=function(o){for(var n={},i=0;i<o.length;i++){var s=(i+1)%o.length,u=d.normalise({x:o[s].y-o[i].y,y:o[i].x-o[s].x}),h=u.y===0?1/0:u.x/u.y;h=h.toFixed(3).toString(),n[h]=u}return r.values(n)},e.rotate=function(o,n){if(n!==0)for(var i=Math.cos(n),s=Math.sin(n),u=0;u<o.length;u++){var h=o[u],l;l=h.x*i-h.y*s,h.y=h.x*s+h.y*i,h.x=l}}})()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AFTER_ADD:t(1504),AFTER_REMOVE:t(1505),AFTER_UPDATE:t(1506),BEFORE_ADD:t(1507),BEFORE_REMOVE:t(1508),BEFORE_UPDATE:t(1509),COLLISION_ACTIVE:t(1510),COLLISION_END:t(1511),COLLISION_START:t(1512),DRAG_END:t(1513),DRAG:t(1514),DRAG_START:t(1515),PAUSE:t(1516),RESUME:t(1517),SLEEP_END:t(1518),SLEEP_START:t(1519)}},function(a,x,t){var e={};a.exports=e;var d=t(274),r=t(250),o=t(84);(function(){e.collisions=function(n,i){for(var s=[],u=i.pairs.table,h=i.metrics,l=0;l<n.length;l++){var f=n[l][0],v=n[l][1];if(!((f.isStatic||f.isSleeping)&&(v.isStatic||v.isSleeping))&&e.canCollide(f.collisionFilter,v.collisionFilter)&&(h.midphaseTests+=1,o.overlaps(f.bounds,v.bounds)))for(var c=f.parts.length>1?1:0;c<f.parts.length;c++)for(var p=f.parts[c],m=v.parts.length>1?1:0;m<v.parts.length;m++){var y=v.parts[m];if(p===f&&y===v||o.overlaps(p.bounds,y.bounds)){var T=r.id(p,y),E=u[T],S;E&&E.isActive?S=E.collision:S=null;var P=d.collides(p,y,S);h.narrowphaseTests+=1,P.reused&&(h.narrowReuseCount+=1),P.collided&&(s.push(P),h.narrowDetections+=1)}}}return s},e.canCollide=function(n,i){return n.group===i.group&&n.group!==0?n.group>0:(n.mask&i.category)!==0&&(i.mask&n.category)!==0}})()},function(a,x,t){var e={};a.exports=e;var d=t(64),r=t(83);(function(){e.collides=function(o,n,i){var s,u,h,l,f=!1;if(i){var v=o.parent,c=n.parent,p=v.speed*v.speed+v.angularSpeed*v.angularSpeed+c.speed*c.speed+c.angularSpeed*c.angularSpeed;f=i&&i.collided&&p<.2,l=i}else l={collided:!1,bodyA:o,bodyB:n};if(i&&f){var m=l.axisBody,y=m===o?n:o,T=[m.axes[i.axisNumber]];if(h=e._overlapAxes(m.vertices,y.vertices,T),l.reused=!0,h.overlap<=0)return l.collided=!1,l}else{if(s=e._overlapAxes(o.vertices,n.vertices,o.axes),s.overlap<=0||(u=e._overlapAxes(n.vertices,o.vertices,n.axes),u.overlap<=0))return l.collided=!1,l;s.overlap<u.overlap?(h=s,l.axisBody=o):(h=u,l.axisBody=n),l.axisNumber=h.axisNumber}l.bodyA=o.id<n.id?o:n,l.bodyB=o.id<n.id?n:o,l.collided=!0,l.depth=h.overlap,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent,o=l.bodyA,n=l.bodyB,r.dot(h.axis,r.sub(n.position,o.position))<0?l.normal={x:h.axis.x,y:h.axis.y}:l.normal={x:-h.axis.x,y:-h.axis.y},l.tangent=r.perp(l.normal),l.penetration=l.penetration||{},l.penetration.x=l.normal.x*l.depth,l.penetration.y=l.normal.y*l.depth;var E=e._findSupports(o,n,l.normal),S=[];if(d.contains(o.vertices,E[0])&&S.push(E[0]),d.contains(o.vertices,E[1])&&S.push(E[1]),S.length<2){var P=e._findSupports(n,o,r.neg(l.normal));d.contains(n.vertices,P[0])&&S.push(P[0]),S.length<2&&d.contains(n.vertices,P[1])&&S.push(P[1])}return S.length<1&&(S=[E[0]]),l.supports=S,l},e._overlapAxes=function(o,n,i){for(var s=r._temp[0],u=r._temp[1],h={overlap:Number.MAX_VALUE},l,f,v=0;v<i.length;v++){if(f=i[v],e._projectToAxis(s,o,f),e._projectToAxis(u,n,f),l=Math.min(s.max-u.min,u.max-s.min),l<=0)return h.overlap=l,h;l<h.overlap&&(h.overlap=l,h.axis=f,h.axisNumber=v)}return h},e._projectToAxis=function(o,n,i){for(var s=r.dot(n[0],i),u=s,h=1;h<n.length;h+=1){var l=r.dot(n[h],i);l>u?u=l:l<s&&(s=l)}o.min=s,o.max=u},e._findSupports=function(o,n,i){for(var s=Number.MAX_VALUE,u=r._temp[0],h=n.vertices,l=o.position,f,v,c,p,m=0;m<h.length;m++)v=h[m],u.x=v.x-l.x,u.y=v.y-l.y,f=-r.dot(i,u),f<s&&(s=f,c=v);var y=c.index-1>=0?c.index-1:h.length-1;v=h[y],u.x=v.x-l.x,u.y=v.y-l.y,s=-r.dot(i,u),p=v;var T=(c.index+1)%h.length;return v=h[T],u.x=v.x-l.x,u.y=v.y-l.y,f=-r.dot(i,u),f<s&&(p=v),[c,p]}})()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AlignTo:t(601),Angle:t(602),Call:t(603),GetFirst:t(604),GetLast:t(605),GridAlign:t(606),IncAlpha:t(678),IncX:t(679),IncXY:t(680),IncY:t(681),PlaceOnCircle:t(682),PlaceOnEllipse:t(683),PlaceOnLine:t(684),PlaceOnRectangle:t(685),PlaceOnTriangle:t(686),PlayAnimation:t(687),PropertyValueInc:t(46),PropertyValueSet:t(27),RandomCircle:t(688),RandomEllipse:t(689),RandomLine:t(690),RandomRectangle:t(691),RandomTriangle:t(692),Rotate:t(693),RotateAround:t(694),RotateAroundDistance:t(695),ScaleX:t(696),ScaleXY:t(697),ScaleY:t(698),SetAlpha:t(699),SetBlendMode:t(700),SetDepth:t(701),SetHitArea:t(702),SetOrigin:t(703),SetRotation:t(704),SetScale:t(705),SetScaleX:t(706),SetScaleY:t(707),SetScrollFactor:t(708),SetScrollFactorX:t(709),SetScrollFactorY:t(710),SetTint:t(711),SetVisible:t(712),SetX:t(713),SetXY:t(714),SetY:t(715),ShiftPosition:t(716),Shuffle:t(717),SmootherStep:t(718),SmoothStep:t(719),Spread:t(720),ToggleVisible:t(721),WrapInRectangle:t(722)}},function(a,x,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),d=[];d[e.BOTTOM_CENTER]=t(277),d[e.BOTTOM_LEFT]=t(278),d[e.BOTTOM_RIGHT]=t(279),d[e.LEFT_BOTTOM]=t(280),d[e.LEFT_CENTER]=t(281),d[e.LEFT_TOP]=t(282),d[e.RIGHT_BOTTOM]=t(283),d[e.RIGHT_CENTER]=t(284),d[e.RIGHT_TOP]=t(285),d[e.TOP_CENTER]=t(286),d[e.TOP_LEFT]=t(287),d[e.TOP_RIGHT]=t(288);var r=function(o,n,i,s,u){return d[i](o,n,s,u)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),d=t(87),r=t(88),o=t(52),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),r(i,d(s)+u),o(i,e(s)+h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),d=t(43),r=t(53),o=t(52),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),r(i,d(s)-u),o(i,e(s)+h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),d=t(44),r=t(54),o=t(52),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),r(i,d(s)+u),o(i,e(s)+h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),d=t(43),r=t(55),o=t(54),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(i,d(s)-u),r(i,e(s)+h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),d=t(43),r=t(90),o=t(54),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(i,d(s)-u),r(i,e(s)+h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(43),d=t(45),r=t(54),o=t(52),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),r(i,e(s)-u),o(i,d(s)-h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),d=t(44),r=t(55),o=t(53),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(i,d(s)+u),r(i,e(s)+h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),d=t(44),r=t(90),o=t(53),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(i,d(s)+u),r(i,e(s)+h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(44),d=t(45),r=t(53),o=t(52),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),r(i,e(s)+u),o(i,d(s)-h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(87),d=t(45),r=t(55),o=t(88),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(i,e(s)+u),r(i,d(s)-h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(43),d=t(45),r=t(55),o=t(53),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(i,e(s)-u),r(i,d(s)-h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(44),d=t(45),r=t(55),o=t(54),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(i,e(s)+u),r(i,d(s)-h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),d=[];d[e.BOTTOM_CENTER]=t(290),d[e.BOTTOM_LEFT]=t(291),d[e.BOTTOM_RIGHT]=t(292),d[e.CENTER]=t(293),d[e.LEFT_CENTER]=t(295),d[e.RIGHT_CENTER]=t(296),d[e.TOP_CENTER]=t(297),d[e.TOP_LEFT]=t(298),d[e.TOP_RIGHT]=t(299),d[e.LEFT_BOTTOM]=d[e.BOTTOM_LEFT],d[e.LEFT_TOP]=d[e.TOP_LEFT],d[e.RIGHT_BOTTOM]=d[e.BOTTOM_RIGHT],d[e.RIGHT_TOP]=d[e.TOP_RIGHT];var r=function(o,n,i,s,u){return d[i](o,n,s,u)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),d=t(87),r=t(55),o=t(88),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(i,d(s)+u),r(i,e(s)+h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),d=t(43),r=t(55),o=t(53),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(i,d(s)-u),r(i,e(s)+h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),d=t(44),r=t(55),o=t(54),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(i,d(s)+u),r(i,e(s)+h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(294),d=t(87),r=t(89),o=function(n,i,s,u){return s===void 0&&(s=0),u===void 0&&(u=0),e(n,d(i)+s,r(i)+u),n};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(88),d=t(90),r=function(o,n,i){return e(o,n),d(o,i)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),d=t(43),r=t(90),o=t(53),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(i,d(s)-u),r(i,e(s)+h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),d=t(44),r=t(90),o=t(54),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(i,d(s)+u),r(i,e(s)+h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(87),d=t(45),r=t(88),o=t(52),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),r(i,e(s)+u),o(i,d(s)-h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(43),d=t(45),r=t(53),o=t(52),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),r(i,e(s)-u),o(i,d(s)-h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(44),d=t(45),r=t(54),o=t(52),n=function(i,s,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),r(i,e(s)+u),o(i,d(s)-h),i};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(169),d=t(98),r=t(14),o=t(4),n=function(i,s,u){u===void 0&&(u=new o);var h=d(s,0,r.PI2);return e(i,h,u)};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(302),d=t(169),r=t(98),o=t(14),n=function(i,s,u,h){h===void 0&&(h=[]),!s&&u>0&&(s=e(i)/u);for(var l=0;l<s;l++){var f=r(l/s,0,o.PI2);h.push(d(i,f))}return h};a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 2*(Math.PI*e.radius)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),d=2,r={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o){return o===void 0&&(o=1),this.alpha=o,this},alpha:{get:function(){return this._alpha},set:function(o){var n=e(o,0,1);this._alpha=n,n===0?this.renderFlags&=~d:this.renderFlags|=d}}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),d={_blendMode:e.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(r){typeof r=="string"&&(r=e[r]),r|=0,r>=-1&&(this._blendMode=r)}},setBlendMode:function(r){return this.blendMode=r,this}};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(171),d=t(130),r=function(o,n,i,s){s===void 0&&(s=[]),!n&&i>0&&(n=d(o)/i);for(var u=0;u<n;u++){var h=u/n;s.push(e(o,h))}return s};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o,n){return n===void 0&&(n=new e),n.x=r.x1+(r.x2-r.x1)*o,n.y=r.y1+(r.y2-r.y1)*o,n};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=Math.cos(o),i=Math.sin(o),s=e.x-d,u=e.y-r;return e.x=s*n-u*i+d,e.y=s*i+u*n+r,e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(310),d=t(311),r={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o){return o===void 0&&(this.texture||this.shader)&&(o=this),new e(this.scene,o)},createGeometryMask:function(o){return o===void 0&&this.type==="Graphics"&&(o=this),new d(this.scene,o)}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(22),r=t(91),o=new e({initialize:function(i,s){var u=i.sys.renderer;this.renderer=u,this.bitmapMask=s,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),i.sys.game.events.on(d.CONTEXT_RESTORED,this.createMask,this),u&&u.on(r.RESIZE,this.createMask,this)},createMask:function(){var n=this.renderer;if(!(!n||!n.gl)){this.mainTexture&&this.clearMask();var i=n.width,s=n.height,u=(i&i-1)===0&&(s&s-1)===0,h=n.gl,l=u?h.REPEAT:h.CLAMP_TO_EDGE,f=h.LINEAR;this.mainTexture=n.createTexture2D(0,f,f,l,l,h.RGBA,null,i,s),this.maskTexture=n.createTexture2D(0,f,f,l,l,h.RGBA,null,i,s),this.mainFramebuffer=n.createFramebuffer(i,s,this.mainTexture,!0),this.maskFramebuffer=n.createFramebuffer(i,s,this.maskTexture,!0)}},clearMask:function(){var n=this.renderer;!n||!n.gl||!this.mainTexture||(n.deleteTexture(this.mainTexture),n.deleteTexture(this.maskTexture),n.deleteFramebuffer(this.mainFramebuffer),n.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(n){this.bitmapMask=n},preRenderWebGL:function(n,i,s){n.pipelines.BITMAPMASK_PIPELINE.beginMask(this,i,s)},postRenderWebGL:function(n,i){n.pipelines.BITMAPMASK_PIPELINE.endMask(this,i)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(r.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o,n){this.geometryMask=n,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(r){return this.geometryMask=r,this},setInvertAlpha:function(r){return r===void 0&&(r=!0),this.invertAlpha=r,this},preRenderWebGL:function(r,o,n){var i=r.gl;r.flush(),r.maskStack.length===0&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),r.maskCount=0),r.currentCameraMask.mask!==this&&(r.currentMask.mask=this),r.maskStack.push({mask:this,camera:n}),this.applyStencil(r,n,!0),r.maskCount++},applyStencil:function(r,o,n){var i=r.gl,s=this.geometryMask,u=r.maskCount;i.colorMask(!1,!1,!1,!1),n?(i.stencilFunc(i.EQUAL,u,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,u+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),s.renderWebGL(r,s,o),r.flush(),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),n?this.invertAlpha?i.stencilFunc(i.NOTEQUAL,u+1,255):i.stencilFunc(i.EQUAL,u+1,255):this.invertAlpha?i.stencilFunc(i.NOTEQUAL,u,255):i.stencilFunc(i.EQUAL,u,255)},postRenderWebGL:function(r){var o=r.gl;r.maskStack.pop(),r.maskCount--,r.flush();var n=r.currentMask;if(r.maskStack.length===0)n.mask=null,o.disable(o.STENCIL_TEST);else{var i=r.maskStack[r.maskStack.length-1];i.mask.applyStencil(r,i.camera,!1),r.currentCameraMask.mask!==i.mask?(n.mask=i.mask,n.camera=i.camera):n.mask=null}},preRenderCanvas:function(r,o,n){var i=this.geometryMask;r.currentContext.save(),i.renderCanvas(r,i,n,null,null,!0),r.currentContext.clip()},postRenderCanvas:function(r){r.currentContext.restore()},destroy:function(){this.geometryMask=null}});a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,d){return d===void 0&&(d=e),this.scrollFactorX=e,this.scrollFactorY=d,this}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),d=t(25),r=t(177),o=t(269),n=t(270),i=t(3),s=4,u={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(h){this._scaleX=h,this._scaleY=h,h===0?this.renderFlags&=~s:this.renderFlags|=s}},scaleX:{get:function(){return this._scaleX},set:function(h){this._scaleX=h,h===0?this.renderFlags&=~s:this.renderFlags|=s}},scaleY:{get:function(){return this._scaleY},set:function(h){this._scaleY=h,h===0?this.renderFlags&=~s:this.renderFlags|=s}},angle:{get:function(){return n(this._rotation*e.RAD_TO_DEG)},set:function(h){this.rotation=n(h)*e.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(h){this._rotation=o(h)}},setPosition:function(h,l,f,v){return h===void 0&&(h=0),l===void 0&&(l=h),f===void 0&&(f=0),v===void 0&&(v=0),this.x=h,this.y=l,this.z=f,this.w=v,this},copyPosition:function(h){return h.x!==void 0&&(this.x=h.x),h.y!==void 0&&(this.y=h.y),h.z!==void 0&&(this.z=h.z),h.w!==void 0&&(this.w=h.w),this},setRandomPosition:function(h,l,f,v){return h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),this.x=h+Math.random()*f,this.y=l+Math.random()*v,this},setRotation:function(h){return h===void 0&&(h=0),this.rotation=h,this},setAngle:function(h){return h===void 0&&(h=0),this.angle=h,this},setScale:function(h,l){return h===void 0&&(h=1),l===void 0&&(l=h),this.scaleX=h,this.scaleY=l,this},setX:function(h){return h===void 0&&(h=0),this.x=h,this},setY:function(h){return h===void 0&&(h=0),this.y=h,this},setZ:function(h){return h===void 0&&(h=0),this.z=h,this},setW:function(h){return h===void 0&&(h=0),this.w=h,this},getLocalTransformMatrix:function(h){return h===void 0&&(h=new d),h.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(h,l){h===void 0&&(h=new d),l===void 0&&(l=new d);var f=this.parentContainer;if(!f)return this.getLocalTransformMatrix(h);for(h.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);f;)l.applyITRS(f.x,f.y,f._rotation,f._scaleX,f._scaleY),l.multiply(h,h),f=f.parentContainer;return h},getLocalPoint:function(h,l,f,v){f||(f=new i),v||(v=this.scene.sys.cameras.main);var c=v.scrollX,p=v.scrollY,m=h+c*this.scrollFactorX-c,y=l+p*this.scrollFactorY-p;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(m,y,f):r(m,y,this.x,this.y,this.rotation,this.scaleX,this.scaleY,f),this._originComponent&&(f.x+=this._displayOriginX,f.y+=this._displayOriginY),f},getParentRotation:function(){for(var h=0,l=this.parentContainer;l;)h+=l.rotation,l=l.parentContainer;return h}};a.exports=u},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(d){d?(this._visible=!0,this.renderFlags|=t):(this._visible=!1,this.renderFlags&=~t)}},setVisible:function(d){return this.visible=d,this}};a.exports=e},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CHANGE_DATA:t(638),CHANGE_DATA_KEY:t(639),DESTROY:t(640),REMOVE_DATA:t(641),SET_DATA:t(642)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(130),d=t(4),r=function(o,n,i,s){if(s===void 0&&(s=[]),!n&&!i)return s;n?i=Math.round(e(o)/n):n=e(o)/i;for(var u=o.x,h=o.y,l=0,f=0;f<i;f++)switch(s.push(new d(u,h)),l){case 0:u+=n,u>=o.right&&(l=1,h+=u-o.right,u=o.right);break;case 1:h+=n,h>=o.bottom&&(l=2,u-=h-o.bottom,h=o.bottom);break;case 2:u-=n,u<=o.left&&(l=3,h-=o.left-u,u=o.left);break;case 3:h-=n,h<=o.top&&(l=0,h=o.top);break}return s};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){d===void 0&&(d=1),r===void 0&&(r=[]);var o=Math.round(e.x1),n=Math.round(e.y1),i=Math.round(e.x2),s=Math.round(e.y2),u=Math.abs(i-o),h=Math.abs(s-n),l=o<i?1:-1,f=n<s?1:-1,v=u-h;r.push({x:o,y:n});for(var c=1;!(o===i&&n===s);){var p=v<<1;p>-h&&(v-=h,o+=l),p<u&&(v+=u,n+=f),c%d===0&&r.push({x:o,y:n}),c++}return r};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){if(d.length){if(d.length===1)return d[0]}else return NaN;var o=1,n,i;if(r){if(e<d[0][r])return d[0];for(;d[o][r]<e;)o++}else for(;d[o]<e;)o++;return o>d.length&&(o=d.length),r?(n=d[o-1][r],i=d[o][r],i-e<=e-n?d[o]:d[o-1]):(n=d[o-1],i=d[o],i-e<=e-n?i:n)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o,n,i,s,u){u===void 0&&(u=!1),this.textureKey=o,this.textureFrame=n,this.index=i,this.frame=s,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=u},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d=/\D/g;return e.sort(function(r,o){return parseInt(r.replace(d,""),10)-parseInt(o.replace(d,""),10)}),e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(185),d=t(0),r=t(102),o=t(9),n=t(132),i=t(22),s=t(2),u=t(6),h=t(186),l=t(322),f=new d({Extends:o,initialize:function(c){o.call(this),this.game=c,this.textureManager=null,this.globalTimeScale=1,this.anims=new r,this.mixes=new r,this.paused=!1,this.name="AnimationManager",c.events.once(i.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(i.DESTROY,this.destroy,this)},addMix:function(v,c,p){var m=this.anims,y=this.mixes,T=typeof v=="string"?v:v.key,E=typeof c=="string"?c:c.key;if(m.has(T)&&m.has(E)){var S=y.get(T);S||(S={}),S[E]=p,y.set(T,S)}return this},removeMix:function(v,c){var p=this.mixes,m=typeof v=="string"?v:v.key,y=p.get(m);if(y)if(c){var T=typeof c=="string"?c:c.key;y.hasOwnProperty(T)&&delete y[T]}else c||p.delete(m);return this},getMix:function(v,c){var p=this.mixes,m=typeof v=="string"?v:v.key,y=typeof c=="string"?c:c.key,T=p.get(m);return T&&T.hasOwnProperty(y)?T[y]:0},add:function(v,c){return this.anims.has(v)?(console.warn("Animation key exists: "+v),this):(c.key=v,this.anims.set(v,c),this.emit(n.ADD_ANIMATION,v,c),this)},exists:function(v){return this.anims.has(v)},createFromAseprite:function(v,c){var p=[],m=this.game.cache.json.get(v);if(!m)return p;var y=this,T=u(m,"meta",null),E=u(m,"frames",null);if(T&&E){var S=u(T,"frameTags",[]);S.forEach(function(P){var M=[],O=s(P,"name",null),L=s(P,"from",0),F=s(P,"to",0),b=s(P,"direction","forward");if(O&&(!c||c&&c.indexOf(O)>-1)){for(var B=[],U=Number.MAX_SAFE_INTEGER,X=L;X<=F;X++){var W=X.toString(),Z=E[W];if(Z){var J=s(Z,"duration",Number.MAX_SAFE_INTEGER);J<U&&(U=J),B.push({frame:W,duration:J})}}B.forEach(function(V){M.push({key:v,frame:V.frame,duration:U-V.duration})});var N=U*M.length;b==="reverse"&&(M=M.reverse());var I={key:O,frames:M,duration:N,yoyo:b==="pingpong"},G=y.create(I);G&&p.push(G)}})}return p},create:function(v){var c=v.key,p=!1;return c&&(p=this.get(c),p||(p=new e(this,c,v),this.anims.set(c,p),this.emit(n.ADD_ANIMATION,c,p))),p},fromJSON:function(v,c){c===void 0&&(c=!1),c&&this.anims.clear(),typeof v=="string"&&(v=JSON.parse(v));var p=[];if(v.hasOwnProperty("anims")&&Array.isArray(v.anims)){for(var m=0;m<v.anims.length;m++)p.push(this.create(v.anims[m]));v.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=v.globalTimeScale)}else v.hasOwnProperty("key")&&v.type==="frame"&&p.push(this.create(v));return p},generateFrameNames:function(v,c){var p=u(c,"prefix",""),m=u(c,"start",0),y=u(c,"end",0),T=u(c,"suffix",""),E=u(c,"zeroPad",0),S=u(c,"outputArray",[]),P=u(c,"frames",!1),M=this.textureManager.get(v);if(!M)return S;var O;if(c)for(P||(P=l(m,y)),O=0;O<P.length;O++){var L=p+h(P[O],E,"0",1)+T;M.has(L)?S.push({key:v,frame:L}):console.warn("generateFrameNames: Frame missing: "+L+" from texture: "+v)}else for(P=M.getFrameNames(),O=0;O<P.length;O++)S.push({key:v,frame:P[O]});return S},generateFrameNumbers:function(v,c){var p=u(c,"start",0),m=u(c,"end",-1),y=u(c,"first",!1),T=u(c,"outputArray",[]),E=u(c,"frames",!1),S=this.textureManager.get(v);if(!S)return T;y&&S.has(y)&&T.push({key:v,frame:y}),E||(m===-1&&(m=S.frameTotal-2),E=l(p,m));for(var P=0;P<E.length;P++)S.has(E[P])?T.push({key:v,frame:E[P]}):console.warn("generateFrameNumbers: Frame "+P+" missing from texture: "+v);return T},get:function(v){return this.anims.get(v)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(n.PAUSE_ALL)),this},play:function(v,c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++)c[p].anims.play(v);return this},staggerPlay:function(v,c,p,m){p===void 0&&(p=0),m===void 0&&(m=!0),Array.isArray(c)||(c=[c]);var y=c.length;m||y--;for(var T=0;T<c.length;T++){var E=p<0?Math.abs(p)*(y-T):p*T;c[T].anims.playAfterDelay(v,E)}return this},remove:function(v){var c=this.get(v);return c&&(this.emit(n.REMOVE_ANIMATION,v,c),this.anims.delete(v),this.removeMix(v)),c},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(n.RESUME_ALL)),this},toJSON:function(v){var c={anims:[],globalTimeScale:this.globalTimeScale};return v!==void 0&&v!==""?c.anims.push(this.anims.get(v).toJSON()):this.anims.each(function(p,m){c.anims.push(m.toJSON())}),c},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});a.exports=f},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=[],i,s=!1;if((r||o)&&(s=!0,r||(r=""),o||(o="")),d<e)for(i=e;i>=d;i--)s?n.push(r+i.toString()+o):n.push(i);else for(i=e;i<=d;i++)s?n.push(r+i.toString()+o):n.push(i);return n};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(102),r=t(9),o=t(324),n=new e({initialize:function(){this.entries=new d,this.events=new r},add:function(i,s){return this.entries.set(i,s),this.events.emit(o.ADD,this,i,s),this},has:function(i){return this.entries.has(i)},exists:function(i){return this.entries.has(i)},get:function(i){return this.entries.get(i)},remove:function(i){var s=this.get(i);return s&&(this.entries.delete(i),this.events.emit(o.REMOVE,this,i,s.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ADD:t(736),REMOVE:t(737)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(323),d=t(0),r=t(22),o=new d({initialize:function(i){this.game=i,this.binary=new e,this.bitmapFont=new e,this.json=new e,this.physics=new e,this.shader=new e,this.audio=new e,this.video=new e,this.text=new e,this.html=new e,this.obj=new e,this.tilemap=new e,this.xml=new e,this.custom={},this.game.events.once(r.DESTROY,this.destroy,this)},addCustom:function(n){return this.custom.hasOwnProperty(n)||(this.custom[n]=new e),this.custom[n]},destroy:function(){for(var n=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],i=0;i<n.length;i++)this[n[i]].destroy(),this[n[i]]=null;for(var s in this.custom)this.custom[s].destroy();this.custom=null,this.game=null}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(133),d=t(190),r=t(18),o=t(0),n=t(11),i=t(333),s=t(37),u=t(135),h=t(10),l=t(3),f=new o({Extends:e,Mixins:[n.Flip,n.Tint,n.Pipeline],initialize:function(c,p,m,y){e.call(this,c,p,m,y),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new i.Fade(this),this.flashEffect=new i.Flash(this),this.shakeEffect=new i.Shake(this),this.panEffect=new i.Pan(this),this.rotateToEffect=new i.RotateTo(this),this.zoomEffect=new i.Zoom(this),this.lerp=new l(1,1),this.followOffset=new l,this.deadzone=null,this._follow=null},setDeadzone:function(v,c){if(v===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=v,this.deadzone.height=c):this.deadzone=new h(0,0,v,c),this._follow){var p=this.width/2,m=this.height/2,y=this._follow.x-this.followOffset.x,T=this._follow.y-this.followOffset.y;this.midPoint.set(y,T),this.scrollX=y-p,this.scrollY=T-m}d(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(v,c,p,m,y,T){return this.fadeEffect.start(!1,v,c,p,m,!0,y,T)},fadeOut:function(v,c,p,m,y,T){return this.fadeEffect.start(!0,v,c,p,m,!0,y,T)},fadeFrom:function(v,c,p,m,y,T,E){return this.fadeEffect.start(!1,v,c,p,m,y,T,E)},fade:function(v,c,p,m,y,T,E){return this.fadeEffect.start(!0,v,c,p,m,y,T,E)},flash:function(v,c,p,m,y,T,E){return this.flashEffect.start(v,c,p,m,y,T,E)},shake:function(v,c,p,m,y){return this.shakeEffect.start(v,c,p,m,y)},pan:function(v,c,p,m,y,T,E){return this.panEffect.start(v,c,p,m,y,T,E)},rotateTo:function(v,c,p,m,y,T,E){return this.rotateToEffect.start(v,c,p,m,y,T,E)},zoomTo:function(v,c,p,m,y,T){return this.zoomEffect.start(v,c,p,m,y,T)},preRender:function(){this.renderList.length=0;var v=this.width,c=this.height,p=v*.5,m=c*.5,y=this.zoom,T=this.matrix,E=v*this.originX,S=c*this.originY,P=this._follow,M=this.deadzone,O=this.scrollX,L=this.scrollY;M&&d(M,this.midPoint.x,this.midPoint.y);var F=!1;if(P&&!this.panEffect.isRunning){var b=P.x-this.followOffset.x,B=P.y-this.followOffset.y;M?(b<M.x?O=u(O,O-(M.x-b),this.lerp.x):b>M.right&&(O=u(O,O+(b-M.right),this.lerp.x)),B<M.y?L=u(L,L-(M.y-B),this.lerp.y):B>M.bottom&&(L=u(L,L+(B-M.bottom),this.lerp.y))):(O=u(O,b-E,this.lerp.x),L=u(L,B-S,this.lerp.y)),F=!0}this.useBounds&&(O=this.clampX(O),L=this.clampY(L)),this.roundPixels&&(E=Math.round(E),S=Math.round(S),O=Math.round(O),L=Math.round(L)),this.scrollX=O,this.scrollY=L;var U=O+p,X=L+m;this.midPoint.set(U,X);var W=v/y,Z=c/y,J=U-W/2,N=X-Z/2;this.roundPixels&&(J=Math.round(J),N=Math.round(N)),this.worldView.setTo(J,N,W,Z),T.applyITRS(this.x+E,this.y+S,this.rotation,y,y),T.translate(-E,-S),this.shakeEffect.preRender(),F&&this.emit(s.FOLLOW_UPDATE,this,P)},setLerp:function(v,c){return v===void 0&&(v=1),c===void 0&&(c=v),this.lerp.set(v,c),this},setFollowOffset:function(v,c){return v===void 0&&(v=0),c===void 0&&(c=0),this.followOffset.set(v,c),this},startFollow:function(v,c,p,m,y,T){c===void 0&&(c=!1),p===void 0&&(p=1),m===void 0&&(m=p),y===void 0&&(y=0),T===void 0&&(T=y),this._follow=v,this.roundPixels=c,p=r(p,0,1),m=r(m,0,1),this.lerp.set(p,m),this.followOffset.set(y,T);var E=this.width/2,S=this.height/2,P=v.x-y,M=v.y-T;return this.midPoint.set(P,M),this.scrollX=P-E,this.scrollY=M-S,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(v,c){this.visible&&(this.rotateToEffect.update(v,c),this.panEffect.update(v,c),this.zoomEffect.update(v,c),this.shakeEffect.update(v,c),this.flashEffect.update(v,c),this.fadeEffect.update(v,c))},destroy:function(){this.resetFX(),e.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});a.exports=f},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),d=function(r){var o=new e;r=r.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(h,l,f,v){return l+l+f+f+v+v});var n=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);if(n){var i=parseInt(n[1],16),s=parseInt(n[2],16),u=parseInt(n[3],16);o.setTo(i,s,u)}return o};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){return o<<24|e<<16|d<<8|r};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){o===void 0&&(o={h:0,s:0,v:0}),e/=255,d/=255,r/=255;var n=Math.min(e,d,r),i=Math.max(e,d,r),s=i-n,u=0,h=i===0?0:s/i,l=i;return i!==n&&(i===e?u=(d-r)/s+(d<r?6:0):i===d?u=(r-e)/s+2:i===r&&(u=(e-d)/s+4),u/=6),o.hasOwnProperty("_h")?(o._h=u,o._s=h,o._v=l):(o.h=u,o.s=h,o.v=l),o};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),d=function(r){return new e(r.r,r.g,r.b,r.a)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),d=function(r){var o=new e,n=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(r.toLowerCase());if(n){var i=parseInt(n[1],10),s=parseInt(n[2],10),u=parseInt(n[3],10),h=n[4]!==void 0?parseFloat(n[4]):1;o.setTo(i,s,u,h*255)}return o};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Fade:t(761),Flash:t(762),Pan:t(763),Shake:t(796),RotateTo:t(797),Zoom:t(798)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:t(764),Out:t(765),InOut:t(766)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:t(767),Out:t(768),InOut:t(769)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:t(770),Out:t(771),InOut:t(772)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:t(773),Out:t(774),InOut:t(775)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:t(776),Out:t(777),InOut:t(778)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:t(779),Out:t(780),InOut:t(781)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports=t(782)},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:t(783),Out:t(784),InOut:t(785)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:t(786),Out:t(787),InOut:t(788)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:t(789),Out:t(790),InOut:t(791)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:t(792),Out:t(793),InOut:t(794)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports=t(795)},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(33),r=t(347),o=t(2),n=t(6),i=t(7),s=t(193),u=t(1),h=t(197),l=t(187),f=new e({initialize:function(c){c===void 0&&(c={});var p=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],m="#ffffff";this.width=n(c,"width",1024),this.height=n(c,"height",768),this.zoom=n(c,"zoom",1),this.parent=n(c,"parent",void 0),this.scaleMode=n(c,"scaleMode",0),this.expandParent=n(c,"expandParent",!0),this.autoRound=n(c,"autoRound",!1),this.autoCenter=n(c,"autoCenter",0),this.resizeInterval=n(c,"resizeInterval",500),this.fullscreenTarget=n(c,"fullscreenTarget",null),this.minWidth=n(c,"minWidth",0),this.maxWidth=n(c,"maxWidth",0),this.minHeight=n(c,"minHeight",0),this.maxHeight=n(c,"maxHeight",0);var y=n(c,"scale",null);y&&(this.width=n(y,"width",this.width),this.height=n(y,"height",this.height),this.zoom=n(y,"zoom",this.zoom),this.parent=n(y,"parent",this.parent),this.scaleMode=n(y,"mode",this.scaleMode),this.expandParent=n(y,"expandParent",this.expandParent),this.autoRound=n(y,"autoRound",this.autoRound),this.autoCenter=n(y,"autoCenter",this.autoCenter),this.resizeInterval=n(y,"resizeInterval",this.resizeInterval),this.fullscreenTarget=n(y,"fullscreenTarget",this.fullscreenTarget),this.minWidth=n(y,"min.width",this.minWidth),this.maxWidth=n(y,"max.width",this.maxWidth),this.minHeight=n(y,"min.height",this.minHeight),this.maxHeight=n(y,"max.height",this.maxHeight)),this.renderType=n(c,"type",d.AUTO),this.canvas=n(c,"canvas",null),this.context=n(c,"context",null),this.canvasStyle=n(c,"canvasStyle",null),this.customEnvironment=n(c,"customEnvironment",!1),this.sceneConfig=n(c,"scene",null),this.seed=n(c,"seed",[(Date.now()*Math.random()).toString()]),s.RND=new s.RandomDataGenerator(this.seed),this.gameTitle=n(c,"title",""),this.gameURL=n(c,"url","https://phaser.io"),this.gameVersion=n(c,"version",""),this.autoFocus=n(c,"autoFocus",!0),this.domCreateContainer=n(c,"dom.createContainer",!1),this.domBehindCanvas=n(c,"dom.behindCanvas",!1),this.domPointerEvents=n(c,"dom.pointerEvents","none"),this.inputKeyboard=n(c,"input.keyboard",!0),this.inputKeyboardEventTarget=n(c,"input.keyboard.target",window),this.inputKeyboardCapture=n(c,"input.keyboard.capture",[]),this.inputMouse=n(c,"input.mouse",!0),this.inputMouseEventTarget=n(c,"input.mouse.target",null),this.inputMousePreventDefaultDown=n(c,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=n(c,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=n(c,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=n(c,"input.mouse.preventDefaultWheel",!0),this.inputTouch=n(c,"input.touch",r.input.touch),this.inputTouchEventTarget=n(c,"input.touch.target",null),this.inputTouchCapture=n(c,"input.touch.capture",!0),this.inputActivePointers=n(c,"input.activePointers",1),this.inputSmoothFactor=n(c,"input.smoothFactor",0),this.inputWindowEvents=n(c,"input.windowEvents",!0),this.inputGamepad=n(c,"input.gamepad",!1),this.inputGamepadEventTarget=n(c,"input.gamepad.target",window),this.disableContextMenu=n(c,"disableContextMenu",!1),this.audio=n(c,"audio",{}),this.hideBanner=n(c,"banner",null)===!1,this.hidePhaser=n(c,"banner.hidePhaser",!1),this.bannerTextColor=n(c,"banner.text",m),this.bannerBackgroundColor=n(c,"banner.background",p),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=n(c,"fps",null);var T=n(c,"render",c);this.pipeline=n(T,"pipeline",null),this.antialias=n(T,"antialias",!0),this.antialiasGL=n(T,"antialiasGL",!0),this.mipmapFilter=n(T,"mipmapFilter","LINEAR"),this.desynchronized=n(T,"desynchronized",!1),this.roundPixels=n(T,"roundPixels",!1),this.pixelArt=n(T,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=n(T,"transparent",!1),this.clearBeforeRender=n(T,"clearBeforeRender",!0),this.preserveDrawingBuffer=n(T,"preserveDrawingBuffer",!1),this.premultipliedAlpha=n(T,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=n(T,"failIfMajorPerformanceCaveat",!1),this.powerPreference=n(T,"powerPreference","default"),this.batchSize=n(T,"batchSize",4096),this.maxTextures=n(T,"maxTextures",-1),this.maxLights=n(T,"maxLights",10);var E=n(c,"backgroundColor",0);this.backgroundColor=l(E),this.transparent&&(this.backgroundColor=l(0),this.backgroundColor.alpha=0),this.preBoot=n(c,"callbacks.preBoot",u),this.postBoot=n(c,"callbacks.postBoot",u),this.physics=n(c,"physics",{}),this.defaultPhysicsSystem=n(this.physics,"default",!1),this.loaderBaseURL=n(c,"loader.baseURL",""),this.loaderPath=n(c,"loader.path","");var S=r.os.android?6:32;this.loaderMaxParallelDownloads=n(c,"loader.maxParallelDownloads",S),this.loaderCrossOrigin=n(c,"loader.crossOrigin",void 0),this.loaderResponseType=n(c,"loader.responseType",""),this.loaderAsync=n(c,"loader.async",!0),this.loaderUser=n(c,"loader.user",""),this.loaderPassword=n(c,"loader.password",""),this.loaderTimeout=n(c,"loader.timeout",0),this.loaderWithCredentials=n(c,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=n(c,"plugins",null),M=h.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:i(P)&&(this.installGlobalPlugins=o(P,"global",[]),this.installScenePlugins=o(P,"scene",[]),Array.isArray(P.default)?M=P.default:Array.isArray(P.defaultMerge)&&(M=M.concat(P.defaultMerge)))),this.defaultPlugins=M;var O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=n(c,"images.default",O+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=n(c,"images.missing",O+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=n(c,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=d.WEBGL:window.FORCE_CANVAS&&(this.renderType=d.CANVAS))}});a.exports=f},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={os:t(105),browser:t(136),features:t(191),input:t(808),audio:t(809),video:t(810),fullscreen:t(811),canvasFeatures:t(348)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),d={supportInverseAlpha:!1,supportNewBlendModes:!1};function r(){var i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",s="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",u=new Image;return u.onload=function(){var h=new Image;h.onload=function(){var l=e.create(h,6,1),f=l.getContext("2d");if(f.globalCompositeOperation="multiply",f.drawImage(u,0,0),f.drawImage(h,2,0),!f.getImageData(2,0,1,1))return!1;var v=f.getImageData(2,0,1,1).data;e.remove(h),d.supportNewBlendModes=v[0]===255&&v[1]===0&&v[2]===0},h.src=i+"/wCKxvRF"+s},u.src=i+"AP804Oa6"+s,!1}function o(){var i=e.create(this,2,1),s=i.getContext("2d");s.fillStyle="rgba(10, 20, 30, 0.5)",s.fillRect(0,0,1,1);var u=s.getImageData(0,0,1,1);if(u===null)return!1;s.putImageData(u,1,0);var h=s.getImageData(1,0,1,1);return h.data[0]===u.data[0]&&h.data[1]===u.data[1]&&h.data[2]===u.data[2]&&h.data[3]===u.data[3]}function n(){return typeof importScripts!="function"&&document!==void 0&&(d.supportNewBlendModes=r(),d.supportInverseAlpha=o()),d}a.exports=n()},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){return Math.atan2(o-d,r-e)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return Math.atan2(d.y-e.y,d.x-e.x)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};a.exports=t},function(a,x){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.x-d.x,o=e.y-d.y;return Math.sqrt(r*r+o*o)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=e-r,i=d-o;return n*n+i*i};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return r===void 0&&(r=1e-4),e>d-r};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return r===void 0&&(r=1e-4),e<d+r};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(357),d=function(r,o){return e(r)/e(o)/e(r-o)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(e===0)return 1;for(var d=e;--e;)d*=e;return d};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(n,i){var s=1-n;return s*s*s*i}function e(n,i){var s=1-n;return 3*s*s*n*i}function d(n,i){return 3*(1-n)*n*n*i}function r(n,i){return n*n*n*i}var o=function(n,i,s,u,h){return t(n,i)+e(n,s)+d(n,u)+r(n,h)};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(o,n){var i=1-o;return i*i*n}function e(o,n){return 2*(1-o)*o*n}function d(o,n){return o*o*n}var r=function(o,n,i,s){return t(o,n)+e(o,i)+d(o,s)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(184),d=function(r,o,n){return o+(n-o)*e(r,0,1)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d=Math.log(e)/.6931471805599453;return 1<<Math.ceil(d)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.x,o=e.y;return e.x=r*Math.cos(d)-o*Math.sin(d),e.y=r*Math.sin(d)+o*Math.cos(d),e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e>0?Math.ceil(e):Math.floor(e)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o){this.val=new Float32Array(9),o?this.copy(o):this.identity()},clone:function(){return new d(this)},set:function(r){return this.copy(r)},copy:function(r){var o=this.val,n=r.val;return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],this},fromMat4:function(r){var o=r.val,n=this.val;return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[4],n[4]=o[5],n[5]=o[6],n[6]=o[8],n[7]=o[9],n[8]=o[10],this},fromArray:function(r){var o=this.val;return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],this},identity:function(){var r=this.val;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,this},transpose:function(){var r=this.val,o=r[1],n=r[2],i=r[5];return r[1]=r[3],r[2]=r[6],r[3]=o,r[5]=r[7],r[6]=n,r[7]=i,this},invert:function(){var r=this.val,o=r[0],n=r[1],i=r[2],s=r[3],u=r[4],h=r[5],l=r[6],f=r[7],v=r[8],c=v*u-h*f,p=-v*s+h*l,m=f*s-u*l,y=o*c+n*p+i*m;return y?(y=1/y,r[0]=c*y,r[1]=(-v*n+i*f)*y,r[2]=(h*n-i*u)*y,r[3]=p*y,r[4]=(v*o-i*l)*y,r[5]=(-h*o+i*s)*y,r[6]=m*y,r[7]=(-f*o+n*l)*y,r[8]=(u*o-n*s)*y,this):null},adjoint:function(){var r=this.val,o=r[0],n=r[1],i=r[2],s=r[3],u=r[4],h=r[5],l=r[6],f=r[7],v=r[8];return r[0]=u*v-h*f,r[1]=i*f-n*v,r[2]=n*h-i*u,r[3]=h*l-s*v,r[4]=o*v-i*l,r[5]=i*s-o*h,r[6]=s*f-u*l,r[7]=n*l-o*f,r[8]=o*u-n*s,this},determinant:function(){var r=this.val,o=r[0],n=r[1],i=r[2],s=r[3],u=r[4],h=r[5],l=r[6],f=r[7],v=r[8];return o*(v*u-h*f)+n*(-v*s+h*l)+i*(f*s-u*l)},multiply:function(r){var o=this.val,n=o[0],i=o[1],s=o[2],u=o[3],h=o[4],l=o[5],f=o[6],v=o[7],c=o[8],p=r.val,m=p[0],y=p[1],T=p[2],E=p[3],S=p[4],P=p[5],M=p[6],O=p[7],L=p[8];return o[0]=m*n+y*u+T*f,o[1]=m*i+y*h+T*v,o[2]=m*s+y*l+T*c,o[3]=E*n+S*u+P*f,o[4]=E*i+S*h+P*v,o[5]=E*s+S*l+P*c,o[6]=M*n+O*u+L*f,o[7]=M*i+O*h+L*v,o[8]=M*s+O*l+L*c,this},translate:function(r){var o=this.val,n=r.x,i=r.y;return o[6]=n*o[0]+i*o[3]+o[6],o[7]=n*o[1]+i*o[4]+o[7],o[8]=n*o[2]+i*o[5]+o[8],this},rotate:function(r){var o=this.val,n=o[0],i=o[1],s=o[2],u=o[3],h=o[4],l=o[5],f=Math.sin(r),v=Math.cos(r);return o[0]=v*n+f*u,o[1]=v*i+f*h,o[2]=v*s+f*l,o[3]=v*u-f*n,o[4]=v*h-f*i,o[5]=v*l-f*s,this},scale:function(r){var o=this.val,n=r.x,i=r.y;return o[0]=n*o[0],o[1]=n*o[1],o[2]=n*o[2],o[3]=i*o[3],o[4]=i*o[4],o[5]=i*o[5],this},fromQuat:function(r){var o=r.x,n=r.y,i=r.z,s=r.w,u=o+o,h=n+n,l=i+i,f=o*u,v=o*h,c=o*l,p=n*h,m=n*l,y=i*l,T=s*u,E=s*h,S=s*l,P=this.val;return P[0]=1-(p+y),P[3]=v+S,P[6]=c-E,P[1]=v-S,P[4]=1-(f+y),P[7]=m+T,P[2]=c+E,P[5]=m-T,P[8]=1-(f+p),this},normalFromMat4:function(r){var o=r.val,n=this.val,i=o[0],s=o[1],u=o[2],h=o[3],l=o[4],f=o[5],v=o[6],c=o[7],p=o[8],m=o[9],y=o[10],T=o[11],E=o[12],S=o[13],P=o[14],M=o[15],O=i*f-s*l,L=i*v-u*l,F=i*c-h*l,b=s*v-u*f,B=s*c-h*f,U=u*c-h*v,X=p*S-m*E,W=p*P-y*E,Z=p*M-T*E,J=m*P-y*S,N=m*M-T*S,I=y*M-T*P,G=O*I-L*N+F*J+b*Z-B*W+U*X;return G?(G=1/G,n[0]=(f*I-v*N+c*J)*G,n[1]=(v*Z-l*I-c*W)*G,n[2]=(l*N-f*Z+c*X)*G,n[3]=(u*N-s*I-h*J)*G,n[4]=(i*I-u*Z+h*W)*G,n[5]=(s*Z-i*N-h*X)*G,n[6]=(S*U-P*B+M*b)*G,n[7]=(P*F-E*U-M*L)*G,n[8]=(E*B-S*F+M*O)*G,this):null}});a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(364),r=t(1),o=t(39),n=1e-6,i=new Int8Array([1,2,0]),s=new Float32Array([0,0,0]),u=new o(1,0,0),h=new o(0,1,0),l=new o,f=new d,v=new e({initialize:function(p,m,y,T){this.onChangeCallback=r,this.set(p,m,y,T)},x:{get:function(){return this._x},set:function(c){this._x=c,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(c){this._y=c,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(c){this._z=c,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(c){this._w=c,this.onChangeCallback(this)}},copy:function(c){return this.set(c)},set:function(c,p,m,y,T){return T===void 0&&(T=!0),typeof c=="object"?(this._x=c.x||0,this._y=c.y||0,this._z=c.z||0,this._w=c.w||0):(this._x=c||0,this._y=p||0,this._z=m||0,this._w=y||0),T&&this.onChangeCallback(this),this},add:function(c){return this._x+=c.x,this._y+=c.y,this._z+=c.z,this._w+=c.w,this.onChangeCallback(this),this},subtract:function(c){return this._x-=c.x,this._y-=c.y,this._z-=c.z,this._w-=c.w,this.onChangeCallback(this),this},scale:function(c){return this._x*=c,this._y*=c,this._z*=c,this._w*=c,this.onChangeCallback(this),this},length:function(){var c=this.x,p=this.y,m=this.z,y=this.w;return Math.sqrt(c*c+p*p+m*m+y*y)},lengthSq:function(){var c=this.x,p=this.y,m=this.z,y=this.w;return c*c+p*p+m*m+y*y},normalize:function(){var c=this.x,p=this.y,m=this.z,y=this.w,T=c*c+p*p+m*m+y*y;return T>0&&(T=1/Math.sqrt(T),this._x=c*T,this._y=p*T,this._z=m*T,this._w=y*T),this.onChangeCallback(this),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z+this.w*c.w},lerp:function(c,p){p===void 0&&(p=0);var m=this.x,y=this.y,T=this.z,E=this.w;return this.set(m+p*(c.x-m),y+p*(c.y-y),T+p*(c.z-T),E+p*(c.w-E))},rotationTo:function(c,p){var m=c.x*p.x+c.y*p.y+c.z*p.z;return m<-.999999?(l.copy(u).cross(c).length()<n&&l.copy(h).cross(c),l.normalize(),this.setAxisAngle(l,Math.PI)):m>.999999?this.set(0,0,0,1):(l.copy(c).cross(p),this._x=l.x,this._y=l.y,this._z=l.z,this._w=1+m,this.normalize())},setAxes:function(c,p,m){var y=f.val;return y[0]=p.x,y[3]=p.y,y[6]=p.z,y[1]=m.x,y[4]=m.y,y[7]=m.z,y[2]=-c.x,y[5]=-c.y,y[8]=-c.z,this.fromMat3(f).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(c,p){p=p*.5;var m=Math.sin(p);return this.set(m*c.x,m*c.y,m*c.z,Math.cos(p))},multiply:function(c){var p=this.x,m=this.y,y=this.z,T=this.w,E=c.x,S=c.y,P=c.z,M=c.w;return this.set(p*M+T*E+m*P-y*S,m*M+T*S+y*E-p*P,y*M+T*P+p*S-m*E,T*M-p*E-m*S-y*P)},slerp:function(c,p){var m=this.x,y=this.y,T=this.z,E=this.w,S=c.x,P=c.y,M=c.z,O=c.w,L=m*S+y*P+T*M+E*O;L<0&&(L=-L,S=-S,P=-P,M=-M,O=-O);var F=1-p,b=p;if(1-L>n){var B=Math.acos(L),U=Math.sin(B);F=Math.sin((1-p)*B)/U,b=Math.sin(p*B)/U}return this.set(F*m+b*S,F*y+b*P,F*T+b*M,F*E+b*O)},invert:function(){var c=this.x,p=this.y,m=this.z,y=this.w,T=c*c+p*p+m*m+y*y,E=T?1/T:0;return this.set(-c*E,-p*E,-m*E,y*E)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(c){c*=.5;var p=this.x,m=this.y,y=this.z,T=this.w,E=Math.sin(c),S=Math.cos(c);return this.set(p*S+T*E,m*S+y*E,y*S-m*E,T*S-p*E)},rotateY:function(c){c*=.5;var p=this.x,m=this.y,y=this.z,T=this.w,E=Math.sin(c),S=Math.cos(c);return this.set(p*S-y*E,m*S+T*E,y*S+p*E,T*S-m*E)},rotateZ:function(c){c*=.5;var p=this.x,m=this.y,y=this.z,T=this.w,E=Math.sin(c),S=Math.cos(c);return this.set(p*S+m*E,m*S-p*E,y*S+T*E,T*S-y*E)},calculateW:function(){var c=this.x,p=this.y,m=this.z;return this.w=-Math.sqrt(1-c*c-p*p-m*m),this},setFromEuler:function(c,p){var m=c.x/2,y=c.y/2,T=c.z/2,E=Math.cos(m),S=Math.cos(y),P=Math.cos(T),M=Math.sin(m),O=Math.sin(y),L=Math.sin(T);switch(c.order){case"XYZ":{this.set(M*S*P+E*O*L,E*O*P-M*S*L,E*S*L+M*O*P,E*S*P-M*O*L,p);break}case"YXZ":{this.set(M*S*P+E*O*L,E*O*P-M*S*L,E*S*L-M*O*P,E*S*P+M*O*L,p);break}case"ZXY":{this.set(M*S*P-E*O*L,E*O*P+M*S*L,E*S*L+M*O*P,E*S*P-M*O*L,p);break}case"ZYX":{this.set(M*S*P-E*O*L,E*O*P+M*S*L,E*S*L-M*O*P,E*S*P+M*O*L,p);break}case"YZX":{this.set(M*S*P+E*O*L,E*O*P+M*S*L,E*S*L-M*O*P,E*S*P-M*O*L,p);break}case"XZY":{this.set(M*S*P-E*O*L,E*O*P-M*S*L,E*S*L+M*O*P,E*S*P+M*O*L,p);break}}return this},setFromRotationMatrix:function(c){var p=c.val,m=p[0],y=p[4],T=p[8],E=p[1],S=p[5],P=p[9],M=p[2],O=p[6],L=p[10],F=m+S+L,b;return F>0?(b=.5/Math.sqrt(F+1),this.set((O-P)*b,(T-M)*b,(E-y)*b,.25/b)):m>S&&m>L?(b=2*Math.sqrt(1+m-S-L),this.set(.25*b,(y+E)/b,(T+M)/b,(O-P)/b)):S>L?(b=2*Math.sqrt(1+S-m-L),this.set((y+E)/b,.25*b,(P+O)/b,(T-M)/b)):(b=2*Math.sqrt(1+L-m-S),this.set((T+M)/b,(P+O)/b,.25*b,(E-y)/b)),this},fromMat3:function(c){var p=c.val,m=p[0]+p[4]+p[8],y;if(m>0)y=Math.sqrt(m+1),this.w=.5*y,y=.5/y,this._x=(p[7]-p[5])*y,this._y=(p[2]-p[6])*y,this._z=(p[3]-p[1])*y;else{var T=0;p[4]>p[0]&&(T=1),p[8]>p[T*3+T]&&(T=2);var E=i[T],S=i[E];y=Math.sqrt(p[T*3+T]-p[E*3+E]-p[S*3+S]+1),s[T]=.5*y,y=.5/y,s[E]=(p[E*3+T]+p[T*3+E])*y,s[S]=(p[S*3+T]+p[T*3+S])*y,this._x=s[0],this._y=s[1],this._z=s[2],this._w=(p[S*3+E]-p[E*3+S])*y}return this.onChangeCallback(this),this}});a.exports=v},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(367),d=t(31),r=t(33),o=t(191),n=function(i){var s=i.config;if((s.customEnvironment||s.canvas)&&s.renderType===r.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!s.customEnvironment&&!s.canvas&&s.renderType!==r.HEADLESS)if(s.renderType===r.CANVAS||s.renderType!==r.CANVAS&&!o.webGL)if(o.canvas)s.renderType=r.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else s.renderType=r.WEBGL;s.antialias||d.disableSmoothing();var u=i.scale.baseSize,h=u.width,l=u.height;if(s.canvas?(i.canvas=s.canvas,i.canvas.width=h,i.canvas.height=l):i.canvas=d.create(i,h,l,s.renderType),s.canvasStyle&&(i.canvas.style=s.canvasStyle),s.antialias||e.setCrisp(i.canvas),s.renderType!==r.HEADLESS){var f,v;f=t(368),v=t(371),s.renderType===r.WEBGL?i.renderer=new v(i):(i.renderer=new f(i),i.context=i.renderer.gameContext)}};a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCrisp:function(e){var d=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return d.forEach(function(r){e.style["image-rendering"]=r}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(37),d=t(369),r=t(0),o=t(33),n=t(9),i=t(91),s=t(370),u=t(104),h=t(106),l=t(25),f=new r({Extends:n,initialize:function(c){n.call(this);var p=c.config;this.config={clearBeforeRender:p.clearBeforeRender,backgroundColor:p.backgroundColor,antialias:p.antialias,roundPixels:p.roundPixels},this.game=c,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=c.canvas;var m={alpha:c.config.transparent,desynchronized:c.config.desynchronized};this.gameContext=p.context?p.context:this.gameCanvas.getContext("2d",m),this.currentContext=this.gameContext,this.antialias=c.config.antialias,this.blendModes=s(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(h.READY,this.boot,this)},boot:function(){var v=this.game,c=v.scale.baseSize;this.width=c.width,this.height=c.height,this.isBooted=!0,v.scale.on(u.RESIZE,this.onResize,this),this.resize(c.width,c.height)},onResize:function(v,c){(c.width!==this.width||c.height!==this.height)&&this.resize(c.width,c.height)},resize:function(v,c){this.width=v,this.height=c,this.emit(i.RESIZE,v,c)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(v){return this.currentContext.globalCompositeOperation=v,this},setContext:function(v){return this.currentContext=v||this.gameContext,this},setAlpha:function(v){return this.currentContext.globalAlpha=v,this},preRender:function(){var v=this.gameContext,c=this.config,p=this.width,m=this.height;v.globalAlpha=1,v.globalCompositeOperation="source-over",v.setTransform(1,0,0,1,0,0),c.clearBeforeRender&&(v.clearRect(0,0,p,m),c.transparent||(v.fillStyle=c.backgroundColor.rgba,v.fillRect(0,0,p,m))),v.save(),this.drawCount=0,this.emit(i.PRE_RENDER)},render:function(v,c,p){var m=c.length;this.emit(i.RENDER,v,p);var y=p.x,T=p.y,E=p.width,S=p.height,P=p.renderToTexture?p.context:v.sys.context;P.save(),this.game.scene.customViewports&&(P.beginPath(),P.rect(y,T,E,S),P.clip()),this.currentContext=P;var M=p.mask;M&&M.preRenderCanvas(this,null,p._maskCamera),p.transparent||(P.fillStyle=p.backgroundColor.rgba,P.fillRect(y,T,E,S)),P.globalAlpha=p.alpha,P.globalCompositeOperation="source-over",this.drawCount+=m,p.renderToTexture&&p.emit(e.PRE_RENDER,p),p.matrix.copyToContext(P);for(var O=0;O<m;O++){var L=c[O];L.mask&&L.mask.preRenderCanvas(this,L,p),L.renderCanvas(this,L,p),L.mask&&L.mask.postRenderCanvas(this,L,p)}P.setTransform(1,0,0,1,0,0),P.globalCompositeOperation="source-over",P.globalAlpha=1,p.flashEffect.postRenderCanvas(P),p.fadeEffect.postRenderCanvas(P),p.dirty=!1,M&&M.postRenderCanvas(this),P.restore(),p.renderToTexture&&(p.emit(e.POST_RENDER,p),p.renderToGame&&v.sys.context.drawImage(p.canvas,y,T))},postRender:function(){var v=this.gameContext;v.restore(),this.emit(i.POST_RENDER);var c=this.snapshotState;c.callback&&(d(this.gameCanvas,c),c.callback=null)},snapshotCanvas:function(v,c,p,m,y,T,E,S,P){p===void 0&&(p=!1),this.snapshotArea(m,y,T,E,c,S,P);var M=this.snapshotState;return M.getPixel=p,d(this.canvas,M),M.callback=null,this},snapshot:function(v,c,p){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,v,c,p)},snapshotArea:function(v,c,p,m,y,T,E){var S=this.snapshotState;return S.callback=y,S.type=T,S.encoder=E,S.getPixel=!1,S.x=v,S.y=c,S.width=Math.min(p,this.gameCanvas.width),S.height=Math.min(m,this.gameCanvas.height),this},snapshotPixel:function(v,c,p){return this.snapshotArea(v,c,1,1,p),this.snapshotState.getPixel=!0,this},batchSprite:function(v,c,p,m){var y=p.alpha*v.alpha;if(y!==0){var T=this.currentContext,E=this._tempMatrix1,S=this._tempMatrix2,P=c.canvasData,M=P.x,O=P.y,L=c.cutWidth,F=c.cutHeight,b=c.customPivot,B=c.source.resolution,U=v.displayOriginX,X=v.displayOriginY,W=-U+c.x,Z=-X+c.y;if(v.isCropped){var J=v._crop;(J.flipX!==v.flipX||J.flipY!==v.flipY)&&c.updateCropUVs(J,v.flipX,v.flipY),L=J.cw,F=J.ch,M=J.cx,O=J.cy,W=-U+J.x,Z=-X+J.y,v.flipX&&(W>=0?W=-(W+L):W<0&&(W=Math.abs(W)-L)),v.flipY&&(Z>=0?Z=-(Z+F):Z<0&&(Z=Math.abs(Z)-F))}var N=1,I=1;v.flipX&&(b||(W+=-c.realWidth+U*2),N=-1),v.flipY&&(b||(Z+=-c.realHeight+X*2),I=-1),S.applyITRS(v.x,v.y,v.rotation,v.scaleX*N,v.scaleY*I),E.copyFrom(p.matrix),m?(E.multiplyWithOffset(m,-p.scrollX*v.scrollFactorX,-p.scrollY*v.scrollFactorY),S.e=v.x,S.f=v.y):(S.e-=p.scrollX*v.scrollFactorX,S.f-=p.scrollY*v.scrollFactorY),E.multiply(S),T.save(),E.setToContext(T),T.globalCompositeOperation=this.blendModes[v.blendMode],T.globalAlpha=y,T.imageSmoothingEnabled=!(!this.antialias||c.source.scaleMode),v.mask&&v.mask.preRenderCanvas(this,v,p),T.drawImage(c.source.image,M,O,L,F,W,Z,L/B,F/B),v.mask&&v.mask.postRenderCanvas(this,v,p),T.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});a.exports=f},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),d=t(38),r=t(2),o=function(n,i){var s=r(i,"callback"),u=r(i,"type","image/png"),h=r(i,"encoder",.92),l=Math.abs(Math.round(r(i,"x",0))),f=Math.abs(Math.round(r(i,"y",0))),v=r(i,"width",n.width),c=r(i,"height",n.height),p=r(i,"getPixel",!1);if(p){var m=n.getContext("2d"),y=m.getImageData(l,f,1,1),T=y.data;s.call(null,new d(T[0],T[1],T[2],T[3]/255))}else if(l!==0||f!==0||v!==n.width||c!==n.height){var E=e.createWebGL(this,v,c),S=E.getContext("2d");S.drawImage(n,l,f,v,c,0,0,v,c);var P=new Image;P.onerror=function(){s.call(null),e.remove(E)},P.onload=function(){s.call(null,P),e.remove(E)},P.src=E.toDataURL(u,h)}else{var M=new Image;M.onerror=function(){s.call(null)},M.onload=function(){s.call(null,M)},M.src=n.toDataURL(u,h)}};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),d=t(348),r=function(){var o=[],n=d.supportNewBlendModes,i="source-over";return o[e.NORMAL]=i,o[e.ADD]="lighter",o[e.MULTIPLY]=n?"multiply":i,o[e.SCREEN]=n?"screen":i,o[e.OVERLAY]=n?"overlay":i,o[e.DARKEN]=n?"darken":i,o[e.LIGHTEN]=n?"lighten":i,o[e.COLOR_DODGE]=n?"color-dodge":i,o[e.COLOR_BURN]=n?"color-burn":i,o[e.HARD_LIGHT]=n?"hard-light":i,o[e.SOFT_LIGHT]=n?"soft-light":i,o[e.DIFFERENCE]=n?"difference":i,o[e.EXCLUSION]=n?"exclusion":i,o[e.HUE]=n?"hue":i,o[e.SATURATION]=n?"saturation":i,o[e.COLOR]=n?"color":i,o[e.LUMINOSITY]=n?"luminosity":i,o[e.ERASE]="destination-out",o[e.SOURCE_IN]="source-in",o[e.SOURCE_OUT]="source-out",o[e.SOURCE_ATOP]="source-atop",o[e.DESTINATION_OVER]="destination-over",o[e.DESTINATION_IN]="destination-in",o[e.DESTINATION_OUT]="destination-out",o[e.DESTINATION_ATOP]="destination-atop",o[e.LIGHTER]="lighter",o[e.COPY]="copy",o[e.XOR]="xor",o};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(93),d=t(37),r=t(0),o=t(33),n=t(9),i=t(91),s=t(22),u=t(138),h=t(69),l=t(1),f=t(372),v=t(141),c=t(104),p=t(106),m=t(12),y=t(383),T=new r({Extends:n,initialize:function(S){n.call(this);var P=S.config,M={alpha:P.transparent,desynchronized:P.desynchronized,depth:!1,antialias:P.antialiasGL,premultipliedAlpha:P.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:P.failIfMajorPerformanceCaveat,powerPreference:P.powerPreference,preserveDrawingBuffer:P.preserveDrawingBuffer};this.config={clearBeforeRender:P.clearBeforeRender,antialias:P.antialias,backgroundColor:P.backgroundColor,contextCreation:M,roundPixels:P.roundPixels,maxTextures:P.maxTextures,maxTextureSize:P.maxTextureSize,batchSize:P.batchSize,maxLights:P.maxLights,mipmapFilter:P.mipmapFilter},this.game=S,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=S.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=l,this.contextRestoredHandler=l,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(E){var S,P=this.game,M=this.canvas,O=E.backgroundColor;if(P.config.context?S=P.config.context:S=M.getContext("webgl",E.contextCreation)||M.getContext("experimental-webgl",E.contextCreation),!S||S.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=S;var L=this;this.contextLostHandler=function(G){L.contextLost=!0,L.game.events.emit(s.CONTEXT_LOST,L),G.preventDefault()},this.contextRestoredHandler=function(){L.contextLost=!1,L.init(L.config),L.game.events.emit(s.CONTEXT_RESTORED,L)},M.addEventListener("webglcontextlost",this.contextLostHandler,!1),M.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),P.context=S;for(var F=0;F<=27;F++)this.blendModes.push({func:[S.ONE,S.ONE_MINUS_SRC_ALPHA],equation:S.FUNC_ADD});this.blendModes[1].func=[S.ONE,S.DST_ALPHA],this.blendModes[2].func=[S.DST_COLOR,S.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[S.ONE,S.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[S.ZERO,S.ONE_MINUS_SRC_ALPHA],equation:S.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=S.BYTE,this.glFormats[1]=S.SHORT,this.glFormats[2]=S.UNSIGNED_BYTE,this.glFormats[3]=S.UNSIGNED_SHORT,this.glFormats[4]=S.FLOAT,this.glFuncMap={mat2:{func:S.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:S.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:S.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:S.uniform1f,length:1},"1fv":{func:S.uniform1fv,length:1},"1i":{func:S.uniform1i,length:1},"1iv":{func:S.uniform1iv,length:1},"2f":{func:S.uniform2f,length:2},"2fv":{func:S.uniform2fv,length:1},"2i":{func:S.uniform2i,length:2},"2iv":{func:S.uniform2iv,length:1},"3f":{func:S.uniform3f,length:3},"3fv":{func:S.uniform3fv,length:1},"3i":{func:S.uniform3i,length:3},"3iv":{func:S.uniform3iv,length:1},"4f":{func:S.uniform4f,length:4},"4fv":{func:S.uniform4fv,length:1},"4i":{func:S.uniform4i,length:4},"4iv":{func:S.uniform4iv,length:1}};var b=S.getSupportedExtensions();(!E.maxTextures||E.maxTextures===-1)&&(E.maxTextures=S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS)),E.maxTextureSize||(E.maxTextureSize=S.getParameter(S.MAX_TEXTURE_SIZE));var B="WEBGL_compressed_texture_",U="WEBKIT_"+B;this.compression.ETC1=S.getExtension(B+"etc1")||S.getExtension(U+"etc1"),this.compression.PVRTC=S.getExtension(B+"pvrtc")||S.getExtension(U+"pvrtc"),this.compression.S3TC=S.getExtension(B+"s3tc")||S.getExtension(U+"s3tc"),this.supportedExtensions=b;var X="ANGLE_instanced_arrays";this.instancedArraysExtension=b.indexOf(X)>-1?S.getExtension(X):null;var W="OES_vertex_array_object";this.vaoExtension=b.indexOf(W)>-1?S.getExtension(W):null,S.disable(S.DEPTH_TEST),S.disable(S.CULL_FACE),S.enable(S.BLEND),S.clearColor(O.redGL,O.greenGL,O.blueGL,O.alphaGL),this.mipmapFilter=S[E.mipmapFilter],this.maxTextures=m.checkShaderMax(S,E.maxTextures),this.textureIndexes=[];var Z=this.tempTextures;if(Array.isArray(Z))for(var J=0;F<this.maxTextures;J++)S.deleteTexture(Z[J]);else Z=new Array(this.maxTextures);for(var N=0;N<this.maxTextures;N++){var I=S.createTexture();S.activeTexture(S.TEXTURE0+N),S.bindTexture(S.TEXTURE_2D,I),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),Z[N]=I,this.textureIndexes.push(N)}return this.tempTextures=Z,this.currentActiveTexture=1,this.startActiveTexture++,S.activeTexture(S.TEXTURE1),this.pipelines=new f(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=new h().identity(),P.textures.once(p.READY,this.boot,this),this},boot:function(){var E=this.game,S=this.pipelines,P=E.scale.baseSize;this.width=P.width,this.height=P.height,this.isBooted=!0,this.renderTarget=new v(this,this.width,this.height,1,0,!0,!0),S.boot(E.config.pipeline),this.blankTexture=E.textures.getFrame("__DEFAULT"),this.whiteTexture=E.textures.getFrame("__WHITE");var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,null),M.enable(M.SCISSOR_TEST),E.scale.on(c.RESIZE,this.onResize,this),this.resize(P.width,P.height)},onResize:function(E,S){(S.width!==this.width||S.height!==this.height)&&this.resize(S.width,S.height)},beginCapture:function(E,S){E===void 0&&(E=this.width),S===void 0&&(S=this.height),this.renderTarget.bind(!0,E,S),this.setProjectionMatrix(E,S),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(E,S){var P=this.gl;return this.width=E,this.height=S,this.setProjectionMatrix(E,S),P.viewport(0,0,E,S),this.drawingBufferHeight=P.drawingBufferHeight,P.scissor(0,P.drawingBufferHeight-S,E,S),this.defaultScissor[2]=E,this.defaultScissor[3]=S,this.emit(i.RESIZE,E,S),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(E,S){return(E!==this.projectionWidth||S!==this.projectionHeight)&&(this.projectionWidth=E,this.projectionHeight=S,this.projectionMatrix.ortho(0,E,S,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(E){return this.supportedExtensions?this.supportedExtensions.indexOf(E):!1},getExtension:function(E){return this.hasExtension(E)?(E in this.extensions||(this.extensions[E]=this.gl.getExtension(E)),this.extensions[E]):null},flush:function(){this.pipelines.flush()},pushScissor:function(E,S,P,M,O){O===void 0&&(O=this.drawingBufferHeight);var L=this.scissorStack,F=[E,S,P,M];return L.push(F),this.setScissor(E,S,P,M,O),this.currentScissor=F,F},setScissor:function(E,S,P,M,O){O===void 0&&(O=this.drawingBufferHeight);var L=this.gl,F=this.currentScissor,b=P>0&&M>0;if(F&&b){var B=F[0],U=F[1],X=F[2],W=F[3];b=B!==E||U!==S||X!==P||W!==M}b&&(this.flush(),L.scissor(E,O-S-M,P,M))},resetScissor:function(){var E=this.gl;E.enable(E.SCISSOR_TEST);var S=this.currentScissor;if(S){var P=S[0],M=S[1],O=S[2],L=S[3];O>0&&L>0&&E.scissor(P,this.drawingBufferHeight-M-L,O,L)}},popScissor:function(){var E=this.scissorStack;E.pop();var S=E[E.length-1];S&&this.setScissor(S[0],S[1],S[2],S[3]),this.currentScissor=S},hasActiveStencilMask:function(){var E=this.currentMask.mask,S=this.currentCameraMask.mask;return E&&E.isStencil||S&&S.isStencil},resetViewport:function(){var E=this.gl;E.viewport(0,0,this.width,this.height),this.drawingBufferHeight=E.drawingBufferHeight},setBlendMode:function(E,S){S===void 0&&(S=!1);var P=this.gl,M=this.blendModes[E];return S||E!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==E?(this.flush(),P.enable(P.BLEND),P.blendEquation(M.equation),M.func.length>2?P.blendFuncSeparate(M.func[0],M.func[1],M.func[2],M.func[3]):P.blendFunc(M.func[0],M.func[1]),this.currentBlendMode=E,!0):!1},addBlendMode:function(E,S){var P=this.blendModes.push({func:E,equation:S});return P-1},updateBlendMode:function(E,S,P){return this.blendModes[E]&&(this.blendModes[E].func=S,P&&(this.blendModes[E].equation=P)),this},removeBlendMode:function(E){return E>17&&this.blendModes[E]&&this.blendModes.splice(E,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(E){if(this.pipelines.forceZero())return this.setTextureZero(E.glTexture,!0),0;var S=this.gl,P=this.currentActiveTexture;return E.glIndexCounter<this.startActiveTexture&&(E.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(E.glIndex=P,S.activeTexture(S.TEXTURE0+P),S.bindTexture(S.TEXTURE_2D,E.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,E.glIndexCounter=this.startActiveTexture,E.glIndex=1,S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,E.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,E.glIndex},isNewNormalMap:function(E,S){return this.textureZero!==E||this.normalTexture!==S},setTextureZero:function(E,S){if(this.textureZero!==E){S&&this.flush();var P=this.gl;P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,E),this.textureZero=E}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(E){if(this.normalTexture!==E){var S=this.gl;S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,E),this.normalTexture=E,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var E=this.gl,S=this.tempTextures,P=0;P<S.length;P++)E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(E){if(E===void 0&&(E=!1),!this.isTextureClean){this.flush();var S=this.gl,P=this.tempTextures;if(E){for(var M=0;M<P.length;M++)S.activeTexture(S.TEXTURE0+M),S.bindTexture(S.TEXTURE_2D,P[M]);S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,P[1]),this.isTextureClean=!0}else S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,P[0]),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,P[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(E){if(this.pipelines.forceZero())return this.setTextureZero(E,!0),0;var S=this.gl,P=this.currentActiveTexture;return E.glIndexCounter<this.startActiveTexture&&(E.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(E.glIndex=P,S.activeTexture(S.TEXTURE0+P),S.bindTexture(S.TEXTURE_2D,E),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,E.glIndexCounter=this.startActiveTexture,E.glIndex=1,S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,E),this.currentActiveTexture=2)),this.isTextureClean=!1,E.glIndex},pushFramebuffer:function(E,S,P,M){return E===this.currentFramebuffer?this:(this.fboStack.push(E),this.setFramebuffer(E,S,P,M))},setFramebuffer:function(E,S,P,M){if(S===void 0&&(S=!1),P===void 0&&(P=!1),M===void 0&&(M=!0),E===this.currentFramebuffer)return this;var O=this.gl,L=this.width,F=this.height;return E&&E.renderTexture&&M?(L=E.renderTexture.width,F=E.renderTexture.height):this.flush(),O.bindFramebuffer(O.FRAMEBUFFER,E),M&&O.viewport(0,0,L,F),S&&(E?(this.drawingBufferHeight=F,this.pushScissor(0,0,L,F)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=E,P&&this.resetTextures(),this},popFramebuffer:function(E,S,P){E===void 0&&(E=!1),S===void 0&&(S=!1),P===void 0&&(P=!0);var M=this.fboStack;M.pop();var O=M[M.length-1];return O||(O=null),this.setFramebuffer(O,E,S,P),O},setProgram:function(E){return E!==this.currentProgram?(this.flush(),this.gl.useProgram(E),this.currentProgram=E,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(E,S,P,M){var O=this.gl,L=O.NEAREST,F=O.NEAREST,b=O.CLAMP_TO_EDGE,B=null;S=E?E.width:S,P=E?E.height:P;var U=u(S,P);return U&&(b=O.REPEAT),M===o.ScaleModes.LINEAR&&this.config.antialias&&(L=U?this.mipmapFilter:O.LINEAR,F=O.LINEAR),!E&&typeof S=="number"&&typeof P=="number"?B=this.createTexture2D(0,L,F,b,b,O.RGBA,null,S,P):B=this.createTexture2D(0,L,F,b,b,O.RGBA,E),B},createTexture2D:function(E,S,P,M,O,L,F,b,B,U,X,W){U=U??!0,X===void 0&&(X=!1),W===void 0&&(W=!1);var Z=this.gl,J=Z.createTexture();Z.activeTexture(Z.TEXTURE0);var N=Z.getParameter(Z.TEXTURE_BINDING_2D);return Z.bindTexture(Z.TEXTURE_2D,J),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,S),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,P),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,O),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,M),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,W),F==null?Z.texImage2D(Z.TEXTURE_2D,E,L,b,B,0,L,Z.UNSIGNED_BYTE,null):(X||(b=F.width,B=F.height),Z.texImage2D(Z.TEXTURE_2D,E,L,L,Z.UNSIGNED_BYTE,F)),u(b,B)&&Z.generateMipmap(Z.TEXTURE_2D),N&&Z.bindTexture(Z.TEXTURE_2D,N),J.isAlphaPremultiplied=U,J.isRenderTexture=!1,J.width=b,J.height=B,J.glIndex=0,J.glIndexCounter=-1,J},createFramebuffer:function(E,S,P,M){var O=this.gl,L=O.createFramebuffer(),F=0;if(this.setFramebuffer(L),M){var b=O.createRenderbuffer();O.bindRenderbuffer(O.RENDERBUFFER,b),O.renderbufferStorage(O.RENDERBUFFER,O.DEPTH_STENCIL,E,S),O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_STENCIL_ATTACHMENT,O.RENDERBUFFER,b)}if(P.isRenderTexture=!0,P.isAlphaPremultiplied=!1,O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,P,0),F=O.checkFramebufferStatus(O.FRAMEBUFFER),F!==O.FRAMEBUFFER_COMPLETE){var B={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+B[F])}return L.renderTexture=P,this.setFramebuffer(null),this.resetTextures(),L},createProgram:function(E,S){var P=this.gl,M=P.createProgram(),O=P.createShader(P.VERTEX_SHADER),L=P.createShader(P.FRAGMENT_SHADER);if(P.shaderSource(O,E),P.shaderSource(L,S),P.compileShader(O),P.compileShader(L),!P.getShaderParameter(O,P.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+P.getShaderInfoLog(O));if(!P.getShaderParameter(L,P.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+P.getShaderInfoLog(L));if(P.attachShader(M,O),P.attachShader(M,L),P.linkProgram(M),!P.getProgramParameter(M,P.LINK_STATUS))throw new Error(`Link Program failed:
`+P.getProgramInfoLog(M));return P.useProgram(M),M},createVertexBuffer:function(E,S){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ARRAY_BUFFER,M),P.bufferData(P.ARRAY_BUFFER,E,S),P.bindBuffer(P.ARRAY_BUFFER,null),M},createIndexBuffer:function(E,S){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,M),P.bufferData(P.ELEMENT_ARRAY_BUFFER,E,S),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,null),M},deleteTexture:function(E,S){return S&&this.resetTextures(!0),E&&this.gl.deleteTexture(E),this},deleteFramebuffer:function(E){return E&&(this.gl.deleteFramebuffer(E),e(this.fboStack,E),this.currentFramebuffer===E&&(this.currentFramebuffer=null)),this},deleteProgram:function(E){return E&&this.gl.deleteProgram(E),this},deleteBuffer:function(E){return this.gl.deleteBuffer(E),this},preRenderCamera:function(E){var S=E.x,P=E.y,M=E.width,O=E.height,L=E.backgroundColor;if(E.emit(d.PRE_RENDER,E),this.pipelines.preBatchCamera(E),this.pushScissor(S,P,M,O),E.mask&&(this.currentCameraMask.mask=E.mask,this.currentCameraMask.camera=E._maskCamera,E.mask.preRenderWebGL(this,E,E._maskCamera)),L.alphaGL>0){var F=this.pipelines.setMulti();F.drawFillRect(S,P,M,O,m.getTintFromFloats(L.blueGL,L.greenGL,L.redGL,1),L.alphaGL)}},getCurrentStencilMask:function(){var E=null,S=this.maskStack,P=this.currentCameraMask;return S.length>0?E=S[S.length-1]:P.mask&&P.mask.isStencil&&(E=P),E},postRenderCamera:function(E){var S=E.flashEffect,P=E.fadeEffect;if(S.isRunning||P.isRunning||P.isComplete){var M=this.pipelines.setMulti();S.postRenderWebGL(M,m.getTintFromFloats),P.postRenderWebGL(M,m.getTintFromFloats)}E.dirty=!1,this.popScissor(),E.mask&&(this.currentCameraMask.mask=null,E.mask.postRenderWebGL(this,E._maskCamera)),this.pipelines.postBatchCamera(E),E.emit(d.POST_RENDER,E)},preRender:function(){if(!this.contextLost){var E=this.gl;if(E.bindFramebuffer(E.FRAMEBUFFER,null),this.config.clearBeforeRender){var S=this.config.backgroundColor;E.clearColor(S.redGL,S.greenGL,S.blueGL,S.alphaGL),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT|E.STENCIL_BUFFER_BIT)}E.enable(E.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&E.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(i.PRE_RENDER)}},render:function(E,S,P){if(!this.contextLost){var M=S.length;if(this.emit(i.RENDER,E,P),this.preRenderCamera(P),M===0){this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(P);return}this.currentType="";for(var O=this.currentMask,L=0;L<M;L++){this.finalType=L===M-1;var F=S[L],b=F.mask;O=this.currentMask,O.mask&&O.mask!==b&&O.mask.postRenderWebGL(this,O.camera),b&&O.mask!==b&&b.preRenderWebGL(this,F,P),F.blendMode!==this.currentBlendMode&&this.setBlendMode(F.blendMode);var B=F.type;B!==this.currentType&&(this.newType=!0,this.currentType=B),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=S[L+1].type===this.currentType,F.renderWebGL(this,F,P),this.newType=!1}O=this.currentMask,O.mask&&O.mask.postRenderWebGL(this,O.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(P)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(i.POST_RENDER);var E=this.snapshotState;E.callback&&(y(this.canvas,E),E.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(E,S,P){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,E,S,P)},snapshotArea:function(E,S,P,M,O,L,F){var b=this.snapshotState;return b.callback=O,b.type=L,b.encoder=F,b.getPixel=!1,b.x=E,b.y=S,b.width=Math.min(P,this.gl.drawingBufferWidth),b.height=Math.min(M,this.gl.drawingBufferHeight),this},snapshotPixel:function(E,S,P){return this.snapshotArea(E,S,1,1,P),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(E,S,P,M,O,L,F,b,B,U,X){O===void 0&&(O=!1),L===void 0&&(L=0),F===void 0&&(F=0),b===void 0&&(b=S),B===void 0&&(B=P);var W=this.currentFramebuffer;this.snapshotArea(L,F,b,B,M,U,X);var Z=this.snapshotState;return Z.getPixel=O,Z.isFramebuffer=!0,Z.bufferWidth=S,Z.bufferHeight=P,this.setFramebuffer(E),y(this.canvas,Z),this.setFramebuffer(W),Z.callback=null,Z.isFramebuffer=!1,this},canvasToTexture:function(E,S,P,M){return P===void 0&&(P=!1),M===void 0&&(M=!1),S?this.updateCanvasTexture(E,S,M):this.createCanvasTexture(E,P,M)},createCanvasTexture:function(E,S,P){S===void 0&&(S=!1),P===void 0&&(P=!1);var M=this.gl,O=M.NEAREST,L=M.NEAREST,F=E.width,b=E.height,B=M.CLAMP_TO_EDGE,U=u(F,b);return!S&&U&&(B=M.REPEAT),this.config.antialias&&(O=U?this.mipmapFilter:M.LINEAR,L=M.LINEAR),this.createTexture2D(0,O,L,B,B,M.RGBA,E,F,b,!0,!1,P)},updateCanvasTexture:function(E,S,P){P===void 0&&(P=!1);var M=this.gl,O=E.width,L=E.height;if(O>0&&L>0){M.activeTexture(M.TEXTURE0);var F=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,S),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,E),S.width=O,S.height=L,F&&M.bindTexture(M.TEXTURE_2D,F)}return S},createVideoTexture:function(E,S,P){S===void 0&&(S=!1),P===void 0&&(P=!1);var M=this.gl,O=M.NEAREST,L=M.NEAREST,F=E.videoWidth,b=E.videoHeight,B=M.CLAMP_TO_EDGE,U=u(F,b);return!S&&U&&(B=M.REPEAT),this.config.antialias&&(O=U?this.mipmapFilter:M.LINEAR,L=M.LINEAR),this.createTexture2D(0,O,L,B,B,M.RGBA,E,F,b,!0,!0,P)},updateVideoTexture:function(E,S,P){P===void 0&&(P=!1);var M=this.gl,O=E.videoWidth,L=E.videoHeight;if(O>0&&L>0){M.activeTexture(M.TEXTURE0);var F=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,S),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,E),S.width=O,S.height=L,F&&M.bindTexture(M.TEXTURE_2D,F)}return S},setTextureFilter:function(E,S){var P=this.gl,M=[P.LINEAR,P.NEAREST][S];P.activeTexture(P.TEXTURE0);var O=P.getParameter(P.TEXTURE_BINDING_2D);return P.bindTexture(P.TEXTURE_2D,E),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,M),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,M),O&&P.bindTexture(P.TEXTURE_2D,O),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var E=this.gl,S=this.tempTextures,P=0;P<S.length;P++)E.deleteTexture(S[P]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});a.exports=T},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(92),r=t(102),o=t(373),n=t(376),i=t(377),s=t(108),u=t(378),h=t(379),l=t(380),f=t(381),v=new e({initialize:function(p){this.game=p.game,this.renderer=p,this.classes=new r([[d.UTILITY_PIPELINE,f],[d.MULTI_PIPELINE,s],[d.BITMAPMASK_PIPELINE,o],[d.SINGLE_PIPELINE,l],[d.ROPE_PIPELINE,h],[d.LIGHT_PIPELINE,i],[d.POINTLIGHT_PIPELINE,u],[d.GRAPHICS_PIPELINE,n]]),this.postPipelineClasses=new r,this.pipelines=new r,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(c){var p,m,y=this,T=this.game;if(this.classes.each(function(S,P){p=y.add(S,new P({game:T})),S===d.UTILITY_PIPELINE&&(y.UTILITY_PIPELINE=p,y.fullFrame1=p.fullFrame1,y.fullFrame2=p.fullFrame2,y.halfFrame1=p.halfFrame1,y.halfFrame2=p.halfFrame2)}),this.MULTI_PIPELINE=this.get(d.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(d.BITMAPMASK_PIPELINE),c)for(m in c){var E=c[m];p=new E(T),p.isPostFX?this.postPipelineClasses.set(m,E):this.has(m)||(this.classes.set(m,E),this.add(m,p))}},add:function(c,p){if(p.isPostFX){console.warn(c+" is a Post Pipeline. Use `addPostPipeline` instead");return}var m=this.pipelines,y=this.renderer;return m.has(c)?console.warn("Pipeline exists: "+c):(p.name=c,p.manager=this,m.set(c,p)),p.hasBooted||p.boot(),y.width!==0&&y.height!==0&&p.resize(y.width,y.height),p},addPostPipeline:function(c,p){this.postPipelineClasses.has(c)||this.postPipelineClasses.set(c,p)},flush:function(){this.current&&this.current.flush()},has:function(c){var p=this.pipelines;return typeof c=="string"?p.has(c):!!p.contains(c)},get:function(c){var p=this.pipelines;if(typeof c=="string")return p.get(c);if(p.contains(c))return c},getPostPipeline:function(c,p){var m=this.postPipelineClasses,y;if(typeof c=="string"?y=m.get(c):typeof c=="function"?m.contains(c)&&(y=c):typeof c=="object"&&(y=m.get(c.name)),y){var T=new y(this.game);return p&&(T.gameObject=p),T}},remove:function(c,p,m){p===void 0&&(p=!0),m===void 0&&(m=!0),this.pipelines.delete(c),p&&this.classes.delete(c),m&&this.postPipelineClasses.delete(c)},set:function(c,p,m){if(!c.isPostFX)return this.isCurrent(c,m)||(this.flush(),this.current&&this.current.unbind(),this.current=c,c.bind(m)),c.updateProjectionMatrix(),c.onBind(p),c},preBatch:function(c){if(c.hasPostPipeline){this.flush();for(var p=c.postPipelines,m=p.length-1;m>=0;m--){var y=p[m];y.active&&y.preBatch(c)}}},postBatch:function(c){if(c.hasPostPipeline){this.flush();for(var p=c.postPipelines,m=0;m<p.length;m++){var y=p[m];y.active&&y.postBatch(c)}}},preBatchCamera:function(c){if(c.hasPostPipeline){this.flush();for(var p=c.postPipelines,m=p.length-1;m>=0;m--){var y=p[m];y.active&&y.preBatch(c)}}},postBatchCamera:function(c){if(c.hasPostPipeline){this.flush();for(var p=c.postPipelines,m=0;m<p.length;m++){var y=p[m];y.active&&y.postBatch(c)}}},isCurrent:function(c,p){var m=this.renderer,y=this.current;return y&&!p&&(p=y.currentShader),!(y!==c||p.program!==m.currentProgram)},copyFrame:function(c,p,m,y,T){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(c,p,m,y,T),this},copyToGame:function(c){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(c),this},drawFrame:function(c,p,m,y){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(c,p,m,y),this},blendFrames:function(c,p,m,y,T){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(c,p,m,y,T),this},blendFramesAdditive:function(c,p,m,y,T){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(c,p,m,y,T),this},clearFrame:function(c,p){return this.UTILITY_PIPELINE.clearFrame(c,p),this},blitFrame:function(c,p,m,y,T,E){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(c,p,m,y,T,E),this},copyFrameRect:function(c,p,m,y,T,E,S,P){return this.UTILITY_PIPELINE.copyFrameRect(c,p,m,y,T,E,S,P),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(c){return this.UTILITY_PIPELINE.bind(c)},rebind:function(c){c===void 0&&this.previous&&(c=this.previous);var p=this.renderer,m=p.gl;m.disable(m.DEPTH_TEST),m.disable(m.CULL_FACE),p.hasActiveStencilMask()?m.clear(m.DEPTH_BUFFER_BIT):(m.disable(m.STENCIL_TEST),m.clear(m.DEPTH_BUFFER_BIT|m.STENCIL_BUFFER_BIT)),m.viewport(0,0,p.width,p.height),p.currentProgram=null,p.setBlendMode(0,!0);var y=this.pipelines.entries;for(var T in y)y[T].glReset=!0;c&&(this.current=c,c.rebind()),p.resetTextures()},clear:function(){var c=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,c.currentProgram=null,c.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});a.exports=v},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(2),r=t(866),o=t(867),n=t(107),i=t(58),s=new e({Extends:i,initialize:function(h){h.fragShader=d(h,"fragShader",r),h.vertShader=d(h,"vertShader",o),h.batchSize=d(h,"batchSize",1),h.vertices=d(h,"vertices",[-1,1,-1,-7,7,1]),h.attributes=d(h,"attributes",[{name:"inPosition",size:2,type:n.FLOAT}]),i.call(this,h)},boot:function(){i.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(u,h){i.prototype.resize.call(this,u,h),this.set2f("uResolution",u,h)},beginMask:function(u,h,l){var f=this.gl;if(u.bitmapMask&&f){var v=this.renderer;v.flush(),v.pushFramebuffer(u.mainFramebuffer),f.disable(f.STENCIL_TEST),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT),v.currentCameraMask.mask!==u&&(v.currentMask.mask=u,v.currentMask.camera=l)}},endMask:function(u,h){var l=this.gl,f=this.renderer,v=u.bitmapMask;if(v&&l){f.flush(),f.pushFramebuffer(u.maskFramebuffer),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),f.setBlendMode(0,!0),v.renderWebGL(f,v,h),f.flush(),f.popFramebuffer(),f.popFramebuffer();var c=f.getCurrentStencilMask();c?(l.enable(l.STENCIL_TEST),c.mask.applyStencil(f,c.camera,!0)):f.currentMask.mask=null,f.pipelines.set(this),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,u.maskTexture),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.mainTexture),this.set1i("uInvertMaskAlpha",u.invertAlpha),l.drawArrays(this.topology,0,3),f.resetTextures()}}});a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AFTER_FLUSH:t(868),BEFORE_FLUSH:t(869),BIND:t(870),BOOT:t(871),DESTROY:t(872),REBIND:t(873),RESIZE:t(874)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(2),r=t(107),o=new e({initialize:function(i,s,u,h,l){this.pipeline=i,this.name=s,this.renderer=i.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(u,h),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(l),this.createUniforms()},createAttributes:function(n){var i=0,s=0,u=[];this.vertexComponentCount=0;for(var h=0;h<n.length;h++){var l=n[h],f=l.name,v=d(l,"size",1),c=d(l,"type",r.FLOAT),p=c.enum,m=c.size,y=!!l.normalized;u.push({name:f,size:v,type:p,normalized:y,offset:s,enabled:!1,location:-1}),m===4?i+=v:i++,s+=v*m}this.vertexSize=s,this.vertexComponentCount=i,this.attributes=u},bind:function(n,i){return n===void 0&&(n=!1),i===void 0&&(i=!1),i&&this.pipeline.flush(),this.renderer.setProgram(this.program),n&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(n){n===void 0&&(n=!1);for(var i=this.gl,s=this.vertexSize,u=this.attributes,h=this.program,l=0;l<u.length;l++){var f=u[l],v=f.size,c=f.type,p=f.offset,m=f.enabled,y=f.location,T=!!f.normalized;if(n){var E=i.getAttribLocation(h,f.name);E>=0?(i.enableVertexAttribArray(E),i.vertexAttribPointer(E,v,c,T,s,p),f.enabled=!0,f.location=E):E!==-1&&i.disableVertexAttribArray(E)}else m?i.vertexAttribPointer(y,v,c,T,s,p):!m&&y>-1&&(i.disableVertexAttribArray(y),f.location=-1)}return this},createUniforms:function(){var n=this.gl,i=this.program,s=this.uniforms,u,h,l,f=n.getProgramParameter(i,n.ACTIVE_UNIFORMS);for(u=0;u<f;u++){var v=n.getActiveUniform(i,u);if(v){h=v.name,l=n.getUniformLocation(i,h),l!==null&&(s[h]={name:h,location:l,value1:null,value2:null,value3:null,value4:null});var c=h.indexOf("[");c>0&&(h=h.substr(0,c),s.hasOwnProperty(h)||(l=n.getUniformLocation(i,h),l!==null&&(s[h]={name:h,location:l,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(n){return this.uniforms.hasOwnProperty(n)},resetUniform:function(n){var i=this.uniforms[n];return i&&(i.value1=null,i.value2=null,i.value3=null,i.value4=null),this},setUniform1:function(n,i,s,u){var h=this.uniforms[i];return h?((u||h.value1!==s)&&(h.value1=s,this.renderer.setProgram(this.program),n.call(this.gl,h.location,s),this.pipeline.currentShader=this),this):this},setUniform2:function(n,i,s,u,h){var l=this.uniforms[i];return l?((h||l.value1!==s||l.value2!==u)&&(l.value1=s,l.value2=u,this.renderer.setProgram(this.program),n.call(this.gl,l.location,s,u),this.pipeline.currentShader=this),this):this},setUniform3:function(n,i,s,u,h,l){var f=this.uniforms[i];return f?((l||f.value1!==s||f.value2!==u||f.value3!==h)&&(f.value1=s,f.value2=u,f.value3=h,this.renderer.setProgram(this.program),n.call(this.gl,f.location,s,u,h),this.pipeline.currentShader=this),this):this},setUniform4:function(n,i,s,u,h,l,f){var v=this.uniforms[i];return v?((f||v.value1!==s||v.value2!==u||v.value3!==h||v.value4!==l)&&(v.value1=s,v.value2=u,v.value3=h,v.value4=l,this.renderer.setProgram(this.program),n.call(this.gl,v.location,s,u,h,l),this.pipeline.currentShader=this),this):this},set1f:function(n,i){return this.setUniform1(this.gl.uniform1f,n,i)},set2f:function(n,i,s){return this.setUniform2(this.gl.uniform2f,n,i,s)},set3f:function(n,i,s,u){return this.setUniform3(this.gl.uniform3f,n,i,s,u)},set4f:function(n,i,s,u,h){return this.setUniform4(this.gl.uniform4f,n,i,s,u,h)},set1fv:function(n,i){return this.setUniform1(this.gl.uniform1fv,n,i,!0)},set2fv:function(n,i){return this.setUniform1(this.gl.uniform2fv,n,i,!0)},set3fv:function(n,i){return this.setUniform1(this.gl.uniform3fv,n,i,!0)},set4fv:function(n,i){return this.setUniform1(this.gl.uniform4fv,n,i,!0)},set1iv:function(n,i){return this.setUniform1(this.gl.uniform1iv,n,i,!0)},set2iv:function(n,i){return this.setUniform1(this.gl.uniform2iv,n,i,!0)},set3iv:function(n,i){return this.setUniform1(this.gl.uniform3iv,n,i,!0)},set4iv:function(n,i){return this.setUniform1(this.gl.uniform4iv,n,i,!0)},set1i:function(n,i){return this.setUniform1(this.gl.uniform1i,n,i)},set2i:function(n,i,s){return this.setUniform2(this.gl.uniform2i,n,i,s)},set3i:function(n,i,s,u){return this.setUniform3(this.gl.uniform3i,n,i,s,u)},set4i:function(n,i,s,u,h){return this.setUniform4(this.gl.uniform4i,n,i,s,u,h)},setMatrix2fv:function(n,i,s){return this.setUniform2(this.gl.uniformMatrix2fv,n,i,s,!0)},setMatrix3fv:function(n,i,s){return this.setUniform2(this.gl.uniformMatrix3fv,n,i,s,!0)},setMatrix4fv:function(n,i,s){return this.setUniform2(this.gl.uniformMatrix4fv,n,i,s,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(59),r=t(2),o=t(875),n=t(876),i=t(25),s=t(107),u=t(58),h=new e({Extends:u,initialize:function(f){f.fragShader=r(f,"fragShader",o),f.vertShader=r(f,"vertShader",n),f.attributes=r(f,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:s.UNSIGNED_BYTE,normalized:!0}]),u.call(this,f),this.calcMatrix=new i,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(l,f,v,c,p,m){this.renderer.pipelines.set(this);var y=this.calcMatrix;m&&m.multiply(p,y);var T=l+v,E=f+c,S=y.getX(l,f),P=y.getY(l,f),M=y.getX(l,E),O=y.getY(l,E),L=y.getX(T,E),F=y.getY(T,E),b=y.getX(T,f),B=y.getY(T,f),U=this.fillTint;this.batchQuad(S,P,M,O,L,F,b,B,U.TL,U.TR,U.BL,U.BR)},batchFillTriangle:function(l,f,v,c,p,m,y,T){this.renderer.pipelines.set(this);var E=this.calcMatrix;T&&T.multiply(y,E);var S=E.getX(l,f),P=E.getY(l,f),M=E.getX(v,c),O=E.getY(v,c),L=E.getX(p,m),F=E.getY(p,m),b=this.fillTint;this.batchTri(S,P,M,O,L,F,b.TL,b.TR,b.BL)},batchStrokeTriangle:function(l,f,v,c,p,m,y,T,E){var S=this.tempTriangle;S[0].x=l,S[0].y=f,S[0].width=y,S[1].x=v,S[1].y=c,S[1].width=y,S[2].x=p,S[2].y=m,S[2].width=y,S[3].x=l,S[3].y=f,S[3].width=y,this.batchStrokePath(S,y,!1,T,E)},batchFillPath:function(l,f,v){this.renderer.pipelines.set(this);var c=this.calcMatrix;v&&v.multiply(f,c);for(var p=l.length,m=this.polygonCache,y,T,E=this.fillTint.TL,S=this.fillTint.TR,P=this.fillTint.BL,M=0;M<p;++M)T=l[M],m.push(T.x,T.y);y=d(m),p=y.length;for(var O=0;O<p;O+=3){var L=y[O+0]*2,F=y[O+1]*2,b=y[O+2]*2,B=m[L+0],U=m[L+1],X=m[F+0],W=m[F+1],Z=m[b+0],J=m[b+1],N=c.getX(B,U),I=c.getY(B,U),G=c.getX(X,W),V=c.getY(X,W),Y=c.getX(Z,J),z=c.getY(Z,J);this.batchTri(N,I,G,V,Y,z,E,S,P)}m.length=0},batchStrokePath:function(l,f,v,c,p){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var m=l.length-1,y=0;y<m;y++){var T=l[y],E=l[y+1];this.batchLine(T.x,T.y,E.x,E.y,T.width/2,E.width/2,f,y,!v&&y===m-1,c,p)}},batchLine:function(l,f,v,c,p,m,y,T,E,S,P){this.renderer.pipelines.set(this);var M=this.calcMatrix;P&&P.multiply(S,M);var O=v-l,L=c-f,F=Math.sqrt(O*O+L*L),b=p*(c-f)/F,B=p*(l-v)/F,U=m*(c-f)/F,X=m*(l-v)/F,W=v-U,Z=c-X,J=l-b,N=f-B,I=v+U,G=c+X,V=l+b,Y=f+B,z=M.getX(W,Z),H=M.getY(W,Z),$=M.getX(J,N),Q=M.getY(J,N),k=M.getX(I,G),tt=M.getY(I,G),it=M.getX(V,Y),st=M.getY(V,Y),ot=this.strokeTint,rt=ot.TL,ut=ot.TR,gt=ot.BL,mt=ot.BR;if(this.batchQuad(it,st,$,Q,z,H,k,tt,rt,ut,gt,mt),!(y<=2)){var dt=this.prevQuad,at=this.firstQuad;T>0&&dt[4]?this.batchQuad(it,st,$,Q,dt[0],dt[1],dt[2],dt[3],rt,ut,gt,mt):(at[0]=it,at[1]=st,at[2]=$,at[3]=Q,at[4]=1),E&&at[4]?this.batchQuad(z,H,k,tt,at[0],at[1],at[2],at[3],rt,ut,gt,mt):(dt[0]=z,dt[1]=H,dt[2]=k,dt[3]=tt,dt[4]=1)}},batchVert:function(l,f,v){var c=this.vertexViewF32,p=this.vertexViewU32,m=this.vertexCount*this.currentShader.vertexComponentCount-1;c[++m]=l,c[++m]=f,p[++m]=v,this.vertexCount++},batchQuad:function(l,f,v,c,p,m,y,T,E,S,P,M){var O=!1;return this.shouldFlush(6)&&(this.flush(),O=!0),this.batchVert(l,f,E),this.batchVert(v,c,P),this.batchVert(p,m,M),this.batchVert(l,f,E),this.batchVert(p,m,M),this.batchVert(y,T,S),O},batchTri:function(l,f,v,c,p,m,y,T,E){var S=!1;return this.shouldFlush(3)&&(this.flush(),S=!0),this.batchVert(l,f,y),this.batchVert(v,c,T),this.batchVert(p,m,E),S},destroy:function(){return u.prototype.destroy.call(this),this.polygonCache=null,this}});a.exports=h},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(2),r=t(877),o=t(108),n=t(3),i=t(58),s=10,u=new n,h=new e({Extends:o,initialize:function(f){s=f.game.renderer.config.maxLights;for(var v=d(f,"fragShader",r),c=[],p=1;p<=s;p++)c.push({name:"lights"+p,fragShader:v.replace("%LIGHT_COUNT%",p.toString())});f.shaders=c,o.call(this,f),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){i.prototype.boot.call(this);var l=this.gl,f=l.createTexture();l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,f),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:f};for(var v=0;v<this.shaders.length;v++)this["lightShader"+(v+1)]=this.shaders[v]},onRender:function(l,f){var v=l.sys.lights;if(this.lightsActive=!1,!(!v||!v.active)){var c=v.getLights(f),p=c.length;if(p!==0){this.lightsActive=!0,this.setShader(this["lightShader"+p],!0);var m,y=this.renderer,T=y.height,E=f.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",f.x,f.y,f.rotation,f.zoom),this.set3f("uAmbientLightColor",v.ambientColor.r,v.ambientColor.g,v.ambientColor.b),m=0;m<p;m++){var S=c[m].light,P=S.color,M="uLights["+m+"].";E.transformPoint(S.x,S.y,u),this.set2f(M+"position",u.x-f.scrollX*S.scrollFactorX*f.zoom,T-(u.y-f.scrollY*S.scrollFactorY*f.zoom)),this.set3f(M+"color",P.r,P.g,P.b),this.set1f(M+"intensity",S.intensity),this.set1f(M+"radius",S.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(l){if(l!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var f=this.inverseRotationMatrix;if(l){var v=-l,c=Math.cos(v),p=Math.sin(v);f[1]=p,f[3]=-p,f[0]=f[4]=c}else f[0]=f[4]=1,f[1]=f[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,f),this.currentNormalMapRotation=l}},setTexture2D:function(l,f){var v=this.renderer;l===void 0&&(l=v.tempTextures[0]);var c=this.getNormalMap(f);v.isNewNormalMap(l,c)&&(this.flush(),v.setTextureZero(l),v.setNormalMap(c));var p=f?f.rotation:0;return this.setNormalMapRotation(p),this.currentUnit=0,0},setGameObject:function(l,f){f===void 0&&(f=l.frame);var v=this.renderer,c=f.glTexture,p=this.getNormalMap(l);return v.isNewNormalMap()&&(this.flush(),v.setTextureZero(c),v.setNormalMap(p)),this.setNormalMapRotation(l.rotation),this.currentUnit=0,0},getNormalMap:function(l){var f;return l?l.displayTexture?f=l.displayTexture.dataSource[l.displayFrame.sourceIndex]:l.texture?f=l.texture.dataSource[l.frame.sourceIndex]:l.tileset&&(Array.isArray(l.tileset)?f=l.tileset[0].image.dataSource[0]:f=l.tileset.image.dataSource[0]):f=this.defaultNormalMap,f||(f=this.defaultNormalMap),f.glTexture},batchSprite:function(l,f,v){this.lightsActive&&o.prototype.batchSprite.call(this,l,f,v)},batchTexture:function(l,f,v,c,p,m,y,T,E,S,P,M,O,L,F,b,B,U,X,W,Z,J,N,I,G,V,Y,z,H,$,Q,k){this.lightsActive&&o.prototype.batchTexture.call(this,l,f,v,c,p,m,y,T,E,S,P,M,O,L,F,b,B,U,X,W,Z,J,N,I,G,V,Y,z,H,$,Q,k)},batchTextureFrame:function(l,f,v,c,p,m,y){this.lightsActive&&o.prototype.batchTextureFrame.call(this,l,f,v,c,p,m,y)}});h.LIGHT_COUNT=s,a.exports=h},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(2),r=t(880),o=t(881),n=t(58),i=new e({Extends:n,initialize:function(u){u.vertShader=d(u,"vertShader",o),u.fragShader=d(u,"fragShader",r),u.attributes=d(u,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),n.call(this,u)},onRender:function(s,u){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",u.zoom)},batchPointLight:function(s,u,h,l,f,v,c,p,m,y,T,E){var S=s.color,P=s.intensity,M=s.radius,O=s.attenuation,L=S.r*P,F=S.g*P,b=S.b*P,B=u.alpha*s.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(h,l,T,E,M,O,L,F,b,B),this.batchLightVert(f,v,T,E,M,O,L,F,b,B),this.batchLightVert(c,p,T,E,M,O,L,F,b,B),this.batchLightVert(h,l,T,E,M,O,L,F,b,B),this.batchLightVert(c,p,T,E,M,O,L,F,b,B),this.batchLightVert(m,y,T,E,M,O,L,F,b,B)},batchLightVert:function(s,u,h,l,f,v,c,p,m,y){var T=this.vertexViewF32,E=this.vertexCount*this.currentShader.vertexComponentCount-1;T[++E]=s,T[++E]=u,T[++E]=h,T[++E]=l,T[++E]=f,T[++E]=v,T[++E]=c,T[++E]=p,T[++E]=m,T[++E]=y,this.vertexCount++}});a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(2),r=t(108),o=new e({Extends:r,initialize:function(i){i.topology=5,i.batchSize=d(i,"batchSize",256),r.call(this,i)}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(2),r=t(108),o=t(882),n=t(883),i=t(58),s=new e({Extends:r,initialize:function(h){h.fragShader=d(h,"fragShader",o),h.vertShader=d(h,"vertShader",n),h.forceZero=!0,r.call(this,h)},boot:function(){i.prototype.boot.call(this),this.set1i("uMainSampler",0)}});a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(884),d=t(35),r=t(0),o=t(198),n=t(885),i=t(886),s=t(2),u=t(887),h=t(382),l=t(58),f=new r({Extends:l,initialize:function(c){c.renderTarget=s(c,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),c.vertShader=s(c,"vertShader",h),c.shaders=s(c,"shaders",[{name:"Copy",fragShader:i},{name:"AddBlend",fragShader:e},{name:"LinearBlend",fragShader:u},{name:"ColorMatrix",fragShader:n}]),c.attributes=s(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),c.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],c.batchSize=1,l.call(this,c),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){l.prototype.boot.call(this);var v=this.shaders,c=this.renderTargets;this.copyShader=v[0],this.addShader=v[1],this.linearShader=v[2],this.colorMatrixShader=v[3],this.fullFrame1=c[0],this.fullFrame2=c[1],this.halfFrame1=c[2],this.halfFrame2=c[3]},copyFrame:function(v,c,p,m,y){p===void 0&&(p=1),m===void 0&&(m=!0),y===void 0&&(y=!0);var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,v.texture),c?(T.viewport(0,0,c.width,c.height),T.bindFramebuffer(T.FRAMEBUFFER,c.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,c.texture,0)):T.viewport(0,0,v.width,v.height),m&&(y?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT)),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blitFrame:function(v,c,p,m,y,T){p===void 0&&(p=1),m===void 0&&(m=!0),y===void 0&&(y=!0),T===void 0&&(T=!1);var E=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,v.texture),v.height>c.height)E.viewport(0,0,v.width,v.height),this.setTargetUVs(v,c);else{var S=c.height-v.height;E.viewport(0,S,v.width,v.height)}if(E.bindFramebuffer(E.FRAMEBUFFER,c.framebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,c.texture,0),m&&(y?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT)),T){var P=this.renderer.currentBlendMode;this.renderer.setBlendMode(d.ERASE)}E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),T&&this.renderer.setBlendMode(P),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(v,c,p,m,y,T,E,S){E===void 0&&(E=!0),S===void 0&&(S=!0);var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,v.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,v.texture,0),E&&(S?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,c.texture),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,p,m,y,T),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},copyToGame:function(v){var c=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,v.texture),c.bufferData(c.ARRAY_BUFFER,this.vertexData,c.STATIC_DRAW),c.drawArrays(c.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(v,c,p,m){p===void 0&&(p=!0),m===void 0&&(m=this.colorMatrix);var y=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",m.getData()),this.set1f("uAlpha",m.alpha),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,v.texture),c?(y.viewport(0,0,c.width,c.height),y.bindFramebuffer(y.FRAMEBUFFER,c.framebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,c.texture,0)):y.viewport(0,0,v.width,v.height),p?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),y.bindFramebuffer(y.FRAMEBUFFER,null),y.bindTexture(y.TEXTURE_2D,null)},blendFrames:function(v,c,p,m,y,T){m===void 0&&(m=1),y===void 0&&(y=!0),T===void 0&&(T=this.linearShader);var E=this.gl;this.setShader(T),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",m),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,v.texture),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,c.texture),p?(E.bindFramebuffer(E.FRAMEBUFFER,p.framebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,p.texture,0),E.viewport(0,0,p.width,p.height)):E.viewport(0,0,v.width,v.height),y?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blendFramesAdditive:function(v,c,p,m,y){this.blendFrames(v,c,p,m,y,this.addShader)},clearFrame:function(v,c){c===void 0&&(c=!0);var p=this.gl;p.viewport(0,0,v.width,v.height),p.bindFramebuffer(p.FRAMEBUFFER,v.framebuffer),c?p.clearColor(0,0,0,0):p.clearColor(0,0,0,1),p.clear(p.COLOR_BUFFER_BIT);var m=this.renderer.currentFramebuffer;p.bindFramebuffer(p.FRAMEBUFFER,m)},setUVs:function(v,c,p,m,y,T,E,S){var P=this.vertexViewF32;P[2]=v,P[3]=c,P[6]=p,P[7]=m,P[10]=y,P[11]=T,P[14]=v,P[15]=c,P[18]=y,P[19]=T,P[22]=E,P[23]=S},setTargetUVs:function(v,c){var p=c.height/v.height;p>.5?p=.5-(p-.5):p=.5+(.5-p),this.setUVs(0,p,0,1+p,1,1+p,1,p)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});a.exports=f},function(a,x){a.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),d=t(38),r=t(2),o=function(n,i){var s=n.getContext("experimental-webgl"),u=r(i,"callback"),h=r(i,"type","image/png"),l=r(i,"encoder",.92),f=r(i,"x",0),v=r(i,"y",0),c=r(i,"getPixel",!1),p=r(i,"isFramebuffer",!1),m=p?r(i,"bufferWidth",1):s.drawingBufferWidth,y=p?r(i,"bufferHeight",1):s.drawingBufferHeight;if(c){var T=new Uint8Array(4),E=p?v:y-v;s.readPixels(f,E,1,1,s.RGBA,s.UNSIGNED_BYTE,T),u.call(null,new d(T[0],T[1],T[2],T[3]/255))}else{var S=r(i,"width",m),P=r(i,"height",y),M=S*P*4,O=new Uint8Array(M);s.readPixels(f,y-v-P,S,P,s.RGBA,s.UNSIGNED_BYTE,O);for(var L=e.createWebGL(this,S,P),F=L.getContext("2d"),b=F.getImageData(0,0,S,P),B=b.data,U=0;U<P;U++)for(var X=0;X<S;X++){var W=((P-U-1)*S+X)*4,Z=(U*S+X)*4;B[Z+0]=O[W+0],B[Z+1]=O[W+1],B[Z+2]=O[W+2],B[Z+3]=O[W+3]}F.putImageData(b,0,0);var J=new Image;J.onerror=function(){u.call(null),e.remove(L)},J.onload=function(){u.call(null,J),e.remove(L)},J.src=L.toDataURL(h,l)}};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(33),d=function(r){var o=r.config;if(!o.hideBanner){var n="WebGL";o.renderType===e.CANVAS?n="Canvas":o.renderType===e.HEADLESS&&(n="Headless");var i=o.audio,s=r.device.audio,u;if(s.webAudio&&!i.disableWebAudio?u="Web Audio":i.noAudio||!s.webAudio&&!s.audioData?u="No Audio":u="HTML5 Audio",r.device.browser.ie)window.console&&console.log("Phaser v"+e.VERSION+" / https://phaser.io");else{var h="",l=[h];if(Array.isArray(o.bannerBackgroundColor)){var f;o.bannerBackgroundColor.forEach(function(c){h=h.concat("%c "),l.push("background: "+c),f=c}),l[l.length-1]="color: "+o.bannerTextColor+"; background: "+f}else h=h.concat("%c "),l.push("color: "+o.bannerTextColor+"; background: "+o.bannerBackgroundColor);l.push("background: transparent"),o.gameTitle&&(h=h.concat(o.gameTitle),o.gameVersion&&(h=h.concat(" v"+o.gameVersion)),o.hidePhaser||(h=h.concat(" / ")));var v="";o.hidePhaser||(h=h.concat("Phaser v"+e.VERSION+v+" ("+n+" | "+u+")")),h=h.concat(" %c "+o.gameURL),l[0]=h,console.log.apply(console,l)}}};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(6),r=t(1),o=t(386),n=new e({initialize:function(s,u){this.game=s,this.raf=new o,this.started=!1,this.running=!1,this.minFps=d(u,"min",5),this.targetFps=d(u,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=r,this.forceSetTimeOut=d(u,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=d(u,"deltaHistory",10),this.panicMax=d(u,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=d(u,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var i=window.performance.now();this.time=i,this.lastTime=i,this.nextFpsUpdate=i+1e3,this.framesThisSecond=0;for(var s=0;s<this.deltaSmoothingMax;s++)this.deltaHistory[s]=Math.min(this._target,this.deltaHistory[s]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(i){if(this.started)return this;this.started=!0,this.running=!0;for(var s=0;s<this.deltaSmoothingMax;s++)this.deltaHistory[s]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=i,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var i=window.performance.now();this.now=i;var s=i-this.lastTime;s<0&&(s=0),this.rawDelta=s;var u=this.deltaIndex,h=this.deltaHistory,l=this.deltaSmoothingMax,f=s,v=s;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,f=Math.min(f,this._target)),f>this._min&&(f=h[u],f=Math.min(f,this._min)),h[u]=f,this.deltaIndex++,this.deltaIndex>l&&(this.deltaIndex=0),v=0;for(var c=0;c<l;c++)v+=h[c];v/=l}this.delta=v,this.time+=this.rawDelta,i>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=i+1e3,this.framesThisSecond=0),this.framesThisSecond++;var p=v/this._target;this.callback(i,v,p),this.lastTime=i,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(i){this.running||(i&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=r,this.raf=null,this.game=null}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(1),r=new e({initialize:function(){this.isRunning=!1,this.callback=d,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var n=this;this.step=function i(){var s=window.performance.now();n.lastTime=n.tick,n.tick=s,n.callback(s),n.timeOutID=window.requestAnimationFrame(i)},this.stepTimeout=function i(){var s=Date.now(),u=Math.min(Math.max(n.target*2+n.tick-s,0),n.target);n.lastTime=n.tick,n.tick=s,n.callback(s),n.timeOutID=window.setTimeout(i,u)}},start:function(o,n,i){this.isRunning||(this.callback=o,this.isSetTimeOut=n,this.target=i,this.isRunning=!0,this.timeOutID=n?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=d}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(22),d=function(r){var o,n=r.events;if(document.hidden!==void 0)o="visibilitychange";else{var i=["webkit","moz","ms"];i.forEach(function(u){document[u+"Hidden"]!==void 0&&(document.hidden=function(){return document[u+"Hidden"]},o=u+"visibilitychange")})}var s=function(u){document.hidden||u.type==="pause"?n.emit(e.HIDDEN):n.emit(e.VISIBLE)};o&&document.addEventListener(o,s,!1),window.onblur=function(){n.emit(e.BLUR)},window.onfocus=function(){n.emit(e.FOCUS)},window.focus&&r.config.autoFocus&&window.focus()};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(389),d=t(31),r=t(6),o=function(n){var i=r(n,"data",[]),s=r(n,"canvas",null),u=r(n,"palette",e),h=r(n,"pixelWidth",1),l=r(n,"pixelHeight",h),f=r(n,"resizeCanvas",!0),v=r(n,"clearCanvas",!0),c=r(n,"preRender",null),p=r(n,"postRender",null),m=Math.floor(Math.abs(i[0].length*h)),y=Math.floor(Math.abs(i.length*l));s||(s=d.create2D(this,m,y),f=!1,v=!1),f&&(s.width=m,s.height=y);var T=s.getContext("2d");v&&T.clearRect(0,0,m,y),c&&c(s,T);for(var E=0;E<i.length;E++)for(var S=i[E],P=0;P<S.length;P++){var M=S[P];M!=="."&&M!==" "&&(T.fillStyle=u[M],T.fillRect(P*h,E*l,h,l))}return p&&p(s,T),s};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(358),r=t(94),o=t(3),n=new e({Extends:r,initialize:function(s,u,h,l){r.call(this,"CubicBezierCurve"),Array.isArray(s)&&(l=new o(s[6],s[7]),h=new o(s[4],s[5]),u=new o(s[2],s[3]),s=new o(s[0],s[1])),this.p0=s,this.p1=u,this.p2=h,this.p3=l},getStartPoint:function(i){return i===void 0&&(i=new o),i.copy(this.p0)},getResolution:function(i){return i},getPoint:function(i,s){s===void 0&&(s=new o);var u=this.p0,h=this.p1,l=this.p2,f=this.p3;return s.set(d(i,u.x,h.x,l.x,f.x),d(i,u.y,h.y,l.y,f.y))},draw:function(i,s){s===void 0&&(s=32);var u=this.getPoints(s);i.beginPath(),i.moveTo(this.p0.x,this.p0.y);for(var h=1;h<u.length;h++)i.lineTo(u[h].x,u[h].y);return i.strokePath(),i},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});n.fromJSON=function(i){var s=i.points,u=new o(s[0],s[1]),h=new o(s[2],s[3]),l=new o(s[4],s[5]),f=new o(s[6],s[7]);return new n(u,h,l,f)},a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(94),r=t(36),o=t(6),n=t(196),i=t(3),s=new e({Extends:d,initialize:function(h,l,f,v,c,p,m,y){if(typeof h=="object"){var T=h;h=o(T,"x",0),l=o(T,"y",0),f=o(T,"xRadius",0),v=o(T,"yRadius",f),c=o(T,"startAngle",0),p=o(T,"endAngle",360),m=o(T,"clockwise",!1),y=o(T,"rotation",0)}else v===void 0&&(v=f),c===void 0&&(c=0),p===void 0&&(p=360),m===void 0&&(m=!1),y===void 0&&(y=0);d.call(this,"EllipseCurve"),this.p0=new i(h,l),this._xRadius=f,this._yRadius=v,this._startAngle=r(c),this._endAngle=r(p),this._clockwise=m,this._rotation=r(y)},getStartPoint:function(u){return u===void 0&&(u=new i),this.getPoint(0,u)},getResolution:function(u){return u*2},getPoint:function(u,h){h===void 0&&(h=new i);for(var l=Math.PI*2,f=this._endAngle-this._startAngle,v=Math.abs(f)<Number.EPSILON;f<0;)f+=l;for(;f>l;)f-=l;f<Number.EPSILON&&(v?f=0:f=l),this._clockwise&&!v&&(f===l?f=-l:f=f-l);var c=this._startAngle+u*f,p=this.p0.x+this._xRadius*Math.cos(c),m=this.p0.y+this._yRadius*Math.sin(c);if(this._rotation!==0){var y=Math.cos(this._rotation),T=Math.sin(this._rotation),E=p-this.p0.x,S=m-this.p0.y;p=E*y-S*T+this.p0.x,m=E*T+S*y+this.p0.y}return h.set(p,m)},setXRadius:function(u){return this.xRadius=u,this},setYRadius:function(u){return this.yRadius=u,this},setWidth:function(u){return this.xRadius=u/2,this},setHeight:function(u){return this.yRadius=u/2,this},setStartAngle:function(u){return this.startAngle=u,this},setEndAngle:function(u){return this.endAngle=u,this},setClockwise:function(u){return this.clockwise=u,this},setRotation:function(u){return this.rotation=u,this},x:{get:function(){return this.p0.x},set:function(u){this.p0.x=u}},y:{get:function(){return this.p0.y},set:function(u){this.p0.y=u}},xRadius:{get:function(){return this._xRadius},set:function(u){this._xRadius=u}},yRadius:{get:function(){return this._yRadius},set:function(u){this._yRadius=u}},startAngle:{get:function(){return n(this._startAngle)},set:function(u){this._startAngle=r(u)}},endAngle:{get:function(){return n(this._endAngle)},set:function(u){this._endAngle=r(u)}},clockwise:{get:function(){return this._clockwise},set:function(u){this._clockwise=u}},angle:{get:function(){return n(this._rotation)},set:function(u){this._rotation=r(u)}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=u}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:n(this._startAngle),endAngle:n(this._endAngle),clockwise:this._clockwise,rotation:n(this._rotation)}}});s.fromJSON=function(u){return new s(u)},a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(94),r=t(199),o=t(10),n=t(3),i=new e({Extends:d,initialize:function(u,h){d.call(this,"LineCurve"),Array.isArray(u)&&(h=new n(u[2],u[3]),u=new n(u[0],u[1])),this.p0=u,this.p1=h,this.arcLengthDivisions=1},getBounds:function(s){return s===void 0&&(s=new o),r([this.p0,this.p1],s)},getStartPoint:function(s){return s===void 0&&(s=new n),s.copy(this.p0)},getResolution:function(s){return s===void 0&&(s=1),s},getPoint:function(s,u){return u===void 0&&(u=new n),s===1?u.copy(this.p1):(u.copy(this.p1).subtract(this.p0).scale(s).add(this.p0),u)},getPointAt:function(s,u){return this.getPoint(s,u)},getTangent:function(s,u){return u===void 0&&(u=new n),u.copy(this.p1).subtract(this.p0).normalize(),u},getUtoTmapping:function(s,u,h){var l;if(u){var f=this.getLengths(h),v=f[f.length-1],c=Math.min(u,v);l=c/v}else l=s;return l},draw:function(s){return s.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});i.fromJSON=function(s){var u=s.points,h=new n(u[0],u[1]),l=new n(u[2],u[3]);return new i(h,l)},a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(3),r=new e({initialize:function(n,i){this.active=!1,this.p0=new d(n,i)},getPoint:function(o,n){return n===void 0&&(n=new d),n.copy(this.p0)},getPointAt:function(o,n){return this.getPoint(o,n)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(94),r=t(359),o=t(3),n=new e({Extends:d,initialize:function(s,u,h){d.call(this,"QuadraticBezier"),Array.isArray(s)&&(h=new o(s[4],s[5]),u=new o(s[2],s[3]),s=new o(s[0],s[1])),this.p0=s,this.p1=u,this.p2=h},getStartPoint:function(i){return i===void 0&&(i=new o),i.copy(this.p0)},getResolution:function(i){return i},getPoint:function(i,s){s===void 0&&(s=new o);var u=this.p0,h=this.p1,l=this.p2;return s.set(r(i,u.x,h.x,l.x),r(i,u.y,h.y,l.y))},draw:function(i,s){s===void 0&&(s=32);var u=this.getPoints(s);i.beginPath(),i.moveTo(this.p0.x,this.p0.y);for(var h=1;h<u.length;h++)i.lineTo(u[h].x,u[h].y);return i.strokePath(),i},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});n.fromJSON=function(i){var s=i.points,u=new o(s[0],s[1]),h=new o(s[2],s[3]),l=new o(s[4],s[5]);return new n(u,h,l)},a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(194),d=t(0),r=t(94),o=t(3),n=new d({Extends:r,initialize:function(s){s===void 0&&(s=[]),r.call(this,"SplineCurve"),this.points=[],this.addPoints(s)},addPoints:function(i){for(var s=0;s<i.length;s++){var u=new o;typeof i[s]=="number"?(u.x=i[s],u.y=i[s+1],s++):Array.isArray(i[s])?(u.x=i[s][0],u.y=i[s][1]):(u.x=i[s].x,u.y=i[s].y),this.points.push(u)}return this},addPoint:function(i,s){var u=new o(i,s);return this.points.push(u),u},getStartPoint:function(i){return i===void 0&&(i=new o),i.copy(this.points[0])},getResolution:function(i){return i*this.points.length},getPoint:function(i,s){s===void 0&&(s=new o);var u=this.points,h=(u.length-1)*i,l=Math.floor(h),f=h-l,v=u[l===0?l:l-1],c=u[l],p=u[l>u.length-2?u.length-1:l+1],m=u[l>u.length-3?u.length-1:l+2];return s.set(e(f,v.x,c.x,p.x,m.x),e(f,v.y,c.y,p.y,m.y))},toJSON:function(){for(var i=[],s=0;s<this.points.length;s++)i.push(this.points[s].x),i.push(this.points[s].y);return{type:this.type,points:i}}});n.fromJSON=function(i){return new n(i.points)},a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o,n,i,s){(!n||n==="")&&(n=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!i||i==="")&&(i=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),s===void 0&&(s=null),this.key=o,this.fragmentSrc=n,this.vertexSrc=i,this.uniforms=s}});a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38);e.ColorSpectrum=t(909),e.ColorToRGBA=t(910),e.ComponentToHex=t(398),e.GetColor=t(103),e.GetColor32=t(328),e.HexStringToColor=t(327),e.HSLToColor=t(911),e.HSVColorWheel=t(912),e.HSVToRGB=t(188),e.HueToComponent=t(399),e.IntegerToColor=t(189),e.IntegerToRGB=t(330),e.Interpolate=t(913),e.ObjectToColor=t(331),e.RandomRGB=t(914),e.RGBStringToColor=t(332),e.RGBToHSV=t(329),e.RGBToString=t(915),e.ValueToColor=t(187),a.exports=e},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d=e.toString(16);return d.length===1?"0"+d:d};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?e+(d-e)*6*r:r<.5?d:r<.6666666666666666?e+(d-e)*(.6666666666666666-r)*6:e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(105),d=function(r){if(document.readyState==="complete"||document.readyState==="interactive"){r();return}var o=function(){document.removeEventListener("deviceready",o,!0),document.removeEventListener("DOMContentLoaded",o,!0),window.removeEventListener("load",o,!0),r()};document.body?e.cordova?document.addEventListener("deviceready",o,!1):(document.addEventListener("DOMContentLoaded",o,!0),window.addEventListener("load",o,!0)):window.setTimeout(o,20)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(!e)return window.innerHeight;var d=Math.abs(window.orientation),r={w:0,h:0},o=document.createElement("div");return o.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(o),r.w=d===90?o.offsetHeight:window.innerWidth,r.h=d===90?window.innerWidth:o.offsetHeight,document.documentElement.removeChild(o),o=null,Math.abs(window.orientation)!==90?r.h:r.w};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(201),d=function(r,o){var n=window.screen,i=n?n.orientation||n.mozOrientation||n.msOrientation:!1;if(i&&typeof i.type=="string")return i.type;if(typeof i=="string")return i;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?e.ORIENTATION.PORTRAIT:e.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return e.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return e.ORIENTATION.LANDSCAPE}else return o>r?e.ORIENTATION.PORTRAIT:e.ORIENTATION.LANDSCAPE};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d;return e!==""&&(typeof e=="string"?d=document.getElementById(e):e&&e.nodeType===1&&(d=e)),d||(d=document.body),d};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d="";try{if(window.DOMParser){var r=new DOMParser;d=r.parseFromString(e,"text/xml")}else d=new ActiveXObject("Microsoft.XMLDOM"),d.loadXML(e)}catch{d=null}return!d||!d.documentElement||d.getElementsByTagName("parsererror").length?null:d};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(203),r=t(9),o=t(51),n=t(22),i=t(410),s=t(411),u=t(412),h=t(413),l=t(25),f=t(177),v=new e({initialize:function(p,m){this.game=p,this.scaleManager,this.canvas,this.config=m,this.enabled=!0,this.events=new r,this.isOver=!0,this.defaultCursor="",this.keyboard=m.inputKeyboard?new i(this):null,this.mouse=m.inputMouse?new s(this):null,this.touch=m.inputTouch?new h(this):null,this.pointers=[],this.pointersTotal=m.inputActivePointers,m.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var y=0;y<=this.pointersTotal;y++){var T=new u(this,y);T.smoothFactor=m.inputSmoothFactor,this.pointers.push(T)}this.mousePointer=m.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new l,this._tempMatrix2=new l,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],p.events.once(n.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(o.MANAGER_BOOT),this.game.events.on(n.PRE_RENDER,this.preRender,this),this.game.events.once(n.DESTROY,this.destroy,this)},setCanvasOver:function(c){this.isOver=!0,this.events.emit(o.GAME_OVER,c)},setCanvasOut:function(c){this.isOver=!1,this.events.emit(o.GAME_OUT,c)},preRender:function(){var c=this.game.loop.now,p=this.game.loop.delta,m=this.game.scene.getScenes(!0,!0);this.time=c,this.events.emit(o.MANAGER_UPDATE);for(var y=0;y<m.length;y++){var T=m[y];if(T.sys.input&&T.sys.input.updatePoll(c,p)&&this.globalTopOnly)return}},setDefaultCursor:function(c){this.defaultCursor=c,this.canvas.style.cursor!==c&&(this.canvas.style.cursor=c)},setCursor:function(c){c.cursor&&(this.canvas.style.cursor=c.cursor)},resetCursor:function(c){c.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(c){c===void 0&&(c=1);var p=[];this.pointersTotal+c>10&&(c=10-this.pointersTotal);for(var m=0;m<c;m++){var y=this.pointers.length,T=new u(this,y);T.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(T),this.pointersTotal++,p.push(T)}return p},updateInputPlugins:function(c,p){var m=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var y=0;y<m.length;y++){var T=m[y];if(T.sys.input){var E=T.sys.input.update(c,p);if(E&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(c){for(var p=this.pointers,m=[],y=0;y<c.changedTouches.length;y++)for(var T=c.changedTouches[y],E=1;E<this.pointersTotal;E++){var S=p[E];if(!S.active){S.touchstart(T,c),this.activePointer=S,m.push(S);break}}this.updateInputPlugins(d.TOUCH_START,m)},onTouchMove:function(c){for(var p=this.pointers,m=[],y=0;y<c.changedTouches.length;y++)for(var T=c.changedTouches[y],E=1;E<this.pointersTotal;E++){var S=p[E];if(S.active&&S.identifier===T.identifier){S.touchmove(T,c),this.activePointer=S,m.push(S);break}}this.updateInputPlugins(d.TOUCH_MOVE,m)},onTouchEnd:function(c){for(var p=this.pointers,m=[],y=0;y<c.changedTouches.length;y++)for(var T=c.changedTouches[y],E=1;E<this.pointersTotal;E++){var S=p[E];if(S.active&&S.identifier===T.identifier){S.touchend(T,c),m.push(S);break}}this.updateInputPlugins(d.TOUCH_END,m)},onTouchCancel:function(c){for(var p=this.pointers,m=[],y=0;y<c.changedTouches.length;y++)for(var T=c.changedTouches[y],E=1;E<this.pointersTotal;E++){var S=p[E];if(S.active&&S.identifier===T.identifier){S.touchcancel(T,c),m.push(S);break}}this.updateInputPlugins(d.TOUCH_CANCEL,m)},onMouseDown:function(c){var p=this.mousePointer;p.down(c),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(d.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(c){var p=this.mousePointer;p.move(c),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(d.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(c){var p=this.mousePointer;p.up(c),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(d.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(c){var p=this.mousePointer;p.wheel(c),this.activePointer=p,this.updateInputPlugins(d.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(c){var p=this.mouse.locked;this.mousePointer.locked=p,this.events.emit(o.POINTERLOCK_CHANGE,c,p)},inputCandidate:function(c,p){var m=c.input;if(!m||!m.enabled||!m.alwaysEnabled&&!c.willRender(p))return!1;var y=!0,T=c.parentContainer;if(T)do{if(!T.willRender(p)){y=!1;break}T=T.parentContainer}while(T);return y},hitTest:function(c,p,m,y){y===void 0&&(y=this._tempHitTest);var T=this._tempPoint,E=m.scrollX,S=m.scrollY;y.length=0;var P=c.x,M=c.y;m.getWorldPoint(P,M,T),c.worldX=T.x,c.worldY=T.y;for(var O={x:0,y:0},L=this._tempMatrix,F=this._tempMatrix2,b=0;b<p.length;b++){var B=p[b];if(this.inputCandidate(B,m)){var U=T.x+E*B.scrollFactorX-E,X=T.y+S*B.scrollFactorY-S;B.parentContainer?(B.getWorldTransformMatrix(L,F),L.applyInverse(U,X,O)):f(U,X,B.x,B.y,B.rotation,B.scaleX,B.scaleY,O),this.pointWithinHitArea(B,O.x,O.y)&&y.push(B)}}return y},pointWithinHitArea:function(c,p,m){p+=c.displayOriginX,m+=c.displayOriginY;var y=c.input;return y&&y.hitAreaCallback(y.hitArea,p,m,c)?(y.localX=p,y.localY=m,!0):!1},pointWithinInteractiveObject:function(c,p,m){return c.hitArea?(p+=c.gameObject.displayOriginX,m+=c.gameObject.displayOriginY,c.localX=p,c.localY=m,c.hitAreaCallback(c.hitArea,p,m,c)):!1},transformPointer:function(c,p,m,y){var T=c.position,E=c.prevPosition;E.x=T.x,E.y=T.y;var S=this.scaleManager.transformX(p),P=this.scaleManager.transformY(m),M=c.smoothFactor;!y||M===0?(T.x=S,T.y=P):(T.x=S*M+E.x*(1-M),T.y=P*M+E.y*(1-M))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(n.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var c=0;c<this.pointers.length;c++)this.pointers[c].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});a.exports=v},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(93),d=t(0),r=t(22),o=t(51),n=t(143),i=t(1),s=new d({initialize:function(h){this.manager=h,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=i,this.onKeyUp=i,h.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputKeyboard,this.target=u.inputKeyboardEventTarget,this.addCapture(u.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(r.POST_STEP,this.postUpdate,this)},startListeners:function(){var u=this;this.onKeyDown=function(l){if(!(l.defaultPrevented||!u.enabled||!u.manager)){u.queue.push(l),u.manager.events.emit(o.MANAGER_PROCESS);var f=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;u.preventDefault&&!f&&u.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}},this.onKeyUp=function(l){if(!(l.defaultPrevented||!u.enabled||!u.manager)){u.queue.push(l),u.manager.events.emit(o.MANAGER_PROCESS);var f=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;u.preventDefault&&!f&&u.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}};var h=this.target;h&&(h.addEventListener("keydown",this.onKeyDown,!1),h.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var u=this.target;u.removeEventListener("keydown",this.onKeyDown,!1),u.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var h=this.captures,l=0;l<u.length;l++){var f=u[l];typeof f=="string"&&(f=n[f.trim().toUpperCase()]),h.indexOf(f)===-1&&h.push(f)}this.preventDefault=h.length>0},removeCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var h=this.captures,l=0;l<u.length;l++){var f=u[l];typeof f=="string"&&(f=n[f.toUpperCase()]),e(h,f)}this.preventDefault=h.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(r.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(191),r=t(51),o=t(1),n=new e({initialize:function(s){this.manager=s,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,s.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var i=this.manager.config;this.enabled=i.inputMouse,this.target=i.inputMouseEventTarget,this.passive=i.inputMousePassive,this.preventDefaultDown=i.inputMousePreventDefaultDown,this.preventDefaultUp=i.inputMousePreventDefaultUp,this.preventDefaultMove=i.inputMousePreventDefaultMove,this.preventDefaultWheel=i.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,i.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(i){return i.preventDefault(),!1}),this},requestPointerLock:function(){if(d.pointerLock){var i=this.target;i.requestPointerLock=i.requestPointerLock||i.mozRequestPointerLock||i.webkitRequestPointerLock,i.requestPointerLock()}},releasePointerLock:function(){d.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var i=this.target;if(i){var s=this,u=this.manager,h=u.canvas,l=window&&window.focus&&u.game.config.autoFocus;this.onMouseMove=function(v){!v.defaultPrevented&&s.enabled&&u&&u.enabled&&(u.onMouseMove(v),s.preventDefaultMove&&v.preventDefault())},this.onMouseDown=function(v){l&&window.focus(),!v.defaultPrevented&&s.enabled&&u&&u.enabled&&(u.onMouseDown(v),s.preventDefaultDown&&v.target===h&&v.preventDefault())},this.onMouseDownWindow=function(v){!v.defaultPrevented&&s.enabled&&u&&u.enabled&&v.target!==h&&u.onMouseDown(v)},this.onMouseUp=function(v){!v.defaultPrevented&&s.enabled&&u&&u.enabled&&(u.onMouseUp(v),s.preventDefaultUp&&v.target===h&&v.preventDefault())},this.onMouseUpWindow=function(v){!v.defaultPrevented&&s.enabled&&u&&u.enabled&&v.target!==h&&u.onMouseUp(v)},this.onMouseOver=function(v){!v.defaultPrevented&&s.enabled&&u&&u.enabled&&u.setCanvasOver(v)},this.onMouseOut=function(v){!v.defaultPrevented&&s.enabled&&u&&u.enabled&&u.setCanvasOut(v)},this.onMouseWheel=function(v){!v.defaultPrevented&&s.enabled&&u&&u.enabled&&u.onMouseWheel(v),s.preventDefaultWheel&&v.target===h&&v.preventDefault()};var f={passive:!0};if(i.addEventListener("mousemove",this.onMouseMove),i.addEventListener("mousedown",this.onMouseDown),i.addEventListener("mouseup",this.onMouseUp),i.addEventListener("mouseover",this.onMouseOver,f),i.addEventListener("mouseout",this.onMouseOut,f),this.preventDefaultWheel?i.addEventListener("wheel",this.onMouseWheel,{passive:!1}):i.addEventListener("wheel",this.onMouseWheel,f),window&&u.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,f),window.top.addEventListener("mouseup",this.onMouseUpWindow,f)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,f),window.addEventListener("mouseup",this.onMouseUpWindow,f),this.isTop=!1}d.pointerLock&&(this.pointerLockChange=function(v){var c=s.target;s.locked=document.pointerLockElement===c||document.mozPointerLockElement===c||document.webkitPointerLockElement===c,u.onPointerLockChange(v)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var i=this.target;i.removeEventListener("mousemove",this.onMouseMove),i.removeEventListener("mousedown",this.onMouseDown),i.removeEventListener("mouseup",this.onMouseUp),i.removeEventListener("mouseover",this.onMouseOver),i.removeEventListener("mouseout",this.onMouseOut),window&&(i=this.isTop?window.top:window,i.removeEventListener("mousedown",this.onMouseDownWindow),i.removeEventListener("mouseup",this.onMouseUpWindow)),d.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(349),d=t(0),r=t(50),o=t(124),n=t(360),i=t(3),s=t(105),u=new d({initialize:function(l,f){this.manager=l,this.id=f,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new i,this.prevPosition=new i,this.midPoint=new i(-1,-1),this.velocity=new i,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=f===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(h){var l=h.getWorldPoint(this.x,this.y);return this.worldX=l.x,this.worldY=l.y,this},positionToCamera:function(h,l){return h.getWorldPoint(this.x,this.y,l)},updateMotion:function(){var h=this.position.x,l=this.position.y,f=this.midPoint.x,v=this.midPoint.y;if(!(h===f&&l===v)){var c=n(this.motionFactor,f,h),p=n(this.motionFactor,v,l);o(c,h,.1)&&(c=h),o(p,l,.1)&&(p=l),this.midPoint.set(c,p);var m=h-c,y=l-p;this.velocity.set(m,y),this.angle=e(c,p,h,l),this.distance=Math.sqrt(m*m+y*y)}},up:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.button=h.button,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),h.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=h.timeStamp,this.wasTouch=!1)},down:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.button=h.button,this.downElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),h.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),s.macOS&&h.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=h.timeStamp),this.wasTouch=!1},move:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.manager.transformPointer(this,h.pageX,h.pageY,!0),this.locked&&(this.movementX=h.movementX||h.mozMovementX||h.webkitMovementX||0,this.movementY=h.movementY||h.mozMovementY||h.webkitMovementY||0),this.moveTime=h.timeStamp,this.wasTouch=!1},wheel:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.deltaX=h.deltaX,this.deltaY=h.deltaY,this.deltaZ=h.deltaZ,this.wasTouch=!1},touchstart:function(h,l){h.pointerId&&(this.pointerId=h.pointerId),this.identifier=h.identifier,this.target=h.target,this.active=!0,this.buttons=1,this.event=l,this.downElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=l.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(h,l){this.event=l,this.manager.transformPointer(this,h.pageX,h.pageY,!0),this.moveTime=l.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(h,l){this.buttons=0,this.event=l,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(h,l){this.buttons=0,this.event=l,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?e(this.downX,this.downY,this.x,this.y):e(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(h,l){h===void 0&&(h=10),l===void 0&&(l=[]);for(var f=this.prevPosition.x,v=this.prevPosition.y,c=this.position.x,p=this.position.y,m=0;m<h;m++){var y=1/h*m;l[m]={x:n(y,f,c),y:n(y,v,p)}}return l},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(h){this.position.x=h}},y:{get:function(){return this.position.y},set:function(h){this.position.y=h}},time:{get:function(){return this.event?this.event.timeStamp:0}}});a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(51),r=t(1),o=new e({initialize:function(i){this.manager=i,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=r,this.onTouchStartWindow=r,this.onTouchMove=r,this.onTouchEnd=r,this.onTouchEndWindow=r,this.onTouchCancel=r,this.onTouchCancelWindow=r,this.onTouchOver=r,this.onTouchOut=r,i.events.once(d.MANAGER_BOOT,this.boot,this)},boot:function(){var n=this.manager.config;this.enabled=n.inputTouch,this.target=n.inputTouchEventTarget,this.capture=n.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),n.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(n){return n.preventDefault(),!1}),this},startListeners:function(){var n=this,i=this.manager.canvas,s=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(f){s&&window.focus(),!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&(n.manager.onTouchStart(f),n.capture&&f.cancelable&&f.target===i&&f.preventDefault())},this.onTouchStartWindow=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&f.target!==i&&n.manager.onTouchStart(f)},this.onTouchMove=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&(n.manager.onTouchMove(f),n.capture&&f.cancelable&&f.preventDefault())},this.onTouchEnd=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&(n.manager.onTouchEnd(f),n.capture&&f.cancelable&&f.target===i&&f.preventDefault())},this.onTouchEndWindow=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&f.target!==i&&n.manager.onTouchEnd(f)},this.onTouchCancel=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&(n.manager.onTouchCancel(f),n.capture&&f.preventDefault())},this.onTouchCancelWindow=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&n.manager.onTouchCancel(f)},this.onTouchOver=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&n.manager.setCanvasOver(f)},this.onTouchOut=function(f){!f.defaultPrevented&&n.enabled&&n.manager&&n.manager.enabled&&n.manager.setCanvasOut(f)};var u=this.target;if(u){var h={passive:!0},l={passive:!1};u.addEventListener("touchstart",this.onTouchStart,this.capture?l:h),u.addEventListener("touchmove",this.onTouchMove,this.capture?l:h),u.addEventListener("touchend",this.onTouchEnd,this.capture?l:h),u.addEventListener("touchcancel",this.onTouchCancel,this.capture?l:h),u.addEventListener("touchover",this.onTouchOver,this.capture?l:h),u.addEventListener("touchout",this.onTouchOut,this.capture?l:h),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,l),window.addEventListener("touchend",this.onTouchEndWindow,l),window.addEventListener("touchcancel",this.onTouchCancelWindow,l)),this.enabled=!0}},stopListeners:function(){var n=this.target;n.removeEventListener("touchstart",this.onTouchStart),n.removeEventListener("touchmove",this.onTouchMove),n.removeEventListener("touchend",this.onTouchEnd),n.removeEventListener("touchcancel",this.onTouchCancel),n.removeEventListener("touchover",this.onTouchOver),n.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(22),r=t(9),o=t(8),n=t(16),i=t(5),s=t(2),u=t(24),h=t(93),l=new e({Extends:r,initialize:function(v){r.call(this),this.game=v,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],v.isBooted?this.boot():v.events.once(d.BOOT,this.boot,this)},boot:function(){var f,v,c,p,m,y,T,E=this.game.config,S=E.installGlobalPlugins;for(S=S.concat(this._pendingGlobal),f=0;f<S.length;f++)v=S[f],c=s(v,"key",null),p=s(v,"plugin",null),m=s(v,"start",!1),y=s(v,"mapping",null),T=s(v,"data",null),c&&(p?this.install(c,p,m,y,T):console.warn("Missing `plugin` for key: "+c));for(S=E.installScenePlugins,S=S.concat(this._pendingScene),f=0;f<S.length;f++)v=S[f],c=s(v,"key",null),p=s(v,"plugin",null),y=s(v,"mapping",null),c&&(p?this.installScenePlugin(c,p,y):console.warn("Missing `plugin` for key: "+c));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(d.DESTROY,this.destroy,this)},addToScene:function(f,v,c){var p,m,y,T=this.game,E=f.scene,S=f.settings.map,P=f.settings.isBooted;for(p=0;p<v.length;p++)m=v[p],T[m]?(f[m]=T[m],S.hasOwnProperty(m)&&(E[S[m]]=f[m])):m==="game"&&S.hasOwnProperty(m)&&(E[S[m]]=T);for(var M=0;M<c.length;M++)for(y=c[M],p=0;p<y.length;p++)if(m=y[p],!!u.hasCore(m)){var O=u.getCore(m),L=O.mapping,F=new O.plugin(E,this,L);f[L]=F,O.custom?E[L]=F:S.hasOwnProperty(L)&&(E[S[L]]=F),P&&F.boot()}for(y=this.plugins,p=0;p<y.length;p++){var b=y[p];b.mapping&&(E[b.mapping]=b.plugin)}},getDefaultScenePlugins:function(){var f=this.game.config.defaultPlugins;return f=f.concat(this.scenePlugins),f},installScenePlugin:function(f,v,c,p,m){if(m===void 0&&(m=!1),typeof v!="function"){console.warn("Invalid Scene Plugin: "+f);return}if(!u.hasCore(f))u.register(f,v,c,!0),this.scenePlugins.push(f);else if(!m&&u.hasCore(f)){console.warn("Scene Plugin key in use: "+f);return}if(p){var y=new v(p,this,f);p.sys[f]=y,c&&c!==""&&(p[c]=y),y.boot()}},install:function(f,v,c,p,m){if(c===void 0&&(c=!1),p===void 0&&(p=null),m===void 0&&(m=null),typeof v!="function")return console.warn("Invalid Plugin: "+f),null;if(u.hasCustom(f))return console.warn("Plugin key in use: "+f),null;if(p!==null&&(c=!0),!this.game.isBooted)this._pendingGlobal.push({key:f,plugin:v,start:c,mapping:p,data:m});else if(u.registerCustom(f,v,p,m),c)return this.start(f);return null},getIndex:function(f){for(var v=this.plugins,c=0;c<v.length;c++){var p=v[c];if(p.key===f)return c}return-1},getEntry:function(f){var v=this.getIndex(f);if(v!==-1)return this.plugins[v]},isActive:function(f){var v=this.getEntry(f);return v&&v.active},start:function(f,v){v===void 0&&(v=f);var c=this.getEntry(v);return c&&!c.active?(c.active=!0,c.plugin.start()):c||(c=this.createEntry(f,v)),c?c.plugin:null},createEntry:function(f,v){var c=u.getCustom(f);if(c){var p=new c.plugin(this);c={key:v,plugin:p,active:!0,mapping:c.mapping,data:c.data},this.plugins.push(c),p.init(c.data),p.start()}return c},stop:function(f){var v=this.getEntry(f);return v&&v.active&&(v.active=!1,v.plugin.stop()),this},get:function(f,v){v===void 0&&(v=!0);var c=this.getEntry(f);if(c)return c.plugin;var p=this.getClass(f);return p&&v?(c=this.createEntry(f,f),c?c.plugin:null):p||null},getClass:function(f){return u.getCustomClass(f)},removeGlobalPlugin:function(f){var v=this.getEntry(f);v&&h(this.plugins,v),u.removeCustom(f)},removeScenePlugin:function(f){h(this.scenePlugins,f),u.remove(f)},registerGameObject:function(f,v,c){return v&&i.register(f,v),c&&n.register(f,c),this},removeGameObject:function(f,v,c){return v===void 0&&(v=!0),c===void 0&&(c=!0),v&&i.remove(f),c&&n.remove(f),this},registerFileType:function(f,v,c){o.register(f,v),c&&c.sys.load&&(c.sys.load[f]=v)},destroy:function(){for(var f=0;f<this.plugins.length;f++)this.plugins[f].plugin.destroy();u.destroyCustomPlugins(),this.game.noReturn&&u.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});a.exports=l},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(201),d=t(0),r=t(9),o=t(104),n=t(22),i=t(401),s=t(407),u=t(402),h=t(1),l=t(10),f=t(416),v=t(76),c=t(3),p=new d({Extends:r,initialize:function(y){r.call(this),this.game=y,this.canvas,this.canvasBounds=new l,this.parent=null,this.parentIsWindow=!1,this.parentSize=new f,this.gameSize=new f,this.baseSize=new f,this.displaySize=new f,this.scaleMode=e.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new c(1,1),this.autoRound=!1,this.autoCenter=e.CENTER.NO_CENTER,this.orientation=e.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:h,windowResize:h,fullScreenChange:h,fullScreenError:h}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(n.BOOT,this.boot,this)},boot:function(){var m=this.game;this.canvas=m.canvas,this.fullscreen=m.device.fullscreen,this.scaleMode!==e.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===e.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),m.events.on(n.PRE_STEP,this.step,this),m.events.once(n.READY,this.refresh,this),m.events.once(n.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(m){this.getParent(m),this.getParentBounds();var y=m.width,T=m.height,E=m.scaleMode,S=m.zoom,P=m.autoRound;if(typeof y=="string"){var M=this.parentSize.width;M===0&&(M=window.innerWidth);var O=parseInt(y,10)/100;y=Math.floor(M*O)}if(typeof T=="string"){var L=this.parentSize.height;L===0&&(L=window.innerHeight);var F=parseInt(T,10)/100;T=Math.floor(L*F)}this.scaleMode=E,this.autoRound=P,this.autoCenter=m.autoCenter,this.resizeInterval=m.resizeInterval,P&&(y=Math.floor(y),T=Math.floor(T)),this.gameSize.setSize(y,T),S===e.ZOOM.MAX_ZOOM&&(S=this.getMaxZoom()),this.zoom=S,S!==1&&(this._resetZoom=!0),this.baseSize.setSize(y,T),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),m.minWidth>0&&this.displaySize.setMin(m.minWidth*S,m.minHeight*S),m.maxWidth>0&&this.displaySize.setMax(m.maxWidth*S,m.maxHeight*S),this.displaySize.setSize(y,T),this.orientation=u(y,T)},getParent:function(m){var y=m.parent;if(y!==null){if(this.parent=s(y),this.parentIsWindow=this.parent===document.body,m.expandParent&&m.scaleMode!==e.SCALE_MODE.NONE){var T=this.parent.getBoundingClientRect();(this.parentIsWindow||T.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",T=this.parent.getBoundingClientRect(),!this.parentIsWindow&&T.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}m.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=s(m.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var m=this.parentSize,y=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(y.height=i(!0));var T=y.width,E=y.height;return m.width!==T||m.height!==E?(m.setSize(T,E),!0):!1},lockOrientation:function(m){var y=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return y?y.call(screen,m):!1},setParentSize:function(m,y){return this.parentSize.setSize(m,y),this.refresh()},setGameSize:function(m,y){var T=this.autoRound;T&&(m=Math.floor(m),y=Math.floor(y));var E=this.width,S=this.height;return this.gameSize.resize(m,y),this.baseSize.resize(m,y),T&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(m/y),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(E,S)},resize:function(m,y){var T=this.zoom,E=this.autoRound;E&&(m=Math.floor(m),y=Math.floor(y));var S=this.width,P=this.height;this.gameSize.resize(m,y),this.baseSize.resize(m,y),E&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(m*T,y*T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var M=this.canvas.style,O=m*T,L=y*T;return E&&(O=Math.floor(O),L=Math.floor(L)),(O!==m||L!==y)&&(M.width=O+"px",M.height=L+"px"),this.refresh(S,P)},setZoom:function(m){return this.zoom=m,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(m,y){m===void 0&&(m=this.width),y===void 0&&(y=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var T=this.game.domContainer;if(T){this.baseSize.setCSS(T);var E=this.canvas.style,S=T.style;S.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",S.marginLeft=E.marginLeft,S.marginTop=E.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,m,y),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var m=u(this.width,this.height);m!==this.orientation&&(this.orientation=m,this.emit(o.ORIENTATION_CHANGE,m))}},updateScale:function(){var m=this.canvas.style,y=this.gameSize.width,T=this.gameSize.height,E,S,P=this.zoom,M=this.autoRound;this.scaleMode===e.SCALE_MODE.NONE?(this.displaySize.setSize(y*P,T*P),E=this.displaySize.width,S=this.displaySize.height,M&&(E=Math.floor(E),S=Math.floor(S)),this._resetZoom&&(m.width=E+"px",m.height=S+"px",this._resetZoom=!1)):this.scaleMode===e.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),E=this.displaySize.width,S=this.displaySize.height,M&&(E=Math.floor(E),S=Math.floor(S)),this.canvas.width=E,this.canvas.height=S):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),E=this.displaySize.width,S=this.displaySize.height,M&&(E=Math.floor(E),S=Math.floor(S)),m.width=E+"px",m.height=S+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var m=v(this.parentSize.width,this.gameSize.width,0,!0),y=v(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(m,y),1)},updateCenter:function(){var m=this.autoCenter;if(m!==e.CENTER.NO_CENTER){var y=this.canvas,T=y.style,E=y.getBoundingClientRect(),S=E.width,P=E.height,M=Math.floor((this.parentSize.width-S)/2),O=Math.floor((this.parentSize.height-P)/2);m===e.CENTER.CENTER_HORIZONTALLY?O=0:m===e.CENTER.CENTER_VERTICALLY&&(M=0),T.marginLeft=M+"px",T.marginTop=O+"px"}},updateBounds:function(){var m=this.canvasBounds,y=this.canvas.getBoundingClientRect();m.x=y.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),m.y=y.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),m.width=y.width,m.height=y.height},transformX:function(m){return(m-this.canvasBounds.left)*this.displayScale.x},transformY:function(m){return(m-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(m){m===void 0&&(m={navigationUI:"hide"});var y=this.fullscreen;if(!y.available){this.emit(o.FULLSCREEN_UNSUPPORTED);return}if(!y.active){var T=this.getFullscreenTarget();y.keyboard?T[y.request](Element.ALLOW_KEYBOARD_INPUT):T[y.request](m)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(m){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,m)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var m=document.createElement("div");m.style.margin="0",m.style.padding="0",m.style.width="100%",m.style.height="100%",this.fullscreenTarget=m,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var y=this.canvas.parentNode;y.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var m=this.fullscreenTarget;if(m&&m.parentNode){var y=m.parentNode;y.insertBefore(this.canvas,m),y.removeChild(m)}}},stopFullscreen:function(){var m=this.fullscreen;if(!m.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;m.active&&document[m.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(m){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(m)},startListeners:function(){var m=this,y=this.listeners;if(y.orientationChange=function(){m.updateBounds(),m._checkOrientation=!0,m.dirty=!0},y.windowResize=function(){m.updateBounds(),m.dirty=!0},window.addEventListener("orientationchange",y.orientationChange,!1),window.addEventListener("resize",y.windowResize,!1),this.fullscreen.available){y.fullScreenChange=function(E){return m.onFullScreenChange(E)},y.fullScreenError=function(E){return m.onFullScreenError(E)};var T=["webkit","moz",""];T.forEach(function(E){document.addEventListener(E+"fullscreenchange",y.fullScreenChange,!1),document.addEventListener(E+"fullscreenerror",y.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.addEventListener("MSFullscreenError",y.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(m,y){this.parent&&(this._lastCheck+=y,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var m=this.listeners;window.removeEventListener("orientationchange",m.orientationChange,!1),window.removeEventListener("resize",m.windowResize,!1);var y=["webkit","moz",""];y.forEach(function(T){document.removeEventListener(T+"fullscreenchange",m.fullScreenChange,!1),document.removeEventListener(T+"fullscreenerror",m.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",m.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",m.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===e.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===e.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});a.exports=p},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),d=t(0),r=t(76),o=t(3),n=new d({initialize:function(s,u,h,l){s===void 0&&(s=0),u===void 0&&(u=s),h===void 0&&(h=0),l===void 0&&(l=null),this._width=s,this._height=u,this._parent=l,this.aspectMode=h,this.aspectRatio=u===0?1:s/u,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(i){return i===void 0&&(i=0),this.aspectMode=i,this.setSize(this._width,this._height)},setSnap:function(i,s){return i===void 0&&(i=0),s===void 0&&(s=i),this.snapTo.set(i,s),this.setSize(this._width,this._height)},setParent:function(i){return this._parent=i,this.setSize(this._width,this._height)},setMin:function(i,s){return i===void 0&&(i=0),s===void 0&&(s=i),this.minWidth=e(i,0,this.maxWidth),this.minHeight=e(s,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(i,s){return i===void 0&&(i=Number.MAX_VALUE),s===void 0&&(s=i),this.maxWidth=e(i,this.minWidth,Number.MAX_VALUE),this.maxHeight=e(s,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(i,s){switch(i===void 0&&(i=0),s===void 0&&(s=i),this.aspectMode){case n.NONE:this._width=this.getNewWidth(r(i,this.snapTo.x)),this._height=this.getNewHeight(r(s,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case n.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(r(i,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case n.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(r(s,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case n.FIT:this.constrain(i,s,!0);break;case n.ENVELOP:this.constrain(i,s,!1);break}return this},setAspectRatio:function(i){return this.aspectRatio=i,this.setSize(this._width,this._height)},resize:function(i,s){return this._width=this.getNewWidth(r(i,this.snapTo.x)),this._height=this.getNewHeight(r(s,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(i,s){return s===void 0&&(s=!0),i=e(i,this.minWidth,this.maxWidth),s&&this._parent&&i>this._parent.width&&(i=Math.max(this.minWidth,this._parent.width)),i},getNewHeight:function(i,s){return s===void 0&&(s=!0),i=e(i,this.minHeight,this.maxHeight),s&&this._parent&&i>this._parent.height&&(i=Math.max(this.minHeight,this._parent.height)),i},constrain:function(i,s,u){i===void 0&&(i=0),s===void 0&&(s=i),u===void 0&&(u=!0),i=this.getNewWidth(i),s=this.getNewHeight(s);var h=this.snapTo,l=s===0?1:i/s;return u&&this.aspectRatio>l||!u&&this.aspectRatio<l?(i=r(i,h.x),s=i/this.aspectRatio,h.y>0&&(s=r(s,h.y),i=s*this.aspectRatio)):(u&&this.aspectRatio<l||!u&&this.aspectRatio>l)&&(s=r(s,h.y),i=s*this.aspectRatio,h.x>0&&(i=r(i,h.x),s=i*(1/this.aspectRatio))),this._width=i,this._height=s,this},fitTo:function(i,s){return this.constrain(i,s,!0)},envelop:function(i,s){return this.constrain(i,s,!1)},setWidth:function(i){return this.setSize(i,this._height)},setHeight:function(i){return this.setSize(this._width,i)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(i){i&&i.style&&(i.style.width=this._width+"px",i.style.height=this._height+"px")},copy:function(i){return i.setAspectMode(this.aspectMode),i.aspectRatio=this.aspectRatio,i.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(i){this.setSize(i,this._height)}},height:{get:function(){return this._height},set:function(i){this.setSize(this._width,i)}}});n.NONE=0,n.WIDTH_CONTROLS_HEIGHT=1,n.HEIGHT_CONTROLS_WIDTH=2,n.FIT=3,n.ENVELOP=4,a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(144),r=t(20),o=t(22),n=t(6),i=t(95),s=t(1),u=t(418),h=t(204),l=new e({initialize:function(v,c){if(this.game=v,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++)this._pending.push({key:"default",scene:c[p],autoStart:p===0,data:{}})}v.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var f,v,c,p;for(f=0;f<this._pending.length;f++){v=this._pending[f],c=v.key,p=v.scene;var m;p instanceof u?m=this.createSceneFromInstance(c,p):typeof p=="object"?m=this.createSceneFromObject(c,p):typeof p=="function"&&(m=this.createSceneFromFunction(c,p)),c=m.sys.settings.key,this.keys[c]=m,this.scenes.push(m),this._data[c]&&(m.sys.settings.data=this._data[c].data,this._data[c].autoStart&&(v.autoStart=!0)),(v.autoStart||m.sys.settings.active)&&this._start.push(c)}for(this._pending.length=0,this._data={},this.isBooted=!0,f=0;f<this._start.length;f++)v=this._start[f],this.start(v);this._start.length=0}},processQueue:function(){var f=this._pending.length,v=this._queue.length;if(!(f===0&&v===0)){var c,p;if(f){for(c=0;c<f;c++)p=this._pending[c],this.add(p.key,p.scene,p.autoStart,p.data);for(c=0;c<this._start.length;c++)p=this._start[c],this.start(p);this._start.length=0,this._pending.length=0;return}for(c=0;c<this._queue.length;c++)p=this._queue[c],this[p.op](p.keyA,p.keyB);this._queue.length=0}},add:function(f,v,c,p){if(c===void 0&&(c=!1),p===void 0&&(p={}),this.isProcessing||!this.isBooted)return this._pending.push({key:f,scene:v,autoStart:c,data:p}),this.isBooted||(this._data[f]={data:p}),null;f=this.getKey(f,v);var m;return v instanceof u?m=this.createSceneFromInstance(f,v):typeof v=="object"?(v.key=f,m=this.createSceneFromObject(f,v)):typeof v=="function"&&(m=this.createSceneFromFunction(f,v)),m.sys.settings.data=p,f=m.sys.settings.key,this.keys[f]=m,this.scenes.push(m),(c||m.sys.settings.active)&&(this._pending.length?this._start.push(f):this.start(f)),m},remove:function(f){if(this.isProcessing)this._queue.push({op:"remove",keyA:f,keyB:null});else{var v=this.getScene(f);if(!v||v.sys.isTransitioning())return this;var c=this.scenes.indexOf(v),p=v.sys.settings.key;c>-1&&(delete this.keys[p],this.scenes.splice(c,1),this._start.indexOf(p)>-1&&(c=this._start.indexOf(p),this._start.splice(c,1)),v.sys.destroy())}return this},bootScene:function(f){var v=f.sys,c=v.settings;v.sceneUpdate=s,f.init&&(f.init.call(f,c.data),c.status=d.INIT,c.isTransition&&v.events.emit(r.TRANSITION_INIT,c.transitionFrom,c.transitionDuration));var p;v.load&&(p=v.load,p.reset()),p&&f.preload?(f.preload.call(f),p.list.size===0?this.create(f):(c.status=d.LOADING,p.once(i.COMPLETE,this.loadComplete,this),p.start())):this.create(f)},loadComplete:function(f){this.create(f.scene)},payloadComplete:function(f){this.bootScene(f.scene)},update:function(f,v){this.processQueue(),this.isProcessing=!0;for(var c=this.scenes.length-1;c>=0;c--){var p=this.scenes[c].sys;p.settings.status>d.START&&p.settings.status<=d.RUNNING&&p.step(f,v)}},render:function(f){for(var v=0;v<this.scenes.length;v++){var c=this.scenes[v].sys;c.settings.visible&&c.settings.status>=d.LOADING&&c.settings.status<d.SLEEPING&&c.render(f)}this.isProcessing=!1},create:function(f){var v=f.sys,c=v.settings;f.create&&(c.status=d.CREATING,f.create.call(f,c.data),c.status===d.DESTROYED)||(c.isTransition&&v.events.emit(r.TRANSITION_START,c.transitionFrom,c.transitionDuration),f.update&&(v.sceneUpdate=f.update),c.status=d.RUNNING,v.events.emit(r.CREATE,f))},createSceneFromFunction:function(f,v){var c=new v;if(c instanceof u){var p=c.sys.settings.key;if(p!==""&&(f=p),this.keys.hasOwnProperty(f))throw new Error("Cannot add a Scene with duplicate key: "+f);return this.createSceneFromInstance(f,c)}else return c.sys=new h(c),c.sys.settings.key=f,c.sys.init(this.game),c},createSceneFromInstance:function(f,v){var c=v.sys.settings.key;return c===""&&(v.sys.settings.key=f),v.sys.init(this.game),v},createSceneFromObject:function(f,v){var c=new u(v),p=c.sys.settings.key;p!==""?f=p:c.sys.settings.key=f,c.sys.init(this.game);for(var m=["init","preload","create","update","render"],y=0;y<m.length;y++){var T=n(v,m[y],null);T&&(c[m[y]]=T)}if(v.hasOwnProperty("extend")){for(var E in v.extend)if(v.extend.hasOwnProperty(E)){var S=v.extend[E];E==="data"&&c.hasOwnProperty("data")&&typeof S=="object"?c.data.merge(S):E!=="sys"&&(c[E]=S)}}return c},getKey:function(f,v){if(f||(f="default"),typeof v=="function")return f;if(v instanceof u?f=v.sys.settings.key:typeof v=="object"&&v.hasOwnProperty("key")&&(f=v.key),this.keys.hasOwnProperty(f))throw new Error("Cannot add a Scene with duplicate key: "+f);return f},getScenes:function(f,v){f===void 0&&(f=!0),v===void 0&&(v=!1);for(var c=[],p=this.scenes,m=0;m<p.length;m++){var y=p[m];y&&(!f||f&&y.sys.isActive())&&c.push(y)}return v?c.reverse():c},getScene:function(f){if(typeof f=="string"){if(this.keys[f])return this.keys[f]}else for(var v=0;v<this.scenes.length;v++)if(f===this.scenes[v])return f;return null},isActive:function(f){var v=this.getScene(f);return v?v.sys.isActive():null},isPaused:function(f){var v=this.getScene(f);return v?v.sys.isPaused():null},isVisible:function(f){var v=this.getScene(f);return v?v.sys.isVisible():null},isSleeping:function(f){var v=this.getScene(f);return v?v.sys.isSleeping():null},pause:function(f,v){var c=this.getScene(f);return c&&c.sys.pause(v),this},resume:function(f,v){var c=this.getScene(f);return c&&c.sys.resume(v),this},sleep:function(f,v){var c=this.getScene(f);return c&&!c.sys.isTransitioning()&&c.sys.sleep(v),this},wake:function(f,v){var c=this.getScene(f);return c&&c.sys.wake(v),this},run:function(f,v){var c=this.getScene(f);if(!c){for(var p=0;p<this._pending.length;p++)if(this._pending[p].key===f){this.queueOp("start",f,v);break}return this}c.sys.isSleeping()?c.sys.wake(v):c.sys.isPaused()?c.sys.resume(v):this.start(f,v)},start:function(f,v){if(!this.isBooted)return this._data[f]={autoStart:!0,data:v},this;var c=this.getScene(f);if(c){var p=c.sys;if(p.isActive()||p.isPaused())p.shutdown(),p.sceneUpdate=s,p.start(v);else{p.sceneUpdate=s,p.start(v);var m;if(p.load&&(m=p.load),m&&p.settings.hasOwnProperty("pack")&&(m.reset(),m.addPack({payload:p.settings.pack})))return p.settings.status=d.LOADING,m.once(i.COMPLETE,this.payloadComplete,this),m.start(),this}this.bootScene(c)}return this},stop:function(f,v){var c=this.getScene(f);return c&&!c.sys.isTransitioning()&&c.sys.shutdown(v),this},switch:function(f,v){var c=this.getScene(f),p=this.getScene(v);return c&&p&&c!==p&&(this.sleep(f),this.isSleeping(v)?this.wake(v):this.start(v)),this},getAt:function(f){return this.scenes[f]},getIndex:function(f){var v=this.getScene(f);return this.scenes.indexOf(v)},bringToTop:function(f){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:f,keyB:null});else{var v=this.getIndex(f);if(v!==-1&&v<this.scenes.length){var c=this.getScene(f);this.scenes.splice(v,1),this.scenes.push(c)}}return this},sendToBack:function(f){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:f,keyB:null});else{var v=this.getIndex(f);if(v!==-1&&v>0){var c=this.getScene(f);this.scenes.splice(v,1),this.scenes.unshift(c)}}return this},moveDown:function(f){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:f,keyB:null});else{var v=this.getIndex(f);if(v>0){var c=v-1,p=this.getScene(f),m=this.getAt(c);this.scenes[v]=m,this.scenes[c]=p}}return this},moveUp:function(f){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:f,keyB:null});else{var v=this.getIndex(f);if(v<this.scenes.length-1){var c=v+1,p=this.getScene(f),m=this.getAt(c);this.scenes[v]=m,this.scenes[c]=p}}return this},moveAbove:function(f,v){if(f===v)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:f,keyB:v});else{var c=this.getIndex(f),p=this.getIndex(v);if(c!==-1&&p!==-1){var m=this.getAt(p);this.scenes.splice(p,1),this.scenes.splice(c+1,0,m)}}return this},moveBelow:function(f,v){if(f===v)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:f,keyB:v});else{var c=this.getIndex(f),p=this.getIndex(v);if(c!==-1&&p!==-1){var m=this.getAt(p);this.scenes.splice(p,1),c===0?this.scenes.unshift(m):this.scenes.splice(c,0,m)}}return this},queueOp:function(f,v,c){return this._queue.push({op:f,keyA:v,keyB:c}),this},swapPosition:function(f,v){if(f===v)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:f,keyB:v});else{var c=this.getIndex(f),p=this.getIndex(v);if(c!==p&&c!==-1&&p!==-1){var m=this.getAt(c);this.scenes[c]=this.scenes[p],this.scenes[p]=m}}return this},dump:function(){for(var f=[],v=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],c=0;c<this.scenes.length;c++){var p=this.scenes[c].sys,m=p.settings.visible&&(p.settings.status===d.RUNNING||p.settings.status===d.PAUSED)?"[*] ":"[-] ";m+=p.settings.key+" ("+v[p.settings.status]+")",f.push(m)}console.log(f.join(`
`))},destroy:function(){for(var f=0;f<this.scenes.length;f++){var v=this.scenes[f].sys;v.destroy()}this.update=s,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});a.exports=l},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(204),r=new e({initialize:function(n){this.sys=new d(this,n),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),d=t(205),r=function(o){var n=o.game.config.defaultPhysicsSystem,i=e(o.settings,"physics",!1);if(!(!n&&!i)){var s=[];if(n&&s.push(d(n+"Physics")),i)for(var u in i)u=d(u.concat("Physics")),s.indexOf(u)===-1&&s.push(u);return s}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),d=function(r){var o=r.plugins.getDefaultScenePlugins(),n=e(r.settings,"plugins",!1);return Array.isArray(n)?n:o||[]};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(144),d=t(6),r=t(127),o=t(978),n={create:function(i){return typeof i=="string"?i={key:i}:i===void 0&&(i={}),{status:e.PENDING,key:d(i,"key",""),active:d(i,"active",!1),visible:d(i,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:d(i,"pack",!1),cameras:d(i,"cameras",null),map:d(i,"map",r(o,d(i,"mapAdd",{}))),physics:d(i,"physics",{}),loader:d(i,"loader",{}),plugins:d(i,"plugins",!1),input:d(i,"input",{})}}};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),d=t(423),r=t(0),o=t(38),n=t(33),i=t(9),s=t(106),u=t(22),h=t(388),l=t(6),f=t(425),v=t(206),c=new r({Extends:i,initialize:function(m){i.call(this),this.game=m,this.name="TextureManager",this.list={},this._tempCanvas=e.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,m.events.once(u.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(s.LOAD,this.updatePending,this),this.on(s.ERROR,this.updatePending,this);var p=this.game.config;this.addBase64("__DEFAULT",p.defaultImage),this.addBase64("__MISSING",p.missingImage),this.addBase64("__WHITE",p.whiteImage),this.game.events.once(u.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(s.LOAD),this.off(s.ERROR),this.emit(s.READY))},checkKey:function(p){return this.exists(p)?(console.error("Texture key already in use: "+p),!1):!0},remove:function(p){if(typeof p=="string")if(this.exists(p))p=this.get(p);else return console.warn("No texture found matching key: "+p),this;return this.list.hasOwnProperty(p.key)&&(p.destroy(),this.emit(s.REMOVE,p.key)),this},removeKey:function(p){return this.list.hasOwnProperty(p)&&delete this.list[p],this},addBase64:function(p,m){if(this.checkKey(p)){var y=this,T=new Image;T.onerror=function(){y.emit(s.ERROR,p)},T.onload=function(){var E=y.create(p,T);f.Image(E,0),y.emit(s.ADD,p,E),y.emit(s.LOAD,p,E)},T.src=m}return this},getBase64:function(p,m,y,T){y===void 0&&(y="image/png"),T===void 0&&(T=.92);var E="",S=this.getFrame(p,m);if(S&&(S.source.isRenderTexture||S.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(S){var P=S.canvasData,M=e.create2D(this,P.width,P.height),O=M.getContext("2d");O.drawImage(S.source.image,P.x,P.y,P.width,P.height,0,0,P.width,P.height),E=M.toDataURL(y,T),e.remove(M)}return E},addImage:function(p,m,y){var T=null;return this.checkKey(p)&&(T=this.create(p,m),f.Image(T,0),y&&T.setDataSource(y),this.emit(s.ADD,p,T)),T},addGLTexture:function(p,m,y,T){var E=null;return this.checkKey(p)&&(y===void 0&&(y=m.width),T===void 0&&(T=m.height),E=this.create(p,m,y,T),E.add("__BASE",0,0,0,y,T),this.emit(s.ADD,p,E)),E},addRenderTexture:function(p,m){var y=null;return this.checkKey(p)&&(y=this.create(p,m),y.add("__BASE",0,0,0,m.width,m.height),this.emit(s.ADD,p,y)),y},generate:function(p,m){if(this.checkKey(p)){var y=e.create(this,1,1);return m.canvas=y,h(m),this.addCanvas(p,y)}else return null},createCanvas:function(p,m,y){if(m===void 0&&(m=256),y===void 0&&(y=256),this.checkKey(p)){var T=e.create(this,m,y,n.CANVAS,!0);return this.addCanvas(p,T)}return null},addCanvas:function(p,m,y){y===void 0&&(y=!1);var T=null;return y?T=new d(this,p,m,m.width,m.height):this.checkKey(p)&&(T=new d(this,p,m,m.width,m.height),this.list[p]=T,this.emit(s.ADD,p,T)),T},addAtlas:function(p,m,y,T){return Array.isArray(y.textures)||Array.isArray(y.frames)?this.addAtlasJSONArray(p,m,y,T):this.addAtlasJSONHash(p,m,y,T)},addAtlasJSONArray:function(p,m,y,T){var E=null;if(this.checkKey(p)){if(E=this.create(p,m),Array.isArray(y))for(var S=y.length===1,P=0;P<E.source.length;P++){var M=S?y[0]:y[P];f.JSONArray(E,P,M)}else f.JSONArray(E,0,y);T&&E.setDataSource(T),this.emit(s.ADD,p,E)}return E},addAtlasJSONHash:function(p,m,y,T){var E=null;if(this.checkKey(p)){if(E=this.create(p,m),Array.isArray(y))for(var S=0;S<y.length;S++)f.JSONHash(E,S,y[S]);else f.JSONHash(E,0,y);T&&E.setDataSource(T),this.emit(s.ADD,p,E)}return E},addAtlasXML:function(p,m,y,T){var E=null;return this.checkKey(p)&&(E=this.create(p,m),f.AtlasXML(E,0,y),T&&E.setDataSource(T),this.emit(s.ADD,p,E)),E},addUnityAtlas:function(p,m,y,T){var E=null;return this.checkKey(p)&&(E=this.create(p,m),f.UnityYAML(E,0,y),T&&E.setDataSource(T),this.emit(s.ADD,p,E)),E},addSpriteSheet:function(p,m,y){var T=null;if(this.checkKey(p)){T=this.create(p,m);var E=T.source[0].width,S=T.source[0].height;f.SpriteSheet(T,0,0,0,E,S,y),this.emit(s.ADD,p,T)}return T},addSpriteSheetFromAtlas:function(p,m){if(!this.checkKey(p))return null;var y=l(m,"atlas",null),T=l(m,"frame",null);if(!(!y||!T)){var E=this.get(y),S=E.get(T);if(S){var P=this.create(p,S.source.image);return S.trimmed?f.SpriteSheetFromAtlas(P,S,m):f.SpriteSheet(P,0,S.cutX,S.cutY,S.cutWidth,S.cutHeight,m),this.emit(s.ADD,p,P),P}}},create:function(p,m,y,T){var E=null;return this.checkKey(p)&&(E=new v(this,p,m,y,T),this.list[p]=E),E},exists:function(p){return this.list.hasOwnProperty(p)},get:function(p){return p===void 0&&(p="__DEFAULT"),this.list[p]?this.list[p]:p instanceof v?p:this.list.__MISSING},cloneFrame:function(p,m){if(this.list[p])return this.list[p].get(m).clone()},getFrame:function(p,m){if(this.list[p])return this.list[p].get(m)},getTextureKeys:function(){var p=[];for(var m in this.list)m!=="__DEFAULT"&&m!=="__MISSING"&&p.push(m);return p},getPixel:function(p,m,y,T){var E=this.getFrame(y,T);if(E){p-=E.x,m-=E.y;var S=E.data.cut;if(p+=S.x,m+=S.y,p>=S.x&&p<S.r&&m>=S.y&&m<S.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(E.source.image,p,m,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return new o(M.data[0],M.data[1],M.data[2],M.data[3])}}return null},getPixelAlpha:function(p,m,y,T){var E=this.getFrame(y,T);if(E){p-=E.x,m-=E.y;var S=E.data.cut;if(p+=S.x,m+=S.y,p>=S.x&&p<S.r&&m>=S.y&&m<S.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(E.source.image,p,m,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return M.data[3]}}return null},setTexture:function(p,m,y){return this.list[m]&&(p.texture=this.list[m],p.frame=p.texture.get(y)),p},renameTexture:function(p,m){var y=this.get(p);return y&&p!==m?(y.key=m,this.list[m]=y,delete this.list[p],!0):!1},each:function(p,m){for(var y=[null],T=1;T<arguments.length;T++)y.push(arguments[T]);for(var E in this.list)y[0]=this.list[E],p.apply(m,y)},destroy:function(){for(var p in this.list)this.list[p].destroy();this.list={},this.game=null,e.remove(this._tempCanvas)}});a.exports=c},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(18),r=t(38),o=t(33),n=t(138),i=t(206),s=new e({Extends:i,initialize:function(h,l,f,v,c){i.call(this,h,l,f,v,c),this.add("__BASE",0,0,0,v,c),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=v,this.height=c,this.imageData=this.context.getImageData(0,0,v,c),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(u,h,l){return this.context.drawImage(l,u,h),this.update()},drawFrame:function(u,h,l,f){l===void 0&&(l=0),f===void 0&&(f=0);var v=this.manager.getFrame(u,h);if(v){var c=v.canvasData,p=v.cutWidth,m=v.cutHeight,y=v.source.resolution;return this.context.drawImage(v.source.image,c.x,c.y,p,m,l,f,p/y,m/y),this.update()}else return this},setPixel:function(u,h,l,f,v,c){c===void 0&&(c=255),u=Math.abs(Math.floor(u)),h=Math.abs(Math.floor(h));var p=this.getIndex(u,h);if(p>-1){var m=this.context.getImageData(u,h,1,1);m.data[0]=l,m.data[1]=f,m.data[2]=v,m.data[3]=c,this.context.putImageData(m,u,h)}return this},putData:function(u,h,l,f,v,c,p){return f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=u.width),p===void 0&&(p=u.height),this.context.putImageData(u,h,l,f,v,c,p),this},getData:function(u,h,l,f){u=d(Math.floor(u),0,this.width-1),h=d(Math.floor(h),0,this.height-1),l=d(l,1,this.width-u),f=d(f,1,this.height-h);var v=this.context.getImageData(u,h,l,f);return v},getPixel:function(u,h,l){l||(l=new r);var f=this.getIndex(u,h);if(f>-1){var v=this.data,c=v[f+0],p=v[f+1],m=v[f+2],y=v[f+3];l.setTo(c,p,m,y)}return l},getPixels:function(u,h,l,f){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=this.width),f===void 0&&(f=l),u=Math.abs(Math.round(u)),h=Math.abs(Math.round(h));for(var v=d(u,0,this.width),c=d(u+l,0,this.width),p=d(h,0,this.height),m=d(h+f,0,this.height),y=new r,T=[],E=p;E<m;E++){for(var S=[],P=v;P<c;P++)y=this.getPixel(P,E,y),S.push({x:P,y:E,color:y.color,alpha:y.alphaGL});T.push(S)}return T},getIndex:function(u,h){return u=Math.abs(Math.round(u)),h=Math.abs(Math.round(h)),u<this.width&&h<this.height?(u+h*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(u,h,l,f){return u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=this.width),f===void 0&&(f=this.height),this.context.clearRect(u,h,l,f),this.update()},setSize:function(u,h){return h===void 0&&(h=u),(u!==this.width||h!==this.height)&&(this.canvas.width=u,this.canvas.height=h,this._source.width=u,this._source.height=h,this._source.isPowerOf2=n(u,h),this.frames.__BASE.setSize(u,h,0,0),this.width=u,this.height=h,this.refresh()),this},destroy:function(){i.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),d=t(0),r=t(138),o=t(168),n=new d({initialize:function(s,u,h,l,f){f===void 0&&(f=!1);var v=s.manager.game;this.renderer=v.renderer,this.texture=s,this.source=u,this.image=u,this.compressionAlgorithm=null,this.resolution=1,this.width=h||u.naturalWidth||u.videoWidth||u.width||0,this.height=l||u.naturalHeight||u.videoHeight||u.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=u instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&u instanceof HTMLVideoElement,this.isRenderTexture=u.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&u instanceof WebGLTexture,this.isPowerOf2=r(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=f,this.init(v)},init:function(i){var s=this.renderer;s&&(s.gl?this.isCanvas?this.glTexture=s.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=s.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=s.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=s.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),i.config.antialias||this.setFilter(1)},setFilter:function(i){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,i),this.scaleMode=i},setFlipY:function(i){return i===void 0&&(i=!0),this.flipY=i,this},update:function(){var i=this.renderer.gl;i&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):i&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&e.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AtlasXML:t(979),Canvas:t(980),Image:t(981),JSONArray:t(982),JSONHash:t(983),SpriteSheet:t(984),SpriteSheetFromAtlas:t(985),UnityYAML:t(986)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(427),d=t(430),r=t(432),o={create:function(n){var i=n.config.audio,s=n.device.audio;return i.noAudio||!s.webAudio&&!s.audioData?new d(n):s.webAudio&&!i.disableWebAudio?new r(n):new e(n)}};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(145),d=t(0),r=t(70),o=t(429),n=new d({Extends:e,initialize:function(s){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,e.call(this,s)},add:function(i,s){var u=new o(this,i,s);return this.sounds.push(u),u},unlock:function(){this.locked=!1;var i=this;if(this.game.cache.audio.entries.each(function(l,f){for(var v=0;v<f.length;v++)if(f[v].dataset.locked==="true")return i.locked=!0,!1;return!0}),!!this.locked){var s=!1,u=function(){s=!0},h=function(){if(s){s=!1;return}document.body.removeEventListener("touchmove",u),document.body.removeEventListener("touchend",h);var l=[];if(i.game.cache.audio.entries.each(function(v,c){for(var p=0;p<c.length;p++){var m=c[p];m.dataset.locked==="true"&&l.push(m)}return!0}),l.length!==0){var f=l[l.length-1];f.oncanplaythrough=function(){f.oncanplaythrough=null,l.forEach(function(v){v.dataset.locked="false"}),i.unlocked=!0},l.forEach(function(v){v.load()})}};this.once(r.UNLOCKED,function(){for(this.forEachActiveSound(function(f){f.currentMarker===null&&f.duration===0&&(f.duration=f.tags[0].duration),f.totalDuration=f.tags[0].duration});this.lockedActionsQueue.length;){var l=this.lockedActionsQueue.shift();l.sound[l.prop].apply?l.sound[l.prop].apply(l.sound,l.value||[]):l.sound[l.prop]=l.value}},this),document.body.addEventListener("touchmove",u,!1),document.body.addEventListener("touchend",h,!1)}},onBlur:function(){this.forEachActiveSound(function(i){i.isPlaying&&(this.onBlurPausedSounds.push(i),i.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(i){i.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){e.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(i,s,u){return i.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:i,prop:s,value:u}),!0):!1},setMute:function(i){return this.mute=i,this},mute:{get:function(){return this._mute},set:function(i){this._mute=i,this.forEachActiveSound(function(s){s.updateMute()}),this.emit(r.GLOBAL_MUTE,this,i)}},setVolume:function(i){return this.volume=i,this},volume:{get:function(){return this._volume},set:function(i){this._volume=i,this.forEachActiveSound(function(s){s.updateVolume()}),this.emit(r.GLOBAL_VOLUME,this,i)}}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),d=function(r,o,n,i,s){if(i===void 0&&(i=0),s===void 0&&(s=r.length),e(r,i,s))for(var u=i;u<s;u++){var h=r[u];if(!o||o&&n===void 0&&h.hasOwnProperty(o)||o&&n!==void 0&&h[o]===n)return h}return null};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(146),d=t(0),r=t(70),o=t(18),n=new d({Extends:e,initialize:function(s,u,h){if(h===void 0&&(h={}),this.tags=s.game.cache.audio.get(u),!this.tags)throw new Error('There is no audio asset with key "'+u+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,e.call(this,s,u,h)},play:function(i,s){return this.manager.isLocked(this,"play",[i,s])||!e.prototype.play.call(this,i,s)||!this.pickAndPlayAudioTag()?!1:(this.emit(r.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!e.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(r.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!e.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(r.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!e.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(r.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var i=this.currentConfig.seek,s=this.currentConfig.delay,u=(this.currentMarker?this.currentMarker.start:0)+i;return this.previousTime=u,this.audio.currentTime=u,this.applyConfig(),s===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+s*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var i=0;i<this.tags.length;i++){var s=this.tags[i];if(s.dataset.used==="false")return s.dataset.used="true",this.audio=s,!0}if(!this.manager.override)return!1;var u=[];this.manager.forEachActiveSound(function(l){l.key===this.key&&l.audio&&u.push(l)},this),u.sort(function(l,f){return l.loop===f.loop?f.seek/f.duration-l.seek/l.duration:l.loop?1:-1});var h=u[0];return this.audio=h.audio,h.reset(),h.audio=null,h.startTime=0,h.previousTime=0,!0},playCatchPromise:function(){var i=this.audio.play();i&&i.catch(function(s){console.warn(s)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){e.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(i){if(this.isPlaying){if(this.startTime>0){this.startTime<i-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,i-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var s=this.currentMarker?this.currentMarker.start:0,u=s+this.duration,h=this.audio.currentTime;if(this.currentConfig.loop)h>=u-this.manager.loopEndOffset?(this.audio.currentTime=s+Math.max(0,h-u),h=this.audio.currentTime):h<s&&(this.audio.currentTime+=s,h=this.audio.currentTime),h<this.previousTime&&this.emit(r.LOOPED,this);else if(h>=u){this.reset(),this.stopAndReleaseAudioTag(),this.emit(r.COMPLETE,this);return}this.previousTime=h}},destroy:function(){e.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){e.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(i){this.currentConfig.mute=i,!this.manager.isLocked(this,"mute",i)&&(this.updateMute(),this.emit(r.MUTE,this,i))}},setMute:function(i){return this.mute=i,this},volume:{get:function(){return this.currentConfig.volume},set:function(i){this.currentConfig.volume=i,!this.manager.isLocked(this,"volume",i)&&(this.updateVolume(),this.emit(r.VOLUME,this,i))}},setVolume:function(i){return this.volume=i,this},rate:{get:function(){return this.currentConfig.rate},set:function(i){this.currentConfig.rate=i,!this.manager.isLocked(this,r.RATE,i)&&(this.calculateRate(),this.emit(r.RATE,this,i))}},setRate:function(i){return this.rate=i,this},detune:{get:function(){return this.currentConfig.detune},set:function(i){this.currentConfig.detune=i,!this.manager.isLocked(this,r.DETUNE,i)&&(this.calculateRate(),this.emit(r.DETUNE,this,i))}},setDetune:function(i){return this.detune=i,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(i){this.manager.isLocked(this,"seek",i)||this.startTime>0||(this.isPlaying||this.isPaused)&&(i=Math.min(Math.max(0,i),this.duration),this.isPlaying?(this.previousTime=i,this.audio.currentTime=i):this.isPaused&&(this.currentConfig.seek=i),this.emit(r.SEEK,this,i))}},setSeek:function(i){return this.seek=i,this},loop:{get:function(){return this.currentConfig.loop},set:function(i){this.currentConfig.loop=i,!this.manager.isLocked(this,"loop",i)&&(this.audio&&(this.audio.loop=i),this.emit(r.LOOP,this,i))}},setLoop:function(i){return this.loop=i,this},pan:{get:function(){return this.currentConfig.pan},set:function(i){this.currentConfig.pan=i,this.emit(r.PAN,this,i)}},setPan:function(i){return this.pan=i,this}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(145),d=t(0),r=t(9),o=t(431),n=t(1),i=new d({Extends:r,initialize:function(u){r.call(this),this.game=u,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(s,u){var h=new o(this,s,u);return this.sounds.push(h),h},addAudioSprite:function(s,u){var h=this.add(s,u);return h.spritemap={},h},play:function(s,u){return!1},playAudioSprite:function(s,u,h){return!1},remove:function(s){return e.prototype.remove.call(this,s)},removeByKey:function(s){return e.prototype.removeByKey.call(this,s)},pauseAll:n,resumeAll:n,stopAll:n,update:n,setRate:n,setDetune:n,setMute:n,setVolume:n,forEachActiveSound:function(s,u){e.prototype.forEachActiveSound.call(this,s,u)},destroy:function(){e.prototype.destroy.call(this)}});a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(146),d=t(0),r=t(9),o=t(17),n=function(){return!1},i=function(){return null},s=function(){return this},u=new d({Extends:r,initialize:function(l,f,v){v===void 0&&(v={}),r.call(this),this.manager=l,this.key=f,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},v),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:i,play:n,pause:n,resume:n,stop:n,destroy:function(){e.prototype.destroy.call(this)},setMute:s,setVolume:s,setRate:s,setDetune:s,setSeek:s,setLoop:s,setPan:s});a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(433),d=t(145),r=t(0),o=t(70),n=t(22),i=t(434),s=new r({Extends:d,initialize:function(h){this.context=this.createAudioContext(h),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),d.call(this,h),this.locked&&h.isBooted?this.unlock():h.events.once(n.BOOT,this.unlock,this)},createAudioContext:function(u){var h=u.config.audio;if(h.context)return h.context.resume(),h.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(u){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=u,this.masterMuteNode=u.createGain(),this.masterVolumeNode=u.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(u.destination),this.destination=this.masterMuteNode,this},add:function(u,h){var l=new i(this,u,h);return this.sounds.push(l),l},decodeAudio:function(u,h){var l;Array.isArray(u)?l=u:l=[{key:u,data:h}];for(var f=this.game.cache.audio,v=l.length,c=0;c<l.length;c++){var p=l[c],m=p.key,y=p.data;typeof y=="string"&&(y=e(y));var T=function(S,P){f.add(S,P),this.emit(o.DECODED,S),v--,v===0&&this.emit(o.DECODED_ALL)}.bind(this,m),E=function(S,P){console.error("Error decoding audio: "+S+" - ",P?P.message:""),v--,v===0&&this.emit(o.DECODED_ALL)}.bind(this,m);this.context.decodeAudioData(y,T,E)}},unlock:function(){var u=this,h=document.body,l=function f(){if(u.context&&h){var v=h.removeEventListener;u.context.resume().then(function(){v("touchstart",f),v("touchend",f),v("click",f),v("keydown",f),u.unlocked=!0},function(){v("touchstart",f),v("touchend",f),v("click",f),v("keydown",f)})}};h&&(h.addEventListener("touchstart",l,!1),h.addEventListener("touchend",l,!1),h.addEventListener("click",l,!1),h.addEventListener("keydown",l,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var u=this.context;(u.state==="suspended"||u.state==="interrupted")&&!this.locked&&u.resume()},update:function(u,h){d.prototype.update.call(this,u,h);var l=this.context;l&&l.state==="interrupted"&&l.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var u=this;this.context.close().then(function(){u.context=null})}d.prototype.destroy.call(this)},setMute:function(u){return this.mute=u,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(u){this.masterMuteNode.gain.setValueAtTime(u?0:1,0),this.emit(o.GLOBAL_MUTE,this,u)}},setVolume:function(u){return this.volume=u,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(u){this.masterVolumeNode.gain.setValueAtTime(u,0),this.emit(o.GLOBAL_VOLUME,this,u)}}});a.exports=s},function(a,x){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),d=0;d<t.length;d++)e[t.charCodeAt(d)]=d;var r=function(o){o=o.substr(o.indexOf(",")+1);var n=o.length,i=n*.75,s=0,u,h,l,f;o[n-1]==="="&&(i--,o[n-2]==="="&&i--);for(var v=new ArrayBuffer(i),c=new Uint8Array(v),p=0;p<n;p+=4)u=e[o.charCodeAt(p)],h=e[o.charCodeAt(p+1)],l=e[o.charCodeAt(p+2)],f=e[o.charCodeAt(p+3)],c[s++]=u<<2|h>>4,c[s++]=(h&15)<<4|l>>2,c[s++]=(l&3)<<6|f&63;return v};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(146),d=t(0),r=t(70),o=new d({Extends:e,initialize:function(i,s,u){if(u===void 0&&(u={}),this.audioBuffer=i.game.cache.audio.get(s),!this.audioBuffer)throw new Error('Audio key "'+s+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=i.context.createGain(),this.volumeNode=i.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),i.context.createStereoPanner?(this.pannerNode=i.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(i.destination)):this.volumeNode.connect(i.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,e.call(this,i,s,u)},play:function(n,i){return e.prototype.play.call(this,n,i)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(r.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!e.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(r.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!e.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(r.RESUME,this),!0)},stop:function(){return e.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(r.STOP,this),!0):!1},createAndStartBufferSource:function(){var n=this.currentConfig.seek,i=this.currentConfig.delay,s=this.manager.context.currentTime+i,u=(this.currentMarker?this.currentMarker.start:0)+n,h=this.duration-n;this.playTime=s-n,this.startTime=s,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,s),Math.max(0,u),Math.max(0,h)),this.resetConfig()},createAndStartLoopBufferSource:function(){var n=this.getLoopTime(),i=this.currentMarker?this.currentMarker.start:0,s=this.duration;this.loopTime=n,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,n),Math.max(0,i),Math.max(0,s))},createBufferSource:function(){var n=this,i=this.manager.context.createBufferSource();return i.buffer=this.audioBuffer,i.connect(this.muteNode),i.onended=function(s){s.target===n.source&&(n.currentConfig.loop?n.hasLooped=!0:n.hasEnded=!0)},i},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),e.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,e.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(r.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(r.LOOPED,this))},destroy:function(){e.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){e.prototype.calculateRate.call(this);var n=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,n),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,n)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var n=0,i=0;i<this.rateUpdates.length;i++){var s=0;i<this.rateUpdates.length-1?s=this.rateUpdates[i+1].time:s=this.manager.context.currentTime-this.playTime,n+=(s-this.rateUpdates[i].time)*this.rateUpdates[i].rate}return n},getLoopTime:function(){for(var n=0,i=0;i<this.rateUpdates.length-1;i++)n+=(this.rateUpdates[i+1].time-this.rateUpdates[i].time)*this.rateUpdates[i].rate;var s=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+s.time+(this.duration-n)/s.rate},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,this.calculateRate(),this.emit(r.RATE,this,n)}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,this.calculateRate(),this.emit(r.DETUNE,this,n)}},setDetune:function(n){return this.detune=n,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(n){this.currentConfig.mute=n,this.muteNode.gain.setValueAtTime(n?0:1,0),this.emit(r.MUTE,this,n)}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(n){this.currentConfig.volume=n,this.volumeNode.gain.setValueAtTime(n,0),this.emit(r.VOLUME,this,n)}},setVolume:function(n){return this.volume=n,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.currentConfig.seek=n,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(r.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),n&&this.createAndStartLoopBufferSource()),this.emit(r.LOOP,this,n)}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(n){this.currentConfig.pan=n,this.pannerNode&&this.pannerNode.pan.setValueAtTime(n,this.manager.context.currentTime),this.emit(r.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var d=e.length,r=e[0].length,o=new Array(r),n=0;n<r;n++){o[n]=new Array(d);for(var i=d-1;i>-1;i--)o[n][i]=e[i][n]}return o};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(r,o,n){var i=r[o];r[o]=r[n],r[n]=i}function e(r,o){return r<o?-1:r>o?1:0}var d=function(r,o,n,i,s){for(n===void 0&&(n=0),i===void 0&&(i=r.length-1),s===void 0&&(s=e);i>n;){if(i-n>600){var u=i-n+1,h=o-n+1,l=Math.log(u),f=.5*Math.exp(2*l/3),v=.5*Math.sqrt(l*f*(u-f)/u)*(h-u/2<0?-1:1),c=Math.max(n,Math.floor(o-h*f/u+v)),p=Math.min(i,Math.floor(o+(u-h)*f/u+v));d(r,o,c,p,s)}var m=r[o],y=n,T=i;for(t(r,n,o),s(r[i],m)>0&&t(r,n,i);y<T;){for(t(r,y,T),y++,T--;s(r[y],m)<0;)y++;for(;s(r[T],m)>0;)T--}s(r[n],m)===0?t(r,n,T):(T++,t(r,T,i)),T<=o&&(n=T+1),o<=T&&(i=T-1)}};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),d=t(131),r=function(n,i,s){for(var u=[],h=0;h<n.length;h++)for(var l=0;l<i.length;l++)for(var f=0;f<s;f++)u.push({a:n[h],b:i[l]});return u},o=function(n,i,s){var u=e(s,"max",0),h=e(s,"qty",1),l=e(s,"random",!1),f=e(s,"randomB",!1),v=e(s,"repeat",0),c=e(s,"yoyo",!1),p=[];if(f&&d(i),v===-1)if(u===0)v=0;else{var m=n.length*i.length*h;c&&(m*=2),v=Math.ceil(u/m)}for(var y=0;y<=v;y++){var T=r(n,i,h);l&&d(T),p=p.concat(T),c&&(T.reverse(),p=p.concat(T))}return u&&p.splice(u),p};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={PROCESS_QUEUE_ADD:t(1041),PROCESS_QUEUE_REMOVE:t(1042)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(13),d=function(r,o){var n=e(o,"anims",null);if(n===null)return r;if(typeof n=="string")r.anims.play(n);else if(typeof n=="object"){var i=r.anims,s=e(n,"key",void 0);if(s){var u=e(n,"startFrame",void 0),h=e(n,"delay",0),l=e(n,"repeat",0),f=e(n,"repeatDelay",0),v=e(n,"yoyo",!1),c=e(n,"play",!1),p=e(n,"delayedPlay",0),m={key:s,delay:h,repeat:l,repeatDelay:f,yoyo:v,startFrame:u};c?i.play(m):p>0?i.playAfterDelay(m,p):i.load(m)}}return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(109),r=new e({initialize:function(n,i,s,u,h){this.parent=n,this.x=i,this.y=s,this.frame=u,this.data={},this.tint=16777215,this._visible=h,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(o){return o===void 0?this.frame=this.parent.frame:o instanceof d&&o.texture===this.parent.texture?this.frame=o:this.frame=this.parent.texture.get(o),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(o,n,i){return this.x=o,this.y=n,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(o,n){return this.x=o,this.y=n,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,n){return this.flipX=o,this.flipY=n,this},setVisible:function(o){return this.visible=o,this},setAlpha:function(o){return this.alpha=o,this},setTint:function(o){return this.tint=o,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(o){this.parent.dirty|=this._visible!==o,this._visible=o}},alpha:{get:function(){return this._alpha},set:function(o){this.parent.dirty|=this._alpha>0!=o>0,this._alpha=o}}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),d=function(r,o,n){n===void 0&&(n=new e);var i=Math.min(r.x,o.x),s=Math.min(r.y,o.y),u=Math.max(r.right,o.right)-i,h=Math.max(r.bottom,o.bottom)-s;return n.setTo(i,s,u,h)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(11),r=t(1055),o=t(15),n=t(7),i=t(202),s=t(20),u=t(140),h=new e({Extends:o,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.Origin,d.ScrollFactor,d.Transform,d.Visible,r],initialize:function(f,v,c,p,m,y){o.call(this,f,"DOMElement"),this.parent=f.sys.game.domContainer,this.cache=f.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new u,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(v,c),typeof p=="string"?p[0]==="#"?this.setElement(p.substr(1),m,y):this.createElement(p,m,y):p&&this.setElement(p,m,y),f.sys.events.on(s.SLEEP,this.handleSceneEvent,this),f.sys.events.on(s.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(l){var f=this.node,v=f.style;f&&(v.display=l.settings.visible?"block":"none")},setSkew:function(l,f){return l===void 0&&(l=0),f===void 0&&(f=l),this.skewX=l,this.skewY=f,this},setPerspective:function(l){return this.parent.style.perspective=l+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(l){this.parent.style.perspective=l+"px"}},addListener:function(l){if(this.node){l=l.split(" ");for(var f=0;f<l.length;f++)this.node.addEventListener(l[f],this.handler,!1)}return this},removeListener:function(l){if(this.node){l=l.split(" ");for(var f=0;f<l.length;f++)this.node.removeEventListener(l[f],this.handler)}return this},dispatchNativeEvent:function(l){this.emit(l.type,l)},createElement:function(l,f,v){return this.setElement(document.createElement(l),f,v)},setElement:function(l,f,v){this.removeElement();var c;if(typeof l=="string"?(l[0]==="#"&&(l=l.substr(1)),c=document.getElementById(l)):typeof l=="object"&&l.nodeType===1&&(c=l),!c)return this;if(this.node=c,f&&n(f))for(var p in f)c.style[p]=f[p];else typeof f=="string"&&(c.style=f);return c.style.zIndex="0",c.style.display="inline",c.style.position="absolute",c.phaser=this,this.parent&&this.parent.appendChild(c),v&&(c.innerText=v),this.updateSize()},createFromCache:function(l,f){var v=this.cache.get(l);return v&&this.createFromHTML(v,f),this},createFromHTML:function(l,f){f===void 0&&(f="div"),this.removeElement();var v=document.createElement(f);return this.node=v,v.style.zIndex="0",v.style.display="inline",v.style.position="absolute",v.phaser=this,this.parent&&this.parent.appendChild(v),v.innerHTML=l,this.updateSize()},removeElement:function(){return this.node&&(i(this.node),this.node=null),this},updateSize:function(){var l=this.node,f=l.getBoundingClientRect();return this.width=l.clientWidth,this.height=l.clientHeight,this.displayWidth=f.width||0,this.displayHeight=f.height||0,this},getChildByProperty:function(l,f){if(this.node){for(var v=this.node.querySelectorAll("*"),c=0;c<v.length;c++)if(v[c][l]===f)return v[c]}return null},getChildByID:function(l){return this.getChildByProperty("id",l)},getChildByName:function(l){return this.getChildByProperty("name",l)},setClassName:function(l){return this.node&&(this.node.className=l,this.updateSize()),this},setText:function(l){return this.node&&(this.node.innerText=l,this.updateSize()),this},setHTML:function(l){return this.node&&(this.node.innerHTML=l,this.updateSize()),this},preUpdate:function(){var l=this.parentContainer,f=this.node;f&&l&&!l.willRender()&&(f.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(s.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(s.WAKE,this.handleSceneEvent,this)}});a.exports=h},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1056),d=t(15),r=t(25),o=new r,n=new r,i=new r,s=function(u,h,l,f){if(h.node){var v=h.node.style,c=h.scene.sys.settings;if(!v||!c.visible||d.RENDER_MASK!==h.renderFlags||h.cameraFilter!==0&&h.cameraFilter&l.id||h.parentContainer&&!h.parentContainer.willRender()){v.display="none";return}var p=h.parentContainer,m=l.alpha*h.alpha;p&&(m*=p.alpha);var y=o,T=n,E=i,S=0,P=0,M="0%",O="0%";f?(S=h.width*h.scaleX*h.originX,P=h.height*h.scaleY*h.originY,T.applyITRS(h.x-S,h.y-P,h.rotation,h.scaleX,h.scaleY),y.copyFrom(l.matrix),y.multiplyWithOffset(f,-l.scrollX*h.scrollFactorX,-l.scrollY*h.scrollFactorY),T.e=h.x-S,T.f=h.y-P,y.multiply(T,E)):(S=h.width*h.originX,P=h.height*h.originY,T.applyITRS(h.x-S,h.y-P,h.rotation,h.scaleX,h.scaleY),y.copyFrom(l.matrix),M=100*h.originX+"%",O=100*h.originY+"%",T.e-=l.scrollX*h.scrollFactorX,T.f-=l.scrollY*h.scrollFactorY,y.multiply(T,E)),h.transformOnly||(v.display="block",v.opacity=m,v.zIndex=h._depth,v.pointerEvents=h.pointerEvents,v.mixBlendMode=e[h._blendMode]),v.transform=E.getCSSMatrix()+" skew("+h.skewX+"rad, "+h.skewY+"rad) rotate3d("+h.rotate3d.x+","+h.rotate3d.y+","+h.rotate3d.z+","+h.rotate3d.w+h.rotate3dAngle+")",v.transformOrigin=M+" "+O}};a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(11),r=t(15),o=t(1060),n=new e({Extends:r,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Flip,d.Origin,d.ScrollFactor,d.Size,d.Texture,d.Tint,d.Transform,d.Visible,o],initialize:function(s){r.call(this,s,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(218),d=t(98),r=t(14),o=t(4),n=function(i,s,u){u===void 0&&(u=new o);var h=d(s,0,r.PI2);return e(i,h,u)};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(447),d=t(218),r=t(98),o=t(14),n=function(i,s,u,h){h===void 0&&(h=[]),!s&&u>0&&(s=e(i)/u);for(var l=0;l<s;l++){var f=r(l/s,0,o.PI2);h.push(d(i,f))}return h};a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d=e.width/2,r=e.height/2,o=Math.pow(d-r,2)/Math.pow(d+r,2);return Math.PI*(d+r)*(1+3*o/(10+Math.sqrt(4-3*o)))};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(217),d=t(30),r=function(o,n,i,s,u,h){var l=n.commandBuffer,f=l.length,v=u||o.currentContext;if(!(f===0||!d(o,v,n,i,s))){i.addToRenderList(n);var c=1,p=1,m=0,y=0,T=1,E=0,S=0,P=0;v.beginPath();for(var M=0;M<f;++M){var O=l[M];switch(O){case e.ARC:v.arc(l[M+1],l[M+2],l[M+3],l[M+4],l[M+5],l[M+6]),M+=7;break;case e.LINE_STYLE:T=l[M+1],m=l[M+2],c=l[M+3],E=(m&16711680)>>>16,S=(m&65280)>>>8,P=m&255,v.strokeStyle="rgba("+E+","+S+","+P+","+c+")",v.lineWidth=T,M+=3;break;case e.FILL_STYLE:y=l[M+1],p=l[M+2],E=(y&16711680)>>>16,S=(y&65280)>>>8,P=y&255,v.fillStyle="rgba("+E+","+S+","+P+","+p+")",M+=2;break;case e.BEGIN_PATH:v.beginPath();break;case e.CLOSE_PATH:v.closePath();break;case e.FILL_PATH:h||v.fill();break;case e.STROKE_PATH:h||v.stroke();break;case e.FILL_RECT:h?v.rect(l[M+1],l[M+2],l[M+3],l[M+4]):v.fillRect(l[M+1],l[M+2],l[M+3],l[M+4]),M+=4;break;case e.FILL_TRIANGLE:v.beginPath(),v.moveTo(l[M+1],l[M+2]),v.lineTo(l[M+3],l[M+4]),v.lineTo(l[M+5],l[M+6]),v.closePath(),h||v.fill(),M+=6;break;case e.STROKE_TRIANGLE:v.beginPath(),v.moveTo(l[M+1],l[M+2]),v.lineTo(l[M+3],l[M+4]),v.lineTo(l[M+5],l[M+6]),v.closePath(),h||v.stroke(),M+=6;break;case e.LINE_TO:v.lineTo(l[M+1],l[M+2]),M+=2;break;case e.MOVE_TO:v.moveTo(l[M+1],l[M+2]),M+=2;break;case e.LINE_FX_TO:v.lineTo(l[M+1],l[M+2]),M+=5;break;case e.MOVE_FX_TO:v.moveTo(l[M+1],l[M+2]),M+=5;break;case e.SAVE:v.save();break;case e.RESTORE:v.restore();break;case e.TRANSLATE:v.translate(l[M+1],l[M+2]),M+=2;break;case e.SCALE:v.scale(l[M+1],l[M+2]),M+=2;break;case e.ROTATE:v.rotate(l[M+1]),M+=1;break;case e.GRADIENT_FILL_STYLE:M+=5;break;case e.GRADIENT_LINE_STYLE:M+=6;break}}v.restore()}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(137),r=t(80),o=t(2),n=t(68),i=new e({initialize:function(u,h,l,f){f===void 0&&(f=!1),this.propertyKey=h,this.propertyValue=l,this.defaultValue=l,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=f,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(u)},loadConfig:function(s,u){s===void 0&&(s={}),u&&(this.propertyKey=u),this.propertyValue=o(s,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(s){return this.propertyValue=s,this.setMethods()},setMethods:function(){var s=this.propertyValue,u=typeof s;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,u==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(s))this.onEmit=this.randomStaticValueEmit;else if(u==="function")this.emitOnly?this.onEmit=s:this.onUpdate=s;else if(u==="object"&&this.hasBoth(s,"start","end")){this.start=s.start,this.end=s.end;var h=this.has(s,"random");if(h&&(this.onEmit=this.randomRangedValueEmit),this.has(s,"steps"))this.steps=s.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var l=this.has(s,"ease")?s.ease:"Linear";this.ease=r(l,s.easeParams),h||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(u==="object"&&this.hasBoth(s,"min","max"))this.start=s.min,this.end=s.max,this.onEmit=this.randomRangedValueEmit;else if(u==="object"&&this.has(s,"random")){var f=s.random;Array.isArray(f)&&(this.start=f[0],this.end=f[1]),this.onEmit=this.randomRangedValueEmit}else u==="object"&&this.hasEither(s,"onEmit","onUpdate")&&(this.has(s,"onEmit")&&(this.onEmit=s.onEmit),this.has(s,"onUpdate")&&(this.onUpdate=s.onUpdate));return this},has:function(s,u){return s.hasOwnProperty(u)},hasBoth:function(s,u,h){return s.hasOwnProperty(u)&&s.hasOwnProperty(h)},hasEither:function(s,u,h){return s.hasOwnProperty(u)||s.hasOwnProperty(h)},defaultEmit:function(s,u,h){return h},defaultUpdate:function(s,u,h,l){return l},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var s=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[s]},randomRangedValueEmit:function(s,u){var h=d(this.start,this.end);return s&&s.data[u]&&(s.data[u].min=h),h},steppedEmit:function(){var s=this.counter,u=this.counter+(this.end-this.start)/this.steps;return this.counter=n(u,this.start,this.end),s},easedValueEmit:function(s,u){if(s&&s.data[u]){var h=s.data[u];h.min=this.start,h.max=this.end}return this.start},easeValueUpdate:function(s,u,h){var l=s.data[u];return(l.max-l.min)*this.ease(h)+l.min}});a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(2),r=new e({initialize:function(n,i,s,u,h){if(typeof n=="object"){var l=n;n=d(l,"x",0),i=d(l,"y",0),s=d(l,"power",0),u=d(l,"epsilon",100),h=d(l,"gravity",50)}else n===void 0&&(n=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=100),h===void 0&&(h=50);this.x=n,this.y=i,this.active=!0,this._gravity=h,this._power=0,this._epsilon=0,this.power=s,this.epsilon=u},update:function(o,n){var i=this.x-o.x,s=this.y-o.y,u=i*i+s*s;if(u!==0){var h=Math.sqrt(u);u<this._epsilon&&(u=this._epsilon);var l=this._power*n/(u*h)*100;o.velocityX+=i*l,o.velocityY+=s*l}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(o){this._epsilon=o*o}},power:{get:function(){return this._power/this._gravity},set:function(o){this._power=o*this._gravity}},gravity:{get:function(){return this._gravity},set:function(o){var n=this.power;this._gravity=o,this.power=n}}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(36),r=t(50),o=new e({initialize:function(i){this.emitter=i,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(n,i){var s=this.emitter;this.frame=s.getFrame(),s.emitZone&&s.emitZone.getPoint(this),n===void 0?this.x+=s.x.onEmit(this,"x"):this.x+=n,i===void 0?this.y+=s.y.onEmit(this,"y"):this.y+=i,this.life=s.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var u=s.speedX.onEmit(this,"speedX"),h=s.speedY?s.speedY.onEmit(this,"speedY"):u;if(s.radial){var l=d(s.angle.onEmit(this,"angle"));this.velocityX=Math.cos(l)*Math.abs(u),this.velocityY=Math.sin(l)*Math.abs(h)}else if(s.moveTo){var f=s.moveToX.onEmit(this,"moveToX"),v=s.moveToY?s.moveToY.onEmit(this,"moveToY"):f,c=Math.atan2(v-this.y,f-this.x),p=r(this.x,this.y,f,v)/(this.life/1e3);this.velocityX=Math.cos(c)*p,this.velocityY=Math.sin(c)*p}else this.velocityX=u,this.velocityY=h;s.acceleration&&(this.accelerationX=s.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=s.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=s.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=s.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=s.delay.onEmit(this,"delay"),this.scaleX=s.scaleX.onEmit(this,"scaleX"),this.scaleY=s.scaleY?s.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=s.rotate.onEmit(this,"rotate"),this.rotation=d(this.angle),this.bounce=s.bounce.onEmit(this,"bounce"),this.alpha=s.alpha.onEmit(this,"alpha"),this.tint=s.tint.onEmit(this,"tint")},computeVelocity:function(n,i,s,u){var h=this.velocityX,l=this.velocityY,f=this.accelerationX,v=this.accelerationY,c=this.maxVelocityX,p=this.maxVelocityY;h+=n.gravityX*s,l+=n.gravityY*s,f&&(h+=f*s),v&&(l+=v*s),h>c?h=c:h<-c&&(h=-c),l>p?l=p:l<-p&&(l=-p),this.velocityX=h,this.velocityY=l;for(var m=0;m<u.length;m++)u[m].update(this,i,s)},checkBounds:function(n){var i=n.bounds,s=-this.bounce;this.x<i.x&&n.collideLeft?(this.x=i.x,this.velocityX*=s):this.x>i.right&&n.collideRight&&(this.x=i.right,this.velocityX*=s),this.y<i.y&&n.collideTop?(this.y=i.y,this.velocityY*=s):this.y>i.bottom&&n.collideBottom&&(this.y=i.bottom,this.velocityY*=s)},update:function(n,i,s){if(this.delayCurrent>0)return this.delayCurrent-=n,!1;var u=this.emitter,h=1-this.lifeCurrent/this.life;return this.lifeT=h,this.computeVelocity(u,n,i,s),this.x+=this.velocityX*i,this.y+=this.velocityY*i,u.bounds&&this.checkBounds(u),u.deathZone&&u.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=u.scaleX.onUpdate(this,"scaleX",h,this.scaleX),u.scaleY?this.scaleY=u.scaleY.onUpdate(this,"scaleY",h,this.scaleY):this.scaleY=this.scaleX,this.angle=u.rotate.onUpdate(this,"rotate",h,this.angle),this.rotation=d(this.angle),this.alpha=u.alpha.onUpdate(this,"alpha",h,this.alpha),this.tint=u.tint.onUpdate(this,"tint",h,this.tint),this.lifeCurrent-=n,this.lifeCurrent<=0)}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),d=t(0),r=t(11),o=t(453),n=t(454),i=t(449),s=t(2),u=t(210),h=t(455),l=t(126),f=t(451),v=t(456),c=t(10),p=t(79),m=t(3),y=t(68),T=new d({Mixins:[r.BlendMode,r.Mask,r.ScrollFactor,r.Visible],initialize:function(S,P){this.manager=S,this.texture=S.texture,this.frames=[S.defaultFrame],this.defaultFrame=S.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=f,this.x=new i(P,"x",0,!0),this.y=new i(P,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new i(P,"accelerationX",0,!0),this.accelerationY=new i(P,"accelerationY",0,!0),this.maxVelocityX=new i(P,"maxVelocityX",1e4,!0),this.maxVelocityY=new i(P,"maxVelocityY",1e4,!0),this.speedX=new i(P,"speedX",0,!0),this.speedY=new i(P,"speedY",0,!0),this.moveTo=!1,this.moveToX=new i(P,"moveToX",0,!0),this.moveToY=new i(P,"moveToY",0,!0),this.bounce=new i(P,"bounce",0,!0),this.scaleX=new i(P,"scaleX",1),this.scaleY=new i(P,"scaleY",1),this.tint=new i(P,"tint",16777215),this.alpha=new i(P,"alpha",1),this.lifespan=new i(P,"lifespan",1e3,!0),this.angle=new i(P,"angle",{min:0,max:360},!0),this.rotate=new i(P,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new i(P,"quantity",1,!0),this.delay=new i(P,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=e.NORMAL,this.follow=null,this.followOffset=new m,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,P&&this.fromJSON(P)},fromJSON:function(E){if(!E)return this;var S=0,P="";for(S=0;S<this.configFastMap.length;S++)P=this.configFastMap[S],l(E,P)&&(this[P]=s(E,P));for(S=0;S<this.configOpMap.length;S++)P=this.configOpMap[S],l(E,P)&&this[P].loadConfig(E);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,l(E,"speed")&&(this.speedX.loadConfig(E,"speed"),this.speedY=null),(h(E,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),l(E,"scale")&&(this.scaleX.loadConfig(E,"scale"),this.scaleY=null),l(E,"callbackScope")){var M=s(E,"callbackScope",null);this.emitCallbackScope=M,this.deathCallbackScope=M}return l(E,"emitZone")&&this.setEmitZone(E.emitZone),l(E,"deathZone")&&this.setDeathZone(E.deathZone),l(E,"bounds")&&this.setBounds(E.bounds),l(E,"followOffset")&&this.followOffset.setFromObject(s(E,"followOffset",0)),l(E,"frame")&&this.setFrame(E.frame),l(E,"reserve")&&this.reserve(E.reserve),this},toJSON:function(E){E===void 0&&(E={});var S=0,P="";for(S=0;S<this.configFastMap.length;S++)P=this.configFastMap[S],E[P]=this[P];for(S=0;S<this.configOpMap.length;S++)P=this.configOpMap[S],this[P]&&(E[P]=this[P].toJSON());return this.speedY||(delete E.speedX,E.speed=this.speedX.toJSON()),this.scaleY||(delete E.scaleX,E.scale=this.scaleX.toJSON()),E},startFollow:function(E,S,P,M){return S===void 0&&(S=0),P===void 0&&(P=0),M===void 0&&(M=!1),this.follow=E,this.followOffset.set(S,P),this.trackVisible=M,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return u(this.frames);var E=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=y(this.currentFrame+1,0,this._frameLength)),E},setFrame:function(E,S,P){S===void 0&&(S=!0),P===void 0&&(P=1),this.randomFrame=S,this.frameQuantity=P,this.currentFrame=0,this._frameCounter=0;var M=typeof E;if(Array.isArray(E)||M==="string"||M==="number")this.manager.setEmitterFrames(E,this);else if(M==="object"){var O=E;E=s(O,"frames",null),E&&this.manager.setEmitterFrames(E,this);var L=s(O,"cycle",!1);this.randomFrame=!L,this.frameQuantity=s(O,"quantity",P)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(E){return E===void 0&&(E=!0),this.radial=E,this},setPosition:function(E,S){return this.x.onChange(E),this.y.onChange(S),this},setBounds:function(E,S,P,M){if(typeof E=="object"){var O=E;E=O.x,S=O.y,P=l(O,"w")?O.w:O.width,M=l(O,"h")?O.h:O.height}return this.bounds?this.bounds.setTo(E,S,P,M):this.bounds=new c(E,S,P,M),this},setSpeedX:function(E){return this.speedX.onChange(E),this.radial=!1,this},setSpeedY:function(E){return this.speedY&&(this.speedY.onChange(E),this.radial=!1),this},setSpeed:function(E){return this.speedX.onChange(E),this.speedY=null,this.radial=!0,this},setScaleX:function(E){return this.scaleX.onChange(E),this},setScaleY:function(E){return this.scaleY.onChange(E),this},setScale:function(E){return this.scaleX.onChange(E),this.scaleY=null,this},setGravityX:function(E){return this.gravityX=E,this},setGravityY:function(E){return this.gravityY=E,this},setGravity:function(E,S){return this.gravityX=E,this.gravityY=S,this},setAlpha:function(E){return this.alpha.onChange(E),this},setTint:function(E){return this.tint.onChange(E),this},setEmitterAngle:function(E){return this.angle.onChange(E),this},setAngle:function(E){return this.angle.onChange(E),this},setLifespan:function(E){return this.lifespan.onChange(E),this},setQuantity:function(E){return this.quantity.onChange(E),this},setFrequency:function(E,S){return this.frequency=E,this._counter=0,S&&this.quantity.onChange(S),this},setEmitZone:function(E){if(E===void 0)this.emitZone=null;else{var S=s(E,"type","random"),P=s(E,"source",null);switch(S){case"random":this.emitZone=new v(P);break;case"edge":var M=s(E,"quantity",1),O=s(E,"stepRate",0),L=s(E,"yoyo",!1),F=s(E,"seamless",!0);this.emitZone=new n(P,M,O,L,F);break}}return this},setDeathZone:function(E){if(E===void 0)this.deathZone=null;else{var S=s(E,"type","onEnter"),P=s(E,"source",null);if(P&&typeof P.contains=="function"){var M=S==="onEnter";this.deathZone=new o(P,M)}}return this},reserve:function(E){for(var S=this.dead,P=0;P<E;P++)S.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(E,S){return E===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof E=="function"&&(this.emitCallback=E,S&&(this.emitCallbackScope=S)),this},onParticleDeath:function(E,S){return E===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof E=="function"&&(this.deathCallback=E,S&&(this.deathCallbackScope=S)),this},killAll:function(){for(var E=this.dead,S=this.alive;S.length>0;)E.push(S.pop());return this},forEachAlive:function(E,S){for(var P=this.alive,M=P.length,O=0;O<M;++O)E.call(S,P[O],this);return this},forEachDead:function(E,S){for(var P=this.dead,M=P.length,O=0;O<M;++O)E.call(S,P[O],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return p(this.alive,this.depthSortCallback),this},flow:function(E,S){return S===void 0&&(S=1),this.frequency=E,this.quantity.onChange(S),this.start()},explode:function(E,S,P){return this.frequency=-1,this.emitParticle(E,S,P)},emitParticleAt:function(E,S,P){return this.emitParticle(P,E,S)},emitParticle:function(E,S,P){if(!this.atLimit()){E===void 0&&(E=this.quantity.onEmit());for(var M=this.dead,O=this.follow?this.follow.x+this.followOffset.x:S,L=this.follow?this.follow.y+this.followOffset.y:P,F=0;F<E;F++){var b=M.pop();if(b||(b=new this.particleClass(this)),b.fire(O,L),this.particleBringToTop?this.alive.push(b):this.alive.unshift(b),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,b,this),this.atLimit())break}return b}},preUpdate:function(E,S){S*=this.timeScale;var P=S/1e3;this.trackVisible&&(this.visible=this.follow.visible);var M=this.manager.getProcessors(),O=this.alive,L=this.dead,F=0,b=[],B=O.length;for(F=0;F<B;F++){var U=O[F];U.update(S,P,M)&&b.push({index:F,particle:U})}if(B=b.length,B>0){var X=this.deathCallback,W=this.deathCallbackScope;for(F=B-1;F>=0;F--){var Z=b[F];O.splice(Z.index,1),L.push(Z.particle),X&&X.call(W,Z.particle),Z.particle.resetPosition()}}this.on&&(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=S,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(E,S){return E.y-S.y}});a.exports=T},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o,n){this.source=o,this.killOnEnter=n},willKill:function(r){var o=this.source.contains(r.x,r.y);return o&&this.killOnEnter||!o&&!this.killOnEnter}});a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o,n,i,s,u){s===void 0&&(s=!1),u===void 0&&(u=!0),this.source=o,this.points=[],this.quantity=n,this.stepRate=i,this.yoyo=s,this.counter=-1,this.seamless=u,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var r=this.points[0],o=this.points[this.points.length-1];r.x===o.x&&r.y===o.y&&this.points.pop()}var n=this._length;return this._length=this.points.length,this._length<n&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(r){return this.source=r,this.updateSource()},getPoint:function(r){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var o=this.points[this.counter];o&&(r.x=o.x,r.y=o.y)}});a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){for(var r=0;r<d.length;r++)if(e.hasOwnProperty(d[r]))return!0;return!1};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(3),r=new e({initialize:function(n){this.source=n,this._tempVec=new d},getPoint:function(o){var n=this._tempVec;this.source.getRandomPoint(n),o.x=n.x,o.y=n.y}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(11),r=t(73),o=new e({Extends:r,Mixins:[d.PathFollower],initialize:function(i,s,u,h,l,f){r.call(this,i,u,h,l,f),this.path=s},preUpdate:function(n,i){this.anims.update(n,i),this.pathUpdate(n)}});a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=e.canvas,n=e.context,i=e.style,s=[],u=0,h=r.length;i.maxLines>0&&i.maxLines<r.length&&(h=i.maxLines),i.syncFont(o,n);for(var l=0;l<h;l++){var f=i.strokeThickness;f+=n.measureText(r[l]).width,i.wordWrap&&(f-=n.measureText(" ").width),s[l]=Math.ceil(f),u=Math.max(u,s[l])}var v=d.fontSize+i.strokeThickness,c=v*h,p=e.lineSpacing;return h>1&&(c+=p*(h-1)),{width:u,height:c,lines:h,lineWidths:s,lineSpacing:p,lineHeight:v}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(13),r=t(6),o=t(460),n={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},i=new e({initialize:function(u,h){this.parent=u,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(h,!1,!0);var l=r(h,"metrics",!1);l?this.metrics={ascent:r(l,"ascent",0),descent:r(l,"descent",0),fontSize:r(l,"fontSize",0)}:this.metrics=o(this)},setStyle:function(s,u,h){u===void 0&&(u=!0),h===void 0&&(h=!1),s&&s.hasOwnProperty("fontSize")&&typeof s.fontSize=="number"&&(s.fontSize=s.fontSize.toString()+"px");for(var l in n){var f=h?n[l][1]:this[l];l==="wordWrapCallback"||l==="wordWrapCallbackScope"?this[l]=r(s,n[l][0],f):this[l]=d(s,n[l][0],f)}var v=r(s,"font",null);v!==null&&this.setFont(v,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var c=r(s,"fill",null);return c!==null&&(this.color=c),u?this.update(!0):this.parent},syncFont:function(s,u){u.font=this._font},syncStyle:function(s,u){u.textBaseline="alphabetic",u.fillStyle=this.color,u.strokeStyle=this.stroke,u.lineWidth=this.strokeThickness,u.lineCap="round",u.lineJoin="round"},syncShadow:function(s,u){u?(s.shadowOffsetX=this.shadowOffsetX,s.shadowOffsetY=this.shadowOffsetY,s.shadowColor=this.shadowColor,s.shadowBlur=this.shadowBlur):(s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowColor=0,s.shadowBlur=0)},update:function(s){return s&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(s,u){u===void 0&&(u=!0);var h=s,l="",f="";if(typeof s!="string")h=r(s,"fontFamily","Courier"),l=r(s,"fontSize","16px"),f=r(s,"fontStyle","");else{var v=s.split(" "),c=0;f=v.length>2?v[c++]:"",l=v[c++]||"16px",h=v[c++]||"Courier"}return(h!==this.fontFamily||l!==this.fontSize||f!==this.fontStyle)&&(this.fontFamily=h,this.fontSize=l,this.fontStyle=f,u&&this.update(!0)),this.parent},setFontFamily:function(s){return this.fontFamily!==s&&(this.fontFamily=s,this.update(!0)),this.parent},setFontStyle:function(s){return this.fontStyle!==s&&(this.fontStyle=s,this.update(!0)),this.parent},setFontSize:function(s){return typeof s=="number"&&(s=s.toString()+"px"),this.fontSize!==s&&(this.fontSize=s,this.update(!0)),this.parent},setTestString:function(s){return this.testString=s,this.update(!0)},setFixedSize:function(s,u){return this.fixedWidth=s,this.fixedHeight=u,s&&(this.parent.width=s),u&&(this.parent.height=u),this.update(!1)},setBackgroundColor:function(s){return this.backgroundColor=s,this.update(!1)},setFill:function(s){return this.color=s,this.update(!1)},setColor:function(s){return this.color=s,this.update(!1)},setResolution:function(s){return this.resolution=s,this.update(!1)},setStroke:function(s,u){return u===void 0&&(u=this.strokeThickness),s===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==s||this.strokeThickness!==u)&&(this.stroke=s,this.strokeThickness=u,this.update(!0)),this.parent},setShadow:function(s,u,h,l,f,v){return s===void 0&&(s=0),u===void 0&&(u=0),h===void 0&&(h="#000"),l===void 0&&(l=0),f===void 0&&(f=!1),v===void 0&&(v=!0),this.shadowOffsetX=s,this.shadowOffsetY=u,this.shadowColor=h,this.shadowBlur=l,this.shadowStroke=f,this.shadowFill=v,this.update(!1)},setShadowOffset:function(s,u){return s===void 0&&(s=0),u===void 0&&(u=s),this.shadowOffsetX=s,this.shadowOffsetY=u,this.update(!1)},setShadowColor:function(s){return s===void 0&&(s="#000"),this.shadowColor=s,this.update(!1)},setShadowBlur:function(s){return s===void 0&&(s=0),this.shadowBlur=s,this.update(!1)},setShadowStroke:function(s){return this.shadowStroke=s,this.update(!1)},setShadowFill:function(s){return this.shadowFill=s,this.update(!1)},setWordWrapWidth:function(s,u){return u===void 0&&(u=!1),this.wordWrapWidth=s,this.wordWrapUseAdvanced=u,this.update(!1)},setWordWrapCallback:function(s,u){return u===void 0&&(u=null),this.wordWrapCallback=s,this.wordWrapCallbackScope=u,this.update(!1)},setAlign:function(s){return s===void 0&&(s="left"),this.align=s,this.update(!1)},setMaxLines:function(s){return s===void 0&&(s=0),this.maxLines=s,this.update(!1)},getTextMetrics:function(){var s=this.metrics;return{ascent:s.ascent,descent:s.descent,fontSize:s.fontSize}},toJSON:function(){var s={};for(var u in n)s[u]=this[u];return s.metrics=this.getTextMetrics(),s},destroy:function(){this.parent=void 0}});a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),d=function(r){var o=e.create(this),n=o.getContext("2d");r.syncFont(o,n);var i=n.measureText(r.testString);if("actualBoundingBoxAscent"in i){var s=i.actualBoundingBoxAscent,u=i.actualBoundingBoxDescent;return e.remove(o),{ascent:s,descent:u,fontSize:s+u}}var h=Math.ceil(i.width*r.baselineX),l=h,f=2*l;l=l*r.baselineY|0,o.width=h,o.height=f,n.fillStyle="#f00",n.fillRect(0,0,h,f),n.font=r._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(r.testString,0,l);var v={ascent:0,descent:0,fontSize:0},c=n.getImageData(0,0,h,f);if(!c)return v.ascent=l,v.descent=l+6,v.fontSize=v.ascent+v.descent,e.remove(o),v;var p=c.data,m=p.length,y=h*4,T,E,S=0,P=!1;for(T=0;T<l;T++){for(E=0;E<y;E+=4)if(p[S+E]!==255){P=!0;break}if(!P)S+=y;else break}for(v.ascent=l-T,S=m-y,P=!1,T=f;T>l;T--){for(E=0;E<y;E+=4)if(p[S+E]!==255){P=!0;break}if(!P)S-=y;else break}return v.descent=T-l,v.fontSize=v.ascent+v.descent,e.remove(o),v};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1097),d=t(0),r=t(36),o=t(59),n=t(65),i=t(14),s=t(34),u=new d({Extends:s,Mixins:[e],initialize:function(l,f,v,c,p,m,y,T,E){f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=128),p===void 0&&(p=0),m===void 0&&(m=360),y===void 0&&(y=!1),s.call(this,l,"Arc",new n(0,0,c)),this._startAngle=p,this._endAngle=m,this._anticlockwise=y,this._iterations=.01,this.setPosition(f,v);var S=this.geom.radius*2;this.setSize(S,S),T!==void 0&&this.setFillStyle(T,E),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(h){this._iterations=h,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(h){this.geom.radius=h;var l=h*2;this.setSize(l,l),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(h){this._startAngle=h,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(h){this._endAngle=h,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(h){this._anticlockwise=h,this.updateData()}},setRadius:function(h){return this.radius=h,this},setIterations:function(h){return h===void 0&&(h=.01),this.iterations=h,this},setStartAngle:function(h,l){return this._startAngle=h,l!==void 0&&(this._anticlockwise=l),this.updateData()},setEndAngle:function(h,l){return this._endAngle=h,l!==void 0&&(this._anticlockwise=l),this.updateData()},updateData:function(){var h=this._iterations,l=h,f=this.geom.radius,v=r(this._startAngle),c=r(this._endAngle),p=this._anticlockwise,m=f,y=f;c-=v,p?c<-i.PI2?c=-i.PI2:c>0&&(c=-i.PI2+c%i.PI2):c>i.PI2?c=i.PI2:c<0&&(c=i.PI2+c%i.PI2);for(var T=[m+Math.cos(v)*f,y+Math.sin(v)*f],E;l<1;)E=c*l+v,T.push(m+Math.cos(E)*f,y+Math.sin(E)*f),l+=h;return E=c+v,T.push(m+Math.cos(E)*f,y+Math.sin(E)*f),T.push(m+Math.cos(v)*f,y+Math.sin(v)*f),this.pathIndexes=o(T),this.pathData=T,this}});a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(1100),r=t(59),o=t(10),n=t(34),i=new e({Extends:n,Mixins:[d],initialize:function(u,h,l,f,v,c){h===void 0&&(h=0),l===void 0&&(l=0),n.call(this,u,"Curve",f),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(h,l),v!==void 0&&this.setFillStyle(v,c),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(s){this._smoothness=s,this.updateData()}},setSmoothness:function(s){return this._smoothness=s,this.updateData()},updateData:function(){var s=this._curveBounds,u=this._smoothness;this.geom.getBounds(s,u),this.setSize(s.width,s.height),this.updateDisplayOrigin();for(var h=[],l=this.geom.getPoints(u),f=0;f<l.length;f++)h.push(l[f].x,l[f].y);return h.push(l[0].x,l[0].y),this.pathIndexes=r(h),this.pathData=h,this}});a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(59),r=t(1103),o=t(111),n=t(34),i=new e({Extends:n,Mixins:[r],initialize:function(u,h,l,f,v,c,p){h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=128),v===void 0&&(v=128),n.call(this,u,"Ellipse",new o(f/2,v/2,f,v)),this._smoothness=64,this.setPosition(h,l),this.width=f,this.height=v,c!==void 0&&this.setFillStyle(c,p),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(s){this._smoothness=s,this.updateData()}},setSize:function(s,u){return this.width=s,this.height=u,this.geom.setPosition(s/2,u/2),this.geom.setSize(s,u),this.updateData()},setSmoothness:function(s){return this._smoothness=s,this.updateData()},updateData:function(){for(var s=[],u=this.geom.getPoints(this._smoothness),h=0;h<u.length;h++)s.push(u[h].x,u[h].y);return s.push(u[0].x,u[0].y),this.pathIndexes=d(s),this.pathData=s,this}});a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(34),r=t(1106),o=new e({Extends:d,Mixins:[r],initialize:function(i,s,u,h,l,f,v,c,p,m,y){s===void 0&&(s=0),u===void 0&&(u=0),h===void 0&&(h=128),l===void 0&&(l=128),f===void 0&&(f=32),v===void 0&&(v=32),d.call(this,i,"Grid",null),this.cellWidth=f,this.cellHeight=v,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(s,u),this.setSize(h,l),this.setFillStyle(c,p),m!==void 0&&this.setOutlineStyle(m,y),this.updateDisplayOrigin()},setFillStyle:function(n,i){return i===void 0&&(i=1),n===void 0?this.showCells=!1:(this.fillColor=n,this.fillAlpha=i,this.showCells=!0),this},setAltFillStyle:function(n,i){return i===void 0&&(i=1),n===void 0?this.showAltCells=!1:(this.altFillColor=n,this.altFillAlpha=i,this.showAltCells=!0),this},setOutlineStyle:function(n,i){return i===void 0&&(i=1),n===void 0?this.showOutline=!1:(this.outlineFillColor=n,this.outlineFillAlpha=i,this.showOutline=!0),this}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1109),d=t(0),r=t(34),o=new d({Extends:r,Mixins:[e],initialize:function(i,s,u,h,l,f,v,c){s===void 0&&(s=0),u===void 0&&(u=0),h===void 0&&(h=48),l===void 0&&(l=32),f===void 0&&(f=15658734),v===void 0&&(v=10066329),c===void 0&&(c=13421772),r.call(this,i,"IsoBox",null),this.projection=4,this.fillTop=f,this.fillLeft=v,this.fillRight=c,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(s,u),this.setSize(h,l),this.updateDisplayOrigin()},setProjection:function(n){return this.projection=n,this},setFaces:function(n,i,s){return n===void 0&&(n=!0),i===void 0&&(i=!0),s===void 0&&(s=!0),this.showTop=n,this.showLeft=i,this.showRight=s,this},setFillStyle:function(n,i,s){return this.fillTop=n,this.fillLeft=i,this.fillRight=s,this.isFilled=!0,this}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(1112),r=t(34),o=new e({Extends:r,Mixins:[d],initialize:function(i,s,u,h,l,f,v,c,p){s===void 0&&(s=0),u===void 0&&(u=0),h===void 0&&(h=48),l===void 0&&(l=32),f===void 0&&(f=!1),v===void 0&&(v=15658734),c===void 0&&(c=10066329),p===void 0&&(p=13421772),r.call(this,i,"IsoTriangle",null),this.projection=4,this.fillTop=v,this.fillLeft=c,this.fillRight=p,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=f,this.isFilled=!0,this.setPosition(s,u),this.setSize(h,l),this.updateDisplayOrigin()},setProjection:function(n){return this.projection=n,this},setReversed:function(n){return this.isReversed=n,this},setFaces:function(n,i,s){return n===void 0&&(n=!0),i===void 0&&(i=!0),s===void 0&&(s=!0),this.showTop=n,this.showLeft=i,this.showRight=s,this},setFillStyle:function(n,i,s){return this.fillTop=n,this.fillLeft=i,this.fillRight=s,this.isFilled=!0,this}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(34),r=t(47),o=t(1115),n=new e({Extends:d,Mixins:[o],initialize:function(s,u,h,l,f,v,c,p,m){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=128),c===void 0&&(c=0),d.call(this,s,"Line",new r(l,f,v,c));var y=Math.max(1,this.geom.right-this.geom.left),T=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(u,h),this.setSize(y,T),p!==void 0&&this.setStrokeStyle(1,p,m),this.updateDisplayOrigin()},setLineWidth:function(i,s){return s===void 0&&(s=i),this._startWidth=i,this._endWidth=s,this.lineWidth=i,this},setTo:function(i,s,u,h){return this.geom.setTo(i,s,u,h),this}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1118),d=t(0),r=t(59),o=t(469),n=t(227),i=t(34),s=t(472),u=new d({Extends:i,Mixins:[e],initialize:function(l,f,v,c,p,m){f===void 0&&(f=0),v===void 0&&(v=0),i.call(this,l,"Polygon",new n(c));var y=o(this.geom);this.setPosition(f,v),this.setSize(y.width,y.height),p!==void 0&&this.setFillStyle(p,m),this.updateDisplayOrigin(),this.updateData()},smooth:function(h){h===void 0&&(h=1);for(var l=0;l<h;l++)s(this.geom);return this.updateData()},updateData:function(){for(var h=[],l=this.geom.points,f=0;f<l.length;f++)h.push(l[f].x,l[f].y);return h.push(l[0].x,l[0].y),this.pathIndexes=r(h),this.pathData=h,this}});a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),d=function(r,o){o===void 0&&(o=new e);for(var n=1/0,i=1/0,s=-n,u=-i,h,l=0;l<r.points.length;l++)h=r.points[l],n=Math.min(n,h.x),i=Math.min(i,h.y),s=Math.max(s,h.x),u=Math.max(u,h.y);return o.x=n,o.y=i,o.width=s-n,o.height=u-i,o};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),d=t(47),r=t(471),o=function(n,i,s,u){u===void 0&&(u=[]);var h=n.points,l=r(n);!i&&s>0&&(i=l/s);for(var f=0;f<i;f++)for(var v=l*(f/i),c=0,p=0;p<h.length;p++){var m=h[p],y=h[(p+1)%h.length],T=new d(m.x,m.y,y.x,y.y),E=e(T);if(v<c||v>c+E){c+=E;continue}var S=T.getPoint((v-c)/E);u.push(S);break}return u};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),d=t(47),r=function(o){for(var n=o.points,i=0,s=0;s<n.length;s++){var u=n[s],h=n[(s+1)%n.length],l=new d(u.x,u.y,h.x,h.y);i+=e(l)}return i};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(d,r){return d[0]=r[0],d[1]=r[1],d},e=function(d){var r,o=[],n=d.points;for(r=0;r<n.length;r++)o.push([n[r].x,n[r].y]);var i=[];for(o.length>0&&i.push(t([0,0],o[0])),r=0;r<o.length-1;r++){var s=o[r],u=o[r+1],h=s[0],l=s[1],f=u[0],v=u[1];i.push([.85*h+.15*f,.85*l+.15*v]),i.push([.15*h+.85*f,.15*l+.85*v])}return o.length>1&&i.push(t([0,0],o[o.length-1])),d.setTo(i)};a.exports=e},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(10),r=t(34),o=t(1121),n=new e({Extends:r,Mixins:[o],initialize:function(s,u,h,l,f,v,c){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=128),f===void 0&&(f=128),r.call(this,s,"Rectangle",new d(0,0,l,f)),this.setPosition(u,h),this.setSize(l,f),v!==void 0&&this.setFillStyle(v,c),this.updateDisplayOrigin(),this.updateData()},setSize:function(i,s){return this.width=i,this.height=s,this.geom.setSize(i,s),this.updateData(),this},updateData:function(){var i=[],s=this.geom,u=this._tempLine;return s.getLineA(u),i.push(u.x1,u.y1,u.x2,u.y2),s.getLineB(u),i.push(u.x2,u.y2),s.getLineC(u),i.push(u.x2,u.y2),s.getLineD(u),i.push(u.x2,u.y2),this.pathData=i,this}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1124),d=t(0),r=t(59),o=t(34),n=new d({Extends:o,Mixins:[e],initialize:function(s,u,h,l,f,v,c,p){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=5),f===void 0&&(f=32),v===void 0&&(v=64),o.call(this,s,"Star",null),this._points=l,this._innerRadius=f,this._outerRadius=v,this.setPosition(u,h),this.setSize(v*2,v*2),c!==void 0&&this.setFillStyle(c,p),this.updateDisplayOrigin(),this.updateData()},setPoints:function(i){return this._points=i,this.updateData()},setInnerRadius:function(i){return this._innerRadius=i,this.updateData()},setOuterRadius:function(i){return this._outerRadius=i,this.updateData()},points:{get:function(){return this._points},set:function(i){this._points=i,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(i){this._innerRadius=i,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(i){this._outerRadius=i,this.updateData()}},updateData:function(){var i=[],s=this._points,u=this._innerRadius,h=this._outerRadius,l=Math.PI/2*3,f=Math.PI/s,v=h,c=h;i.push(v,c+-h);for(var p=0;p<s;p++)i.push(v+Math.cos(l)*h,c+Math.sin(l)*h),l+=f,i.push(v+Math.cos(l)*u,c+Math.sin(l)*u),l+=f;return i.push(v,c+-h),this.pathIndexes=r(i),this.pathData=i,this}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(34),r=t(82),o=t(1127),n=new e({Extends:d,Mixins:[o],initialize:function(s,u,h,l,f,v,c,p,m,y,T){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=128),v===void 0&&(v=64),c===void 0&&(c=0),p===void 0&&(p=128),m===void 0&&(m=128),d.call(this,s,"Triangle",new r(l,f,v,c,p,m));var E=this.geom.right-this.geom.left,S=this.geom.bottom-this.geom.top;this.setPosition(u,h),this.setSize(E,S),y!==void 0&&this.setFillStyle(y,T),this.updateDisplayOrigin(),this.updateData()},setTo:function(i,s,u,h,l,f){return this.geom.setTo(i,s,u,h,l,f),this.updateData()},updateData:function(){var i=[],s=this.geom,u=this._tempLine;return s.getLineA(u),i.push(u.x1,u.y1,u.x2,u.y2),s.getLineB(u),i.push(u.x2,u.y2),s.getLineC(u),i.push(u.x2,u.y2),this.pathData=i,this}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=t(67),r=function(o,n,i){i===void 0&&(i=new e);var s=o.getLineA(),u=o.getLineB(),h=o.getLineC();if(n<=0||n>=1)return i.x=s.x1,i.y=s.y1,i;var l=d(s),f=d(u),v=d(h),c=l+f+v,p=c*n,m=0;return p<l?(m=p/l,i.x=s.x1+(s.x2-s.x1)*m,i.y=s.y1+(s.y2-s.y1)*m):p>l+f?(p-=l+f,m=p/v,i.x=h.x1+(h.x2-h.x1)*m,i.y=h.y1+(h.y2-h.y1)*m):(p-=l,m=p/f,i.x=u.x1+(u.x2-u.x1)*m,i.y=u.y1+(u.y2-u.y1)*m),i};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),d=t(4),r=function(o,n,i,s){s===void 0&&(s=[]);var u=o.getLineA(),h=o.getLineB(),l=o.getLineC(),f=e(u),v=e(h),c=e(l),p=f+v+c;!n&&i>0&&(n=p/i);for(var m=0;m<n;m++){var y=p*(m/n),T=0,E=new d;y<f?(T=y/f,E.x=u.x1+(u.x2-u.x1)*T,E.y=u.y1+(u.y2-u.y1)*T):y>f+v?(y-=f+v,T=y/c,E.x=l.x1+(l.x2-l.x1)*T,E.y=l.y1+(l.y2-l.y1)*T):(y-=f,T=y/v,E.x=h.x1+(h.x2-h.x1)*T,E.y=h.y1+(h.y2-h.y1)*T),s.push(E)}return s};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(d))return e[d]=r,!0;if(d.indexOf(".")!==-1){for(var o=d.split("."),n=e,i=e,s=0;s<o.length;s++)if(n.hasOwnProperty(o[s]))i=n,n=n[o[s]];else return!1;return i[o[o.length-1]]=r,!0}return!1};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(116),d=t(117),r=function(o,n,i,s,u,h,l){if(s===void 0&&(s=!1),h===void 0&&(h=16777215),l===void 0&&(l=1),o.length!==n.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var f={faces:[],vertices:[]},v,c,p,m,y,T,E,S,P,M,O,L=s?3:2,F=Array.isArray(h),b=Array.isArray(l);if(Array.isArray(i)&&i.length>0)for(v=0;v<i.length;v++){var B=i[v],U=i[v]*2,X=i[v]*L;c=o[X],p=o[X+1],m=s?o[X+2]:0,y=n[U],T=n[U+1],E=F?h[B]:h,S=b?l[B]:l,P=0,M=0,O=0,u&&(P=u[X],M=u[X+1],O=s?u[X+2]:0),f.vertices.push(new d(c,p,m,y,T,E,S,P,M,O))}else{var W=0,Z=0;for(v=0;v<o.length;v+=L)c=o[v],p=o[v+1],m=s?o[v+2]:0,y=n[W],T=n[W+1],E=F?h[Z]:h,S=b?l[Z]:l,P=0,M=0,O=0,u&&(P=u[v],M=u[v+1],O=s?u[v+2]:0),f.vertices.push(new d(c,p,m,y,T,E,S,P,M,O)),W+=2,Z++}for(v=0;v<f.vertices.length;v+=3){var J=f.vertices[v],N=f.vertices[v+1],I=f.vertices[v+2];f.faces.push(new e(J,N,I))}return f};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(116),d=t(69),r=t(39),o=t(117),n=new r,i=new r,s=new d,u=function(h,l,f,v,c,p,m,y,T,E){f===void 0&&(f=1),v===void 0&&(v=0),c===void 0&&(c=0),p===void 0&&(p=0),m===void 0&&(m=0),y===void 0&&(y=0),T===void 0&&(T=0),E===void 0&&(E=!0);var S={faces:[],verts:[]},P=h.materials;n.set(v,c,p),i.set(m,y,T),s.fromRotationXYTranslation(i,n,E);for(var M=0;M<h.models.length;M++)for(var O=h.models[M],L=O.vertices,F=O.textureCoords,b=O.faces,B=0;B<b.length;B++){var U=b[B],X=U.vertices[0],W=U.vertices[1],Z=U.vertices[2],J=L[X.vertexIndex],N=L[W.vertexIndex],I=L[Z.vertexIndex],G=X.textureCoordsIndex,V=W.textureCoordsIndex,Y=Z.textureCoordsIndex,z=G===-1?{u:0,v:1}:F[G],H=V===-1?{u:0,v:0}:F[V],$=Y===-1?{u:1,v:1}:F[Y],Q=16777215;U.material!==""&&P[U.material]&&(Q=P[U.material]);var k=new o(J.x*f,J.y*f,J.z*f,z.u,z.v,Q).transformMat4(s),tt=new o(N.x*f,N.y*f,N.z*f,H.u,H.v,Q).transformMat4(s),it=new o(I.x*f,I.y*f,I.z*f,$.u,$.v,Q).transformMat4(s);S.verts.push(k,tt,it),S.faces.push(new e(k,tt,it))}return l&&(l.faces=l.faces.concat(S.faces),l.vertices=l.vertices.concat(S.verts)),S};a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),d=t(0),r=t(11),o=t(200),n=t(12),i=new d({Extends:e,Mixins:[r.ScrollFactor,r.Visible],initialize:function(u,h,l,f,v,c,p){e.call(this,u,h,l),this.color=new o(f,v,c),this.intensity=p,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(s){return!(i.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&s.id)},setColor:function(s){var u=n.getFloatsFromUintRGB(s);return this.color.set(u[0],u[1],u[2]),this},setIntensity:function(s){return this.intensity=s,this},setRadius:function(s){return this.radius=s,this}});i.RENDER_MASK=15,a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(151),d=t(0),r=t(50),o=t(481),n=t(150),i=t(200),s=t(74),u=t(79),h=t(12),l=new d({initialize:function(){this.lights=[],this.ambientColor=new i(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(f,v,c,p,m,y){return this.systems.displayList.add(new n(this.scene,f,v,c,p,m,y))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(f){for(var v=this.lights,c=f.worldView,p=[],m=0;m<v.length;m++){var y=v[m];y.willRender(f)&&e(y,c)&&p.push({light:y,distance:r(y.x,y.y,c.centerX,c.centerY)})}return p.length>this.maxLights&&(u(p,this.sortByDistance),p=p.slice(0,this.maxLights)),this.visibleLights=p.length,p},sortByDistance:function(f,v){return f.distance>=v.distance},setAmbientColor:function(f){var v=h.getFloatsFromUintRGB(f);return this.ambientColor.set(v[0],v[1],v[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(f,v,c,p,m){f===void 0&&(f=0),v===void 0&&(v=0),c===void 0&&(c=128),p===void 0&&(p=16777215),m===void 0&&(m=1);var y=h.getFloatsFromUintRGB(p),T=new o(f,v,c,y[0],y[1],y[2],m);return this.lights.push(T),T},removeLight:function(f){var v=this.lights.indexOf(f);return v>=0&&s(this.lights,v),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});a.exports=l},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(56),d=t(17),r={Circle:t(1191),Ellipse:t(1201),Intersects:t(484),Line:t(1221),Mesh:t(1243),Point:t(1246),Polygon:t(1260),Rectangle:t(502),Triangle:t(1293)};r=d(!1,r,e),a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CircleToCircle:t(231),CircleToRectangle:t(151),GetCircleToCircle:t(1211),GetCircleToRectangle:t(1212),GetLineToCircle:t(232),GetLineToLine:t(485),GetLineToPoints:t(486),GetLineToPolygon:t(487),GetLineToRectangle:t(234),GetRaysFromPointToPolygon:t(1213),GetRectangleIntersection:t(1214),GetRectangleToRectangle:t(1215),GetRectangleToTriangle:t(1216),GetTriangleToCircle:t(1217),GetTriangleToLine:t(492),GetTriangleToTriangle:t(1218),LineToCircle:t(233),LineToLine:t(96),LineToRectangle:t(488),PointToLine:t(496),PointToLineSegment:t(1219),RectangleToRectangle:t(152),RectangleToTriangle:t(489),RectangleToValues:t(1220),TriangleToCircle:t(491),TriangleToLine:t(493),TriangleToTriangle:t(494)}},function(a,x,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),d=function(r,o,n){var i=r.x1,s=r.y1,u=r.x2,h=r.y2,l=o.x1,f=o.y1,v=o.x2,c=o.y2,p=u-i,m=h-s,y=v-l,T=c-f,E=T*p-y*m;if(p===0||E===0)return!1;var S=(p*(f-s)+m*(i-l))/(y*m-T*p),P=(l+y*S-i)/p;return P<0||S<0||S>1?null:(n===void 0&&(n=new e),n.set(i+p*P,s+m*P,P))};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),d=t(485),r=t(47),o=new r,n=new e,i=function(s,u,h){h===void 0&&(h=new e);var l=!1;h.set(),n.set();for(var f=u[0],v=1;v<u.length;v++){var c=u[v];o.setTo(f.x,f.y,c.x,c.y),f=c,d(s,o,n)&&(!l||n.z<h.z)&&(h.copy(n),l=!0)}return l?h:null};a.exports=i},function(a,x,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),d=t(140),r=t(486),o=new e,n=function(i,s,u){u===void 0&&(u=new d),Array.isArray(s)||(s=[s]);var h=!1;u.set(),o.set();for(var l=0;l<s.length;l++)r(i,s[l].points,o)&&(!h||o.z<u.z)&&(u.set(o.x,o.y,o.z,l),h=!0);return h?u:null};a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.x1,o=e.y1,n=e.x2,i=e.y2,s=d.x,u=d.y,h=d.right,l=d.bottom,f=0;if(r>=s&&r<=h&&o>=u&&o<=l||n>=s&&n<=h&&i>=u&&i<=l)return!0;if(r<s&&n>=s){if(f=o+(i-o)*(s-r)/(n-r),f>u&&f<=l)return!0}else if(r>h&&n<=h&&(f=o+(i-o)*(h-r)/(n-r),f>=u&&f<=l))return!0;if(o<u&&i>=u){if(f=r+(n-r)*(u-o)/(i-o),f>=s&&f<=h)return!0}else if(o>l&&i<=l&&(f=r+(n-r)*(l-o)/(i-o),f>=s&&f<=h))return!0;return!1};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(96),d=t(57),r=t(235),o=t(490),n=function(i,s){if(s.left>i.right||s.right<i.left||s.top>i.bottom||s.bottom<i.top)return!1;var u=s.getLineA(),h=s.getLineB(),l=s.getLineC();if(d(i,u.x1,u.y1)||d(i,u.x2,u.y2)||d(i,h.x1,h.y1)||d(i,h.x2,h.y2)||d(i,l.x1,l.y1)||d(i,l.x2,l.y2))return!0;var f=i.getLineA(),v=i.getLineB(),c=i.getLineC(),p=i.getLineD();if(e(u,f)||e(u,v)||e(u,c)||e(u,p)||e(h,f)||e(h,v)||e(h,c)||e(h,p)||e(l,f)||e(l,v)||e(l,c)||e(l,p))return!0;var m=o(i),y=r(s,m,!0);return y.length>0};a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d===void 0&&(d=[]),d.push({x:e.x,y:e.y}),d.push({x:e.right,y:e.y}),d.push({x:e.right,y:e.bottom}),d.push({x:e.x,y:e.bottom}),d};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(233),d=t(115),r=function(o,n){return o.left>n.right||o.right<n.left||o.top>n.bottom||o.bottom<n.top?!1:!!(d(o,n.x,n.y)||e(o.getLineA(),n)||e(o.getLineB(),n)||e(o.getLineC(),n))};a.exports=r},function(a,x,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=t(493),r=t(96),o=function(n,i,s){if(s===void 0&&(s=[]),d(n,i))for(var u=n.getLineA(),h=n.getLineB(),l=n.getLineC(),f=[new e,new e,new e],v=[r(u,i,f[0]),r(h,i,f[1]),r(l,i,f[2])],c=0;c<3;c++)v[c]&&s.push(f[c]);return s};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(96),d=function(r,o){return!!(r.contains(o.x1,o.y1)||r.contains(o.x2,o.y2)||e(r.getLineA(),o)||e(r.getLineB(),o)||e(r.getLineC(),o))};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(235),d=t(495),r=t(96),o=function(n,i){if(n.left>i.right||n.right<i.left||n.top>i.bottom||n.bottom<i.top)return!1;var s=n.getLineA(),u=n.getLineB(),h=n.getLineC(),l=i.getLineA(),f=i.getLineB(),v=i.getLineC();if(r(s,l)||r(s,f)||r(s,v)||r(u,l)||r(u,f)||r(u,v)||r(h,l)||r(h,f)||r(h,v))return!0;var c=d(n),p=e(i,c,!0);return p.length>0||(c=d(i),p=e(n,c,!0),p.length>0)};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d===void 0&&(d=[]),d.push({x:e.x1,y:e.y1}),d.push({x:e.x2,y:e.y2}),d.push({x:e.x3,y:e.y3}),d};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){r===void 0&&(r=1);var o=d.x1,n=d.y1,i=d.x2,s=d.y2,u=e.x,h=e.y,l=(i-o)*(i-o)+(s-n)*(s-n);if(l===0)return!1;var f=((u-o)*(i-o)+(h-n)*(s-n))/l;if(f<0)return Math.sqrt((o-u)*(o-u)+(n-h)*(n-h))<=r;if(f>=0&&f<=1){var v=((n-h)*(i-o)-(o-u)*(s-n))/l;return Math.abs(v)*Math.sqrt(l)<=r}else return Math.sqrt((i-u)*(i-u)+(s-h)*(s-h))<=r};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),d=t(68),r=t(97),o=function(n){var i=r(n)-e.TAU;return d(i,-Math.PI,Math.PI)};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=!0,e="untitled",d="",r="";function o(m){var y=m.indexOf("#");return y>-1?m.substring(0,y):m}function n(m){return m.models.length===0&&m.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),d="",m.models[m.models.length-1]}function i(m,y){var T=m.length>=2?m[1]:e;y.models.push({faces:[],name:T,textureCoords:[],vertexNormals:[],vertices:[]}),d=""}function s(m){m.length===2&&(d=m[1])}function u(m,y){var T=m.length,E=T>=2?parseFloat(m[1]):0,S=T>=3?parseFloat(m[2]):0,P=T>=4?parseFloat(m[3]):0;n(y).vertices.push({x:E,y:S,z:P})}function h(m,y){var T=m.length,E=T>=2?parseFloat(m[1]):0,S=T>=3?parseFloat(m[2]):0,P=T>=4?parseFloat(m[3]):0;isNaN(E)&&(E=0),isNaN(S)&&(S=0),isNaN(P)&&(P=0),t&&(S=1-S),n(y).textureCoords.push({u:E,v:S,w:P})}function l(m,y){var T=m.length,E=T>=2?parseFloat(m[1]):0,S=T>=3?parseFloat(m[2]):0,P=T>=4?parseFloat(m[3]):0;n(y).vertexNormals.push({x:E,y:S,z:P})}function f(m,y){var T=m.length-1;if(!(T<3)){for(var E={group:d,material:r,vertices:[]},S=0;S<T;S++){var P=m[S+1],M=P.split("/"),O=M.length;if(!(O<1||O>3)){var L=0,F=0,b=0;L=parseInt(M[0],10),O>1&&M[1]!==""&&(F=parseInt(M[1],10)),O>2&&(b=parseInt(M[2],10)),L!==0&&(L<0&&(L=n(y).vertices.length+1+L),F-=1,L-=1,b-=1,E.vertices.push({textureCoordsIndex:F,vertexIndex:L,vertexNormalIndex:b}))}}n(y).faces.push(E)}}function v(m,y){m.length>=2&&y.materialLibraries.push(m[1])}function c(m){m.length>=2&&(r=m[1])}var p=function(m,y){y===void 0&&(y=!0),t=y;var T={materials:{},materialLibraries:[],models:[]};d="",r="";for(var E=m.split(`
`),S=0;S<E.length;S++){var P=o(E[S]),M=P.replace(/\s\s+/g," ").trim().split(" ");switch(M[0].toLowerCase()){case"o":i(M,T);break;case"g":s(M);break;case"v":u(M,T);break;case"vt":h(M,T);break;case"vn":l(M,T);break;case"f":f(M,T);break;case"mtllib":v(M,T);break;case"usemtl":c(M);break}}return T};a.exports=p},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(103),d=function(r){for(var o={},n=r.split(`
`),i="",s=0;s<n.length;s++){var u=n[s].trim();if(!(u.indexOf("#")===0||u==="")){var h=u.replace(/\s\s+/g," ").trim().split(" ");switch(h[0].toLowerCase()){case"newmtl":{i=h[1];break}case"kd":{var l=Math.floor(h[1]*255),f=h.length>=2?Math.floor(h[2]*255):l,v=h.length>=3?Math.floor(h[3]*255):l;o[i]=e(l,f,v);break}}}}return o};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x*e.x+e.y*e.y};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10);e.Area=t(1267),e.Ceil=t(1268),e.CeilAll=t(1269),e.CenterOn=t(190),e.Clone=t(1270),e.Contains=t(57),e.ContainsPoint=t(1271),e.ContainsRect=t(503),e.CopyFrom=t(1272),e.Decompose=t(490),e.Equals=t(1273),e.FitInside=t(1274),e.FitOutside=t(1275),e.Floor=t(1276),e.FloorAll=t(1277),e.FromPoints=t(199),e.FromXY=t(1278),e.GetAspectRatio=t(237),e.GetCenter=t(1279),e.GetPoint=t(171),e.GetPoints=t(306),e.GetSize=t(1280),e.Inflate=t(1281),e.Intersection=t(1282),e.MarchingAnts=t(316),e.MergePoints=t(1283),e.MergeRect=t(1284),e.MergeXY=t(1285),e.Offset=t(1286),e.OffsetPoint=t(1287),e.Overlaps=t(1288),e.Perimeter=t(130),e.PerimeterPoint=t(1289),e.Random=t(174),e.RandomOutside=t(1290),e.SameDimensions=t(1291),e.Scale=t(1292),e.Union=t(441),a.exports=e},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d.width*d.height>e.width*e.height?!1:d.x>e.x&&d.x<e.right&&d.right>e.x&&d.right<e.right&&d.y>e.y&&d.y<e.bottom&&d.bottom>e.y&&d.bottom<e.bottom};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o){return o===void 0&&(o=new e),o.x=(r.x1+r.x2+r.x3)/3,o.y=(r.y1+r.y2+r.y3)/3,o};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return e.x1+=d,e.y1+=r,e.x2+=d,e.y2+=r,e.x3+=d,e.y3+=r,e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4);function d(o,n,i,s){var u=o-i,h=n-s,l=u*u+h*h;return Math.sqrt(l)}var r=function(o,n){n===void 0&&(n=new e);var i=o.x1,s=o.y1,u=o.x2,h=o.y2,l=o.x3,f=o.y3,v=d(l,f,u,h),c=d(i,s,l,f),p=d(u,h,i,s),m=v+c+p;return n.x=(i*v+u*c+l*p)/m,n.y=(s*v+h*c+f*p)/m,n};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return function(r,o,n,i){var s=e.getPixelAlpha(o,n,i.texture.key,i.frame.name);return s&&s>=d}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return{gameObject:e,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:d,hitAreaCallback:r,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o,n){this.pad=o,this.events=o.events,this.index=n,this.value=0,this.threshold=.1},update:function(r){this.value=r},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(239),r=new e({initialize:function(n,i){this.pad=n,this.events=n.manager,this.index=i,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var n=this.pad,i=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(d.BUTTON_DOWN,n,this,o),this.pad.emit(d.GAMEPAD_BUTTON_DOWN,i,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(d.BUTTON_UP,n,this,o),this.pad.emit(d.GAMEPAD_BUTTON_UP,i,o,this))},destroy:function(){this.pad=null,this.events=null}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(509),d=t(510),r=t(0),o=t(9),n=t(3),i=new r({Extends:o,initialize:function(u,h){o.call(this),this.manager=u,this.pad=h,this.id=h.id,this.index=h.index;for(var l=[],f=0;f<h.buttons.length;f++)l.push(new d(this,f));this.buttons=l;var v=[];for(f=0;f<h.axes.length;f++)v.push(new e(this,f));this.axes=v,this.vibration=h.vibrationActuator;var c={value:0,pressed:!1};this._LCLeft=l[14]?l[14]:c,this._LCRight=l[15]?l[15]:c,this._LCTop=l[12]?l[12]:c,this._LCBottom=l[13]?l[13]:c,this._RCLeft=l[2]?l[2]:c,this._RCRight=l[1]?l[1]:c,this._RCTop=l[3]?l[3]:c,this._RCBottom=l[0]?l[0]:c,this._FBLeftTop=l[4]?l[4]:c,this._FBLeftBottom=l[6]?l[6]:c,this._FBRightTop=l[5]?l[5]:c,this._FBRightBottom=l[7]?l[7]:c;var p={value:0};this._HAxisLeft=v[0]?v[0]:p,this._VAxisLeft=v[1]?v[1]:p,this._HAxisRight=v[2]?v[2]:p,this._VAxisRight=v[3]?v[3]:p,this.leftStick=new n,this.rightStick=new n,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(s){return this.axes[s].getValue()},setAxisThreshold:function(s){for(var u=0;u<this.axes.length;u++)this.axes[u].threshold=s},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(s){return this.buttons[s].value},isButtonDown:function(s){return this.buttons[s].pressed},update:function(s){if(!(s.timestamp<this._created)){var u,h=this.buttons,l=s.buttons,f=h.length;for(u=0;u<f;u++)h[u].update(l[u].value);var v=this.axes,c=s.axes;for(f=v.length,u=0;u<f;u++)v[u].update(c[u]);f>=2&&(this.leftStick.set(v[0].getValue(),v[1].getValue()),f>=4&&this.rightStick.set(v[2].getValue(),v[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var s;for(s=0;s<this.buttons.length;s++)this.buttons[s].destroy();for(s=0;s<this.axes.length;s++)this.axes[s].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(9),r=t(154),o=new e({Extends:d,initialize:function(i,s){d.call(this),this.plugin=i,this.keyCode=s,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(n){return this.emitOnRepeat=n,this},onDown:function(n){this.originalEvent=n,this.enabled&&(this.altKey=n.altKey,this.ctrlKey=n.ctrlKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.location=n.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(r.DOWN,this,n):(this.isDown=!0,this.isUp=!1,this.timeDown=n.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(r.DOWN,this,n)))},onUp:function(n){this.originalEvent=n,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=n.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(r.UP,this,n))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(154),r=t(2),o=t(514),n=t(516),i=new e({initialize:function(u,h,l){if(l===void 0&&(l={}),h.length<2)return!1;this.manager=u,this.enabled=!0,this.keyCodes=[];for(var f=0;f<h.length;f++){var v=h[f];typeof v=="string"?this.keyCodes.push(v.toUpperCase().charCodeAt(0)):typeof v=="number"?this.keyCodes.push(v):v.hasOwnProperty("keyCode")&&this.keyCodes.push(v.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=r(l,"resetOnWrongKey",!0),this.maxKeyDelay=r(l,"maxKeyDelay",0),this.resetOnMatch=r(l,"resetOnMatch",!1),this.deleteOnMatch=r(l,"deleteOnMatch",!1);var c=this,p=function(m){if(!(c.matched||!c.enabled)){var y=o(m,c);y&&(c.manager.emit(d.COMBO_MATCH,c,m),c.resetOnMatch?n(c):c.deleteOnMatch&&c.destroy())}};this.onKeyDown=p,this.manager.on(d.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(d.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(515),d=function(r,o){if(o.matched)return!0;var n=!1,i=!1;if(r.keyCode===o.current)if(o.index>0&&o.maxKeyDelay>0){var s=o.timeLastMatched+o.maxKeyDelay;r.timeStamp<=s&&(i=!0,n=e(r,o))}else i=!0,n=e(r,o);return!i&&o.resetOnWrongKey&&(o.index=0,o.current=o.keyCodes[0]),n&&(o.timeLastMatched=r.timeStamp,o.matched=!0,o.timeMatched=r.timeStamp),n};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d.timeLastMatched=e.timeStamp,d.index++,d.index===d.size?!0:(d.current=d.keyCodes[d.index],!1)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(240),d=function(r,o){var n=e(o,r.xhrSettings),i=new XMLHttpRequest;if(i.open("GET",r.src,n.async,n.user,n.password),i.responseType=r.xhrSettings.responseType,i.timeout=n.timeout,n.headers)for(var s in n.headers)i.setRequestHeader(s,n.headers[s]);return n.header&&n.headerValue&&i.setRequestHeader(n.header,n.headerValue),n.requestedWith&&i.setRequestHeader("X-Requested-With",n.requestedWith),n.overrideMimeType&&i.overrideMimeType(n.overrideMimeType),n.withCredentials&&(i.withCredentials=!0),i.onload=r.onLoad.bind(r,i),i.onerror=r.onError.bind(r,i),i.onprogress=r.onProgress.bind(r),i.send(),i};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(519),s=t(7),u=new e({Extends:r,initialize:function(l,f,v,c,p){if(s(f)){var m=f;f=n(m,"key"),c=n(m,"xhrSettings"),p=n(m,"context",p)}var y={type:"audio",cache:l.cacheManager.audio,extension:v.type,responseType:"arraybuffer",key:f,url:v.url,xhrSettings:c,config:{context:p}};r.call(this,l,y)},onProcess:function(){this.state=d.FILE_PROCESSING;var h=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(l){h.data=l,h.onProcessComplete()},function(l){console.error("Error decoding audio: "+h.key+" - ",l?l.message:null),h.onProcessError()}),this.config.context=null}});u.create=function(h,l,f,v,c){var p=h.systems.game,m=p.config.audio,y=p.device.audio;s(l)&&(f=n(l,"url",[]),v=n(l,"config",{}));var T=u.getAudioURL(p,f);return T?y.webAudio&&!m.disableWebAudio?new u(h,l,T,c,p.sound.context):new i(h,l,T,v):null},u.getAudioURL=function(h,l){Array.isArray(l)||(l=[l]);for(var f=0;f<l.length;f++){var v=n(l[f],"url",l[f]);if(v.indexOf("blob:")===0||v.indexOf("data:")===0)return{url:v,type:""};var c=v.match(/\.([a-zA-Z0-9]+)($|\?)/);if(c=n(l[f],"type",c?c[1]:"").toLowerCase(),h.device.audio[c])return{url:v,type:c}}return null},o.register("audio",function(h,l,f,v){var c=this.systems.game,p=c.config.audio,m=c.device.audio;if(p.noAudio||!m.webAudio&&!m.audioData)return this;var y;if(Array.isArray(h))for(var T=0;T<h.length;T++)y=u.create(this,h[T]),y&&this.addFile(y);else y=u.create(this,h,l,f,v),y&&this.addFile(y);return this}),a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(95),r=t(23),o=t(2),n=t(155),i=t(7),s=new e({Extends:r,initialize:function(h,l,f,v){if(i(l)){var c=l;l=o(c,"key"),v=o(c,"config",v)}var p={type:"audio",cache:h.cacheManager.audio,extension:f.type,key:l,url:f.url,config:v};r.call(this,h,p),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var u=0;u<this.data.length;u++){var h=this.data[u];h.oncanplaythrough=null,h.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(u){var h=u.target;h.oncanplaythrough=null,h.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(d.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var u=this.config&&this.config.instances||1;this.filesTotal=u,this.filesLoaded=0,this.percentComplete=0;for(var h=0;h<u;h++){var l=new Audio;l.dataset||(l.dataset={}),l.dataset.name=this.key+("0"+h).slice(-2),l.dataset.used="false",this.locked?l.dataset.locked="true":(l.dataset.locked="false",l.preload="auto",l.oncanplaythrough=this.onProgress.bind(this),l.onerror=this.onError.bind(this)),this.data.push(l)}for(h=0;h<this.data.length;h++)l=this.data[h],l.src=n(this,this.loader.baseURL),this.locked||l.load();this.locked&&setTimeout(this.onLoad.bind(this))}});a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=new e({Extends:r,initialize:function(h,l,f,v){var c="js";if(i(l)){var p=l;l=n(p,"key"),f=n(p,"url"),v=n(p,"xhrSettings"),c=n(p,"extension",c)}var m={type:"script",cache:!1,extension:c,responseType:"text",key:l,url:f,xhrSettings:v};r.call(this,h,m)},onProcess:function(){this.state=d.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",function(u,h,l){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new s(this,u[f]));else this.addFile(new s(this,u,h,l));return this}),a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(522),d=t(157),r=t(0),o=t(62),n=t(524),i=t(525),s=new r({initialize:function(h){this.world=h,this.scene=h.scene,this.sys=h.scene.sys},collider:function(u,h,l,f,v){return this.world.addCollider(u,h,l,f,v)},overlap:function(u,h,l,f,v){return this.world.addOverlap(u,h,l,f,v)},existing:function(u,h){var l=h?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(u,l),u},staticImage:function(u,h,l,f){var v=new e(this.scene,u,h,l,f);return this.sys.displayList.add(v),this.world.enableBody(v,o.STATIC_BODY),v},image:function(u,h,l,f){var v=new e(this.scene,u,h,l,f);return this.sys.displayList.add(v),this.world.enableBody(v,o.DYNAMIC_BODY),v},staticSprite:function(u,h,l,f){var v=new d(this.scene,u,h,l,f);return this.sys.displayList.add(v),this.sys.updateList.add(v),this.world.enableBody(v,o.STATIC_BODY),v},sprite:function(u,h,l,f){var v=new d(this.scene,u,h,l,f);return this.sys.displayList.add(v),this.sys.updateList.add(v),this.world.enableBody(v,o.DYNAMIC_BODY),v},staticGroup:function(u,h){return this.sys.updateList.add(new i(this.world,this.world.scene,u,h))},group:function(u,h){return this.sys.updateList.add(new n(this.world,this.world.scene,u,h))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(243),r=t(125),o=new e({Extends:r,Mixins:[d.Acceleration,d.Angular,d.Bounce,d.Debug,d.Drag,d.Enable,d.Friction,d.Gravity,d.Immovable,d.Mass,d.Pushable,d.Size,d.Velocity],initialize:function(i,s,u,h,l){r.call(this,i,s,u,h,l),this.body=null}});a.exports=o},function(a,x,t){var e=t(244),d=t(65),r=t(231),o=t(151),n=function(i,s,u,h,l,f){var v=e(i,s-h,u-h,2*h,2*h,l,f);if(v.length===0)return v;for(var c=new d(s,u,h),p=new d,m=[],y=0;y<v.length;y++){var T=v[y];T.isCircle?(p.setTo(T.center.x,T.center.y,T.halfWidth),r(c,p)&&m.push(T)):o(c,T)&&m.push(T)}return m};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(157),d=t(0),r=t(62),o=t(2),n=t(113),i=t(7),s=new d({Extends:n,initialize:function(h,l,f,v){if(!f&&!v)v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(i(f))v=f,f=null,v.internalCreateCallback=this.createCallbackHandler,v.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(f)&&i(f[0])){v=f[0];var c=this;f.forEach(function(p){p.internalCreateCallback=c.createCallbackHandler,p.internalRemoveCallback=c.removeCallbackHandler}),f=null}else v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=h,v.classType=o(v,"classType",e),this.physicsType=r.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:o(v,"collideWorldBounds",!1),setBoundsRectangle:o(v,"customBoundsRectangle",null),setAccelerationX:o(v,"accelerationX",0),setAccelerationY:o(v,"accelerationY",0),setAllowDrag:o(v,"allowDrag",!0),setAllowGravity:o(v,"allowGravity",!0),setAllowRotation:o(v,"allowRotation",!0),setBounceX:o(v,"bounceX",0),setBounceY:o(v,"bounceY",0),setDragX:o(v,"dragX",0),setDragY:o(v,"dragY",0),setEnable:o(v,"enable",!0),setGravityX:o(v,"gravityX",0),setGravityY:o(v,"gravityY",0),setFrictionX:o(v,"frictionX",0),setFrictionY:o(v,"frictionY",0),setMaxVelocityX:o(v,"maxVelocityX",1e4),setMaxVelocityY:o(v,"maxVelocityY",1e4),setVelocityX:o(v,"velocityX",0),setVelocityY:o(v,"velocityY",0),setAngularVelocity:o(v,"angularVelocity",0),setAngularAcceleration:o(v,"angularAcceleration",0),setAngularDrag:o(v,"angularDrag",0),setMass:o(v,"mass",1),setImmovable:o(v,"immovable",!1)},n.call(this,l,f,v),this.type="PhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,r.DYNAMIC_BODY);var h=u.body;for(var l in this.defaults)h[l](this.defaults[l])},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},setVelocity:function(u,h,l){l===void 0&&(l=0);for(var f=this.getChildren(),v=0;v<f.length;v++)f[v].body.velocity.set(u+v*l,h+v*l);return this},setVelocityX:function(u,h){h===void 0&&(h=0);for(var l=this.getChildren(),f=0;f<l.length;f++)l[f].body.velocity.x=u+f*h;return this},setVelocityY:function(u,h){h===void 0&&(h=0);for(var l=this.getChildren(),f=0;f<l.length;f++)l[f].body.velocity.y=u+f*h;return this}});a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(157),d=t(0),r=t(62),o=t(2),n=t(113),i=t(7),s=new d({Extends:n,initialize:function(h,l,f,v){!f&&!v?v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:e}:i(f)?(v=f,f=null,v.internalCreateCallback=this.createCallbackHandler,v.internalRemoveCallback=this.removeCallbackHandler,v.createMultipleCallback=this.createMultipleCallbackHandler,v.classType=o(v,"classType",e)):Array.isArray(f)&&i(f[0])?(v=f,f=null,v.forEach(function(c){c.internalCreateCallback=this.createCallbackHandler,c.internalRemoveCallback=this.removeCallbackHandler,c.createMultipleCallback=this.createMultipleCallbackHandler,c.classType=o(c,"classType",e)})):v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=h,this.physicsType=r.STATIC_BODY,n.call(this,l,f,v),this.type="StaticPhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,r.STATIC_BODY)},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var u=this.children.entries,h=0;h<u.length;h++)u[h].body.reset();return this}});a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(350),d=t(527),r=t(18),o=t(0),n=t(528),i=t(62),s=t(50),u=t(9),h=t(245),l=t(124),f=t(354),v=t(355),c=t(246),p=t(247),m=t(529),y=t(6),T=t(14),E=t(211),S=t(530),P=t(10),M=t(531),O=t(532),L=t(537),F=t(538),b=t(149),B=t(539),U=t(248),X=t(25),W=t(3),Z=t(68),J=new o({Extends:u,initialize:function(I,G){u.call(this),this.scene=I,this.bodies=new b,this.staticBodies=new b,this.pendingDestroy=new b,this.colliders=new E,this.gravity=new W(y(G,"gravity.x",0),y(G,"gravity.y",0)),this.bounds=new P(y(G,"x",0),y(G,"y",0),y(G,"width",I.sys.scale.width),y(G,"height",I.sys.scale.height)),this.checkCollision={up:y(G,"checkCollision.up",!0),down:y(G,"checkCollision.down",!0),left:y(G,"checkCollision.left",!0),right:y(G,"checkCollision.right",!0)},this.fps=y(G,"fps",60),this.fixedStep=y(G,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=y(G,"timeScale",1),this.OVERLAP_BIAS=y(G,"overlapBias",4),this.TILE_BIAS=y(G,"tileBias",16),this.forceX=y(G,"forceX",!1),this.isPaused=y(G,"isPaused",!1),this._total=0,this.drawDebug=y(G,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:y(G,"debugShowBody",!0),debugShowStaticBody:y(G,"debugShowStaticBody",!0),debugShowVelocity:y(G,"debugShowVelocity",!0),bodyDebugColor:y(G,"debugBodyColor",16711935),staticBodyDebugColor:y(G,"debugStaticBodyColor",255),velocityDebugColor:y(G,"debugVelocityColor",65280)},this.maxEntries=y(G,"maxEntries",16),this.useTree=y(G,"useTree",!0),this.tree=new M(this.maxEntries),this.staticTree=new M(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new X,this._tempMatrix2=new X,this.drawDebug&&this.createDebugGraphic()},enable:function(N,I){I===void 0&&(I=i.DYNAMIC_BODY),Array.isArray(N)||(N=[N]);for(var G=0;G<N.length;G++){var V=N[G];if(V.isParent)for(var Y=V.getChildren(),z=0;z<Y.length;z++){var H=Y[z];H.isParent?this.enable(H,I):this.enableBody(H,I)}else this.enableBody(V,I)}},enableBody:function(N,I){return I===void 0&&(I=i.DYNAMIC_BODY),N.body||(I===i.DYNAMIC_BODY?N.body=new d(this,N):I===i.STATIC_BODY&&(N.body=new B(this,N))),this.add(N.body),N},add:function(N){return N.physicsType===i.DYNAMIC_BODY?this.bodies.set(N):N.physicsType===i.STATIC_BODY&&(this.staticBodies.set(N),this.staticTree.insert(N)),N.enable=!0,N},disable:function(N){Array.isArray(N)||(N=[N]);for(var I=0;I<N.length;I++){var G=N[I];if(G.isParent)for(var V=G.getChildren(),Y=0;Y<V.length;Y++){var z=V[Y];z.isParent?this.disable(z):this.disableBody(z.body)}else this.disableBody(G.body)}},disableBody:function(N){this.remove(N),N.enable=!1},remove:function(N){N.physicsType===i.DYNAMIC_BODY?(this.tree.remove(N),this.bodies.delete(N)):N.physicsType===i.STATIC_BODY&&(this.staticBodies.delete(N),this.staticTree.remove(N))},createDebugGraphic:function(){var N=this.scene.sys.add.graphics({x:0,y:0});return N.setDepth(Number.MAX_VALUE),this.debugGraphic=N,this.drawDebug=!0,N},setBounds:function(N,I,G,V,Y,z,H,$){return this.bounds.setTo(N,I,G,V),Y!==void 0&&this.setBoundsCollision(Y,z,H,$),this},setBoundsCollision:function(N,I,G,V){return N===void 0&&(N=!0),I===void 0&&(I=!0),G===void 0&&(G=!0),V===void 0&&(V=!0),this.checkCollision.left=N,this.checkCollision.right=I,this.checkCollision.up=G,this.checkCollision.down=V,this},pause:function(){return this.isPaused=!0,this.emit(h.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(h.RESUME),this},addCollider:function(N,I,G,V,Y){G===void 0&&(G=null),V===void 0&&(V=null),Y===void 0&&(Y=G);var z=new n(this,!1,N,I,G,V,Y);return this.colliders.add(z),z},addOverlap:function(N,I,G,V,Y){G===void 0&&(G=null),V===void 0&&(V=null),Y===void 0&&(Y=G);var z=new n(this,!0,N,I,G,V,Y);return this.colliders.add(z),z},removeCollider:function(N){return this.colliders.remove(N),this},setFPS:function(N){return this.fps=N,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(N,I){if(!(this.isPaused||this.bodies.size===0)){var G,V=this._frameTime,Y=this._frameTimeMS*this.timeScale;this._elapsed+=I;var z,H=this.bodies.entries,$=this._elapsed>=Y;for(this.fixedStep||(V=I*.001,$=!0,this._elapsed=0),G=0;G<H.length;G++)z=H[G],z.enable&&z.preUpdate($,V);if($){this._elapsed-=Y,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(H));var Q=this.colliders.update();for(G=0;G<Q.length;G++){var k=Q[G];k.active&&k.update()}this.emit(h.WORLD_STEP,V)}for(;this._elapsed>=Y;)this._elapsed-=Y,this.step(V)}},step:function(N){var I,G,V=this.bodies.entries,Y=V.length;for(I=0;I<Y;I++)G=V[I],G.enable&&G.update(N);this.useTree&&(this.tree.clear(),this.tree.load(V));var z=this.colliders.update();for(I=0;I<z.length;I++){var H=z[I];H.active&&H.update()}this.emit(h.WORLD_STEP,N),this.stepsLastFrame++},postUpdate:function(){var N,I,G=this.bodies.entries,V=G.length,Y=this.bodies,z=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,N=0;N<V;N++)I=G[N],I.enable&&I.postUpdate();if(this.drawDebug){var H=this.debugGraphic;for(H.clear(),N=0;N<V;N++)I=G[N],I.willDrawDebug()&&I.drawDebug(H);for(G=z.entries,V=G.length,N=0;N<V;N++)I=G[N],I.willDrawDebug()&&I.drawDebug(H)}var $=this.pendingDestroy;if($.size>0){var Q=this.tree,k=this.staticTree;for(G=$.entries,V=G.length,N=0;N<V;N++)I=G[N],I.physicsType===i.DYNAMIC_BODY?(Q.remove(I),Y.delete(I)):I.physicsType===i.STATIC_BODY&&(k.remove(I),z.delete(I)),I.world=void 0,I.gameObject=void 0;$.clear()}},updateMotion:function(N,I){N.allowRotation&&this.computeAngularVelocity(N,I),this.computeVelocity(N,I)},computeAngularVelocity:function(N,I){var G=N.angularVelocity,V=N.angularAcceleration,Y=N.angularDrag,z=N.maxAngular;V?G+=V*I:N.allowDrag&&Y&&(Y*=I,f(G-Y,0,.1)?G-=Y:v(G+Y,0,.1)?G+=Y:G=0),G=r(G,-z,z);var H=G-N.angularVelocity;N.angularVelocity+=H,N.rotation+=N.angularVelocity*I},computeVelocity:function(N,I){var G=N.velocity.x,V=N.acceleration.x,Y=N.drag.x,z=N.maxVelocity.x,H=N.velocity.y,$=N.acceleration.y,Q=N.drag.y,k=N.maxVelocity.y,tt=N.speed,it=N.maxSpeed,st=N.allowDrag,ot=N.useDamping;N.allowGravity&&(G+=(this.gravity.x+N.gravity.x)*I,H+=(this.gravity.y+N.gravity.y)*I),V?G+=V*I:st&&Y&&(ot?(Y=Math.pow(Y,I),G*=Y,tt=Math.sqrt(G*G+H*H),l(tt,0,.001)&&(G=0)):(Y*=I,f(G-Y,0,.01)?G-=Y:v(G+Y,0,.01)?G+=Y:G=0)),$?H+=$*I:st&&Q&&(ot?(Q=Math.pow(Q,I),H*=Q,tt=Math.sqrt(G*G+H*H),l(tt,0,.001)&&(H=0)):(Q*=I,f(H-Q,0,.01)?H-=Q:v(H+Q,0,.01)?H+=Q:H=0)),G=r(G,-z,z),H=r(H,-k,k),N.velocity.set(G,H),it>-1&&tt>it&&(N.velocity.normalize().scale(it),tt=it),N.speed=tt},separate:function(N,I,G,V,Y,z){if(!z&&!N.enable||!I.enable||N.checkCollision.none||I.checkCollision.none||!this.intersects(N,I)||G&&G.call(V,N.gameObject,I.gameObject)===!1)return!1;if(N.isCircle&&I.isCircle)return this.separateCircle(N,I,Y);if(N.isCircle!==I.isCircle){var H=N.isCircle?I:N,$=N.isCircle?N:I,Q={x:H.x,y:H.y,right:H.right,bottom:H.bottom},k=$.center;if((k.y<Q.y||k.y>Q.bottom)&&(k.x<Q.x||k.x>Q.right))return this.separateCircle(N,I,Y)}var tt=!1,it=!1;Y?(tt=L(N,I,Y,this.OVERLAP_BIAS),it=F(N,I,Y,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+N.gravity.y)<Math.abs(this.gravity.x+N.gravity.x)?(tt=L(N,I,Y,this.OVERLAP_BIAS),this.intersects(N,I)&&(it=F(N,I,Y,this.OVERLAP_BIAS))):(it=F(N,I,Y,this.OVERLAP_BIAS),this.intersects(N,I)&&(tt=L(N,I,Y,this.OVERLAP_BIAS)));var st=tt||it;return st&&(Y?(N.onOverlap||I.onOverlap)&&this.emit(h.OVERLAP,N.gameObject,I.gameObject,N,I):(N.onCollide||I.onCollide)&&this.emit(h.COLLIDE,N.gameObject,I.gameObject,N,I)),st},separateCircle:function(N,I,G,V){c(N,I,!1,V),p(N,I,!1,V);var Y=0;if(N.isCircle!==I.isCircle){var z={x:I.isCircle?N.position.x:I.position.x,y:I.isCircle?N.position.y:I.position.y,right:I.isCircle?N.right:I.right,bottom:I.isCircle?N.bottom:I.bottom},H={x:N.isCircle?N.center.x:I.center.x,y:N.isCircle?N.center.y:I.center.y,radius:N.isCircle?N.halfWidth:I.halfWidth};H.y<z.y?H.x<z.x?Y=s(H.x,H.y,z.x,z.y)-H.radius:H.x>z.right&&(Y=s(H.x,H.y,z.right,z.y)-H.radius):H.y>z.bottom&&(H.x<z.x?Y=s(H.x,H.y,z.x,z.bottom)-H.radius:H.x>z.right&&(Y=s(H.x,H.y,z.right,z.bottom)-H.radius)),Y*=-1}else Y=N.halfWidth+I.halfWidth-s(N.center.x,N.center.y,I.center.x,I.center.y);if(N.overlapR=Y,I.overlapR=Y,G||Y===0||N.immovable&&I.immovable||N.customSeparateX||I.customSeparateX)return Y!==0&&(N.onOverlap||I.onOverlap)&&this.emit(h.OVERLAP,N.gameObject,I.gameObject,N,I),Y!==0;var $=N.center.x-I.center.x,Q=N.center.y-I.center.y,k=Math.sqrt(Math.pow($,2)+Math.pow(Q,2)),tt=(I.center.x-N.center.x)/k||0,it=(I.center.y-N.center.y)/k||0,st=2*(N.velocity.x*tt+N.velocity.y*it-I.velocity.x*tt-I.velocity.y*it)/(N.mass+I.mass);(N.immovable||I.immovable)&&(st*=2),N.immovable||(N.velocity.x=N.velocity.x-st/N.mass*tt,N.velocity.y=N.velocity.y-st/N.mass*it),I.immovable||(I.velocity.x=I.velocity.x+st/I.mass*tt,I.velocity.y=I.velocity.y+st/I.mass*it),!N.immovable&&!I.immovable&&(Y/=2);var ot=e(N.center,I.center),rt=(Y+T.EPSILON)*Math.cos(ot),ut=(Y+T.EPSILON)*Math.sin(ot);return N.immovable||(N.x-=rt,N.y-=ut,N.updateCenter()),I.immovable||(I.x+=rt,I.y+=ut,I.updateCenter()),N.velocity.x*=N.bounce.x,N.velocity.y*=N.bounce.y,I.velocity.x*=I.bounce.x,I.velocity.y*=I.bounce.y,(N.onCollide||I.onCollide)&&this.emit(h.COLLIDE,N.gameObject,I.gameObject,N,I),!0},intersects:function(N,I){return N===I?!1:!N.isCircle&&!I.isCircle?!(N.right<=I.position.x||N.bottom<=I.position.y||N.position.x>=I.right||N.position.y>=I.bottom):N.isCircle?I.isCircle?s(N.center.x,N.center.y,I.center.x,I.center.y)<=N.halfWidth+I.halfWidth:this.circleBodyIntersects(N,I):this.circleBodyIntersects(I,N)},circleBodyIntersects:function(N,I){var G=r(N.center.x,I.left,I.right),V=r(N.center.y,I.top,I.bottom),Y=(N.center.x-G)*(N.center.x-G),z=(N.center.y-V)*(N.center.y-V);return Y+z<=N.halfWidth*N.halfWidth},overlap:function(N,I,G,V,Y){return G===void 0&&(G=null),V===void 0&&(V=null),Y===void 0&&(Y=G),this.collideObjects(N,I,G,V,Y,!0)},collide:function(N,I,G,V,Y){return G===void 0&&(G=null),V===void 0&&(V=null),Y===void 0&&(Y=G),this.collideObjects(N,I,G,V,Y,!1)},collideObjects:function(N,I,G,V,Y,z){var H,$;N.isParent&&N.physicsType===void 0&&(N=N.children.entries),I&&I.isParent&&I.physicsType===void 0&&(I=I.children.entries);var Q=Array.isArray(N),k=Array.isArray(I);if(this._total=0,!Q&&!k)this.collideHandler(N,I,G,V,Y,z);else if(!Q&&k)for(H=0;H<I.length;H++)this.collideHandler(N,I[H],G,V,Y,z);else if(Q&&!k)if(I)for(H=0;H<N.length;H++)this.collideHandler(N[H],I,G,V,Y,z);else for(H=0;H<N.length;H++){var tt=N[H];for($=H+1;$<N.length;$++)H!==$&&this.collideHandler(tt,N[$],G,V,Y,z)}else for(H=0;H<N.length;H++)for($=0;$<I.length;$++)this.collideHandler(N[H],I[$],G,V,Y,z);return this._total>0},collideHandler:function(N,I,G,V,Y,z){if(I===void 0&&N.isParent)return this.collideGroupVsGroup(N,N,G,V,Y,z);if(!N||!I)return!1;if(N.body){if(I.body)return this.collideSpriteVsSprite(N,I,G,V,Y,z);if(I.isParent)return this.collideSpriteVsGroup(N,I,G,V,Y,z);if(I.isTilemap)return this.collideSpriteVsTilemapLayer(N,I,G,V,Y,z)}else if(N.isParent){if(I.body)return this.collideSpriteVsGroup(I,N,G,V,Y,z);if(I.isParent)return this.collideGroupVsGroup(N,I,G,V,Y,z);if(I.isTilemap)return this.collideGroupVsTilemapLayer(N,I,G,V,Y,z)}else if(N.isTilemap){if(I.body)return this.collideSpriteVsTilemapLayer(I,N,G,V,Y,z);if(I.isParent)return this.collideGroupVsTilemapLayer(I,N,G,V,Y,z)}},collideSpriteVsSprite:function(N,I,G,V,Y,z){return!N.body||!I.body?!1:(this.separate(N.body,I.body,V,Y,z)&&(G&&G.call(Y,N,I),this._total++),!0)},collideSpriteVsGroup:function(N,I,G,V,Y,z){var H=N.body;if(!(I.length===0||!H||!H.enable||H.checkCollision.none)){var $,Q,k;if(this.useTree||I.physicsType===i.STATIC_BODY){var tt=this.treeMinMax;tt.minX=H.left,tt.minY=H.top,tt.maxX=H.right,tt.maxY=H.bottom;var it=I.physicsType===i.DYNAMIC_BODY?this.tree.search(tt):this.staticTree.search(tt);for(Q=it.length,$=0;$<Q;$++)k=it[$],!(H===k||!k.enable||k.checkCollision.none||!I.contains(k.gameObject))&&this.separate(H,k,V,Y,z,!0)&&(G&&G.call(Y,H.gameObject,k.gameObject),this._total++)}else{var st=I.getChildren(),ot=I.children.entries.indexOf(N);for(Q=st.length,$=0;$<Q;$++)k=st[$].body,!(!k||$===ot||!k.enable)&&this.separate(H,k,V,Y,z)&&(G&&G.call(Y,H.gameObject,k.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(N,I,G,V,Y,z){var H=N.getChildren();if(H.length===0)return!1;for(var $=!1,Q=0;Q<H.length;Q++)H[Q].body&&this.collideSpriteVsTilemapLayer(H[Q],I,G,V,Y,z)&&($=!0);return $},collideTiles:function(N,I,G,V,Y){return!N.body.enable||I.length===0?!1:this.collideSpriteVsTilesHandler(N,I,G,V,Y,!1,!1)},overlapTiles:function(N,I,G,V,Y){return!N.body.enable||I.length===0?!1:this.collideSpriteVsTilesHandler(N,I,G,V,Y,!0,!1)},collideSpriteVsTilemapLayer:function(N,I,G,V,Y,z){var H=N.body;if(!H.enable||H.checkCollision.none)return!1;var $=H.position.x,Q=H.position.y,k=H.width,tt=H.height,it=I.layer;if(it.tileWidth>it.baseTileWidth){var st=(it.tileWidth-it.baseTileWidth)*I.scaleX;$-=st,k+=st}if(it.tileHeight>it.baseTileHeight){var ot=(it.tileHeight-it.baseTileHeight)*I.scaleY;tt+=ot}var rt=m($,Q,k,tt,null,I.scene.cameras.main,I.layer);return rt.length===0?!1:this.collideSpriteVsTilesHandler(N,rt,G,V,Y,z,!0)},collideSpriteVsTilesHandler:function(N,I,G,V,Y,z,H){for(var $=N.body,Q,k={left:0,right:0,top:0,bottom:0},tt,it=!1,st=0;st<I.length;st++){Q=I[st],tt=Q.tilemapLayer;var ot=tt.tileToWorldXY(Q.x,Q.y);k.left=ot.x,k.top=ot.y,Q.baseHeight!==Q.height&&(k.top-=(Q.height-Q.baseHeight)*tt.scaleY),k.right=k.left+Q.width*tt.scaleX,k.bottom=k.top+Q.height*tt.scaleY,U(k,$)&&(!V||V.call(Y,N,Q))&&S(Q,N)&&(z||O(st,$,Q,k,tt,this.TILE_BIAS,H))&&(this._total++,it=!0,G&&G.call(Y,N,Q),z&&$.onOverlap?this.emit(h.TILE_OVERLAP,N,Q,$):$.onCollide&&this.emit(h.TILE_COLLIDE,N,Q,$))}return it},collideGroupVsGroup:function(N,I,G,V,Y,z){if(!(N.length===0||I.length===0))for(var H=N.getChildren(),$=0;$<H.length;$++)this.collideSpriteVsGroup(H[$],I,G,V,Y,z)},wrap:function(N,I){N.body?this.wrapObject(N,I):N.getChildren?this.wrapArray(N.getChildren(),I):Array.isArray(N)?this.wrapArray(N,I):this.wrapObject(N,I)},wrapArray:function(N,I){for(var G=0;G<N.length;G++)this.wrapObject(N[G],I)},wrapObject:function(N,I){I===void 0&&(I=0),N.x=Z(N.x,this.bounds.left-I,this.bounds.right+I),N.y=Z(N.y,this.bounds.top-I,this.bounds.bottom+I)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});a.exports=J},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(62),r=t(245),o=t(196),n=t(10),i=t(57),s=t(3),u=new e({initialize:function(l,f){var v=f.displayWidth?f.displayWidth:64,c=f.displayHeight?f.displayHeight:64;this.world=l,this.gameObject=f,this.transform={x:f.x,y:f.y,rotation:f.angle,scaleX:f.scaleX,scaleY:f.scaleY,displayOriginX:f.displayOriginX,displayOriginY:f.displayOriginY},this.debugShowBody=l.defaults.debugShowBody,this.debugShowVelocity=l.defaults.debugShowVelocity,this.debugBodyColor=l.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new s,this.position=new s(f.x-f.scaleX*f.displayOriginX,f.y-f.scaleY*f.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=f.angle,this.preRotation=f.angle,this.width=v,this.height=c,this.sourceWidth=v,this.sourceHeight=c,f.frame&&(this.sourceWidth=f.frame.realWidth,this.sourceHeight=f.frame.realHeight),this.halfWidth=Math.abs(v/2),this.halfHeight=Math.abs(c/2),this.center=new s(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new s,this.newVelocity=new s,this.deltaMax=new s,this.acceleration=new s,this.allowDrag=!0,this.drag=new s,this.allowGravity=!0,this.gravity=new s,this.bounce=new s,this.worldBounce=null,this.customBoundsRectangle=l.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new s(1e4,1e4),this.maxSpeed=-1,this.friction=new s(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=d.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=d.DYNAMIC_BODY,this._sx=f.scaleX,this._sy=f.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new n},updateBounds:function(){var h=this.gameObject,l=this.transform;if(h.parentContainer){var f=h.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);l.x=f.tx,l.y=f.ty,l.rotation=o(f.rotation),l.scaleX=f.scaleX,l.scaleY=f.scaleY,l.displayOriginX=h.displayOriginX,l.displayOriginY=h.displayOriginY}else l.x=h.x,l.y=h.y,l.rotation=h.angle,l.scaleX=h.scaleX,l.scaleY=h.scaleY,l.displayOriginX=h.displayOriginX,l.displayOriginY=h.displayOriginY;var v=!1;if(this.syncBounds){var c=h.getBounds(this._bounds);this.width=c.width,this.height=c.height,v=!0}else{var p=Math.abs(l.scaleX),m=Math.abs(l.scaleY);(this._sx!==p||this._sy!==m)&&(this.width=this.sourceWidth*p,this.height=this.sourceHeight*m,this._sx=p,this._sy=m,v=!0)}v&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var h=this.transform;this.position.x=h.x+h.scaleX*(this.offset.x-h.displayOriginX),this.position.y=h.y+h.scaleY*(this.offset.y-h.displayOriginY),this.updateCenter()},resetFlags:function(h){h===void 0&&(h=!1);var l=this.wasTouching,f=this.touching,v=this.blocked;h?(l.none=!0,l.up=!1,l.down=!1,l.left=!1,l.right=!1):(l.none=f.none,l.up=f.up,l.down=f.down,l.left=f.left,l.right=f.right),f.none=!0,f.up=!1,f.down=!1,f.left=!1,f.right=!1,v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(h,l){h&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),h&&this.update(l)},update:function(h){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,h);var l=this.velocity.x,f=this.velocity.y;this.newVelocity.set(l*h,f*h),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(f,l),this.speed=Math.sqrt(l*l+f*f),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(r.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var h=this.position.x-this.prevFrame.x,l=this.position.y-this.prevFrame.y;if(this.moves){var f=this.deltaMax.x,v=this.deltaMax.y;f!==0&&h!==0&&(h<0&&h<-f?h=-f:h>0&&h>f&&(h=f)),v!==0&&l!==0&&(l<0&&l<-v?l=-v:l>0&&l>v&&(l=v)),this.gameObject.x+=h,this.gameObject.y+=l}h<0?this.facing=d.FACING_LEFT:h>0&&(this.facing=d.FACING_RIGHT),l<0?this.facing=d.FACING_UP:l>0&&(this.facing=d.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=h,this._ty=l},setBoundsRectangle:function(h){return this.customBoundsRectangle=h||this.world.bounds,this},checkWorldBounds:function(){var h=this.position,l=this.customBoundsRectangle,f=this.world.checkCollision,v=this.worldBounce?-this.worldBounce.x:-this.bounce.x,c=this.worldBounce?-this.worldBounce.y:-this.bounce.y,p=!1;return h.x<l.x&&f.left?(h.x=l.x,this.velocity.x*=v,this.blocked.left=!0,p=!0):this.right>l.right&&f.right&&(h.x=l.right-this.width,this.velocity.x*=v,this.blocked.right=!0,p=!0),h.y<l.y&&f.up?(h.y=l.y,this.velocity.y*=c,this.blocked.up=!0,p=!0):this.bottom>l.bottom&&f.down&&(h.y=l.bottom-this.height,this.velocity.y*=c,this.blocked.down=!0,p=!0),p&&(this.blocked.none=!1,this.updateCenter()),p},setOffset:function(h,l){return l===void 0&&(l=h),this.offset.set(h,l),this},setSize:function(h,l,f){f===void 0&&(f=!0);var v=this.gameObject;if(!h&&v.frame&&(h=v.frame.realWidth),!l&&v.frame&&(l=v.frame.realHeight),this.sourceWidth=h,this.sourceHeight=l,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),f&&v.getCenter){var c=(v.width-h)/2,p=(v.height-l)/2;this.offset.set(c,p)}return this.isCircle=!1,this.radius=0,this},setCircle:function(h,l,f){return l===void 0&&(l=this.offset.x),f===void 0&&(f=this.offset.y),h>0?(this.isCircle=!0,this.radius=h,this.sourceWidth=h*2,this.sourceHeight=h*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(l,f),this.updateCenter()):this.isCircle=!1,this},reset:function(h,l){this.stop();var f=this.gameObject;f.setPosition(h,l),f.getTopLeft?f.getTopLeft(this.position):this.position.set(h,l),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=f.angle,this.preRotation=f.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(h){return h.x=this.x,h.y=this.y,h.right=this.right,h.bottom=this.bottom,h},hitTest:function(h,l){if(!this.isCircle)return i(this,h,l);if(this.radius>0&&h>=this.left&&h<=this.right&&l>=this.top&&l<=this.bottom){var f=(this.center.x-h)*(this.center.x-h),v=(this.center.y-l)*(this.center.y-l);return f+v<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(h){var l=this.position,f=l.x+this.halfWidth,v=l.y+this.halfHeight;this.debugShowBody&&(h.lineStyle(h.defaultStrokeWidth,this.debugBodyColor),this.isCircle?h.strokeCircle(f,v,this.width/2):(this.checkCollision.up&&h.lineBetween(l.x,l.y,l.x+this.width,l.y),this.checkCollision.right&&h.lineBetween(l.x+this.width,l.y,l.x+this.width,l.y+this.height),this.checkCollision.down&&h.lineBetween(l.x,l.y+this.height,l.x+this.width,l.y+this.height),this.checkCollision.left&&h.lineBetween(l.x,l.y,l.x,l.y+this.height))),this.debugShowVelocity&&(h.lineStyle(h.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),h.lineBetween(f,v,f+this.velocity.x/2,v+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(h,l,f,v){h===void 0&&(h=!0),this.collideWorldBounds=h;var c=l!==void 0,p=f!==void 0;return(c||p)&&(this.worldBounce||(this.worldBounce=new s),c&&(this.worldBounce.x=l),p&&(this.worldBounce.y=f)),v!==void 0&&(this.onWorldBounds=v),this},setVelocity:function(h,l){return this.velocity.set(h,l),h=this.velocity.x,l=this.velocity.y,this.speed=Math.sqrt(h*h+l*l),this},setVelocityX:function(h){this.velocity.x=h;var l=h,f=this.velocity.y;return this.speed=Math.sqrt(l*l+f*f),this},setVelocityY:function(h){this.velocity.y=h;var l=this.velocity.x,f=h;return this.speed=Math.sqrt(l*l+f*f),this},setMaxVelocity:function(h,l){return this.maxVelocity.set(h,l),this},setMaxVelocityX:function(h){return this.maxVelocity.x=h,this},setMaxVelocityY:function(h){return this.maxVelocity.y=h,this},setMaxSpeed:function(h){return this.maxSpeed=h,this},setBounce:function(h,l){return this.bounce.set(h,l),this},setBounceX:function(h){return this.bounce.x=h,this},setBounceY:function(h){return this.bounce.y=h,this},setAcceleration:function(h,l){return this.acceleration.set(h,l),this},setAccelerationX:function(h){return this.acceleration.x=h,this},setAccelerationY:function(h){return this.acceleration.y=h,this},setAllowDrag:function(h){return h===void 0&&(h=!0),this.allowDrag=h,this},setAllowGravity:function(h){return h===void 0&&(h=!0),this.allowGravity=h,this},setAllowRotation:function(h){return h===void 0&&(h=!0),this.allowRotation=h,this},setDrag:function(h,l){return this.drag.set(h,l),this},setDamping:function(h){return this.useDamping=h,this},setDragX:function(h){return this.drag.x=h,this},setDragY:function(h){return this.drag.y=h,this},setGravity:function(h,l){return this.gravity.set(h,l),this},setGravityX:function(h){return this.gravity.x=h,this},setGravityY:function(h){return this.gravity.y=h,this},setFriction:function(h,l){return this.friction.set(h,l),this},setFrictionX:function(h){return this.friction.x=h,this},setFrictionY:function(h){return this.friction.y=h,this},setAngularVelocity:function(h){return this.angularVelocity=h,this},setAngularAcceleration:function(h){return this.angularAcceleration=h,this},setAngularDrag:function(h){return this.angularDrag=h,this},setMass:function(h){return this.mass=h,this},setImmovable:function(h){return h===void 0&&(h=!0),this.immovable=h,this},setEnable:function(h){return h===void 0&&(h=!0),this.enable=h,this},processX:function(h,l,f,v){this.x+=h,this.updateCenter(),l!==null&&(this.velocity.x=l);var c=this.blocked;f&&(c.left=!0),v&&(c.right=!0)},processY:function(h,l,f,v){this.y+=h,this.updateCenter(),l!==null&&(this.velocity.y=l);var c=this.blocked;f&&(c.up=!0),v&&(c.down=!0)},x:{get:function(){return this.position.x},set:function(h){this.position.x=h}},y:{get:function(){return this.position.y},set:function(h){this.position.y=h}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o,n,i,s,u,h,l){this.world=o,this.name="",this.active=!0,this.overlapOnly=n,this.object1=i,this.object2=s,this.collideCallback=u,this.processCallback=h,this.callbackContext=l},setName:function(r){return this.name=r,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=t(3),r=new d,o=new d,n=function(i,s,u,h,l,f,v){var c=v.tilemapLayer.tilemap._convert.WorldToTileXY;c(i,s,!0,r,f,v);var p=r.x,m=r.y;c(i+u,s+h,!1,o,f,v);var y=Math.ceil(o.x),T=Math.ceil(o.y);return e(p,m,y-p,T-m,l,v)};a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,d,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,d,e):!0};a.exports=t},function(a,x,t){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(436);function d(T){if(!(this instanceof d))return new d(T);this._maxEntries=Math.max(4,T||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}d.prototype={all:function(){return this._all(this.data,[])},search:function(T){var E=this.data,S=[],P=this.toBBox;if(!p(T,E))return S;for(var M=[],O,L,F,b;E;){for(O=0,L=E.children.length;O<L;O++)F=E.children[O],b=E.leaf?P(F):F,p(T,b)&&(E.leaf?S.push(F):c(T,b)?this._all(F,S):M.push(F));E=M.pop()}return S},collides:function(T){var E=this.data,S=this.toBBox;if(!p(T,E))return!1;for(var P=[],M,O,L,F;E;){for(M=0,O=E.children.length;M<O;M++)if(L=E.children[M],F=E.leaf?S(L):L,p(T,F)){if(E.leaf||c(T,F))return!0;P.push(L)}E=P.pop()}return!1},load:function(T){if(!(T&&T.length))return this;if(T.length<this._minEntries){for(var E=0,S=T.length;E<S;E++)this.insert(T[E]);return this}var P=this._build(T.slice(),0,T.length-1,0);if(!this.data.children.length)this.data=P;else if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var M=this.data;this.data=P,P=M}this._insert(P,this.data.height-P.height-1,!0)}return this},insert:function(T){return T&&this._insert(T,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(T,E){if(!T)return this;for(var S=this.data,P=this.toBBox(T),M=[],O=[],L,F,b,B;S||M.length;){if(S||(S=M.pop(),F=M[M.length-1],L=O.pop(),B=!0),S.leaf&&(b=r(T,S.children,E),b!==-1))return S.children.splice(b,1),M.push(S),this._condense(M),this;!B&&!S.leaf&&c(S,P)?(M.push(S),O.push(L),L=0,F=S,S=S.children[0]):F?(L++,S=F.children[L],B=!1):S=null}return this},toBBox:function(T){return T},compareMinX:s,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(T){return this.data=T,this},_all:function(T,E){for(var S=[];T;)T.leaf?E.push.apply(E,T.children):S.push.apply(S,T.children),T=S.pop();return E},_build:function(T,E,S,P){var M=S-E+1,O=this._maxEntries,L;if(M<=O)return L=m(T.slice(E,S+1)),o(L,this.toBBox),L;P||(P=Math.ceil(Math.log(M)/Math.log(O)),O=Math.ceil(M/Math.pow(O,P-1))),L=m([]),L.leaf=!1,L.height=P;var F=Math.ceil(M/O),b=F*Math.ceil(Math.sqrt(O)),B,U,X,W;for(y(T,E,S,b,this.compareMinX),B=E;B<=S;B+=b)for(X=Math.min(B+b-1,S),y(T,B,X,F,this.compareMinY),U=B;U<=X;U+=F)W=Math.min(U+F-1,X),L.children.push(this._build(T,U,W,P-1));return o(L,this.toBBox),L},_chooseSubtree:function(T,E,S,P){for(var M,O,L,F,b,B,U,X;P.push(E),!(E.leaf||P.length-1===S);){for(U=X=1/0,M=0,O=E.children.length;M<O;M++)L=E.children[M],b=h(L),B=f(T,L)-b,B<X?(X=B,U=b<U?b:U,F=L):B===X&&b<U&&(U=b,F=L);E=F||E.children[0]}return E},_insert:function(T,E,S){var P=this.toBBox,M=S?T:P(T),O=[],L=this._chooseSubtree(M,this.data,E,O);for(L.children.push(T),i(L,M);E>=0&&O[E].children.length>this._maxEntries;)this._split(O,E),E--;this._adjustParentBBoxes(M,O,E)},_split:function(T,E){var S=T[E],P=S.children.length,M=this._minEntries;this._chooseSplitAxis(S,M,P);var O=this._chooseSplitIndex(S,M,P),L=m(S.children.splice(O,S.children.length-O));L.height=S.height,L.leaf=S.leaf,o(S,this.toBBox),o(L,this.toBBox),E?T[E-1].children.push(L):this._splitRoot(S,L)},_splitRoot:function(T,E){this.data=m([T,E]),this.data.height=T.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(T,E,S){var P,M,O,L,F,b,B,U;for(b=B=1/0,P=E;P<=S-E;P++)M=n(T,0,P,this.toBBox),O=n(T,P,S,this.toBBox),L=v(M,O),F=h(M)+h(O),L<b?(b=L,U=P,B=F<B?F:B):L===b&&F<B&&(B=F,U=P);return U},_chooseSplitAxis:function(T,E,S){var P=T.leaf?this.compareMinX:s,M=T.leaf?this.compareMinY:u,O=this._allDistMargin(T,E,S,P),L=this._allDistMargin(T,E,S,M);O<L&&T.children.sort(P)},_allDistMargin:function(T,E,S,P){T.children.sort(P);var M=this.toBBox,O=n(T,0,E,M),L=n(T,S-E,S,M),F=l(O)+l(L),b,B;for(b=E;b<S-E;b++)B=T.children[b],i(O,T.leaf?M(B):B),F+=l(O);for(b=S-E-1;b>=E;b--)B=T.children[b],i(L,T.leaf?M(B):B),F+=l(L);return F},_adjustParentBBoxes:function(T,E,S){for(var P=S;P>=0;P--)i(E[P],T)},_condense:function(T){for(var E=T.length-1,S;E>=0;E--)T[E].children.length===0?E>0?(S=T[E-1].children,S.splice(S.indexOf(T[E]),1)):this.clear():o(T[E],this.toBBox)},compareMinX:function(T,E){return T.left-E.left},compareMinY:function(T,E){return T.top-E.top},toBBox:function(T){return{minX:T.left,minY:T.top,maxX:T.right,maxY:T.bottom}}};function r(T,E,S){if(!S)return E.indexOf(T);for(var P=0;P<E.length;P++)if(S(T,E[P]))return P;return-1}function o(T,E){n(T,0,T.children.length,E,T)}function n(T,E,S,P,M){M||(M=m(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var O=E,L;O<S;O++)L=T.children[O],i(M,T.leaf?P(L):L);return M}function i(T,E){return T.minX=Math.min(T.minX,E.minX),T.minY=Math.min(T.minY,E.minY),T.maxX=Math.max(T.maxX,E.maxX),T.maxY=Math.max(T.maxY,E.maxY),T}function s(T,E){return T.minX-E.minX}function u(T,E){return T.minY-E.minY}function h(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function l(T){return T.maxX-T.minX+(T.maxY-T.minY)}function f(T,E){return(Math.max(E.maxX,T.maxX)-Math.min(E.minX,T.minX))*(Math.max(E.maxY,T.maxY)-Math.min(E.minY,T.minY))}function v(T,E){var S=Math.max(T.minX,E.minX),P=Math.max(T.minY,E.minY),M=Math.min(T.maxX,E.maxX),O=Math.min(T.maxY,E.maxY);return Math.max(0,M-S)*Math.max(0,O-P)}function c(T,E){return T.minX<=E.minX&&T.minY<=E.minY&&E.maxX<=T.maxX&&E.maxY<=T.maxY}function p(T,E){return E.minX<=T.maxX&&E.minY<=T.maxY&&E.maxX>=T.minX&&E.maxY>=T.minY}function m(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(T,E,S,P,M){for(var O=[E,S],L;O.length;)S=O.pop(),E=O.pop(),!(S-E<=P)&&(L=E+Math.ceil((S-E)/P/2)*P,e(T,L,E,S,M),O.push(E,L,L,S))}a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(533),d=t(535),r=t(248),o=function(n,i,s,u,h,l,f){var v=u.left,c=u.top,p=u.right,m=u.bottom,y=s.faceLeft||s.faceRight,T=s.faceTop||s.faceBottom;if(f||(y=!0,T=!0),!y&&!T)return!1;var E=0,S=0,P=0,M=1;if(i.deltaAbsX()>i.deltaAbsY()?P=-1:i.deltaAbsX()<i.deltaAbsY()&&(M=-1),i.deltaX()!==0&&i.deltaY()!==0&&y&&T&&(P=Math.min(Math.abs(i.position.x-p),Math.abs(i.right-v)),M=Math.min(Math.abs(i.position.y-m),Math.abs(i.bottom-c))),P<M){if(y&&(E=e(i,s,v,p,l,f),E!==0&&!r(u,i)))return!0;T&&(S=d(i,s,c,m,l,f))}else{if(T&&(S=d(i,s,c,m,l,f),S!==0&&!r(u,i)))return!0;y&&(E=e(i,s,v,p,l,f))}return E!==0||S!==0};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(534),d=function(r,o,n,i,s,u){var h=0,l=o.faceLeft,f=o.faceRight,v=o.collideLeft,c=o.collideRight;return u||(l=!0,f=!0,v=!0,c=!0),r.deltaX()<0&&c&&r.checkCollision.left?f&&r.x<i&&(h=r.x-i,h<-s&&(h=0)):r.deltaX()>0&&v&&r.checkCollision.right&&l&&r.right>n&&(h=r.right-n,h>s&&(h=0)),h!==0&&(r.customSeparateX?r.overlapX=h:e(r,h)),h};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){d<0?(e.blocked.none=!1,e.blocked.left=!0):d>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=d,e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(536),d=function(r,o,n,i,s,u){var h=0,l=o.faceTop,f=o.faceBottom,v=o.collideUp,c=o.collideDown;return u||(l=!0,f=!0,v=!0,c=!0),r.deltaY()<0&&c&&r.checkCollision.up?f&&r.y<i&&(h=r.y-i,h<-s&&(h=0)):r.deltaY()>0&&v&&r.checkCollision.down&&l&&r.bottom>n&&(h=r.bottom-n,h>s&&(h=0)),h!==0&&(r.customSeparateY?r.overlapY=h:e(r,h)),h};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){d<0?(e.blocked.none=!1,e.blocked.up=!0):d>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=d,e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(246),d=t(1389),r=function(o,n,i,s){var u=e(o,n,i,s),h=o.immovable,l=n.immovable;if(i||u===0||h&&l||o.customSeparateX||n.customSeparateX)return u!==0||o.embedded&&n.embedded;var f=d.Set(o,n,u);return!h&&!l?f>0?!0:d.Check():(h?d.RunImmovableBody1(f):l&&d.RunImmovableBody2(f),!0)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(247),d=t(1390),r=function(o,n,i,s){var u=e(o,n,i,s),h=o.immovable,l=n.immovable;if(i||u===0||h&&l||o.customSeparateY||n.customSeparateY)return u!==0||o.embedded&&n.embedded;var f=d.Set(o,n,u);return!h&&!l?f>0?!0:d.Check():(h?d.RunImmovableBody1(f):l&&d.RunImmovableBody2(f),!0)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),d=t(0),r=t(62),o=t(57),n=t(3),i=new d({initialize:function(u,h){var l=h.displayWidth?h.displayWidth:64,f=h.displayHeight?h.displayHeight:64;this.world=u,this.gameObject=h,this.debugShowBody=u.defaults.debugShowStaticBody,this.debugBodyColor=u.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new n,this.position=new n(h.x-l*h.originX,h.y-f*h.originY),this.width=l,this.height=f,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new n(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=n.ZERO,this.allowGravity=!1,this.gravity=n.ZERO,this.bounce=n.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=r.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(s,u){return s&&s!==this.gameObject&&(this.gameObject.body=null,s.body=this,this.gameObject=s),u&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var s=this.gameObject;return s.getTopLeft(this.position),this.width=s.displayWidth,this.height=s.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(s,u){return u===void 0&&(u=s),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(s,u),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(s,u,h){h===void 0&&(h=!0);var l=this.gameObject;if(!s&&l.frame&&(s=l.frame.realWidth),!u&&l.frame&&(u=l.frame.realHeight),this.world.staticTree.remove(this),this.width=s,this.height=u,this.halfWidth=Math.floor(s/2),this.halfHeight=Math.floor(u/2),h&&l.getCenter){var f=l.displayWidth/2,v=l.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(f-this.halfWidth,v-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(s,u,h){return u===void 0&&(u=this.offset.x),h===void 0&&(h=this.offset.y),s>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=s,this.width=s*2,this.height=s*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(u,h),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(s,u){var h=this.gameObject;s===void 0&&(s=h.x),u===void 0&&(u=h.y),this.world.staticTree.remove(this),h.setPosition(s,u),h.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(s){return s.x=this.x,s.y=this.y,s.right=this.right,s.bottom=this.bottom,s},hitTest:function(s,u){return this.isCircle?e(this,s,u):o(this,s,u)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(s){var u=this.position,h=u.x+this.halfWidth,l=u.y+this.halfHeight;this.debugShowBody&&(s.lineStyle(s.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?s.strokeCircle(h,l,this.width/2):s.strokeRect(u.x,u.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(s){return s<=0&&(s=.1),this.mass=s,this},x:{get:function(){return this.position.x},set:function(s){this.world.staticTree.remove(this),this.position.x=s,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(s){this.world.staticTree.remove(this),this.position.y=s,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});a.exports=i},function(a,x,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var e=t(0),d=new e({initialize:function(o){this.pluginManager=o,this.game=o.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),d=new e,r=function(o,n,i,s){var u=i.tilemapLayer,h=u.cullPaddingX,l=u.cullPaddingY,f=u.tilemap.tileToWorldXY(o,n,d,s,u);return f.x>s.worldView.x+u.scaleX*i.tileWidth*(-h-.5)&&f.x<s.worldView.right+u.scaleX*i.tileWidth*(h-.5)&&f.y>s.worldView.y+u.scaleY*i.tileHeight*(-l-1)&&f.y<s.worldView.bottom+u.scaleY*i.tileHeight*(l-.5)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=function(r,o,n,i,s,u,h){for(var l=e(n,i,s,u,null,h),f=0;f<l.length;f++)l[f]&&l[f].index===r&&(l[f].index=o)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),d=t(139),r=t(76),o=new e,n=function(i,s){var u=i.tilemapLayer.tilemap,h=i.tilemapLayer,l=Math.floor(u.tileWidth*h.scaleX),f=Math.floor(u.tileHeight*h.scaleY),v=r(s.worldView.x-h.x,l,0,!0)-h.cullPaddingX,c=d(s.worldView.right-h.x,l,0,!0)+h.cullPaddingX,p=r(s.worldView.y-h.y,f,0,!0)-h.cullPaddingY,m=d(s.worldView.bottom-h.y,f,0,!0)+h.cullPaddingY;return o.setTo(v,p,c-v,m-p)};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(543),d=t(159),r=function(o,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=0),i.length=0;var u=o.tilemapLayer,h=e(o,n);return(u.skipCull||u.scrollFactorX!==1||u.scrollFactorY!==1)&&(h.left=0,h.right=o.width,h.top=0,h.bottom=o.height),d(o,h,s,i),i};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(546),d=t(159),r=function(o,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=0),i.length=0;var u=o.tilemapLayer;if(!u.skipCull&&u.scrollFactorX===1&&u.scrollFactorY===1){var h=e(o,n);d(o,h,s,i)}return i};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(139),d=t(76),r=function(o,n){var i=o.tilemapLayer.tilemap,s=o.tilemapLayer,u=Math.floor(i.tileWidth*s.scaleX),h=Math.floor(i.tileHeight*s.scaleY),l=o.hexSideLength,f=(h-l)/2+l,v=d(n.worldView.x-s.x,u,0,!0)-s.cullPaddingX,c=e(n.worldView.right-s.x,u,0,!0)+s.cullPaddingX,p=d(n.worldView.y-s.y,f,0,!0)-s.cullPaddingY,m=e(n.worldView.bottom-s.y,f,0,!0)+s.cullPaddingY;return{left:v,right:c,top:p,bottom:m}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(541),d=function(r,o,n,i){n===void 0&&(n=[]),i===void 0&&(i=0),n.length=0;var s=r.tilemapLayer,u=r.data,h=r.width,l=r.height,f=0,v=h,c=0,p=l;if(!s.skipCull){var m,y,T;if(i===0){for(y=c;y<p;y++)for(m=f;u[y]&&m<v;m++)if(e(m,y,r,o)){if(T=u[y][m],!T||T.index===-1||!T.visible||T.alpha===0)continue;n.push(T)}}else if(i===1){for(y=c;y<p;y++)for(m=v;u[y]&&m>=f;m--)if(e(m,y,r,o)){if(T=u[y][m],!T||T.index===-1||!T.visible||T.alpha===0)continue;n.push(T)}}else if(i===2){for(y=p;y>=c;y--)for(m=f;u[y]&&m<v;m++)if(e(m,y,r,o)){if(T=u[y][m],!T||T.index===-1||!T.visible||T.alpha===0)continue;n.push(T)}}else if(i===3){for(y=p;y>=c;y--)for(m=v;u[y]&&m>=f;m--)if(e(m,y,r,o)){if(T=u[y][m],!T||T.index===-1||!T.visible||T.alpha===0)continue;n.push(T)}}}return s.tilesDrawn=n.length,s.tilesTotal=h*l,n};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(549),d=t(159),r=function(o,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=0),i.length=0;var u=o.tilemapLayer;if(!u.skipCull&&u.scrollFactorX===1&&u.scrollFactorY===1){var h=e(o,n);d(o,h,s,i)}return i};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(139),d=t(76),r=function(o,n){var i=o.tilemapLayer.tilemap,s=o.tilemapLayer,u=Math.floor(i.tileWidth*s.scaleX),h=Math.floor(i.tileHeight*s.scaleY),l=d(n.worldView.x-s.x,u,0,!0)-s.cullPaddingX,f=e(n.worldView.right-s.x,u,0,!0)+s.cullPaddingX,v=d(n.worldView.y-s.y,h/2,0,!0)-s.cullPaddingY,c=e(n.worldView.bottom-s.y,h/2,0,!0)+s.cullPaddingY;return{left:l,right:f,top:v,bottom:c}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),d=function(r,o,n,i,s){n||(n=new e);var u=s.baseTileWidth,h=s.baseTileHeight,l=s.tilemapLayer,f=0,v=0;l&&(i||(i=l.scene.cameras.main),f=l.x+i.scrollX*(1-l.scrollFactorX),u*=l.scaleX,v=l.y+i.scrollY*(1-l.scrollFactorY),h*=l.scaleY);var c=s.hexSideLength,p=(h-c)/2+c,m=f+r*u+o%2*(u/2),y=v+o*p;return n.set(m,y)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),d=function(r,o,n,i,s){n||(n=new e);var u=s.baseTileWidth,h=s.baseTileHeight,l=s.tilemapLayer,f=0,v=0;l&&(i||(i=l.scene.cameras.main),f=l.x+i.scrollX*(1-l.scrollFactorX),u*=l.scaleX,v=l.y+i.scrollY*(1-l.scrollFactorY),h*=l.scaleY);var c=f+(r-o)*(u/2),p=v+(r+o)*(h/2);return n.set(c,p)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),d=function(r,o,n,i,s){n||(n=new e);var u=s.baseTileWidth,h=s.baseTileHeight,l=s.tilemapLayer,f=0,v=0;l&&(i||(i=l.scene.cameras.main),f=l.x+i.scrollX*(1-l.scrollFactorX),u*=l.scaleX,v=l.y+i.scrollY*(1-l.scrollFactorY),h*=l.scaleY);var c=f+r*u+o%2*(u/2),p=v+o*(h/2);return n.set(c,p)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(253),d=t(254),r=t(3),o=function(n,i,s,u,h){return s||(s=new r(0,0)),s.x=e(n,u,h),s.y=d(i,u,h),s};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=r.baseTileHeight,n=r.tilemapLayer,i=0;n&&(d===void 0&&(d=n.scene.cameras.main),i=n.y+d.scrollY*(1-n.scrollFactorY),o*=n.scaleY);var s=n.tilemap.hexSideLength,u=(o-s)/2+s;return i+e*u};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=r.baseTileHeight,n=r.tilemapLayer,i=0;return n&&(d===void 0&&(d=n.scene.cameras.main),i=n.y+d.scrollY*(1-n.scrollFactorY),o*=n.scaleY),i+e*(o/2)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),d=function(r,o,n,i,s,u){i||(i=new e);var h=u.baseTileWidth,l=u.baseTileHeight,f=u.tilemapLayer;f&&(s||(s=f.scene.cameras.main),o=o-(f.y+s.scrollY*(1-f.scrollFactorY)),l*=f.scaleY,r=r-(f.x+s.scrollX*(1-f.scrollFactorX)),h*=f.scaleX);var v=u.hexSideLength,c=(l-v)/2+v,p=n?Math.floor(o/c):o/c,m=n?Math.floor((r-p%2*.5*h)/h):(r-p%2*.5*h)/h;return i.set(m,p)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),d=function(r,o,n,i,s,u){i||(i=new e);var h=u.baseTileWidth,l=u.baseTileHeight,f=u.tilemapLayer;f&&(s||(s=f.scene.cameras.main),o=o-(f.y+s.scrollY*(1-f.scrollFactorY)),l*=f.scaleY,r=r-(f.x+s.scrollX*(1-f.scrollFactorX)),h*=f.scaleX);var v=n?Math.floor((r/(h/2)+o/(l/2))/2):(r/(h/2)+o/(l/2))/2,c=n?Math.floor((o/(l/2)-r/(h/2))/2):(o/(l/2)-r/(h/2))/2;return i.set(v,c)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),d=function(r,o,n,i,s,u){i||(i=new e);var h=u.baseTileWidth,l=u.baseTileHeight,f=u.tilemapLayer;f&&(s||(s=f.scene.cameras.main),o=o-(f.y+s.scrollY*(1-f.scrollFactorY)),l*=f.scaleY,r=r-(f.x+s.scrollX*(1-f.scrollFactorX)),h*=f.scaleX);var v=n?Math.floor(o/(l/2)):o/(l/2),c=n?Math.floor((r+v%2*.5*h)/h):(r+v%2*.5*h)/h;return i.set(c,v)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(255),d=t(256),r=t(3),o=function(n,i,s,u,h,l){return s===void 0&&(s=!0),u||(u=new r(0,0)),u.x=e(n,s,h,l),u.y=d(i,s,h,l),u};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=o.baseTileHeight,i=o.tilemapLayer;i&&(r||(r=i.scene.cameras.main),e=e-(i.y+r.scrollY*(1-i.scrollFactorY)),n*=i.scaleY);var s=o.hexSideLength,u=(n-s)/2+s;return d?Math.floor(e/u):e/u};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=o.baseTileHeight,i=o.tilemapLayer;return i&&(r||(r=i.scene.cameras.main),e=e-(i.y+r.scrollY*(1-i.scrollFactorY)),n*=i.scaleY),d?Math.floor(e/(n/2)):e/(n/2)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(119),d=function(r,o,n){if(e(r,o,n)){var i=n.data[o][r];return i!==null&&i.index>-1}else return!1};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(85),d=t(119),r=t(252),o=function(n,i,s,u,h){if(s===void 0&&(s=!0),u===void 0&&(u=!0),!d(n,i,h))return null;var l=h.data[i][n];if(l)h.data[i][n]=s?null:new e(h,-1,n,i,h.tileWidth,h.tileHeight);else return null;return u&&l&&l.collides&&r(n,i,h),l};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),d=t(259),r=t(565),o=t(566),n=t(577),i=function(s,u,h,l,f,v){var c;switch(u){case e.ARRAY_2D:c=d(s,h,l,f,v);break;case e.CSV:c=r(s,h,l,f,v);break;case e.TILED_JSON:c=o(s,h,v);break;case e.WELTMEISTER:c=n(s,h,v);break;default:console.warn("Unrecognized tilemap data format: "+u),c=null}return c};a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),d=t(259),r=function(o,n,i,s,u){var h=n.trim().split(`
`).map(function(f){return f.split(",")}),l=d(o,h,i,s,u);return l.format=e.CSV,l};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(567),d=t(568),r=t(29),o=t(40),n=t(258),i=t(121),s=t(569),u=t(570),h=t(573),l=t(575),f=function(v,c,p){var m=new i({width:c.width,height:c.height,name:v,tileWidth:c.tilewidth,tileHeight:c.tileheight,orientation:n(c.orientation),format:o.TILED_JSON,version:c.version,properties:c.properties,renderOrder:c.renderorder,infinite:c.infinite});m.orientation===r.HEXAGONAL&&(m.hexSideLength=c.hexsidelength),m.layers=h(c,p),m.images=s(c);var y=l(c);return m.tilesets=y.tilesets,m.imageCollections=y.imageCollections,m.objects=u(c),m.tiles=d(m),e(m),m};a.exports=f},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),d=function(r){for(var o,n,i,s,u,h=0;h<r.layers.length;h++){o=r.layers[h],s=null;for(var l=0;l<o.data.length;l++){u=o.data[l];for(var f=0;f<u.length;f++)n=u[f],!(n===null||n.index<0)&&(i=r.tiles[n.index][2],s=r.tilesets[i],n.width=s.tileWidth,n.height=s.tileHeight,s.tileProperties&&s.tileProperties[n.index-s.firstgid]&&(n.properties=e(n.properties,s.tileProperties[n.index-s.firstgid])))}}};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(122),d=function(r){var o,n,i=[];for(o=0;o<r.imageCollections.length;o++)for(var s=r.imageCollections[o],u=s.images,h=0;h<u.length;h++){var l=u[h];n=new e(l.image,l.gid,s.imageWidth,s.imageHeight,0,0),n.updateTileData(s.imageWidth,s.imageHeight),r.tilesets.push(n)}for(o=0;o<r.tilesets.length;o++){n=r.tilesets[o];for(var f=n.tileMargin,v=n.tileMargin,c=0,p=0,m=0,y=n.firstgid;y<n.firstgid+n.total&&(i[y]=[f,v,o],f+=n.tileWidth+n.tileSpacing,c++,!(c===n.total||(p++,p===n.columns&&(f=n.tileMargin,v+=n.tileHeight+n.tileSpacing,p=0,m++,m===n.rows))));y++);}return i};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),d=t(161),r=function(o){for(var n=[],i=[],s=d(o);s.i<s.layers.length||i.length>0;){if(s.i>=s.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=i.pop();continue}var u=s.layers[s.i];if(s.i++,u.type!=="imagelayer"){if(u.type==="group"){var h=d(o,u,s);i.push(s),s=h}continue}var l=e(u,"offsetx",0)+e(u,"startx",0),f=e(u,"offsety",0)+e(u,"starty",0);n.push({name:s.name+u.name,image:u.image,x:s.x+l+u.x,y:s.y+f+u.y,alpha:s.opacity*u.opacity,visible:s.visible&&u.visible,properties:e(u,"properties",{})})}return n};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),d=t(260),r=t(572),o=t(161),n=function(i){for(var s=[],u=[],h=o(i);h.i<h.layers.length||u.length>0;){if(h.i>=h.layers.length){if(u.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}h=u.pop();continue}var l=h.layers[h.i];if(h.i++,l.opacity*=h.opacity,l.visible=h.visible&&l.visible,l.type!=="objectgroup"){if(l.type==="group"){var f=o(i,l,h);u.push(h),h=f}continue}l.name=h.name+l.name;for(var v=h.x+e(l,"startx",0)+e(l,"offsetx",0),c=h.y+e(l,"starty",0)+e(l,"offsety",0),p=[],m=0;m<l.objects.length;m++){var y=d(l.objects[m],v,c);p.push(y)}var T=new r(l);T.objects=p,s.push(T)}return s};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(126),d=function(r,o){for(var n={},i=0;i<o.length;i++){var s=o[i];e(r,s)&&(n[s]=r[s])}return n};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(2),r=new e({initialize:function(n){n===void 0&&(n={}),this.name=d(n,"name","object layer"),this.opacity=d(n,"opacity",1),this.properties=d(n,"properties",{}),this.propertyTypes=d(n,"propertytypes",{}),this.type=d(n,"type","objectgroup"),this.visible=d(n,"visible",!0),this.objects=d(n,"objects",[])}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(574),d=t(29),r=t(161),o=t(258),n=t(2),i=t(120),s=t(261),u=t(85),h=function(l,f){for(var v=n(l,"infinite",!1),c=[],p=[],m=r(l);m.i<m.layers.length||p.length>0;){if(m.i>=m.layers.length){if(p.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}m=p.pop();continue}var y=m.layers[m.i];if(m.i++,y.type!=="tilelayer"){if(y.type==="group"){var T=r(l,y,m);p.push(m),m=T}continue}if(y.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+y.name+"'");continue}else if(y.encoding&&y.encoding==="base64"){if(y.chunks)for(var E=0;E<y.chunks.length;E++)y.chunks[E].data=e(y.chunks[E].data);y.data&&(y.data=e(y.data)),delete y.encoding}var S,P,M,O,L=[],F=0;if(v){var b=n(y,"startx",0)+y.x,B=n(y,"starty",0)+y.y;S=new i({name:m.name+y.name,x:m.x+n(y,"offsetx",0)+b*l.tilewidth,y:m.y+n(y,"offsety",0)+B*l.tileheight,width:y.width,height:y.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:m.opacity*y.opacity,visible:m.visible&&y.visible,properties:n(y,"properties",[]),orientation:o(l.orientation)}),S.orientation===d.HEXAGONAL&&(S.hexSideLength=l.hexsidelength);for(var U=0;U<y.height;U++){L.push([null]);for(var X=0;X<y.width;X++)L[U][X]=null}for(U=0,$=y.chunks.length;U<$;U++)for(var W=y.chunks[U],Z=W.x-b,J=W.y-B,N=0,I=0,G=W.data.length;I<G;I++){var V=F+Z,Y=N+J;P=s(W.data[I]),P.gid>0?(M=new u(S,P.gid,V,Y,l.tilewidth,l.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,L[Y][V]=M):(O=f?null:new u(S,-1,V,Y,l.tilewidth,l.tileheight),L[Y][V]=O),F++,F===W.width&&(N++,F=0)}}else{S=new i({name:m.name+y.name,x:m.x+n(y,"offsetx",0)+y.x,y:m.y+n(y,"offsety",0)+y.y,width:y.width,height:y.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:m.opacity*y.opacity,visible:m.visible&&y.visible,properties:n(y,"properties",[]),orientation:o(l.orientation)}),S.orientation===d.HEXAGONAL&&(S.hexSideLength=l.hexsidelength);for(var z=[],H=0,$=y.data.length;H<$;H++)P=s(y.data[H]),P.gid>0?(M=new u(S,P.gid,F,L.length,l.tilewidth,l.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,z.push(M)):(O=f?null:new u(S,-1,F,L.length,l.tilewidth,l.tileheight),z.push(O)),F++,F===y.width&&(L.push(z),F=0,z=[])}S.data=L,c.push(S)}return c};a.exports=h},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var d=window.atob(e),r=d.length,o=new Array(r/4),n=0;n<r;n+=4)o[n/4]=(d.charCodeAt(n)|d.charCodeAt(n+1)<<8|d.charCodeAt(n+2)<<16|d.charCodeAt(n+3)<<24)>>>0;return o};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(122),d=t(576),r=t(260),o=t(1453),n=function(i){for(var s=[],u=[],h=null,l,f=0;f<i.tilesets.length;f++){var v=i.tilesets[f];if(v.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(v.image){var c=new e(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing);if(i.version>1){var p=void 0,m=void 0;if(Array.isArray(v.tiles)){p=p||{},m=m||{};for(var y=0;y<v.tiles.length;y++){var T=v.tiles[y];if(T.properties){var E={};T.properties.forEach(function(U){E[U.name]=U.value}),m[T.id]=E}if(T.objectgroup&&((p[T.id]||(p[T.id]={})).objectgroup=T.objectgroup,T.objectgroup.objects)){var S=T.objectgroup.objects.map(function(U){return r(U)});p[T.id].objectgroup.objects=S}T.animation&&((p[T.id]||(p[T.id]={})).animation=T.animation),T.type&&((p[T.id]||(p[T.id]={})).type=T.type)}}Array.isArray(v.wangsets)&&(p=p||{},m=m||{},o(v.wangsets,p)),p&&(c.tileData=p,c.tileProperties=m)}else if(v.tileproperties&&(c.tileProperties=v.tileproperties),v.tiles){c.tileData=v.tiles;for(l in c.tileData){var P=c.tileData[l].objectgroup;if(P&&P.objects){var M=P.objects.map(function(U){return r(U)});c.tileData[l].objectgroup.objects=M}}}c.updateTileData(v.imagewidth,v.imageheight),s.push(c)}else{var O=new d(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,v.properties),L=0;for(y=0;y<v.tiles.length;y++){T=v.tiles[y];var F=T.image,b=parseInt(T.id,10),B=v.firstgid+b;O.addImage(B,F),L=Math.max(b,L)}O.maxId=L,u.push(O)}h&&(h.lastgid=v.firstgid-1),h=v}return{tilesets:s,imageCollections:u}};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o,n,i,s,u,h,l){(i===void 0||i<=0)&&(i=32),(s===void 0||s<=0)&&(s=32),u===void 0&&(u=0),h===void 0&&(h=0),this.name=o,this.firstgid=n|0,this.imageWidth=i|0,this.imageHeight=s|0,this.imageMargin=u|0,this.imageSpacing=h|0,this.properties=l||{},this.images=[],this.total=0},containsImageIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},addImage:function(r,o){return this.images.push({gid:r,image:o}),this.total++,this}});a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),d=t(121),r=t(578),o=t(579),n=function(i,s,u){if(s.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+i),null;for(var h=0,l=0,f=0;f<s.layer.length;f++)s.layer[f].width>h&&(h=s.layer[f].width),s.layer[f].height>l&&(l=s.layer[f].height);var v=new d({width:h,height:l,name:i,tileWidth:s.layer[0].tilesize,tileHeight:s.layer[0].tilesize,format:e.WELTMEISTER});return v.layers=r(s,u),v.tilesets=o(s),v};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(120),d=t(85),r=function(o,n){for(var i=[],s=0;s<o.layer.length;s++){for(var u=o.layer[s],h=new e({name:u.name,width:u.width,height:u.height,tileWidth:u.tilesize,tileHeight:u.tilesize,visible:u.visible===1}),l=[],f=[],v=0;v<u.data.length;v++){for(var c=0;c<u.data[v].length;c++){var p=u.data[v][c]-1,m;p>-1?m=new d(h,p,c,v,u.tilesize,u.tilesize):m=n?null:new d(h,-1,c,v,u.tilesize,u.tilesize),l.push(m)}f.push(l),l=[]}h.data=f,i.push(h)}return i};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(122),d=function(r){for(var o=[],n=[],i=0;i<r.layer.length;i++){var s=r.layer[i],u=s.tilesetName;u!==""&&n.indexOf(u)===-1&&(n.push(u),o.push(new e(u,0,s.tilesize,s.tilesize,0,0)))}return o};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(36),r=t(40),o=t(2),n=t(120),i=t(29),s=t(362),u=t(74),h=t(73),l=t(85),f=t(251),v=t(581),c=t(122),p=new e({initialize:function(y,T){this.scene=y,this.tileWidth=T.tileWidth,this.tileHeight=T.tileHeight,this.width=T.width,this.height=T.height,this.orientation=T.orientation,this.renderOrder=T.renderOrder,this.format=T.format,this.version=T.version,this.properties=T.properties,this.widthInPixels=T.widthInPixels,this.heightInPixels=T.heightInPixels,this.imageCollections=T.imageCollections,this.images=T.images,this.layers=T.layers,this.tilesets=T.tilesets,this.objects=T.objects,this.currentLayerIndex=0,this.hexSideLength=T.hexSideLength;var E=this.orientation;this._convert={WorldToTileXY:f.GetWorldToTileXYFunction(E),WorldToTileX:f.GetWorldToTileXFunction(E),WorldToTileY:f.GetWorldToTileYFunction(E),TileToWorldXY:f.GetTileToWorldXYFunction(E),TileToWorldX:f.GetTileToWorldXFunction(E),TileToWorldY:f.GetTileToWorldYFunction(E)}},createBlankDynamicLayer:function(m,y,T,E,S,P,M,O){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(m,y,T,E,S,P,M,O)},createDynamicLayer:function(m,y,T,E){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(m,y,T,E)},createStaticLayer:function(m,y,T,E){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(m,y,T,E)},setRenderOrder:function(m){var y=["right-down","left-down","right-up","left-up"];return typeof m=="number"&&(m=y[m]),y.indexOf(m)>-1&&(this.renderOrder=m),this},addTilesetImage:function(m,y,T,E,S,P,M){if(m===void 0)return null;if(y==null&&(y=m),!this.scene.sys.textures.exists(y))return console.warn("Invalid Tileset Image: "+y),null;var O=this.scene.sys.textures.get(y),L=this.getTilesetIndex(m);if(L===null&&this.format===r.TILED_JSON)return console.warn("No data found for Tileset: "+m),null;var F=this.tilesets[L];return F?(F.setTileSize(T,E),F.setSpacing(S,P),F.setImage(O),F):(T===void 0&&(T=this.tileWidth),E===void 0&&(E=this.tileHeight),S===void 0&&(S=0),P===void 0&&(P=0),M===void 0&&(M=0),F=new c(m,M,T,E,S,P),F.setImage(O),this.tilesets.push(F),F)},copy:function(m,y,T,E,S,P,M,O){return O=this.getLayer(O),O!==null?(f.Copy(m,y,T,E,S,P,M,O),this):null},createBlankLayer:function(m,y,T,E,S,P,M,O){T===void 0&&(T=0),E===void 0&&(E=0),S===void 0&&(S=this.width),P===void 0&&(P=this.height),M===void 0&&(M=this.tileWidth),O===void 0&&(O=this.tileHeight);var L=this.getLayerIndex(m);if(L!==null)return console.warn("Invalid Tilemap Layer ID: "+m),null;for(var F=new n({name:m,tileWidth:M,tileHeight:O,width:S,height:P,orientation:this.orientation}),b,B=0;B<P;B++){b=[];for(var U=0;U<S;U++)b.push(new l(F,-1,U,B,M,O,this.tileWidth,this.tileHeight));F.data.push(b)}this.layers.push(F),this.currentLayerIndex=this.layers.length-1;var X=new v(this.scene,this,this.currentLayerIndex,y,T,E);return X.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(X),X},createLayer:function(m,y,T,E){var S=this.getLayerIndex(m);if(S===null)return console.warn("Invalid Tilemap Layer ID: "+m),typeof m=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var P=this.layers[S];if(P.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+m),null;this.currentLayerIndex=S,T===void 0&&(T=P.x),E===void 0&&(E=P.y);var M=new v(this.scene,this,S,y,T,E);return M.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(M),M},createFromObjects:function(m,y){var T=[],E=this.getObjectLayer(m);if(!E)return console.warn("createFromObjects: Invalid objectLayerName given: "+m),T;Array.isArray(y)||(y=[y]);for(var S=E.objects,P=0;P<y.length;P++){for(var M=y[P],O=o(M,"id",null),L=o(M,"gid",null),F=o(M,"name",null),b,B=[],U=0;U<S.length;U++)b=S[U],(O===null&&L===null&&F===null||O!==null&&b.id===O||L!==null&&b.gid===L||F!==null&&b.name===F)&&B.push(b);for(var X=o(M,"classType",h),W=o(M,"scene",this.scene),Z=o(M,"container",null),J=o(M,"key",null),N=o(M,"frame",null),I=0;I<B.length;I++){b=B[I];var G=new X(W);G.setName(b.name),G.setPosition(b.x,b.y),G.setTexture(J,N),b.width&&(G.displayWidth=b.width),b.height&&(G.displayHeight=b.height);var V={x:G.originX*b.width,y:(G.originY-1)*b.height};if(b.rotation){var Y=d(b.rotation);s(V,Y),G.rotation=Y}if(G.x+=V.x,G.y+=V.y,(b.flippedHorizontal!==void 0||b.flippedVertical!==void 0)&&G.setFlip(b.flippedHorizontal,b.flippedVertical),b.visible||(G.visible=!1),Array.isArray(b.properties))b.properties.forEach(function(H){var $=H.name;G[$]!==void 0?G[$]=H.value:G.setData($,H.value)});else for(var z in b.properties)G[z]!==void 0?G[z]=b.properties[z]:G.setData(z,b.properties[z]);Z?Z.add(G):W.add.existing(G),T.push(G)}}return T},createFromTiles:function(m,y,T,E,S,P){return P=this.getLayer(P),P===null?null:f.CreateFromTiles(m,y,T,E,S,P)},fill:function(m,y,T,E,S,P,M){return P===void 0&&(P=!0),M=this.getLayer(M),M===null?null:(f.Fill(m,y,T,E,S,P,M),this)},filterObjects:function(m,y,T){if(typeof m=="string"){var E=m;if(m=this.getObjectLayer(m),!m)return console.warn("No object layer found with the name: "+E),null}return m.objects.filter(y,T)},filterTiles:function(m,y,T,E,S,P,M,O){return O=this.getLayer(O),O===null?null:f.FilterTiles(m,y,T,E,S,P,M,O)},findByIndex:function(m,y,T,E){return E=this.getLayer(E),E===null?null:f.FindByIndex(m,y,T,E)},findObject:function(m,y,T){if(typeof m=="string"){var E=m;if(m=this.getObjectLayer(m),!m)return console.warn("No object layer found with the name: "+E),null}return m.objects.find(y,T)||null},findTile:function(m,y,T,E,S,P,M,O){return O=this.getLayer(O),O===null?null:f.FindTile(m,y,T,E,S,P,M,O)},forEachTile:function(m,y,T,E,S,P,M,O){return O=this.getLayer(O),O===null?null:(f.ForEachTile(m,y,T,E,S,P,M,O),this)},getImageIndex:function(m){return this.getIndex(this.images,m)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(m){return m.name})},getIndex:function(m,y){for(var T=0;T<m.length;T++)if(m[T].name===y)return T;return null},getLayer:function(m){var y=this.getLayerIndex(m);return y!==null?this.layers[y]:null},getObjectLayer:function(m){var y=this.getIndex(this.objects,m);return y!==null?this.objects[y]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(m){return m.name})},getLayerIndex:function(m){return m===void 0?this.currentLayerIndex:typeof m=="string"?this.getLayerIndexByName(m):typeof m=="number"&&m<this.layers.length?m:m instanceof v?m.layerIndex:null},getLayerIndexByName:function(m){return this.getIndex(this.layers,m)},getTileAt:function(m,y,T,E){return E=this.getLayer(E),E===null?null:f.GetTileAt(m,y,T,E)},getTileAtWorldXY:function(m,y,T,E,S){return S=this.getLayer(S),S===null?null:f.GetTileAtWorldXY(m,y,T,E,S)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(m){return m.name})},getTilesWithin:function(m,y,T,E,S,P){return P=this.getLayer(P),P===null?null:f.GetTilesWithin(m,y,T,E,S,P)},getTilesWithinShape:function(m,y,T,E){return E=this.getLayer(E),E===null?null:f.GetTilesWithinShape(m,y,T,E)},getTilesWithinWorldXY:function(m,y,T,E,S,P,M){return M=this.getLayer(M),M===null?null:f.GetTilesWithinWorldXY(m,y,T,E,S,P,M)},getTileset:function(m){var y=this.getIndex(this.tilesets,m);return y!==null?this.tilesets[y]:null},getTilesetIndex:function(m){return this.getIndex(this.tilesets,m)},hasTileAt:function(m,y,T){return T=this.getLayer(T),T===null?null:f.HasTileAt(m,y,T)},hasTileAtWorldXY:function(m,y,T,E){return E=this.getLayer(E),E===null?null:f.HasTileAtWorldXY(m,y,T,E)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(m){this.setLayer(m)}},putTileAt:function(m,y,T,E,S){return E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:f.PutTileAt(m,y,T,E,S)},putTileAtWorldXY:function(m,y,T,E,S,P){return E===void 0&&(E=!0),P=this.getLayer(P),P===null?null:f.PutTileAtWorldXY(m,y,T,E,S,P)},putTilesAt:function(m,y,T,E,S){return E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(f.PutTilesAt(m,y,T,E,S),this)},randomize:function(m,y,T,E,S,P){return P=this.getLayer(P),P===null?null:(f.Randomize(m,y,T,E,S,P),this)},calculateFacesAt:function(m,y,T){return T=this.getLayer(T),T===null?null:(f.CalculateFacesAt(m,y,T),this)},calculateFacesWithin:function(m,y,T,E,S){return S=this.getLayer(S),S===null?null:(f.CalculateFacesWithin(m,y,T,E,S),this)},removeLayer:function(m){var y=this.getLayerIndex(m);if(y!==null){u(this.layers,y);for(var T=y;T<this.layers.length;T++)this.layers[T].tilemapLayer&&this.layers[T].tilemapLayer.layerIndex--;return this.currentLayerIndex===y&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(m){var y=this.getLayerIndex(m);return y!==null?(m=this.layers[y],m.destroy(),u(this.layers,y),this.currentLayerIndex===y&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var m=this.layers,y=0;y<m.length;y++)m[y].tilemapLayer&&m[y].tilemapLayer.destroy(!1);return m.length=0,this.currentLayerIndex=0,this},removeTile:function(m,y,T){y===void 0&&(y=-1),T===void 0&&(T=!0);var E=[];Array.isArray(m)||(m=[m]);for(var S=0;S<m.length;S++){var P=m[S];E.push(this.removeTileAt(P.x,P.y,!0,T,P.tilemapLayer)),y>-1&&this.putTileAt(y,P.x,P.y,T,P.tilemapLayer)}return E},removeTileAt:function(m,y,T,E,S){return T===void 0&&(T=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:f.RemoveTileAt(m,y,T,E,S)},removeTileAtWorldXY:function(m,y,T,E,S,P){return T===void 0&&(T=!0),E===void 0&&(E=!0),P=this.getLayer(P),P===null?null:f.RemoveTileAtWorldXY(m,y,T,E,S,P)},renderDebug:function(m,y,T){return T=this.getLayer(T),T===null?null:(this.orientation===i.ORTHOGONAL&&f.RenderDebug(m,y,T),this)},renderDebugFull:function(m,y){for(var T=this.layers,E=0;E<T.length;E++)f.RenderDebug(m,y,T[E]);return this},replaceByIndex:function(m,y,T,E,S,P,M){return M=this.getLayer(M),M===null?null:(f.ReplaceByIndex(m,y,T,E,S,P,M),this)},setCollision:function(m,y,T,E,S){return y===void 0&&(y=!0),T===void 0&&(T=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(f.SetCollision(m,y,T,E,S),this)},setCollisionBetween:function(m,y,T,E,S){return T===void 0&&(T=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(f.SetCollisionBetween(m,y,T,E,S),this)},setCollisionByProperty:function(m,y,T,E){return y===void 0&&(y=!0),T===void 0&&(T=!0),E=this.getLayer(E),E===null?null:(f.SetCollisionByProperty(m,y,T,E),this)},setCollisionByExclusion:function(m,y,T,E){return y===void 0&&(y=!0),T===void 0&&(T=!0),E=this.getLayer(E),E===null?null:(f.SetCollisionByExclusion(m,y,T,E),this)},setCollisionFromCollisionGroup:function(m,y,T){return m===void 0&&(m=!0),y===void 0&&(y=!0),T=this.getLayer(T),T===null?null:(f.SetCollisionFromCollisionGroup(m,y,T),this)},setTileIndexCallback:function(m,y,T,E){return E=this.getLayer(E),E===null?null:(f.SetTileIndexCallback(m,y,T,E),this)},setTileLocationCallback:function(m,y,T,E,S,P,M){return M=this.getLayer(M),M===null?null:(f.SetTileLocationCallback(m,y,T,E,S,P,M),this)},setLayer:function(m){var y=this.getLayerIndex(m);return y!==null&&(this.currentLayerIndex=y),this},setBaseTileSize:function(m,y){this.tileWidth=m,this.tileHeight=y,this.widthInPixels=this.width*m,this.heightInPixels=this.height*y;for(var T=0;T<this.layers.length;T++){this.layers[T].baseTileWidth=m,this.layers[T].baseTileHeight=y;for(var E=this.layers[T].data,S=this.layers[T].width,P=this.layers[T].height,M=0;M<P;M++)for(var O=0;O<S;O++){var L=E[M][O];L!==null&&L.setSize(void 0,void 0,m,y)}}return this},setLayerTileSize:function(m,y,T){if(T=this.getLayer(T),T===null)return this;T.tileWidth=m,T.tileHeight=y;for(var E=T.data,S=T.width,P=T.height,M=0;M<P;M++)for(var O=0;O<S;O++){var L=E[M][O];L!==null&&L.setSize(m,y)}return this},shuffle:function(m,y,T,E,S){return S=this.getLayer(S),S===null?null:(f.Shuffle(m,y,T,E,S),this)},swapByIndex:function(m,y,T,E,S,P,M){return M=this.getLayer(M),M===null?null:(f.SwapByIndex(m,y,T,E,S,P,M),this)},tileToWorldX:function(m,y,T){return T=this.getLayer(T),T===null?null:this._convert.TileToWorldX(m,y,T)},tileToWorldY:function(m,y,T){return T=this.getLayer(T),T===null?null:this._convert.TileToWorldY(m,y,T)},tileToWorldXY:function(m,y,T,E,S){return S=this.getLayer(S),S===null?null:this._convert.TileToWorldXY(m,y,T,E,S)},weightedRandomize:function(m,y,T,E,S,P){return P=this.getLayer(P),P===null?null:(f.WeightedRandomize(y,T,E,S,m,P),this)},worldToTileX:function(m,y,T,E){return E=this.getLayer(E),E===null?null:this._convert.WorldToTileX(m,y,T,E)},worldToTileY:function(m,y,T,E){return E=this.getLayer(E),E===null?null:this._convert.WorldToTileY(m,y,T,E)},worldToTileXY:function(m,y,T,E,S,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileXY(m,y,T,E,S,P)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});a.exports=p},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(11),r=t(15),o=t(251),n=t(1456),i=new e({Extends:r,Mixins:[d.Alpha,d.BlendMode,d.ComputedSize,d.Depth,d.Flip,d.GetBounds,d.Origin,d.Pipeline,d.Transform,d.Visible,d.ScrollFactor,n],initialize:function(u,h,l,f,v,c){r.call(this,u,"TilemapLayer"),this.isTilemap=!0,this.tilemap=h,this.layerIndex=l,this.layer=h.layers[l],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(f),this.setAlpha(this.layer.alpha),this.setPosition(v,c),this.setOrigin(),this.setSize(h.tileWidth*this.layer.width,h.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(s){var u=[],h=[],l=this.tilemap;Array.isArray(s)||(s=[s]);for(var f=0;f<s.length;f++){var v=s[f];if(typeof v=="string"&&(v=l.getTileset(v)),v){h.push(v);for(var c=v.firstgid,p=0;p<v.total;p++)u[c+p]=v}}this.gidMap=u,this.tileset=h},setRenderOrder:function(s){var u=["right-down","left-down","right-up","left-up"];return typeof s=="string"&&(s=u.indexOf(s)),s>=0&&s<4&&(this._renderOrder=s),this},calculateFacesAt:function(s,u){return o.CalculateFacesAt(s,u,this.layer),this},calculateFacesWithin:function(s,u,h,l){return o.CalculateFacesWithin(s,u,h,l,this.layer),this},createFromTiles:function(s,u,h,l,f){return o.CreateFromTiles(s,u,h,l,f,this.layer)},cull:function(s){return this.cullCallback(this.layer,s,this.culledTiles,this._renderOrder)},copy:function(s,u,h,l,f,v,c){return o.Copy(s,u,h,l,f,v,c,this.layer),this},fill:function(s,u,h,l,f,v){return o.Fill(s,u,h,l,f,v,this.layer),this},filterTiles:function(s,u,h,l,f,v,c){return o.FilterTiles(s,u,h,l,f,v,c,this.layer)},findByIndex:function(s,u,h){return o.FindByIndex(s,u,h,this.layer)},findTile:function(s,u,h,l,f,v,c){return o.FindTile(s,u,h,l,f,v,c,this.layer)},forEachTile:function(s,u,h,l,f,v,c){return o.ForEachTile(s,u,h,l,f,v,c,this.layer),this},getTileAt:function(s,u,h){return o.GetTileAt(s,u,h,this.layer)},getTileAtWorldXY:function(s,u,h,l){return o.GetTileAtWorldXY(s,u,h,l,this.layer)},getTilesWithin:function(s,u,h,l,f){return o.GetTilesWithin(s,u,h,l,f,this.layer)},getTilesWithinShape:function(s,u,h){return o.GetTilesWithinShape(s,u,h,this.layer)},getTilesWithinWorldXY:function(s,u,h,l,f,v){return o.GetTilesWithinWorldXY(s,u,h,l,f,v,this.layer)},hasTileAt:function(s,u){return o.HasTileAt(s,u,this.layer)},hasTileAtWorldXY:function(s,u,h){return o.HasTileAtWorldXY(s,u,h,this.layer)},putTileAt:function(s,u,h,l){return o.PutTileAt(s,u,h,l,this.layer)},putTileAtWorldXY:function(s,u,h,l,f){return o.PutTileAtWorldXY(s,u,h,l,f,this.layer)},putTilesAt:function(s,u,h,l){return o.PutTilesAt(s,u,h,l,this.layer),this},randomize:function(s,u,h,l,f){return o.Randomize(s,u,h,l,f,this.layer),this},removeTileAt:function(s,u,h,l){return o.RemoveTileAt(s,u,h,l,this.layer)},removeTileAtWorldXY:function(s,u,h,l,f){return o.RemoveTileAtWorldXY(s,u,h,l,f,this.layer)},renderDebug:function(s,u){return o.RenderDebug(s,u,this.layer),this},replaceByIndex:function(s,u,h,l,f,v){return o.ReplaceByIndex(s,u,h,l,f,v,this.layer),this},setSkipCull:function(s){return s===void 0&&(s=!0),this.skipCull=s,this},setCullPadding:function(s,u){return s===void 0&&(s=1),u===void 0&&(u=1),this.cullPaddingX=s,this.cullPaddingY=u,this},setCollision:function(s,u,h,l){return o.SetCollision(s,u,h,this.layer,l),this},setCollisionBetween:function(s,u,h,l){return o.SetCollisionBetween(s,u,h,l,this.layer),this},setCollisionByProperty:function(s,u,h){return o.SetCollisionByProperty(s,u,h,this.layer),this},setCollisionByExclusion:function(s,u,h){return o.SetCollisionByExclusion(s,u,h,this.layer),this},setCollisionFromCollisionGroup:function(s,u){return o.SetCollisionFromCollisionGroup(s,u,this.layer),this},setTileIndexCallback:function(s,u,h){return o.SetTileIndexCallback(s,u,h,this.layer),this},setTileLocationCallback:function(s,u,h,l,f,v){return o.SetTileLocationCallback(s,u,h,l,f,v,this.layer),this},shuffle:function(s,u,h,l){return o.Shuffle(s,u,h,l,this.layer),this},swapByIndex:function(s,u,h,l,f,v){return o.SwapByIndex(s,u,h,l,f,v,this.layer),this},tileToWorldX:function(s,u){return this.tilemap.tileToWorldX(s,u,this)},tileToWorldY:function(s,u){return this.tilemap.tileToWorldY(s,u,this)},tileToWorldXY:function(s,u,h,l){return this.tilemap.tileToWorldXY(s,u,h,l,this)},weightedRandomize:function(s,u,h,l,f){return o.WeightedRandomize(u,h,l,f,s,this.layer),this},worldToTileX:function(s,u,h){return this.tilemap.worldToTileX(s,u,h,this)},worldToTileY:function(s,u,h){return this.tilemap.worldToTileY(s,u,h,this)},worldToTileXY:function(s,u,h,l,f){return this.tilemap.worldToTileXY(s,u,h,l,f,this)},destroy:function(s){s===void 0&&(s=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),s&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(2),r=new e({initialize:function(n){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(n)},reset:function(o){return this.delay=d(o,"delay",0),this.repeat=d(o,"repeat",0),this.loop=d(o,"loop",!1),this.callback=d(o,"callback",void 0),this.callbackScope=d(o,"callbackScope",this.callback),this.args=d(o,"args",[]),this.timeScale=d(o,"timeScale",1),this.startAt=d(o,"startAt",0),this.paused=d(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var o=this.delay+this.delay*this.repeat,n=this.elapsed+this.delay*(this.repeat-this.repeatCount);return n/o}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1465),d=function(r){var o,n=[];if(r.hasOwnProperty("props"))for(o in r.props)o.substr(0,1)!=="_"&&n.push({key:o,value:r.props[o]});else for(o in r)e.indexOf(o)===-1&&o.substr(0,1)!=="_"&&n.push({key:o,value:r[o]});return n};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),d=function(r){var o=e(r,"tweens",null);return o===null?[]:(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o]),o)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(265),d=t(13),r=t(99),o=t(80),n=t(162),i=t(6),s=t(264),u=t(266),h=t(268),l=function(f,v,c){c===void 0&&(c=e);var p=i(v,"from",0),m=i(v,"to",1),y=[{value:p}],T=n(v,"delay",c.delay),E=n(v,"duration",c.duration),S=i(v,"easeParams",c.easeParams),P=o(i(v,"ease",c.ease),S),M=n(v,"hold",c.hold),O=n(v,"repeat",c.repeat),L=n(v,"repeatDelay",c.repeatDelay),F=r(v,"yoyo",c.yoyo),b=[],B=s("value",m),U=h(y[0],0,"value",B.getEnd,B.getStart,B.getActive,P,T,E,F,M,O,L,!1,!1);U.start=p,U.current=p,U.to=m,b.push(U);var X=new u(f,b,y);X.offset=d(v,"offset",null),X.completeDelay=d(v,"completeDelay",0),X.loop=Math.round(d(v,"loop",0)),X.loopDelay=Math.round(d(v,"loopDelay",0)),X.paused=r(v,"paused",!1),X.useFrames=r(v,"useFrames",!1);for(var W=i(v,"callbackScope",X),Z=[X,null],J=u.TYPES,N=0;N<J.length;N++){var I=J[N],G=i(v,I,!1);if(G){var V=i(v,I+"Scope",W),Y=i(v,I+"Params",[]);X.setCallback(I,G,Z.concat(Y),V)}}return X};a.exports=l},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(80),d=t(6),r=t(14),o=function(n,i){i===void 0&&(i={});var s,u=d(i,"start",0),h=d(i,"ease",null),l=d(i,"grid",null),f=d(i,"from",0),v=f==="first",c=f==="center",p=f==="last",m=typeof f=="number",y=Array.isArray(n),T=parseFloat(y?n[0]:n),E=y?parseFloat(n[1]):0,S=Math.max(T,E);if(y&&(u+=T),l){var P=l[0],M=l[1],O=0,L=0,F=0,b=0,B=[];p?(O=P-1,L=M-1):m?(O=f%P,L=Math.floor(f/P)):c&&(O=(P-1)/2,L=(M-1)/2);for(var U=r.MIN_SAFE_INTEGER,X=0;X<M;X++){B[X]=[];for(var W=0;W<P;W++){F=O-W,b=L-X;var Z=Math.sqrt(F*F+b*b);Z>U&&(U=Z),B[X][W]=Z}}}var J=h?e(h):null;return l?s=function(N,I,G,V){var Y=0,z=V%P,H=Math.floor(V/P);z>=0&&z<P&&H>=0&&H<M&&(Y=B[H][z]);var $;if(y){var Q=E-T;J?$=Y/U*Q*J(Y/U):$=Y/U*Q}else J?$=Y*T*J(Y/U):$=Y*T;return $+u}:s=function(N,I,G,V,Y){Y--;var z;v?z=V:c?z=Math.abs(Y/2-V):p?z=Y-V:m&&(z=Math.abs(f-V));var H;if(y){var $;c?$=(E-T)/Y*(z*2):$=(E-T)/Y*z,J?H=$*J(z/Y):H=$}else J?H=Y*S*J(z/Y):H=z*T;return H+u},s};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),d=t(265),r=t(13),o=t(99),n=t(80),i=t(162),s=t(263),u=t(584),h=t(6),l=t(588),f=t(163),v=function(c,p){var m=new l(c);m.completeDelay=r(p,"completeDelay",0),m.loop=Math.round(r(p,"loop",0)),m.loopDelay=Math.round(r(p,"loopDelay",0)),m.paused=o(p,"paused",!1),m.useFrames=o(p,"useFrames",!1);var y=h(p,"callbackScope",m),T=[m],E=h(p,"onStart",!1);if(E){var S=h(p,"onStartScope",y),P=h(p,"onStartParams",[]);m.setCallback("onStart",E,T.concat(P),S)}var M=h(p,"onUpdate",!1);if(M){var O=h(p,"onUpdateScope",y),L=h(p,"onUpdateParams",[]);m.setCallback("onUpdate",M,T.concat(L),O)}var F=h(p,"onLoop",!1);if(F){var b=h(p,"onLoopScope",y),B=h(p,"onLoopParams",[]);m.setCallback("onLoop",F,T.concat(B),b)}var U=h(p,"onYoyo",!1);if(U){var X=h(p,"onYoyoScope",y),W=h(p,"onYoyoParams",[]);m.setCallback("onYoyo",U,T.concat(null,W),X)}var Z=h(p,"onComplete",!1);if(Z){var J=h(p,"onCompleteScope",y),N=h(p,"onCompleteParams",[]);m.setCallback("onComplete",Z,T.concat(N),J)}var I=u(p);if(I.length===0)return m.paused=!0,m;var G=e(d);G.targets=s(p);var V=r(p,"totalDuration",0);V>0?G.duration=Math.floor(V/I.length):G.duration=i(p,"duration",G.duration),G.delay=i(p,"delay",G.delay),G.easeParams=h(p,"easeParams",G.easeParams),G.ease=n(h(p,"ease",G.ease),G.easeParams),G.hold=i(p,"hold",G.hold),G.repeat=i(p,"repeat",G.repeat),G.repeatDelay=i(p,"repeatDelay",G.repeatDelay),G.yoyo=o(p,"yoyo",G.yoyo),G.flipX=o(p,"flipX",G.flipX),G.flipY=o(p,"flipY",G.flipY);for(var Y=0;Y<I.length;Y++)m.queue(f(m,I[Y],G));return m};a.exports=v},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(9),r=t(267),o=t(163),n=t(100),i=new e({Extends:d,initialize:function(u){d.call(this),this.manager=u,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=n.PENDING_ADD,this._pausedState=n.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(s,u){this.emit(s,this),u&&u.func.apply(u.scope,u.params)},setTimeScale:function(s){return this.timeScale=s,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===n.ACTIVE},add:function(s){return this.queue(o(this,s))},queue:function(s){return this.isPlaying()||(s.parent=this,s.parentIsTimeline=!0,this.data.push(s),this.totalData=this.data.length),this},hasOffset:function(s){return s.offset!==null},isOffsetAbsolute:function(s){return typeof s=="number"},isOffsetRelative:function(s){var u=typeof s;if(u==="string"){var h=s[0];if(h==="-"||h==="+")return!0}return!1},getRelativeOffset:function(s,u){var h=s[0],l=parseFloat(s.substr(2)),f=u;switch(h){case"+":f+=l;break;case"-":f-=l;break}return Math.max(0,f)},calcDuration:function(){for(var s=0,u=0,h=0,l=0;l<this.totalData;l++){var f=this.data[l];f.init(),this.hasOffset(f)?this.isOffsetAbsolute(f.offset)?(f.calculatedOffset=f.offset,f.offset===0&&(h=0)):this.isOffsetRelative(f.offset)&&(f.calculatedOffset=this.getRelativeOffset(f.offset,s)):f.calculatedOffset=h,s=f.totalDuration+f.calculatedOffset,u+=f.totalDuration,h+=f.totalDuration}this.duration=u,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=n.PAUSED,!1):!0},resetTweens:function(s){for(var u=0;u<this.totalData;u++){var h=this.data[u];h.play(s)}},setCallback:function(s,u,h,l){return i.TYPES.indexOf(s)!==-1&&(this.callbacks[s]={func:u,scope:l,params:h}),this},makeActive:function(s){return this.manager.makeActive(s)},play:function(){if(this.state!==n.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=n.ACTIVE;this.dispatchTimelineEvent(r.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=n.LOOP_DELAY):(this.state=n.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=n.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=n.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(s,u){if(this.state!==n.PAUSED){switch(this.useFrames&&(u=1*this.manager.timeScale),u*=this.timeScale,this.elapsed+=u,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=u,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case n.ACTIVE:for(var h=this.totalData,l=0;l<this.totalData;l++){var f=this.data[l];f.update(s,u)&&h--}this.dispatchTimelineEvent(r.TIMELINE_UPDATE,this.callbacks.onUpdate),h===0&&this.nextState();break;case n.LOOP_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=n.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop));break;case n.COMPLETE_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=n.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===n.PENDING_REMOVE}},stop:function(){this.state=n.PENDING_REMOVE},pause:function(){if(this.state!==n.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=n.PAUSED,this.emit(r.TIMELINE_PAUSE,this),this},resume:function(){return this.state===n.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(r.TIMELINE_RESUME,this)),this},hasTarget:function(s){for(var u=0;u<this.data.length;u++)if(this.data[u].hasTarget(s))return!0;return!1},destroy:function(){for(var s=0;s<this.data.length;s++)this.data[s].stop()}});i.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],a.exports=i},function(a,x,t){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),d=t(41),r=t(32),o=t(2),n=t(64),i={parseBody:function(s,u,h,l){l===void 0&&(l={});for(var f=o(h,"fixtures",[]),v=[],c=0;c<f.length;c++)for(var p=this.parseFixture(f[c]),m=0;m<p.length;m++)v.push(p[m]);var y=r.clone(h,!0);r.extend(y,l,!0),delete y.fixtures,delete y.type;var T=d.create(y);return d.setParts(T,v),d.setPosition(T,{x:s,y:u}),T},parseFixture:function(s){var u=r.extend({},!1,s);delete u.circle,delete u.vertices;var h;if(s.circle){var l=o(s.circle,"x"),f=o(s.circle,"y"),v=o(s.circle,"radius");h=[e.circle(l,f,v,u)]}else s.vertices&&(h=this.parseVertices(s.vertices,u));return h},parseVertices:function(s,u){u===void 0&&(u={});for(var h=[],l=0;l<s.length;l++)n.clockwiseSort(s[l]),h.push(d.create(r.extend({position:n.centre(s[l]),vertices:s[l]},u)));return e.flagCoincidentParts(h)}};a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),d=t(41),r={parseBody:function(o,n,i,s){s===void 0&&(s={});var u,h=i.vertices;if(h.length===1)s.vertices=h[0],u=d.create(s),e.flagCoincidentParts(u.parts);else{for(var l=[],f=0;f<h.length;f++){var v=d.create({vertices:h[f]});l.push(v)}e.flagCoincidentParts(l),s.parts=l,u=d.create(s)}return u.label=i.label,d.setPosition(u,{x:o,y:n}),u}};a.exports=r},function(a,x,t){var e={};a.exports=e;var d=t(118),r=t(128),o=t(32),n=t(41),i=t(86);(function(){e.stack=function(s,u,h,l,f,v,c){for(var p=d.create({label:"Stack"}),m=s,y=u,T,E=0,S=0;S<l;S++){for(var P=0,M=0;M<h;M++){var O=c(m,y,M,S,T,E);if(O){var L=O.bounds.max.y-O.bounds.min.y,F=O.bounds.max.x-O.bounds.min.x;L>P&&(P=L),n.translate(O,{x:F*.5,y:L*.5}),m=O.bounds.max.x+f,d.addBody(p,O),T=O,E+=1}else m+=f}y+=P+v,m=s}return p},e.chain=function(s,u,h,l,f,v){for(var c=s.bodies,p=1;p<c.length;p++){var m=c[p-1],y=c[p],T=m.bounds.max.y-m.bounds.min.y,E=m.bounds.max.x-m.bounds.min.x,S=y.bounds.max.y-y.bounds.min.y,P=y.bounds.max.x-y.bounds.min.x,M={bodyA:m,pointA:{x:E*u,y:T*h},bodyB:y,pointB:{x:P*l,y:S*f}},O=o.extend(M,v);d.addConstraint(s,r.create(O))}return s.label+=" Chain",s},e.mesh=function(s,u,h,l,f){var v=s.bodies,c,p,m,y,T;for(c=0;c<h;c++){for(p=1;p<u;p++)m=v[p-1+c*u],y=v[p+c*u],d.addConstraint(s,r.create(o.extend({bodyA:m,bodyB:y},f)));if(c>0)for(p=0;p<u;p++)m=v[p+(c-1)*u],y=v[p+c*u],d.addConstraint(s,r.create(o.extend({bodyA:m,bodyB:y},f))),l&&p>0&&(T=v[p-1+(c-1)*u],d.addConstraint(s,r.create(o.extend({bodyA:T,bodyB:y},f)))),l&&p<u-1&&(T=v[p+1+(c-1)*u],d.addConstraint(s,r.create(o.extend({bodyA:T,bodyB:y},f))))}return s.label+=" Mesh",s},e.pyramid=function(s,u,h,l,f,v,c){return e.stack(s,u,h,l,f,v,function(p,m,y,T,E,S){var P=Math.min(l,Math.ceil(h/2)),M=E?E.bounds.max.x-E.bounds.min.x:0;if(!(T>P)){T=P-T;var O=T,L=h-1-T;if(!(y<O||y>L)){S===1&&n.translate(E,{x:(y+(h%2===1?1:-1))*M,y:0});var F=E?y*M:0;return c(s+F+y*f,m,y,T,E,S)}}})},e.newtonsCradle=function(s,u,h,l,f){for(var v=d.create({label:"Newtons Cradle"}),c=0;c<h;c++){var p=1.9,m=i.circle(s+c*(l*p),u+f,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),y=r.create({pointA:{x:s+c*(l*p),y:u},bodyB:m});d.addBody(v,m),d.addConstraint(v,y)}return v},e.car=function(s,u,h,l,f){var v=n.nextGroup(!0),c=20,p=-h*.5+c,m=h*.5-c,y=0,T=d.create({label:"Car"}),E=i.rectangle(s,u,h,l,{collisionFilter:{group:v},chamfer:{radius:l*.5},density:2e-4}),S=i.circle(s+p,u+y,f,{collisionFilter:{group:v},friction:.8}),P=i.circle(s+m,u+y,f,{collisionFilter:{group:v},friction:.8}),M=r.create({bodyB:E,pointB:{x:p,y},bodyA:S,stiffness:1,length:0}),O=r.create({bodyB:E,pointB:{x:m,y},bodyA:P,stiffness:1,length:0});return d.addBody(T,E),d.addBody(T,S),d.addBody(T,P),d.addConstraint(T,M),d.addConstraint(T,O),T},e.softBody=function(s,u,h,l,f,v,c,p,m,y){m=o.extend({inertia:1/0},m),y=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},y);var T=e.stack(s,u,h,l,f,v,function(E,S){return i.circle(E,S,p,m)});return e.mesh(T,h,l,c,y),T.label="Soft Body",T}})()},function(a,x,t){var e={};a.exports=e,t(84);var d=t(32);(function(){e.pathToVertices=function(r,o){typeof window<"u"&&!("SVGPathSeg"in window)&&d.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,i,s,u,h,l,f,v,c,p,m=[],y,T,E=0,S=0,P=0;o=o||15;var M=function(L,F,b){var B=b%2===1&&b>1;if(!c||L!=c.x||F!=c.y){c&&B?(y=c.x,T=c.y):(y=0,T=0);var U={x:y+L,y:T+F};(B||!c)&&(c=U),m.push(U),S=y+L,P=T+F}},O=function(L){var F=L.pathSegTypeAsLetter.toUpperCase();if(F!=="Z"){switch(F){case"M":case"L":case"T":case"C":case"S":case"Q":S=L.x,P=L.y;break;case"H":S=L.x;break;case"V":P=L.y;break}M(S,P,L.pathSegType)}};for(e._svgPathToAbsolute(r),s=r.getTotalLength(),l=[],n=0;n<r.pathSegList.numberOfItems;n+=1)l.push(r.pathSegList.getItem(n));for(f=l.concat();E<s;){if(p=r.getPathSegAtLength(E),h=l[p],h!=v){for(;f.length&&f[0]!=h;)O(f.shift());v=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":u=r.getPointAtLength(E),M(u.x,u.y,0);break}E+=o}for(n=0,i=f.length;n<i;++n)O(f[n]);return m},e._svgPathToAbsolute=function(r){for(var o,n,i,s,u,h,l=r.pathSegList,f=0,v=0,c=l.numberOfItems,p=0;p<c;++p){var m=l.getItem(p),y=m.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(y))"x"in m&&(f=m.x),"y"in m&&(v=m.y);else switch("x1"in m&&(i=f+m.x1),"x2"in m&&(u=f+m.x2),"y1"in m&&(s=v+m.y1),"y2"in m&&(h=v+m.y2),"x"in m&&(f+=m.x),"y"in m&&(v+=m.y),y){case"m":l.replaceItem(r.createSVGPathSegMovetoAbs(f,v),p);break;case"l":l.replaceItem(r.createSVGPathSegLinetoAbs(f,v),p);break;case"h":l.replaceItem(r.createSVGPathSegLinetoHorizontalAbs(f),p);break;case"v":l.replaceItem(r.createSVGPathSegLinetoVerticalAbs(v),p);break;case"c":l.replaceItem(r.createSVGPathSegCurvetoCubicAbs(f,v,i,s,u,h),p);break;case"s":l.replaceItem(r.createSVGPathSegCurvetoCubicSmoothAbs(f,v,u,h),p);break;case"q":l.replaceItem(r.createSVGPathSegCurvetoQuadraticAbs(f,v,i,s),p);break;case"t":l.replaceItem(r.createSVGPathSegCurvetoQuadraticSmoothAbs(f,v),p);break;case"a":l.replaceItem(r.createSVGPathSegArcAbs(f,v,m.r1,m.r2,m.angle,m.largeArcFlag,m.sweepFlag),p);break;case"z":case"Z":f=o,v=n;break}(y=="M"||y=="m")&&(o=f,n=v)}}})()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),d=t(41),r=t(0),o=t(249),n=t(9),i=t(2),s=t(126),u=t(64),h=new r({Extends:n,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(f,v,c){n.call(this),this.tile=v,this.world=f,v.physics.matterBody&&v.physics.matterBody.destroy(),v.physics.matterBody=this;var p=i(c,"body",null),m=i(c,"addToWorld",!0);if(p)this.setBody(p,m);else{var y=v.getCollisionGroup(),T=i(y,"objects",[]);T.length>0?this.setFromTileCollision(c):this.setFromTileRectangle(c)}},setFromTileRectangle:function(l){l===void 0&&(l={}),s(l,"isStatic")||(l.isStatic=!0),s(l,"addToWorld")||(l.addToWorld=!0);var f=this.tile.getBounds(),v=f.x+f.width/2,c=f.y+f.height/2,p=e.rectangle(v,c,f.width,f.height,l);return this.setBody(p,l.addToWorld),this},setFromTileCollision:function(l){l===void 0&&(l={}),s(l,"isStatic")||(l.isStatic=!0),s(l,"addToWorld")||(l.addToWorld=!0);for(var f=this.tile.tilemapLayer.scaleX,v=this.tile.tilemapLayer.scaleY,c=this.tile.getLeft(),p=this.tile.getTop(),m=this.tile.getCollisionGroup(),y=i(m,"objects",[]),T=[],E=0;E<y.length;E++){var S=y[E],P=c+S.x*f,M=p+S.y*v,O=S.width*f,L=S.height*v,F=null;if(S.rectangle)F=e.rectangle(P+O/2,M+L/2,O,L,l);else if(S.ellipse)F=e.circle(P+O/2,M+L/2,O/2,l);else if(S.polygon||S.polyline){var b=S.polygon?S.polygon:S.polyline,B=b.map(function(W){return{x:W.x*f,y:W.y*v}}),U=u.create(B),X=u.centre(U);P+=X.x,M+=X.y,F=e.fromVertices(P,M,U,l)}F&&T.push(F)}return T.length===1?this.setBody(T[0],l.addToWorld):T.length>1&&(l.parts=T,this.setBody(d.create(l),l.addToWorld)),this},setBody:function(l,f){return f===void 0&&(f=!0),this.body&&this.removeBody(),this.body=l,this.body.gameObject=this,f&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});a.exports=h},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1399);e.Body=t(41),e.Composite=t(118),e.World=t(596),e.Detector=t(273),e.Grid=t(597),e.Pairs=t(598),e.Pair=t(250),e.Query=t(1400),e.Resolver=t(599),e.SAT=t(274),e.Constraint=t(128),e.Common=t(32),e.Engine=t(1401),e.Events=t(166),e.Sleeping=t(165),e.Plugin=t(595),e.Bodies=t(86),e.Composites=t(591),e.Axes=t(271),e.Bounds=t(84),e.Svg=t(592),e.Vector=t(83),e.Vertices=t(64),e.World.add=e.Composite.add,e.World.remove=e.Composite.remove,e.World.addComposite=e.Composite.addComposite,e.World.addBody=e.Composite.addBody,e.World.addConstraint=e.Composite.addConstraint,e.World.clear=e.Composite.clear,a.exports=e},function(a,x,t){var e={};a.exports=e;var d=t(32);(function(){e._registry={},e.register=function(r){if(e.isPlugin(r)||d.warn("Plugin.register:",e.toString(r),"does not implement all required fields."),r.name in e._registry){var o=e._registry[r.name],n=e.versionParse(r.version).number,i=e.versionParse(o.version).number;n>i?(d.warn("Plugin.register:",e.toString(o),"was upgraded to",e.toString(r)),e._registry[r.name]=r):n<i?d.warn("Plugin.register:",e.toString(o),"can not be downgraded to",e.toString(r)):r!==o&&d.warn("Plugin.register:",e.toString(r),"is already registered to different plugin object")}else e._registry[r.name]=r;return r},e.resolve=function(r){return e._registry[e.dependencyParse(r).name]},e.toString=function(r){return typeof r=="string"?r:(r.name||"anonymous")+"@"+(r.version||r.range||"0.0.0")},e.isPlugin=function(r){return r&&r.name&&r.version&&r.install},e.isUsed=function(r,o){return r.used.indexOf(o)>-1},e.isFor=function(r,o){var n=r.for&&e.dependencyParse(r.for);return!r.for||o.name===n.name&&e.versionSatisfies(o.version,n.range)},e.use=function(r,o){if(r.uses=(r.uses||[]).concat(o||[]),r.uses.length===0){d.warn("Plugin.use:",e.toString(r),"does not specify any dependencies to install.");return}for(var n=e.dependencies(r),i=d.topologicalSort(n),s=[],u=0;u<i.length;u+=1)if(i[u]!==r.name){var h=e.resolve(i[u]);if(!h){s.push("❌ "+i[u]);continue}e.isUsed(r,h.name)||(e.isFor(h,r)||(d.warn("Plugin.use:",e.toString(h),"is for",h.for,"but installed on",e.toString(r)+"."),h._warned=!0),h.install?h.install(r):(d.warn("Plugin.use:",e.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(s.push("🔶 "+e.toString(h)),delete h._warned):s.push("✅ "+e.toString(h)),r.used.push(h.name))}s.length>0&&!h.silent&&d.info(s.join("  "))},e.dependencies=function(r,o){var n=e.dependencyParse(r),i=n.name;if(o=o||{},!(i in o)){r=e.resolve(r)||r,o[i]=d.map(r.uses||[],function(u){e.isPlugin(u)&&e.register(u);var h=e.dependencyParse(u),l=e.resolve(u);return l&&!e.versionSatisfies(l.version,h.range)?(d.warn("Plugin.dependencies:",e.toString(l),"does not satisfy",e.toString(h),"used by",e.toString(n)+"."),l._warned=!0,r._warned=!0):l||(d.warn("Plugin.dependencies:",e.toString(u),"used by",e.toString(n),"could not be resolved."),r._warned=!0),h.name});for(var s=0;s<o[i].length;s+=1)e.dependencies(o[i][s],o);return o}},e.dependencyParse=function(r){if(d.isString(r)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return o.test(r)||d.warn("Plugin.dependencyParse:",r,"is not a valid dependency string."),{name:r.split("@")[0],range:r.split("@")[1]||"*"}}return{name:r.name,range:r.range||r.version}},e.versionParse=function(r){var o=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;o.test(r)||d.warn("Plugin.versionParse:",r,"is not a valid version or range.");var n=r.split("-");r=n[0];var i=isNaN(Number(r[0])),s=i?r.substr(1):r,u=d.map(s.split("."),function(h){return Number(h)});return{isRange:i,version:s,range:r,operator:i?r[0]:"",parts:u,prerelease:n[1],number:u[0]*1e8+u[1]*1e4+u[2]}},e.versionSatisfies=function(r,o){o=o||"*";var n=e.versionParse(o),i=n.parts,s=e.versionParse(r),u=s.parts;if(n.isRange){if(n.operator==="*"||r==="*")return!0;if(n.operator==="~")return u[0]===i[0]&&u[1]===i[1]&&u[2]>=i[2];if(n.operator==="^")return i[0]>0?u[0]===i[0]&&s.number>=n.number:i[1]>0?u[1]===i[1]&&u[2]>=i[2]:u[2]===i[2]}return r===o||r==="*"}})()},function(a,x,t){var e={};a.exports=e;var d=t(118);t(128);var r=t(32);(function(){e.create=function(o){var n=d.create(),i={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return r.extend(n,i,o)}})()},function(a,x,t){var e={};a.exports=e;var d=t(250),r=t(273),o=t(32);(function(){e.create=function(n){var i={controller:e,detector:r.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(i,n)},e.update=function(n,i,s,u){var h,l,f,v=s.world,c=n.buckets,p,m,y=!1,T=s.metrics;for(T.broadphaseTests=0,h=0;h<i.length;h++){var E=i[h];if(!(E.isSleeping&&!u)&&!(E.bounds.max.x<v.bounds.min.x||E.bounds.min.x>v.bounds.max.x||E.bounds.max.y<v.bounds.min.y||E.bounds.min.y>v.bounds.max.y)){var S=e._getRegion(n,E);if(!E.region||S.id!==E.region.id||u){T.broadphaseTests+=1,(!E.region||u)&&(E.region=S);var P=e._regionUnion(S,E.region);for(l=P.startCol;l<=P.endCol;l++)for(f=P.startRow;f<=P.endRow;f++){m=e._getBucketId(l,f),p=c[m];var M=l>=S.startCol&&l<=S.endCol&&f>=S.startRow&&f<=S.endRow,O=l>=E.region.startCol&&l<=E.region.endCol&&f>=E.region.startRow&&f<=E.region.endRow;!M&&O&&O&&p&&e._bucketRemoveBody(n,p,E),(E.region===S||M&&!O||u)&&(p||(p=e._createBucket(c,m)),e._bucketAddBody(n,p,E))}E.region=S,y=!0}}}y&&(n.pairsList=e._createActivePairsList(n))},e.clear=function(n){n.buckets={},n.pairs={},n.pairsList=[]},e._regionUnion=function(n,i){var s=Math.min(n.startCol,i.startCol),u=Math.max(n.endCol,i.endCol),h=Math.min(n.startRow,i.startRow),l=Math.max(n.endRow,i.endRow);return e._createRegion(s,u,h,l)},e._getRegion=function(n,i){var s=i.bounds,u=Math.floor(s.min.x/n.bucketWidth),h=Math.floor(s.max.x/n.bucketWidth),l=Math.floor(s.min.y/n.bucketHeight),f=Math.floor(s.max.y/n.bucketHeight);return e._createRegion(u,h,l,f)},e._createRegion=function(n,i,s,u){return{id:n+","+i+","+s+","+u,startCol:n,endCol:i,startRow:s,endRow:u}},e._getBucketId=function(n,i){return"C"+n+"R"+i},e._createBucket=function(n,i){var s=n[i]=[];return s},e._bucketAddBody=function(n,i,s){for(var u=0;u<i.length;u++){var h=i[u];if(!(s.id===h.id||s.isStatic&&h.isStatic)){var l=d.id(s,h),f=n.pairs[l];f?f[2]+=1:n.pairs[l]=[s,h,1]}}i.push(s)},e._bucketRemoveBody=function(n,i,s){i.splice(i.indexOf(s),1);for(var u=0;u<i.length;u++){var h=i[u],l=d.id(s,h),f=n.pairs[l];f&&(f[2]-=1)}},e._createActivePairsList=function(n){var i,s,u=[];i=o.keys(n.pairs);for(var h=0;h<i.length;h++)s=n.pairs[i[h]],s[2]>0?u.push(s):delete n.pairs[i[h]];return u}})()},function(a,x,t){var e={};a.exports=e;var d=t(250),r=t(32);(function(){e._pairMaxIdleLife=1e3,e.create=function(o){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},e.update=function(o,n,i){var s=o.list,u=o.table,h=o.collisionStart,l=o.collisionEnd,f=o.collisionActive,v,c,p,m;for(h.length=0,l.length=0,f.length=0,m=0;m<s.length;m++)s[m].confirmedActive=!1;for(m=0;m<n.length;m++)v=n[m],v.collided&&(c=d.id(v.bodyA,v.bodyB),p=u[c],p?(p.isActive?f.push(p):h.push(p),d.update(p,v,i),p.confirmedActive=!0):(p=d.create(v,i),u[c]=p,h.push(p),s.push(p)));for(m=0;m<s.length;m++)p=s[m],p.isActive&&!p.confirmedActive&&(d.setActive(p,!1,i),l.push(p))},e.removeOld=function(o,n){var i=o.list,s=o.table,u=[],h,l,f,v;for(v=0;v<i.length;v++){if(h=i[v],l=h.collision,l.bodyA.isSleeping||l.bodyB.isSleeping){h.timeUpdated=n;continue}n-h.timeUpdated>e._pairMaxIdleLife&&u.push(v)}for(v=0;v<u.length;v++)f=u[v]-v,h=i[f],delete s[h.id],i.splice(f,1)},e.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()},function(a,x,t){var e={};a.exports=e;var d=t(64),r=t(83),o=t(32),n=t(84);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var s,u,h;for(s=0;s<i.length;s++)u=i[s],u.isActive&&(h=u.activeContacts.length,u.collision.parentA.totalContacts+=h,u.collision.parentB.totalContacts+=h)},e.solvePosition=function(i,s,u){var h,l,f,v,c,p,m,y,T,E,S,P,M,O,L,F,b=u*e._positionDampen;for(h=0;h<s.length;h++){var B=s[h];B.previousPositionImpulse.x=B.positionImpulse.x,B.previousPositionImpulse.y=B.positionImpulse.y}for(h=0;h<i.length;h++)v=i[h],!(!v.isActive||v.isSensor)&&(c=v.collision,p=c.parentA,m=c.parentB,y=c.normal,S=p.previousPositionImpulse,P=m.previousPositionImpulse,E=c.penetration,O=P.x-S.x+E.x,L=P.y-S.y+E.y,l=y.x,f=y.y,T=l*O+f*L,v.separation=T,F=(T-v.slop)*b,(p.isStatic||m.isStatic)&&(F*=2),p.isStatic||p.isSleeping||(M=F/p.totalContacts,p.positionImpulse.x+=l*M,p.positionImpulse.y+=f*M),m.isStatic||m.isSleeping||(M=F/m.totalContacts,m.positionImpulse.x-=l*M,m.positionImpulse.y-=f*M))},e.postSolvePosition=function(i){for(var s=0;s<i.length;s++){var u=i[s];if(u.totalContacts=0,u.positionImpulse.x!==0||u.positionImpulse.y!==0){for(var h=0;h<u.parts.length;h++){var l=u.parts[h];d.translate(l.vertices,u.positionImpulse),n.update(l.bounds,l.vertices,u.velocity),l.position.x+=u.positionImpulse.x,l.position.y+=u.positionImpulse.y}u.positionPrev.x+=u.positionImpulse.x,u.positionPrev.y+=u.positionImpulse.y,r.dot(u.positionImpulse,u.velocity)<0?(u.positionImpulse.x=0,u.positionImpulse.y=0):(u.positionImpulse.x*=e._positionWarming,u.positionImpulse.y*=e._positionWarming)}}},e.preSolveVelocity=function(i){var s,u,h,l,f,v,c,p,m,y,T,E,S,P,M=r._temp[0],O=r._temp[1];for(s=0;s<i.length;s++)if(h=i[s],!(!h.isActive||h.isSensor))for(l=h.activeContacts,f=h.collision,v=f.parentA,c=f.parentB,p=f.normal,m=f.tangent,u=0;u<l.length;u++)y=l[u],T=y.vertex,E=y.normalImpulse,S=y.tangentImpulse,(E!==0||S!==0)&&(M.x=p.x*E+m.x*S,M.y=p.y*E+m.y*S,v.isStatic||v.isSleeping||(P=r.sub(T,v.position,O),v.positionPrev.x+=M.x*v.inverseMass,v.positionPrev.y+=M.y*v.inverseMass,v.anglePrev+=r.cross(P,M)*v.inverseInertia),c.isStatic||c.isSleeping||(P=r.sub(T,c.position,O),c.positionPrev.x-=M.x*c.inverseMass,c.positionPrev.y-=M.y*c.inverseMass,c.anglePrev-=r.cross(P,M)*c.inverseInertia))},e.solveVelocity=function(i,s){for(var u=s*s,h=r._temp[0],l=r._temp[1],f=r._temp[2],v=r._temp[3],c=r._temp[4],p=r._temp[5],m=0;m<i.length;m++){var y=i[m];if(!(!y.isActive||y.isSensor)){var T=y.collision,E=T.parentA,S=T.parentB,P=T.normal,M=T.tangent,O=y.activeContacts,L=1/O.length;E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,E.angularVelocity=E.angle-E.anglePrev,S.angularVelocity=S.angle-S.anglePrev;for(var F=0;F<O.length;F++){var b=O[F],B=b.vertex,U=r.sub(B,E.position,l),X=r.sub(B,S.position,f),W=r.add(E.velocity,r.mult(r.perp(U),E.angularVelocity),v),Z=r.add(S.velocity,r.mult(r.perp(X),S.angularVelocity),c),J=r.sub(W,Z,p),N=r.dot(P,J),I=r.dot(M,J),G=Math.abs(I),V=o.sign(I),Y=(1+y.restitution)*N,z=o.clamp(y.separation+N,0,1)*e._frictionNormalMultiplier,H=I,$=1/0;G>y.friction*y.frictionStatic*z*u&&($=G,H=o.clamp(y.friction*V*u,-$,$));var Q=r.cross(U,P),k=r.cross(X,P),tt=L/(E.inverseMass+S.inverseMass+E.inverseInertia*Q*Q+S.inverseInertia*k*k);if(Y*=tt,H*=tt,N<0&&N*N>e._restingThresh*u)b.normalImpulse=0;else{var it=b.normalImpulse;b.normalImpulse=Math.min(b.normalImpulse+Y,0),Y=b.normalImpulse-it}if(I*I>e._restingThreshTangent*u)b.tangentImpulse=0;else{var st=b.tangentImpulse;b.tangentImpulse=o.clamp(b.tangentImpulse+H,-$,$),H=b.tangentImpulse-st}h.x=P.x*Y+M.x*H,h.y=P.y*Y+M.y*H,E.isStatic||E.isSleeping||(E.positionPrev.x+=h.x*E.inverseMass,E.positionPrev.y+=h.y*E.inverseMass,E.anglePrev+=r.cross(U,h)*E.inverseInertia),S.isStatic||S.isSleeping||(S.positionPrev.x-=h.x*S.inverseMass,S.positionPrev.y-=h.y*S.inverseMass,S.anglePrev-=r.cross(X,h)*S.inverseInertia)}}}}})()},function(a,x){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}a.exports=t},function(a,x,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(276),d=function(r,o,n,i){for(var s=r[0],u=1;u<r.length;u++){var h=r[u];e(h,s,o,n,i),s=h}return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),d=function(r,o,n,i,s){return e(r,"angle",o,n,i,s)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){for(var o=0;o<e.length;o++){var n=e[o];d.call(r,n)}return e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){r===void 0&&(r=0);for(var o=r;o<e.length;o++){var n=e[o],i=!0;for(var s in d)n[s]!==d[s]&&(i=!1);if(i)return n}return null};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){r===void 0&&(r=0);for(var o=r;o<e.length;o++){var n=e[o],i=!0;for(var s in d)n[s]!==d[s]&&(i=!1);if(i)return n}return null};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(289),d=t(123),r=t(2),o=t(1),n=t(129),i=new n({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1),s=function(u,h){h===void 0&&(h={});var l=h.hasOwnProperty("width"),f=h.hasOwnProperty("height"),v=r(h,"width",-1),c=r(h,"height",-1),p=r(h,"cellWidth",1),m=r(h,"cellHeight",p),y=r(h,"position",d.TOP_LEFT),T=r(h,"x",0),E=r(h,"y",0),S=0,P=0,M=v*p,O=c*m;i.setPosition(T,E),i.setSize(p,m);for(var L=0;L<u.length;L++)if(e(u[L],i,y),l&&v===-1)i.x+=p;else if(f&&c===-1)i.y+=m;else if(f&&!l){if(P+=m,i.y+=m,P===O&&(P=0,S+=p,i.y=E,i.x+=p,S===M))break}else if(S+=p,i.x+=p,S===M&&(S=0,P+=m,i.x=T,i.y+=m,P===O))break;return u};a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),d=2,r={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o,n,i,s){return o===void 0&&(o=1),n===void 0?this.alpha=o:(this._alphaTL=e(o,0,1),this._alphaTR=e(n,0,1),this._alphaBL=e(i,0,1),this._alphaBR=e(s,0,1)),this},alpha:{get:function(){return this._alpha},set:function(o){var n=e(o,0,1);this._alpha=n,this._alphaTL=n,this._alphaTR=n,this._alphaBL=n,this._alphaBR=n,n===0?this.renderFlags&=~d:this.renderFlags|=d}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(o){var n=e(o,0,1);this._alphaTL=n,n!==0&&(this.renderFlags|=d)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(o){var n=e(o,0,1);this._alphaTR=n,n!==0&&(this.renderFlags|=d)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(o){var n=e(o,0,1);this._alphaBL=n,n!==0&&(this.renderFlags|=d)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(o){var n=e(o,0,1);this._alphaBR=n,n!==0&&(this.renderFlags|=d)}}};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,d){return this.width=e,this.height=d,this},setDisplaySize:function(e,d){return this.displayWidth=e,this.displayHeight=d,this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={texture:null,frame:null,isCropped:!1,setCrop:function(e,d,r,o){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,d,r,o,this.flipX,this.flipY);else{var n=e;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,d){return this.flipX=e,this.flipY=d,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),d=t(308),r=t(3),o={prepareBoundsOutput:function(n,i){if(i===void 0&&(i=!1),this.rotation!==0&&d(n,this.x,this.y,this.rotation),i&&this.parentContainer){var s=this.parentContainer.getBoundsTransformMatrix();s.transformPoint(n.x,n.y,n)}return n},getCenter:function(n){return n===void 0&&(n=new r),n.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,n.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,n},getTopLeft:function(n,i){return n||(n=new r),n.x=this.x-this.displayWidth*this.originX,n.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(n,i)},getTopCenter:function(n,i){return n||(n=new r),n.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,n.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(n,i)},getTopRight:function(n,i){return n||(n=new r),n.x=this.x-this.displayWidth*this.originX+this.displayWidth,n.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(n,i)},getLeftCenter:function(n,i){return n||(n=new r),n.x=this.x-this.displayWidth*this.originX,n.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(n,i)},getRightCenter:function(n,i){return n||(n=new r),n.x=this.x-this.displayWidth*this.originX+this.displayWidth,n.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(n,i)},getBottomLeft:function(n,i){return n||(n=new r),n.x=this.x-this.displayWidth*this.originX,n.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(n,i)},getBottomCenter:function(n,i){return n||(n=new r),n.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,n.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(n,i)},getBottomRight:function(n,i){return n||(n=new r),n.x=this.x-this.displayWidth*this.originX+this.displayWidth,n.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(n,i)},getBounds:function(n){n===void 0&&(n=new e);var i,s,u,h,l,f,v,c;if(this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(n),p.transformPoint(n.x,n.y,n),i=n.x,s=n.y,this.getTopRight(n),p.transformPoint(n.x,n.y,n),u=n.x,h=n.y,this.getBottomLeft(n),p.transformPoint(n.x,n.y,n),l=n.x,f=n.y,this.getBottomRight(n),p.transformPoint(n.x,n.y,n),v=n.x,c=n.y}else this.getTopLeft(n),i=n.x,s=n.y,this.getTopRight(n),u=n.x,h=n.y,this.getBottomLeft(n),l=n.x,f=n.y,this.getBottomRight(n),v=n.x,c=n.y;return n.x=Math.min(i,u,l,v),n.y=Math.min(s,h,f,c),n.width=Math.max(i,u,l,v)-n.x,n.height=Math.max(s,h,f,c)-n.y,n}};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="blur"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="boot"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="contextlost"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="contextrestored"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="destroy"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="focus"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="hidden"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pause"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="postrender"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="poststep"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="prerender"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="prestep"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="ready"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resume"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="step"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="visible"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="postrender"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="prerender"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="render"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resize"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,d){return e===void 0&&(e=.5),d===void 0&&(d=e),this.originX=e,this.originY=d,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,d){return e===void 0&&(e=0),d===void 0&&(d=e),this.displayOriginX=e,this.displayOriginY=d,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(36),d=t(99),r=t(6),o=t(100),n=t(3),i={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(s,u){u===void 0&&(u=this.pathConfig);var h=this.pathTween;return h&&h.isPlaying()&&h.stop(),this.path=s,u&&this.startFollow(u),this},setRotateToPath:function(s,u){return u===void 0&&(u=0),this.rotateToPath=s,this.pathRotationOffset=u,this},isFollowing:function(){var s=this.pathTween;return s&&s.isPlaying()},startFollow:function(s,u){s===void 0&&(s={}),u===void 0&&(u=0);var h=this.pathTween;h&&h.isPlaying()&&h.stop(),typeof s=="number"&&(s={duration:s}),s.from=r(s,"from",0),s.to=r(s,"to",1);var l=d(s,"positionOnPath",!1);this.rotateToPath=d(s,"rotateToPath",!1),this.pathRotationOffset=r(s,"rotationOffset",0);var f=r(s,"startAt",u);if(f&&(s.onStart=function(c){var p=c.data[0];p.progress=f,p.elapsed=p.duration*f;var m=p.ease(p.progress);p.current=p.start+(p.end-p.start)*m,p.target[p.key]=p.current}),this.pathOffset||(this.pathOffset=new n(this.x,this.y)),this.pathVector||(this.pathVector=new n),this.pathDelta||(this.pathDelta=new n),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(s),this.path.getStartPoint(this.pathOffset),l&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var v=this.path.getPoint(.1);this.rotation=Math.atan2(v.y-this.y,v.x-this.x)+e(this.pathRotationOffset)}return this.pathConfig=s,this},pauseFollow:function(){var s=this.pathTween;return s&&s.isPlaying()&&s.pause(),this},resumeFollow:function(){var s=this.pathTween;return s&&s.isPaused()&&s.resume(),this},stopFollow:function(){var s=this.pathTween;return s&&s.isPlaying()&&s.stop(),this},pathUpdate:function(){var s=this.pathTween;if(s){var u=s.data[0],h=this.pathDelta,l=this.pathVector;if(h.copy(l).negate(),u.state===o.COMPLETE){this.path.getPoint(1,l),h.add(l),l.add(this.pathOffset),this.setPosition(l.x,l.y);return}else if(u.state!==o.PLAYING_FORWARD&&u.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(s.getValue(),l),h.add(l),l.add(this.pathOffset);var f=this.x,v=this.y;this.setPosition(l.x,l.y);var c=this.x-f,p=this.y-v;if(c===0&&p===0)return;if(u.state!==this._prevDirection){this._prevDirection=u.state;return}this.rotateToPath&&(this.rotation=Math.atan2(p,c)+e(this.pathRotationOffset))}}};a.exports=i},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){return e===void 0&&(e=this.frame),this.width=e.realWidth,this.height=e.realHeight,this},setSize:function(e,d){return this.width=e,this.height=d,this},setDisplaySize:function(e,d){return this.displayWidth=e,this.displayHeight=d,this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,e={texture:null,frame:null,isCropped:!1,setTexture:function(d,r){return this.texture=this.scene.sys.textures.get(d),this.setFrame(r)},setFrame:function(d,r,o){return r===void 0&&(r=!0),o===void 0&&(o=!0),this.frame=this.texture.get(d),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};a.exports=e},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,e={texture:null,frame:null,isCropped:!1,setCrop:function(d,r,o,n){if(d===void 0)this.isCropped=!1;else if(this.frame){if(typeof d=="number")this.frame.setCropUVs(this._crop,d,r,o,n,this.flipX,this.flipY);else{var i=d;this.frame.setCropUVs(this._crop,i.x,i.y,i.width,i.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(d,r){return this.texture=this.scene.sys.textures.get(d),this.setFrame(r)},setFrame:function(d,r,o){return r===void 0&&(r=!0),o===void 0&&(o=!0),this.frame=this.texture.get(d),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};a.exports=e},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,d,r,o){return e===void 0&&(e=16777215),d===void 0&&(d=e,r=e,o=e),this.tintTopLeft=e,this.tintTopRight=d,this.tintBottomLeft=r,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(e,d,r,o){return this.setTint(e,d,r,o),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="changedata"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="changedata-"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="destroy"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="removedata"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="setdata"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="addedtoscene"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="destroy"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="removedfromscene"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="complete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="created"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="error"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="loop"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="play"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="seeked"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="seeking"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="stop"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="timeout"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="unlocked"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="addedtoscene"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="boot"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="create"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="destroy"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pause"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="postupdate"},function(a,x){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="prerender"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="preupdate"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="ready"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="removedfromscene"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="render"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resume"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="shutdown"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="sleep"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="start"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="transitioncomplete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="transitioninit"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="transitionout"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="transitionstart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="transitionwake"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="update"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="wake"},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),d=function(r,o,n,i,s){return e(r,"alpha",o,n,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),d=function(r,o,n,i,s){return e(r,"x",o,n,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),d=function(r,o,n,i,s,u,h){return n==null&&(n=o),e(r,"x",o,i,u,h),e(r,"y",n,s,u,h)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),d=function(r,o,n,i,s){return e(r,"y",o,n,i,s)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){r===void 0&&(r=0),o===void 0&&(o=6.28);for(var n=r,i=(o-r)/e.length,s=0;s<e.length;s++)e[s].x=d.x+d.radius*Math.cos(n),e[s].y=d.y+d.radius*Math.sin(n),n+=i;return e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){r===void 0&&(r=0),o===void 0&&(o=6.28);for(var n=r,i=(o-r)/e.length,s=d.width/2,u=d.height/2,h=0;h<e.length;h++)e[h].x=d.x+s*Math.cos(n),e[h].y=d.y+u*Math.sin(n),n+=i;return e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(172),d=function(r,o){for(var n=e(o,r.length),i=0;i<r.length;i++){var s=r[i],u=n[i];s.x=u.x,s.y=u.y}return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(316),d=t(178),r=t(179),o=function(n,i,s){s===void 0&&(s=0);var u=e(i,!1,n.length);s>0?d(u,s):s<0&&r(u,Math.abs(s));for(var h=0;h<n.length;h++)n[h].x=u[h].x,n[h].y=u[h].y;return n};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(317),d=function(r,o,n){var i=e({x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},n),s=e({x1:o.x2,y1:o.y2,x2:o.x3,y2:o.y3},n),u=e({x1:o.x3,y1:o.y3,x2:o.x1,y2:o.y1},n);i.pop(),s.pop(),u.pop(),i=i.concat(s,u);for(var h=i.length/r.length,l=0,f=0;f<r.length;f++){var v=r[f],c=i[Math.floor(l)];v.x=c.x,v.y=c.y,l+=h}return r};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){for(var o=0;o<e.length;o++){var n=e[o];n.anims&&n.anims.play(d,r)}return e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(170),d=function(r,o){for(var n=0;n<r.length;n++)e(o,r[n]);return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(180),d=function(r,o){for(var n=0;n<r.length;n++)e(o,r[n]);return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(173),d=function(r,o){for(var n=0;n<r.length;n++)e(o,r[n]);return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(174),d=function(r,o){for(var n=0;n<r.length;n++)e(o,r[n]);return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(181),d=function(r,o){for(var n=0;n<r.length;n++)e(o,r[n]);return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),d=function(r,o,n,i,s){return e(r,"rotation",o,n,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(182),d=t(50),r=function(o,n,i){for(var s=n.x,u=n.y,h=0;h<o.length;h++){var l=o[h];e(l,s,u,i,Math.max(1,d(l.x,l.y,s,u)))}return o};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(182),d=function(r,o,n,i){var s=o.x,u=o.y;if(i===0)return r;for(var h=0;h<r.length;h++)e(r[h],s,u,n,i);return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),d=function(r,o,n,i,s){return e(r,"scaleX",o,n,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),d=function(r,o,n,i,s,u,h){return n==null&&(n=o),e(r,"scaleX",o,i,u,h),e(r,"scaleY",n,s,u,h)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),d=function(r,o,n,i,s){return e(r,"scaleY",o,n,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s){return e(r,"alpha",o,n,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i){return e(r,"blendMode",o,0,n,i)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s){return e(r,"depth",o,n,i,s)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){for(var o=0;o<e.length;o++)e[o].setInteractive(d,r);return e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s,u,h){return n==null&&(n=o),e(r,"originX",o,i,u,h),e(r,"originY",n,s,u,h),r.forEach(function(l){l.updateDisplayOrigin()}),r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s){return e(r,"rotation",o,n,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s,u,h){return n==null&&(n=o),e(r,"scaleX",o,i,u,h),e(r,"scaleY",n,s,u,h)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s){return e(r,"scaleX",o,n,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s){return e(r,"scaleY",o,n,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s,u,h){return n==null&&(n=o),e(r,"scrollFactorX",o,i,u,h),e(r,"scrollFactorY",n,s,u,h)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s){return e(r,"scrollFactorX",o,n,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s){return e(r,"scrollFactorY",o,n,i,s)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n){for(var i=0;i<e.length;i++)e[i].setTint(d,r,o,n);return e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i){return e(r,"visible",o,0,n,i)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s){return e(r,"x",o,n,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s,u,h){return n==null&&(n=o),e(r,"x",o,i,u,h),e(r,"y",n,s,u,h)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),d=function(r,o,n,i,s){return e(r,"y",o,n,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),d=function(r,o,n,i,s){i===void 0&&(i=0),s===void 0&&(s=new e);var u,h;if(r.length>1){var l,f,v,c;if(i===0){var p=r.length-1;for(u=r[p].x,h=r[p].y,l=p-1;l>=0;l--)c=r[l],f=c.x,v=c.y,c.x=u,c.y=h,u=f,h=v;r[p].x=o,r[p].y=n}else{for(u=r[0].x,h=r[0].y,l=1;l<r.length;l++)c=r[l],f=c.x,v=c.y,c.x=u,c.y=h,u=f,h=v;r[0].x=o,r[0].y=n}}else u=r[0].x,h=r[0].y,r[0].x=o,r[0].y=n;return s.x=u,s.y=h,s};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(131),d=function(r){return e(r)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(183),d=function(r,o,n,i,s){s===void 0&&(s=!1);var u=Math.abs(i-n)/r.length,h;if(s)for(h=0;h<r.length;h++)r[h][o]+=e(h*u,n,i);else for(h=0;h<r.length;h++)r[h][o]=e(h*u,n,i);return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(184),d=function(r,o,n,i,s){s===void 0&&(s=!1);var u=Math.abs(i-n)/r.length,h;if(s)for(h=0;h<r.length;h++)r[h][o]+=e(h*u,n,i);else for(h=0;h<r.length;h++)r[h][o]=e(h*u,n,i);return r};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n){n===void 0&&(n=!1);var i=Math.abs(o-r)/e.length,s;if(n)for(s=0;s<e.length;s++)e[s][d]+=s*i+r;else for(s=0;s<e.length;s++)e[s][d]=s*i+r;return e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var d=0;d<e.length;d++)e[d].visible=!e[d].visible;return e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(68),d=function(r,o,n){n===void 0&&(n=0);for(var i=0;i<r.length;i++){var s=r[i];s.x=e(s.x,o.left-n,o.right+n),s.y=e(s.y,o.top-n,o.bottom+n)}return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Animation:t(185),AnimationFrame:t(319),AnimationManager:t(321),AnimationState:t(164),Events:t(132)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="add"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationcomplete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationcomplete-"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationrepeat"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationrestart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationstart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationstop"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationupdate"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pauseall"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="remove"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resumeall"},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BaseCache:t(323),CacheManager:t(325),Events:t(324)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="add"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="remove"},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Controls:t(739),Scene2D:t(742)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={FixedKeyControl:t(740),SmoothedKeyControl:t(741)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(6),r=new e({initialize:function(n){this.camera=d(n,"camera",null),this.left=d(n,"left",null),this.right=d(n,"right",null),this.up=d(n,"up",null),this.down=d(n,"down",null),this.zoomIn=d(n,"zoomIn",null),this.zoomOut=d(n,"zoomOut",null),this.zoomSpeed=d(n,"zoomSpeed",.01),this.minZoom=d(n,"minZoom",.001),this.maxZoom=d(n,"maxZoom",1e3),this.speedX=0,this.speedY=0;var i=d(n,"speed",null);typeof i=="number"?(this.speedX=i,this.speedY=i):(this.speedX=d(n,"speed.x",0),this.speedY=d(n,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(this.active){o===void 0&&(o=1);var n=this.camera;this.up&&this.up.isDown?n.scrollY-=this.speedY*o|0:this.down&&this.down.isDown&&(n.scrollY+=this.speedY*o|0),this.left&&this.left.isDown?n.scrollX-=this.speedX*o|0:this.right&&this.right.isDown&&(n.scrollX+=this.speedX*o|0),this.zoomIn&&this.zoomIn.isDown?(n.zoom-=this.zoomSpeed,n.zoom<this.minZoom&&(n.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(n.zoom+=this.zoomSpeed,n.zoom>this.maxZoom&&(n.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(6),r=new e({initialize:function(n){this.camera=d(n,"camera",null),this.left=d(n,"left",null),this.right=d(n,"right",null),this.up=d(n,"up",null),this.down=d(n,"down",null),this.zoomIn=d(n,"zoomIn",null),this.zoomOut=d(n,"zoomOut",null),this.zoomSpeed=d(n,"zoomSpeed",.01),this.minZoom=d(n,"minZoom",.001),this.maxZoom=d(n,"maxZoom",1e3),this.accelX=0,this.accelY=0;var i=d(n,"acceleration",null);typeof i=="number"?(this.accelX=i,this.accelY=i):(this.accelX=d(n,"acceleration.x",0),this.accelY=d(n,"acceleration.y",0)),this.dragX=0,this.dragY=0;var s=d(n,"drag",null);typeof s=="number"?(this.dragX=s,this.dragY=s):(this.dragX=d(n,"drag.x",0),this.dragY=d(n,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var u=d(n,"maxSpeed",null);typeof u=="number"?(this.maxSpeedX=u,this.maxSpeedY=u):(this.maxSpeedX=d(n,"maxSpeed.x",0),this.maxSpeedY=d(n,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(this.active){o===void 0&&(o=1);var n=this.camera;this._speedX>0?(this._speedX-=this.dragX*o,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*o,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*o,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*o,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(n.scrollX-=this._speedX*o|0),this._speedY!==0&&(n.scrollY-=this._speedY*o|0),this._zoom!==0&&(n.zoom+=this._zoom,n.zoom<this.minZoom?n.zoom=this.minZoom:n.zoom>this.maxZoom&&(n.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Camera:t(326),BaseCamera:t(133),CameraManager:t(799),Effects:t(333),Events:t(37)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="cameradestroy"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerafadeincomplete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerafadeinstart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerafadeoutcomplete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerafadeoutstart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="cameraflashcomplete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="cameraflashstart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="followupdate"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerapancomplete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerapanstart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="postrender"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="prerender"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerarotatecomplete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerarotatestart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerashakecomplete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerashakestart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerazoomcomplete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerazoomstart"},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),d=t(0),r=t(37),o=new d({initialize:function(i){this.camera=i,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,i,s,u,h,l,f,v){if(n===void 0&&(n=!0),i===void 0&&(i=1e3),s===void 0&&(s=0),u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=!1),f===void 0&&(f=null),v===void 0&&(v=this.camera.scene),!l&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=i,this.direction=n,this.progress=0,this.red=s,this.green=u,this.blue=h,this.alpha=n?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=f,this._onUpdateScope=v;var c=n?r.FADE_OUT_START:r.FADE_IN_START;return this.camera.emit(c,this.camera,this,i,s,u,h),this.camera},update:function(n,i){this.isRunning&&(this._elapsed+=i,this.progress=e(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(n){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera;return n.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",n.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function(n,i){if(!this.isRunning&&!this.isComplete)return!1;var s=this.camera,u=this.red/255,h=this.green/255,l=this.blue/255;return n.drawFillRect(s.x,s.y,s.width,s.height,i(l,h,u,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var n=this.direction?r.FADE_OUT_COMPLETE:r.FADE_IN_COMPLETE;this.camera.emit(n,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),d=t(0),r=t(37),o=new d({initialize:function(i){this.camera=i,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,i,s,u,h,l,f){return n===void 0&&(n=250),i===void 0&&(i=255),s===void 0&&(s=255),u===void 0&&(u=255),h===void 0&&(h=!1),l===void 0&&(l=null),f===void 0&&(f=this.camera.scene),!h&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=n,this.progress=0,this.red=i,this.green=s,this.blue=u,this.alpha=1,this._elapsed=0,this._onUpdate=l,this._onUpdateScope=f,this.camera.emit(r.FLASH_START,this.camera,this,n,i,s,u),this.camera)},update:function(n,i){this.isRunning&&(this._elapsed+=i,this.progress=e(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(n){if(!this.isRunning)return!1;var i=this.camera;return n.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",n.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function(n,i){if(!this.isRunning)return!1;var s=this.camera,u=this.red/255,h=this.green/255,l=this.blue/255;return n.drawFillRect(s.x,s.y,s.width,s.height,i(l,h,u,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),d=t(0),r=t(134),o=t(37),n=t(3),i=new d({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=new n,this.current=new n,this.destination=new n,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,u,h,l,f,v,c){h===void 0&&(h=1e3),l===void 0&&(l=r.Linear),f===void 0&&(f=!1),v===void 0&&(v=null),c===void 0&&(c=this.camera.scene);var p=this.camera;return!f&&this.isRunning||(this.isRunning=!0,this.duration=h,this.progress=0,this.source.set(p.scrollX,p.scrollY),this.destination.set(s,u),p.getScroll(s,u,this.current),typeof l=="string"&&r.hasOwnProperty(l)?this.ease=r[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=c,this.camera.emit(o.PAN_START,this.camera,this,h,s,u)),p},update:function(s,u){if(this.isRunning){this._elapsed+=u;var h=e(this._elapsed/this.duration,0,1);this.progress=h;var l=this.camera;if(this._elapsed<this.duration){var f=this.ease(h);l.getScroll(this.destination.x,this.destination.y,this.current);var v=this.source.x+(this.current.x-this.source.x)*f,c=this.source.y+(this.current.y-this.source.y)*f;l.setScroll(v,c),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,h,v,c)}else l.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,h,l.scrollX,l.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});a.exports=i},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d===void 0&&(d=1.70158),e*e*((d+1)*e-d)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d===void 0&&(d=1.70158),--e*e*((d+1)*e+d)+1};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){d===void 0&&(d=1.70158);var r=d*1.525;return(e*=2)<1?.5*(e*e*((r+1)*e-r)):.5*((e-=2)*e*((r+1)*e+r)+2)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d=!1;return e<.5?(e=1-e*2,d=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,d?(1-e)*.5:e*.5+.5};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 1-Math.sqrt(1-e*e)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.sqrt(1- --e*e)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e*e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return--e*e*e+1};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){if(d===void 0&&(d=.1),r===void 0&&(r=.1),e===0)return 0;if(e===1)return 1;var o=r/4;return d<1?d=1:o=r*Math.asin(1/d)/(2*Math.PI),-(d*Math.pow(2,10*(e-=1))*Math.sin((e-o)*(2*Math.PI)/r))};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){if(d===void 0&&(d=.1),r===void 0&&(r=.1),e===0)return 0;if(e===1)return 1;var o=r/4;return d<1?d=1:o=r*Math.asin(1/d)/(2*Math.PI),d*Math.pow(2,-10*e)*Math.sin((e-o)*(2*Math.PI)/r)+1};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){if(d===void 0&&(d=.1),r===void 0&&(r=.1),e===0)return 0;if(e===1)return 1;var o=r/4;return d<1?d=1:o=r*Math.asin(1/d)/(2*Math.PI),(e*=2)<1?-.5*(d*Math.pow(2,10*(e-=1))*Math.sin((e-o)*(2*Math.PI)/r)):d*Math.pow(2,-10*(e-=1))*Math.sin((e-o)*(2*Math.PI)/r)*.5+1};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.pow(2,10*(e-1))-.001};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 1-Math.pow(2,-10*e)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*(2-e)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e*e*e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 1- --e*e*e*e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e*e*e*e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return--e*e*e*e*e+1};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d===void 0&&(d=1),e<=0?0:e>=1?1:((d*e|0)+1)*(1/d)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),d=t(0),r=t(37),o=t(3),n=new d({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(i,s,u,h,l){return i===void 0&&(i=100),s===void 0&&(s=.05),u===void 0&&(u=!1),h===void 0&&(h=null),l===void 0&&(l=this.camera.scene),!u&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=i,this.progress=0,typeof s=="number"?this.intensity.set(s):this.intensity.set(s.x,s.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=h,this._onUpdateScope=l,this.camera.emit(r.SHAKE_START,this.camera,this,i,s),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(i,s){if(this.isRunning)if(this._elapsed+=s,this.progress=e(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var u=this.intensity,h=this.camera.width,l=this.camera.height,f=this.camera.zoom;this._offsetX=(Math.random()*u.x*h*2-u.x*h)*f,this._offsetY=(Math.random()*u.y*l*2-u.y*l)*f,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});a.exports=n},function(a,x,t){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var e=t(18),d=t(0),r=t(37),o=t(134),n=new d({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(i,s,u,h,l,f,v){u===void 0&&(u=1e3),h===void 0&&(h=o.Linear),l===void 0&&(l=!1),f===void 0&&(f=null),v===void 0&&(v=this.camera.scene),s===void 0&&(s=!1),this.shortestPath=s;var c=i;i<0?(c=-1*i,this.clockwise=!1):this.clockwise=!0;var p=360*Math.PI/180;c=c-Math.floor(c/p)*p;var m=this.camera;if(!l&&this.isRunning)return m;if(this.isRunning=!0,this.duration=u,this.progress=0,this.source=m.rotation,this.destination=c,typeof h=="string"&&o.hasOwnProperty(h)?this.ease=o[h]:typeof h=="function"&&(this.ease=h),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=v,this.shortestPath){var y=0,T=0;this.destination>this.source?y=Math.abs(this.destination-this.source):y=Math.abs(this.destination+p)-this.source,this.source>this.destination?T=Math.abs(this.source-this.destination):T=Math.abs(this.source+p)-this.destination,y<T?this.clockwise=!0:y>T&&(this.clockwise=!1)}return this.camera.emit(r.ROTATE_START,this.camera,this,u,c),m},update:function(i,s){if(this.isRunning){this._elapsed+=s;var u=e(this._elapsed/this.duration,0,1);this.progress=u;var h=this.camera;if(this._elapsed<this.duration){var l=this.ease(u);this.current=h.rotation;var f=0,v=360*Math.PI/180,c=this.destination,p=this.current;this.clockwise===!1&&(c=this.current,p=this.destination),c>=p?f=Math.abs(c-p):f=Math.abs(c+v)-p;var m=0;this.clockwise?m=h.rotation+f*l:m=h.rotation-f*l,h.rotation=m,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,u,m)}else h.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,u,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),d=t(0),r=t(134),o=t(37),n=new d({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(i,s,u,h,l,f){s===void 0&&(s=1e3),u===void 0&&(u=r.Linear),h===void 0&&(h=!1),l===void 0&&(l=null),f===void 0&&(f=this.camera.scene);var v=this.camera;return!h&&this.isRunning||(this.isRunning=!0,this.duration=s,this.progress=0,this.source=v.zoom,this.destination=i,typeof u=="string"&&r.hasOwnProperty(u)?this.ease=r[u]:typeof u=="function"&&(this.ease=u),this._elapsed=0,this._onUpdate=l,this._onUpdateScope=f,this.camera.emit(o.ZOOM_START,this.camera,this,s,i)),v},update:function(i,s){this.isRunning&&(this._elapsed+=s,this.progress=e(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(326),d=t(0),r=t(2),o=t(24),n=t(57),i=t(104),s=t(20),u=new d({initialize:function(l){this.scene=l,this.systems=l.sys,this.roundPixels=l.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,l.sys.events.once(s.BOOT,this.boot,this),l.sys.events.on(s.START,this.start,this)},boot:function(){var h=this.systems;h.settings.cameras?this.fromJSON(h.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new e(0,0,h.scale.width,h.scale.height).setScene(this.scene),h.game.scale.on(i.RESIZE,this.onResize,this),this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){if(!this.main){var h=this.systems;h.settings.cameras?this.fromJSON(h.settings.cameras):this.add(),this.main=this.cameras[0]}var l=this.systems.events;l.on(s.UPDATE,this.update,this),l.once(s.SHUTDOWN,this.shutdown,this)},add:function(h,l,f,v,c,p){h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),c===void 0&&(c=!1),p===void 0&&(p="");var m=new e(h,l,f,v);return m.setName(p),m.setScene(this.scene),m.setRoundPixels(this.roundPixels),m.id=this.getNextID(),this.cameras.push(m),c&&(this.main=m),m},addExisting:function(h,l){l===void 0&&(l=!1);var f=this.cameras.indexOf(h);return f===-1?(h.id=this.getNextID(),h.setRoundPixels(this.roundPixels),this.cameras.push(h),l&&(this.main=h),h):null},getNextID:function(){for(var h=this.cameras,l=1,f=0;f<32;f++){for(var v=!1,c=0;c<h.length;c++){var p=h[c];if(p&&p.id===l){v=!0;continue}}if(v)l=l<<1;else return l}return 0},getTotal:function(h){h===void 0&&(h=!1);for(var l=0,f=this.cameras,v=0;v<f.length;v++){var c=f[v];(!h||h&&c.visible)&&l++}return l},fromJSON:function(h){Array.isArray(h)||(h=[h]);for(var l=this.scene.sys.scale.width,f=this.scene.sys.scale.height,v=0;v<h.length;v++){var c=h[v],p=r(c,"x",0),m=r(c,"y",0),y=r(c,"width",l),T=r(c,"height",f),E=this.add(p,m,y,T);E.name=r(c,"name",""),E.zoom=r(c,"zoom",1),E.rotation=r(c,"rotation",0),E.scrollX=r(c,"scrollX",0),E.scrollY=r(c,"scrollY",0),E.roundPixels=r(c,"roundPixels",!1),E.visible=r(c,"visible",!0);var S=r(c,"backgroundColor",!1);S&&E.setBackgroundColor(S);var P=r(c,"bounds",null);if(P){var M=r(P,"x",0),O=r(P,"y",0),L=r(P,"width",l),F=r(P,"height",f);E.setBounds(M,O,L,F)}}return this},getCamera:function(h){for(var l=this.cameras,f=0;f<l.length;f++)if(l[f].name===h)return l[f];return null},getCamerasBelowPointer:function(h){for(var l=this.cameras,f=h.x,v=h.y,c=[],p=0;p<l.length;p++){var m=l[p];m.visible&&m.inputEnabled&&n(m,f,v)&&c.unshift(m)}return c},remove:function(h,l){l===void 0&&(l=!0),Array.isArray(h)||(h=[h]);for(var f=0,v=this.cameras,c=0;c<h.length;c++){var p=v.indexOf(h[c]);p!==-1&&(l?v[p].destroy():v[p].renderList=[],v.splice(p,1),f++)}return!this.main&&v[0]&&(this.main=v[0]),f},render:function(h,l){for(var f=this.scene,v=this.cameras,c=0;c<this.cameras.length;c++){var p=v[c];if(p.visible&&p.alpha>0){p.preRender();var m=this.getVisibleChildren(l.getChildren(),p);h.render(f,m,p)}}},getVisibleChildren:function(h,l){for(var f=[],v=0;v<h.length;v++){var c=h[v];c.willRender(l)&&f.push(c)}return f},resetAll:function(){for(var h=0;h<this.cameras.length;h++)this.cameras[h].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(h,l){for(var f=0;f<this.cameras.length;f++)this.cameras[f].update(h,l)},onResize:function(h,l,f,v,c){for(var p=0;p<this.cameras.length;p++){var m=this.cameras[p];m._x===0&&m._y===0&&m._width===v&&m._height===c&&m.setSize(l.width,l.height)}},resize:function(h,l){for(var f=0;f<this.cameras.length;f++)this.cameras[f].setSize(h,l)},shutdown:function(){this.main=void 0;for(var h=0;h<this.cameras.length;h++)this.cameras[h].destroy();this.cameras=[];var l=this.systems.events;l.off(s.UPDATE,this.update,this),l.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});o.register("CameraManager",u,"cameras"),a.exports=u},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="enterfullscreen"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="fullscreenfailed"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="fullscreenunsupported"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="leavefullscreen"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="orientationchange"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resize"},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Config:t(346),CreateRenderer:t(366),DebugHeader:t(384),Events:t(22),TimeStep:t(385),VisibilityHandler:t(387)}},function(a,x){var t=a.exports={},e,d;function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=r}catch{e=r}try{typeof clearTimeout=="function"?d=clearTimeout:d=o}catch{d=o}})();function n(m){if(e===setTimeout)return setTimeout(m,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(m,0);try{return e(m,0)}catch{try{return e.call(null,m,0)}catch{return e.call(this,m,0)}}}function i(m){if(d===clearTimeout)return clearTimeout(m);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(m);try{return d(m)}catch{try{return d.call(null,m)}catch{return d.call(this,m)}}}var s=[],u=!1,h,l=-1;function f(){!u||!h||(u=!1,h.length?s=h.concat(s):l=-1,s.length&&v())}function v(){if(!u){var m=n(f);u=!0;for(var y=s.length;y;){for(h=s,s=[];++l<y;)h&&h[l].run();l=-1,y=s.length}h=null,u=!1,i(m)}}t.nextTick=function(m){var y=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)y[T-1]=arguments[T];s.push(new c(m,y)),s.length===1&&!u&&n(v)};function c(m,y){this.fun=m,this.array=y}c.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function p(){}t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(m){return[]},t.binding=function(m){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(m){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(136),d={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function r(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(d.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(d.mspointer=!0),navigator.getGamepads&&(d.gamepads=!0),"onwheel"in window||e.ie&&"WheelEvent"in window?d.wheelEvent="wheel":"onmousewheel"in window?d.wheelEvent="mousewheel":e.firefox&&"MouseScrollEvent"in window&&(d.wheelEvent="DOMMouseScroll")),d}a.exports=r()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(136),d={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function r(){if(typeof importScripts=="function")return d;d.audioData=!!window.Audio,d.webAudio=!!(window.AudioContext||window.webkitAudioContext);var o=document.createElement("audio"),n=!!o.canPlayType;try{if(n&&(o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(d.ogg=!0),(o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||o.canPlayType("audio/opus;").replace(/^no$/,""))&&(d.opus=!0),o.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(d.mp3=!0),o.canPlayType("audio/wav").replace(/^no$/,"")&&(d.wav=!0),(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/aac;").replace(/^no$/,""))&&(d.m4a=!0),o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(d.webm=!0),o.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(e.edge)d.dolby=!0;else if(e.safari&&e.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var i=parseInt(RegExp.$1,10),s=parseInt(RegExp.$2,10);(i===10&&s>=11||i>10)&&(d.dolby=!0)}}}catch{}return d}a.exports=r()},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function e(){if(typeof importScripts=="function")return t;var d=document.createElement("video"),r=!!d.canPlayType;try{r&&(d.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(t.ogg=!0),d.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.h264=!0,t.mp4=!0),d.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(t.webm=!0),d.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(t.vp9=!0),d.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.hls=!0))}catch{}return t}a.exports=e()},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return t;var d,r="Fullscreen",o="FullScreen",n=["request"+r,"request"+o,"webkitRequest"+r,"webkitRequest"+o,"msRequest"+r,"msRequest"+o,"mozRequest"+o,"mozRequest"+r];for(d=0;d<n.length;d++)if(document.documentElement[n[d]]){t.available=!0,t.request=n[d];break}var i=["cancel"+o,"exit"+r,"webkitCancel"+o,"webkitExit"+r,"msCancel"+o,"msExit"+r,"mozCancel"+o,"mozExit"+r];if(t.available){for(d=0;d<i.length;d++)if(document[i[d]]){t.cancel=i[d];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(t.keyboard=!0),Object.defineProperty(t,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),t}a.exports=e()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Between:t(349),BetweenPoints:t(350),BetweenPointsY:t(813),BetweenY:t(814),CounterClockwise:t(815),Normalize:t(351),Random:t(816),RandomDegrees:t(817),Reverse:t(818),RotateTo:t(819),ShortestBetween:t(820),Wrap:t(269),WrapDegrees:t(270)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return Math.atan2(d.x-e.x,d.y-e.y)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){return Math.atan2(r-e,o-d)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),d=function(r){return r>Math.PI&&(r-=e.PI2),Math.abs(((r+e.TAU)%e.PI2-e.PI2)%e.PI2)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(137),d=function(){return e(-Math.PI,Math.PI)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(137),d=function(){return e(-180,180)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(351),d=function(r){return e(r+Math.PI)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),d=function(r,o,n){return n===void 0&&(n=.05),r===o||(Math.abs(o-r)<=n||Math.abs(o-r)>=e.PI2-n?r=o:(Math.abs(o-r)>Math.PI&&(o<r?o+=e.PI2:o-=e.PI2),o>r?r+=n:o<r&&(r-=n))),r};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=d-e;if(r===0)return 0;var o=Math.floor((r- -180)/360);return r-o*360};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Between:t(50),BetweenPoints:t(352),BetweenPointsSquared:t(822),Chebyshev:t(823),Power:t(824),Snake:t(825),Squared:t(353)}},function(a,x){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.x-d.x,o=e.y-d.y;return r*r+o*o};a.exports=t},function(a,x){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){return Math.max(Math.abs(e-r),Math.abs(d-o))};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n){return n===void 0&&(n=2),Math.sqrt(Math.pow(r-e,n)+Math.pow(o-d,n))};a.exports=t},function(a,x){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){return Math.abs(e-r)+Math.abs(d-o)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Back:t(334),Bounce:t(335),Circular:t(336),Cubic:t(337),Elastic:t(338),Expo:t(339),Linear:t(340),Quadratic:t(341),Quartic:t(342),Quintic:t(343),Sine:t(344),Stepped:t(345)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Ceil:t(828),Equal:t(124),Floor:t(829),GreaterThan:t(354),LessThan:t(355)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d===void 0&&(d=1e-4),Math.ceil(e-d)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d===void 0&&(d=1e-4),Math.floor(e+d)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Bezier:t(831),CatmullRom:t(832),CubicBezier:t(358),Linear:t(833),QuadraticBezier:t(359),SmoothStep:t(360),SmootherStep:t(834)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(356),d=function(r,o){for(var n=0,i=r.length-1,s=0;s<=i;s++)n+=Math.pow(1-o,i-s)*Math.pow(o,s)*r[s]*e(i,s);return n};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(194),d=function(r,o){var n=r.length-1,i=n*o,s=Math.floor(i);return r[0]===r[n]?(o<0&&(s=Math.floor(i=n*(1+o))),e(i-s,r[(s-1+n)%n],r[s],r[(s+1)%n],r[(s+2)%n])):o<0?r[0]-(e(-i,r[0],r[0],r[1],r[1])-r[0]):o>1?r[n]-(e(i-n,r[n],r[n],r[n-1],r[n-1])-r[n]):e(i-s,r[s?s-1:0],r[s],r[n<s+1?n:s+1],r[n<s+2?n:s+2])};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(135),d=function(r,o){var n=r.length-1,i=n*o,s=Math.floor(i);return o<0?e(r[0],r[1],i):o>1?e(r[n],r[n-1],n-i):e(r[s],r[s+1>n?n:s+1],i-s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(183),d=function(r,o,n){return o+(n-o)*e(r,0,1)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={GetNext:t(361),IsSize:t(138),IsValue:t(836)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e>0&&(e&e-1)===0};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Ceil:t(139),Floor:t(76),To:t(838)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){return r===void 0&&(r=0),d===0?e:(e-=r,e=d*Math.round(e/d),o?(r+e)/d:r+e)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=new e({initialize:function(o){o===void 0&&(o=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],o&&this.init(o)},rnd:function(){var r=2091639*this.s0+this.c*23283064365386963e-26;return this.c=r|0,this.s0=this.s1,this.s1=this.s2,this.s2=r-this.c,this.s2},hash:function(r){var o,n=this.n;r=r.toString();for(var i=0;i<r.length;i++)n+=r.charCodeAt(i),o=.02519603282416938*n,n=o>>>0,o-=n,o*=n,n=o>>>0,o-=n,n+=o*4294967296;return this.n=n,(n>>>0)*23283064365386963e-26},init:function(r){typeof r=="string"?this.state(r):this.sow(r)},sow:function(r){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!r)for(var o=0;o<r.length&&r[o]!=null;o++){var n=r[o];this.s0-=this.hash(n),this.s0+=~~(this.s0<0),this.s1-=this.hash(n),this.s1+=~~(this.s1<0),this.s2-=this.hash(n),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(r,o){return Math.floor(this.realInRange(0,o-r+1)+r)},between:function(r,o){return Math.floor(this.realInRange(0,o-r+1)+r)},realInRange:function(r,o){return this.frac()*(o-r)+r},normal:function(){return 1-2*this.frac()},uuid:function(){var r="",o="";for(o=r="";r++<36;o+=~r%5|r*3&4?(r^15?8^this.frac()*(r^20?16:4):4).toString(16):"-");return o},pick:function(r){return r[this.integerInRange(0,r.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(r){return r[~~(Math.pow(this.frac(),2)*(r.length-1)+.5)]},timestamp:function(r,o){return this.realInRange(r||9466848e5,o||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(r){return typeof r=="string"&&r.match(/^!rnd/)&&(r=r.split(","),this.c=parseFloat(r[1]),this.s0=parseFloat(r[2]),this.s1=parseFloat(r[3]),this.s2=parseFloat(r[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(r){for(var o=r.length-1,n=o;n>0;n--){var i=Math.floor(this.frac()*(n+1)),s=r[i];r[i]=r[n],r[n]=s}return r}});a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var d=0,r=0;r<e.length;r++)d+=+e[r];return d/e.length};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){d===void 0&&(d=0),r===void 0&&(r=10);var o=Math.pow(r,-d);return Math.ceil(e*o)/o};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return Math.abs(e-d)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),d=t(0),r=t(69),o=t(1),n=new r,i=new d({initialize:function s(u,h,l,f){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=s.DefaultOrder),this._x=u,this._y=h,this._z=l,this._order=f,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(s){this._x=s,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(s){this._y=s,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(s){this._z=s,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(s){this._order=s,this.onChangeCallback(this)}},set:function(s,u,h,l){return l===void 0&&(l=this._order),this._x=s,this._y=u,this._z=h,this._order=l,this.onChangeCallback(this),this},copy:function(s){return this.set(s.x,s.y,s.z,s.order)},setFromQuaternion:function(s,u,h){return u===void 0&&(u=this._order),h===void 0&&(h=!1),n.fromQuat(s),this.setFromRotationMatrix(n,u,h)},setFromRotationMatrix:function(s,u,h){u===void 0&&(u=this._order),h===void 0&&(h=!1);var l=s.val,f=l[0],v=l[4],c=l[8],p=l[1],m=l[5],y=l[9],T=l[2],E=l[6],S=l[10],P=0,M=0,O=0,L=.99999;switch(u){case"XYZ":{M=Math.asin(e(c,-1,1)),Math.abs(c)<L?(P=Math.atan2(-y,S),O=Math.atan2(-v,f)):P=Math.atan2(E,m);break}case"YXZ":{P=Math.asin(-e(y,-1,1)),Math.abs(y)<L?(M=Math.atan2(c,S),O=Math.atan2(p,m)):M=Math.atan2(-T,f);break}case"ZXY":{P=Math.asin(e(E,-1,1)),Math.abs(E)<L?(M=Math.atan2(-T,S),O=Math.atan2(-v,m)):O=Math.atan2(p,f);break}case"ZYX":{M=Math.asin(-e(T,-1,1)),Math.abs(T)<L?(P=Math.atan2(E,S),O=Math.atan2(p,f)):O=Math.atan2(-v,m);break}case"YZX":{O=Math.asin(e(p,-1,1)),Math.abs(p)<L?(P=Math.atan2(-y,m),M=Math.atan2(-T,f)):M=Math.atan2(c,S);break}case"XZY":{O=Math.asin(-e(v,-1,1)),Math.abs(v)<L?(P=Math.atan2(E,m),M=Math.atan2(c,f)):P=Math.atan2(-y,S);break}}return this._x=P,this._y=M,this._z=O,this._order=u,h&&this.onChangeCallback(this),this}});i.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],i.DefaultOrder="XYZ",a.exports=i},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){d===void 0&&(d=0),r===void 0&&(r=10);var o=Math.pow(r,-d);return Math.floor(e*o)/o};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e/d/1e3};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e==parseFloat(e)?!(e%2):void 0};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===parseFloat(e)?!(e%2):void 0};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return Math.min(e+d,r)};a.exports=t},function(a,x){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d=e.length;if(d===0)return 0;e.sort(function(o,n){return o-n});var r=Math.floor(d/2);return d%2===0?(e[r]+e[r-1])/2:e[r]};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return Math.max(e-d,r)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){r===void 0&&(r=d+1);var n=(e-d)/(r-d);return n>1?o!==void 0?(n=(o-e)/(o-r),n<0&&(n=0)):n=1:n<0&&(n=0),n};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){d===void 0&&(d=1);var r=Math.random()*2*Math.PI;return e.x=Math.cos(r)*d,e.y=Math.sin(r)*d,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){d===void 0&&(d=1);var r=Math.random()*2*Math.PI,o=Math.random()*2-1,n=Math.sqrt(1-o*o)*d;return e.x=Math.cos(r)*n,e.y=Math.sin(r)*n,e.z=o*d,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d===void 0&&(d=1),e.x=(Math.random()*2-1)*d,e.y=(Math.random()*2-1)*d,e.z=(Math.random()*2-1)*d,e.w=(Math.random()*2-1)*d,e};a.exports=t},function(a,x){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n){return e.x=d+n*Math.cos(o),e.y=r+n*Math.sin(o),e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){d===void 0&&(d=0),r===void 0&&(r=10);var o=Math.pow(r,-d);return Math.round(e*o)/o};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){d===void 0&&(d=1),r===void 0&&(r=1),o===void 0&&(o=1),o*=Math.PI/e;for(var n=[],i=[],s=0;s<e;s++)r-=d*o,d+=r*o,n[s]=r,i[s]=d;return{sin:i,cos:n,length:e}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),d=function(r,o,n,i){i===void 0&&(i=new e);var s=0,u=0,h=o*n;return r>0&&r<=h&&(r>o-1?(u=Math.floor(r/o),s=r-u*o):s=r),i.set(s,u)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return Math.abs(e-d)<=r};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),d=t(69),r=t(365),o=new d,n=new r,i=new e,s=function(u,h,l){return n.setAxisAngle(h,l),o.fromRotationTranslation(n,i.set(0,0,0)),u.transformMat4(o)};a.exports=s},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="addtexture"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="onerror"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="onload"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="ready"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="removetexture"},function(a,x){a.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelineafterflush"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelinebeforeflush"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelinebind"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelineboot"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelinedestroy"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelinerebind"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelineresize"},function(a,x){a.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(a,x){a.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={GenerateTexture:t(388),Palettes:t(889)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ARNE16:t(389),C64:t(890),CGA:t(891),JMP:t(892),MSX:t(893)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Path:t(895),MoveTo:t(393),CubicBezier:t(390),Curve:t(94),Ellipse:t(391),Line:t(392),QuadraticBezier:t(394),Spline:t(395)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(390),r=t(391),o=t(5),n=t(392),i=t(393),s=t(394),u=t(10),h=t(395),l=t(3),f=t(14),v=new e({initialize:function(p,m){p===void 0&&(p=0),m===void 0&&(m=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new l,this._tmpVec2A=new l,this._tmpVec2B=new l,typeof p=="object"?this.fromJSON(p):this.startPoint.set(p,m)},add:function(c){return this.curves.push(c),this},circleTo:function(c,p,m){return p===void 0&&(p=!1),this.ellipseTo(c,c,0,360,p,m)},closePath:function(){var c=this.curves[0].getPoint(0),p=this.curves[this.curves.length-1].getPoint(1);return c.equals(p)||this.curves.push(new n(p,c)),this},cubicBezierTo:function(c,p,m,y,T,E){var S=this.getEndPoint(),P,M,O;return c instanceof l?(P=c,M=p,O=m):(P=new l(m,y),M=new l(T,E),O=new l(c,p)),this.add(new d(S,P,M,O))},quadraticBezierTo:function(c,p,m,y){var T=this.getEndPoint(),E,S;return c instanceof l?(E=c,S=p):(E=new l(m,y),S=new l(c,p)),this.add(new s(T,E,S))},draw:function(c,p){for(var m=0;m<this.curves.length;m++){var y=this.curves[m];y.active&&y.draw(c,p)}return c},ellipseTo:function(c,p,m,y,T,E){var S=new r(0,0,c,p,m,y,T,E),P=this.getEndPoint(this._tmpVec2A),M=S.getStartPoint(this._tmpVec2B);return P.subtract(M),S.x=P.x,S.y=P.y,this.add(S)},fromJSON:function(c){this.curves=[],this.cacheLengths=[],this.startPoint.set(c.x,c.y),this.autoClose=c.autoClose;for(var p=0;p<c.curves.length;p++){var m=c.curves[p];switch(m.type){case"LineCurve":this.add(n.fromJSON(m));break;case"EllipseCurve":this.add(r.fromJSON(m));break;case"SplineCurve":this.add(h.fromJSON(m));break;case"CubicBezierCurve":this.add(d.fromJSON(m));break;case"QuadraticBezierCurve":this.add(s.fromJSON(m));break}}return this},getBounds:function(c,p){c===void 0&&(c=new u),p===void 0&&(p=16),c.x=Number.MAX_VALUE,c.y=Number.MAX_VALUE;for(var m=new u,y=f.MIN_SAFE_INTEGER,T=f.MIN_SAFE_INTEGER,E=0;E<this.curves.length;E++){var S=this.curves[E];S.active&&(S.getBounds(m,p),c.x=Math.min(c.x,m.x),c.y=Math.min(c.y,m.y),y=Math.max(y,m.right),T=Math.max(T,m.bottom))}return c.right=y,c.bottom=T,c},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var c=[],p=0,m=0;m<this.curves.length;m++)p+=this.curves[m].getLength(),c.push(p);return this.cacheLengths=c,c},getEndPoint:function(c){return c===void 0&&(c=new l),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,c):c.copy(this.startPoint),c},getLength:function(){var c=this.getCurveLengths();return c[c.length-1]},getPoint:function(c,p){p===void 0&&(p=new l);for(var m=c*this.getLength(),y=this.getCurveLengths(),T=0;T<y.length;){if(y[T]>=m){var E=y[T]-m,S=this.curves[T],P=S.getLength(),M=P===0?0:1-E/P;return S.getPointAt(M,p)}T++}return null},getPoints:function(c){c===void 0&&(c=12);for(var p=[],m,y=0;y<this.curves.length;y++){var T=this.curves[y];if(T.active)for(var E=T.getResolution(c),S=T.getPoints(E),P=0;P<S.length;P++){var M=S[P];m&&m.equals(M)||(p.push(M),m=M)}}return this.autoClose&&p.length>1&&!p[p.length-1].equals(p[0])&&p.push(p[0]),p},getRandomPoint:function(c){return c===void 0&&(c=new l),this.getPoint(Math.random(),c)},getSpacedPoints:function(c){c===void 0&&(c=40);for(var p=[],m=0;m<=c;m++)p.push(this.getPoint(m/c));return this.autoClose&&p.push(p[0]),p},getStartPoint:function(c){return c===void 0&&(c=new l),c.copy(this.startPoint)},getTangent:function(c,p){p===void 0&&(p=new l);for(var m=c*this.getLength(),y=this.getCurveLengths(),T=0;T<y.length;){if(y[T]>=m){var E=y[T]-m,S=this.curves[T],P=S.getLength(),M=P===0?0:1-E/P;return S.getTangentAt(M,p)}T++}return null},lineTo:function(c,p){c instanceof l?this._tmpVec2B.copy(c):this._tmpVec2B.set(c,p);var m=this.getEndPoint(this._tmpVec2A);return this.add(new n([m.x,m.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(c){return c.unshift(this.getEndPoint()),this.add(new h(c))},moveTo:function(c,p){return c instanceof l?this.add(new i(c.x,c.y)):this.add(new i(c,p))},toJSON:function(){for(var c=[],p=0;p<this.curves.length;p++)c.push(this.curves[p].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:c}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",function(c,p){return new v(c,p)}),a.exports=v},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={DataManager:t(101),DataManagerPlugin:t(897),Events:t(315)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(101),r=t(24),o=t(20),n=new e({Extends:d,initialize:function(s){d.call(this,s,s.sys.events),this.scene=s,this.systems=s.sys,s.sys.events.once(o.BOOT,this.boot,this),s.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){d.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});r.register("DataManagerPlugin",n,"data"),a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Align:t(899),BaseShader:t(396),Bounds:t(902),Canvas:t(906),Color:t(397),ColorMatrix:t(198),Masks:t(916),RGB:t(200)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),d=t(17),r={In:t(900),To:t(901)};r=d(!1,r,e),a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BottomCenter:t(290),BottomLeft:t(291),BottomRight:t(292),Center:t(293),LeftCenter:t(295),QuickSet:t(289),RightCenter:t(296),TopCenter:t(297),TopLeft:t(298),TopRight:t(299)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BottomCenter:t(277),BottomLeft:t(278),BottomRight:t(279),LeftBottom:t(280),LeftCenter:t(281),LeftTop:t(282),QuickSet:t(276),RightBottom:t(283),RightCenter:t(284),RightTop:t(285),TopCenter:t(286),TopLeft:t(287),TopRight:t(288)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CenterOn:t(294),GetBottom:t(42),GetBounds:t(903),GetCenterX:t(87),GetCenterY:t(89),GetLeft:t(43),GetOffsetX:t(904),GetOffsetY:t(905),GetRight:t(44),GetTop:t(45),SetBottom:t(55),SetCenterX:t(88),SetCenterY:t(90),SetLeft:t(53),SetRight:t(54),SetTop:t(52)}},function(a,x,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),d=t(43),r=t(44),o=t(45),n=function(i,s){s===void 0&&(s={});var u=d(i),h=o(i);return s.x=u,s.y=h,s.width=r(i)-u,s.height=e(i)-h,s};a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.width*e.originX};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.height*e.originY};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CanvasInterpolation:t(367),CanvasPool:t(31),Smoothing:t(192),TouchAction:t(907),UserSelect:t(908)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d===void 0&&(d="none"),e.style.msTouchAction=d,e.style["ms-touch-action"]=d,e.style["touch-action"]=d,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){d===void 0&&(d="none");var r=["-webkit-","-khtml-","-moz-","-ms-",""];return r.forEach(function(o){e.style[o+"user-select"]=d}),e.style["-webkit-touch-callout"]=d,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(103),d=function(r){r===void 0&&(r=1024);var o=[],n=255,i,s=255,u=0,h=0;for(i=0;i<=n;i++)o.push({r:s,g:i,b:h,color:e(s,i,h)});for(u=255,i=n;i>=0;i--)o.push({r:i,g:u,b:h,color:e(i,u,h)});for(s=0,i=0;i<=n;i++,u--)o.push({r:s,g:u,b:i,color:e(s,u,i)});for(u=0,h=255,i=0;i<=n;i++,h--,s++)o.push({r:s,g:u,b:h,color:e(s,u,h)});if(r===1024)return o;var l=[],f=0,v=1024/r;for(i=0;i<r;i++)l.push(o[Math.floor(f)]),f+=v;return l};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(d.a=e>>>24),d};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),d=t(399),r=function(o,n,i){var s=i,u=i,h=i;if(n!==0){var l=i<.5?i*(1+n):i+n-i*n,f=2*i-l;s=d(f,l,o+1/3),u=d(f,l,o),h=d(f,l,o-1/3)}var v=new e;return v.setGLTo(s,u,h,1)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(188),d=function(r,o){r===void 0&&(r=1),o===void 0&&(o=1);for(var n=[],i=0;i<=359;i++)n.push(e(i/359,r,o));return n};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(135),d=function(n,i,s,u,h,l,f,v){f===void 0&&(f=100),v===void 0&&(v=0);var c=v/f;return{r:e(n,u,c),g:e(i,h,c),b:e(s,l,c)}},r=function(n,i,s,u){return s===void 0&&(s=100),u===void 0&&(u=0),d(n.r,n.g,n.b,i.r,i.g,i.b,s,u)},o=function(n,i,s,u,h,l){return h===void 0&&(h=100),l===void 0&&(l=0),d(n.r,n.g,n.b,i,s,u,h,l)};a.exports={RGBWithRGB:d,ColorWithRGB:o,ColorWithColor:r}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(195),d=t(38),r=function(o,n){return o===void 0&&(o=0),n===void 0&&(n=255),new d(e(o,n),e(o,n),e(o,n))};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(398),d=function(r,o,n,i,s){return i===void 0&&(i=255),s===void 0&&(s="#"),s==="#"?"#"+((1<<24)+(r<<16)+(o<<8)+n).toString(16).slice(1,7):"0x"+e(i)+e(r)+e(o)+e(n)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BitmapMask:t(310),GeometryMask:t(311)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={AddToDOM:t(142),DOMContentLoaded:t(400),GetInnerHeight:t(401),GetScreenOrientation:t(402),GetTarget:t(407),ParseXML:t(408),RemoveFromDOM:t(202),RequestAnimationFrame:t(386)};a.exports=e},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={EventEmitter:t(919)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(9),r=t(24),o=new e({Extends:d,initialize:function(){d.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});r.register("EventEmitter",o,"events"),a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(142),d=t(321),r=t(325),o=t(31),n=t(0),i=t(346),s=t(921),u=t(366),h=t(101),l=t(384),f=t(347),v=t(400),c=t(9),p=t(22),m=t(409),y=t(24),T=t(414),E=t(415),S=t(417),P=t(106),M=t(422),O=t(385),L=t(387),F=t(426),b=new n({initialize:function(U){this.config=new i(U),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new c,this.anims=new d(this),this.textures=new M(this),this.cache=new r(this),this.registry=new h(this),this.input=new m(this,this.config),this.scene=new S(this,this.config.sceneConfig),this.device=f,this.scale=new E(this,this.config),this.sound=null,this.sound=F.create(this),this.loop=new O(this,this.config.fps),this.plugins=new T(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,v(this.boot.bind(this))},boot:function(){if(!y.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),u(this),s(this),l(this),e(this.canvas,this.config.parent),this.textures.once(P.READY,this.texturesReady,this),this.events.emit(p.BOOT)},texturesReady:function(){this.events.emit(p.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),L(this);var B=this.events;B.on(p.HIDDEN,this.onHidden,this),B.on(p.VISIBLE,this.onVisible,this),B.on(p.BLUR,this.onBlur,this),B.on(p.FOCUS,this.onFocus,this)},step:function(B,U){if(this.pendingDestroy)return this.runDestroy();var X=this.events;X.emit(p.PRE_STEP,B,U),X.emit(p.STEP,B,U),this.scene.update(B,U),X.emit(p.POST_STEP,B,U);var W=this.renderer;W.preRender(),X.emit(p.PRE_RENDER,W,B,U),this.scene.render(W),W.postRender(),X.emit(p.POST_RENDER,W,B,U)},headlessStep:function(B,U){if(this.pendingDestroy)return this.runDestroy();var X=this.events;X.emit(p.PRE_STEP,B,U),X.emit(p.STEP,B,U),this.scene.update(B,U),X.emit(p.POST_STEP,B,U),X.emit(p.PRE_RENDER),X.emit(p.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(p.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(p.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,U){U===void 0&&(U=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=U},runDestroy:function(){this.scene.destroy(),this.events.emit(p.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});a.exports=b},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(142),d=function(r){var o=r.config;if(!(!o.parent||!o.domCreateContainer)){var n=document.createElement("div");n.style.cssText=["display: block;","width: "+r.scale.width+"px;","height: "+r.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+o.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),r.domContainer=n,e(n,o.parent)}};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="boot"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="destroy"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragend"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragenter"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="drag"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragleave"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragover"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragstart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="drop"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameout"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameover"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameobjectdown"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragend"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragenter"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="drag"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragleave"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragover"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragstart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="drop"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameobjectmove"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameobjectout"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameobjectover"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerdown"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointermove"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerout"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerover"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerup"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="wheel"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameobjectup"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameobjectwheel"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="boot"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="process"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="update"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerdown"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerdownoutside"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointermove"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerout"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerover"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerup"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerupoutside"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="wheel"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerlockchange"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="preupdate"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="shutdown"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="start"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="update"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="addfile"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="complete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="filecomplete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="filecomplete-"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="loaderror"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="load"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="fileprogress"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="postprocess"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="progress"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="start"},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};a.exports=e},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){if(!r.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var o=e.source[d];e.add("__BASE",d,0,0,o.width,o.height);for(var n=r.getElementsByTagName("SubTexture"),i,s=0;s<n.length;s++){var u=n[s].attributes,h=u.name.value,l=parseInt(u.x.value,10),f=parseInt(u.y.value,10),v=parseInt(u.width.value,10),c=parseInt(u.height.value,10);if(i=e.add(h,d,l,f,v,c),u.frameX){var p=Math.abs(parseInt(u.frameX.value,10)),m=Math.abs(parseInt(u.frameY.value,10)),y=parseInt(u.frameWidth.value,10),T=parseInt(u.frameHeight.value,10);i.setTrim(v,c,p,m,y,T)}}return e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.source[d];return e.add("__BASE",d,0,0,r.width,r.height),e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.source[d];return e.add("__BASE",d,0,0,r.width,r.height),e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),d=function(r,o,n){if(!n.frames&&!n.textures){console.warn("Invalid Texture Atlas JSON Array");return}var i=r.source[o];r.add("__BASE",o,0,0,i.width,i.height);for(var s=Array.isArray(n.textures)?n.textures[o].frames:n.frames,u,h=0;h<s.length;h++){var l=s[h];u=r.add(l.filename,o,l.frame.x,l.frame.y,l.frame.w,l.frame.h),l.trimmed&&u.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(u.rotated=!0,u.updateUVsInverted());var f=l.anchor||l.pivot;f&&(u.customPivot=!0,u.pivotX=f.x,u.pivotY=f.y),u.customData=e(l)}for(var v in n)v!=="frames"&&(Array.isArray(n[v])?r.customData[v]=n[v].slice(0):r.customData[v]=n[v]);return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),d=function(r,o,n){if(!n.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var i=r.source[o];r.add("__BASE",o,0,0,i.width,i.height);var s=n.frames,u;for(var h in s)if(s.hasOwnProperty(h)){var l=s[h];u=r.add(h,o,l.frame.x,l.frame.y,l.frame.w,l.frame.h),l.trimmed&&u.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(u.rotated=!0,u.updateUVsInverted());var f=l.anchor||l.pivot;f&&(u.customPivot=!0,u.pivotX=f.x,u.pivotY=f.y),u.customData=e(l)}for(var v in n)v!=="frames"&&(Array.isArray(n[v])?r.customData[v]=n[v].slice(0):r.customData[v]=n[v]);return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),d=function(r,o,n,i,s,u,h){var l=e(h,"frameWidth",null),f=e(h,"frameHeight",l);if(l===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var v=r.source[o];r.add("__BASE",o,0,0,v.width,v.height);var c=e(h,"startFrame",0),p=e(h,"endFrame",-1),m=e(h,"margin",0),y=e(h,"spacing",0),T=Math.floor((s-m+y)/(l+y)),E=Math.floor((u-m+y)/(f+y)),S=T*E;S===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",r.key),(c>S||c<-S)&&(c=0),c<0&&(c=S+c),p!==-1&&(S=c+(p+1));for(var P=m,M=m,O=0,L=0,F=0;F<S;F++){O=0,L=0;var b=P+l,B=M+f;b>s&&(O=b-s),B>u&&(L=B-u),r.add(F,o,n+P,i+M,l-O,f-L),P+=l+y,P+l>s&&(P=m,M+=f+y)}return r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),d=function(r,o,n){var i=e(n,"frameWidth",null),s=e(n,"frameHeight",i);if(!i)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var u=r.source[0];r.add("__BASE",0,0,0,u.width,u.height),e(n,"startFrame",0),e(n,"endFrame",-1);for(var h=e(n,"margin",0),l=e(n,"spacing",0),f=o.cutX,v=o.cutY,c=o.cutWidth,p=o.cutHeight,m=o.realWidth,y=o.realHeight,T=Math.floor((m-h+l)/(i+l)),E=Math.floor((y-h+l)/(s+l)),S=o.x,P=i-S,M=i-(m-c-S),O=o.y,L=s-O,F=s-(y-p-O),b,B=h,U=h,X=0,W=o.sourceIndex,Z=0;Z<E;Z++){for(var J=Z===0,N=Z===E-1,I=0;I<T;I++){var G=I===0,V=I===T-1;if(b=r.add(X,W,f+B,v+U,i,s),G||J||V||N){var Y=G?S:0,z=J?O:0,H=0,$=0;G&&(H+=i-P),V&&(H+=i-M),J&&($+=s-L),N&&($+=s-F);var Q=i-H,k=s-$;b.cutWidth=Q,b.cutHeight=k,b.setTrim(i,s,Y,z,Q,k)}B+=l,G?B+=P:V?B+=M:B+=i,X++}B=h,U+=l,J?U+=L:N?U+=F:U+=s}return r};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=0,e=function(r,o,n,i){var s=t-i.y-i.height;r.add(n,o,i.x,s,i.width,i.height)},d=function(r,o,n){var i=r.source[o];r.add("__BASE",o,0,0,i.width,i.height),t=i.height;for(var s=n.split(`
`),u=/^[ ]*(- )*(\w+)+[: ]+(.*)/,h="",l="",f={x:0,y:0,width:0,height:0},v=0;v<s.length;v++){var c=s[v].match(u);if(c){var p=c[1]==="- ",m=c[2],y=c[3];if(p&&(l!==h&&(e(r,o,l,f),h=l),f={x:0,y:0,width:0,height:0}),m==="name"){l=y;continue}switch(m){case"x":case"y":case"width":case"height":f[m]=parseInt(y,10);break}}}return l!==h&&e(r,o,l,f),r};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="complete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="decoded"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="decodedall"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="destroy"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="detune"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="detune"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="mute"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="rate"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="volume"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="loop"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="looped"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="mute"},function(a,x){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pan"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pauseall"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pause"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="play"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="rate"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resumeall"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resume"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="seek"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="stopall"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="stop"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="unlocked"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="volume"},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={Events:t(75),DisplayList:t(1012),GameObjectCreator:t(16),GameObjectFactory:t(5),UpdateList:t(1040),Components:t(11),GetCalcMatrix:t(19),BuildGameObject:t(28),BuildGameObjectAnimation:t(439),GameObject:t(15),BitmapText:t(148),Blitter:t(213),Bob:t(440),Container:t(214),DOMElement:t(442),DynamicBitmapText:t(215),Extern:t(444),Graphics:t(216),Group:t(113),Image:t(125),Layer:t(219),Particles:t(1074),PathFollower:t(457),RenderTexture:t(221),RetroFont:t(1082),Rope:t(223),Sprite:t(73),Text:t(224),GetTextSize:t(458),MeasureText:t(460),TextStyle:t(459),TileSprite:t(225),Zone:t(129),Video:t(226),Shape:t(34),Arc:t(461),Curve:t(462),Ellipse:t(463),Grid:t(464),IsoBox:t(465),IsoTriangle:t(466),Line:t(467),Polygon:t(468),Rectangle:t(473),Star:t(474),Triangle:t(475),Factories:{Blitter:t(1130),Container:t(1131),DOMElement:t(1132),DynamicBitmapText:t(1133),Extern:t(1134),Graphics:t(1135),Group:t(1136),Image:t(1137),Layer:t(1138),Particles:t(1139),PathFollower:t(1140),RenderTexture:t(1141),Rope:t(1142),Sprite:t(1143),StaticBitmapText:t(1144),Text:t(1145),TileSprite:t(1146),Zone:t(1147),Video:t(1148),Arc:t(1149),Curve:t(1150),Ellipse:t(1151),Grid:t(1152),IsoBox:t(1153),IsoTriangle:t(1154),Line:t(1155),Polygon:t(1156),Rectangle:t(1157),Star:t(1158),Triangle:t(1159)},Creators:{Blitter:t(1160),Container:t(1161),DynamicBitmapText:t(1162),Graphics:t(1163),Group:t(1164),Image:t(1165),Layer:t(1166),Particles:t(1167),RenderTexture:t(1168),Rope:t(1169),Sprite:t(1170),StaticBitmapText:t(1171),Text:t(1172),TileSprite:t(1173),Zone:t(1174),Video:t(1175)}};e.Shader=t(229),e.Mesh=t(230),e.PointLight=t(150),e.Factories.Shader=t(1184),e.Factories.Mesh=t(1185),e.Factories.PointLight=t(1186),e.Creators.Shader=t(1187),e.Creators.Mesh=t(1188),e.Creators.PointLight=t(1189),e.Light=t(481),e.LightsManager=t(482),e.LightsPlugin=t(1190),a.exports=e},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(110),r=t(24),o=t(75),n=t(20),i=t(79),s=new e({Extends:d,initialize:function(h){d.call(this,h),this.sortChildrenFlag=!1,this.scene=h,this.systems=h.sys,this.events=h.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.events.once(n.DESTROY,this.destroy,this)},addChildCallback:function(u){u.displayList&&u.displayList!==this&&u.removeFromDisplayList(),u.displayList||(this.queueDepthSort(),u.displayList=this,u.emit(o.ADDED_TO_SCENE,u,this.scene),this.events.emit(n.ADDED_TO_SCENE,u,this.scene))},removeChildCallback:function(u){this.queueDepthSort(),u.displayList=null,u.emit(o.REMOVED_FROM_SCENE,u,this.scene),this.events.emit(n.REMOVED_FROM_SCENE,u,this.scene)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(i(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(u,h){return u._depth-h._depth},getChildren:function(){return this.list},shutdown:function(){for(var u=this.list,h=u.length;h--;)u[h].destroy(!0);u.length=0,this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});r.register("DisplayList",s,"displayList"),a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CheckMatrix:t(209),MatrixToString:t(1014),ReverseColumns:t(1015),ReverseRows:t(1016),Rotate180:t(1017),RotateLeft:t(1018),RotateMatrix:t(147),RotateRight:t(1019),Translate:t(1020),TransposeMatrix:t(435)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(186),d=t(209),r=function(o){var n="";if(!d(o))return n;for(var i=0;i<o.length;i++){for(var s=0;s<o[i].length;s++){var u=o[i][s].toString();u!=="undefined"?n+=e(u,2):n+="?",s<o[i].length-1&&(n+=" |")}if(i<o.length-1){n+=`
`;for(var h=0;h<o[i].length;h++)n+="---",h<o[i].length-1&&(n+="+");n+=`
`}}return n};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.reverse()};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var d=0;d<e.length;d++)e[d].reverse();return e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(147),d=function(r){return e(r,180)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(147),d=function(r){return e(r,90)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(147),d=function(r){return e(r,-90)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(178),d=t(179),r=function(o,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),i!==0&&(i<0?e(o,Math.abs(i)):d(o,i)),n!==0)for(var s=0;s<o.length;s++){var u=o[s];n<0?e(u,Math.abs(n)):d(u,n)}return o};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n){if(n===void 0&&(n=e),r>0){var i=r-e.length;if(i<=0)return null}if(!Array.isArray(d))return e.indexOf(d)===-1?(e.push(d),o&&o.call(n,d),d):null;for(var s=d.length-1;s>=0;)e.indexOf(d[s])!==-1&&d.splice(s,1),s--;if(s=d.length,s===0)return null;r>0&&s>i&&(d.splice(i),s=i);for(var u=0;u<s;u++){var h=d[u];e.push(h),o&&o.call(n,h)}return d};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n,i){if(r===void 0&&(r=0),i===void 0&&(i=e),o>0){var s=o-e.length;if(s<=0)return null}if(!Array.isArray(d))return e.indexOf(d)===-1?(e.splice(r,0,d),n&&n.call(i,d),d):null;for(var u=d.length-1;u>=0;)e.indexOf(d[u])!==-1&&d.pop(),u--;if(u=d.length,u===0)return null;o>0&&u>s&&(d.splice(s),u=s);for(var h=u-1;h>=0;h--){var l=d[h];e.splice(r,0,l),n&&n.call(i,l)}return d};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.indexOf(d);return r!==-1&&r<e.length&&(e.splice(r,1),e.push(d)),d};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),d=function(r,o,n,i,s){i===void 0&&(i=0),s===void 0&&(s=r.length);var u=0;if(e(r,i,s))for(var h=i;h<s;h++){var l=r[h];l[o]===n&&u++}return u};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o,n=[null];for(o=3;o<arguments.length;o++)n.push(arguments[o]);for(o=0;o<e.length;o++)n[0]=e[o],d.apply(r,n);return e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),d=function(r,o,n,i,s){if(i===void 0&&(i=0),s===void 0&&(s=r.length),e(r,i,s)){var u,h=[null];for(u=5;u<arguments.length;u++)h.push(arguments[u]);for(u=i;u<s;u++)h[0]=r[u],o.apply(n,h)}return r};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.indexOf(d);if(r>0){var o=e[r-1],n=e.indexOf(o);e[r]=o,e[n]=d}return e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=e.indexOf(d);if(o===-1||r<0||r>=e.length)throw new Error("Supplied index out of bounds");return o!==r&&(e.splice(o,1),e.splice(r,0,d)),d};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.indexOf(d);if(r!==-1&&r<e.length-1){var o=e[r+1],n=e.indexOf(o);e[r]=o,e[n]=d}return e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){if(d===r)return e;var o=e.indexOf(d),n=e.indexOf(r);if(o<0||n<0)throw new Error("Supplied items must be elements of the same array");return o>n||(e.splice(o,1),n===e.length-1?e.push(d):e.splice(n,0,d)),e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){if(d===r)return e;var o=e.indexOf(d),n=e.indexOf(r);if(o<0||n<0)throw new Error("Supplied items must be elements of the same array");return o<n||(e.splice(o,1),n===0?e.unshift(d):e.splice(n,0,d)),e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(363),d=function(r,o,n){r===void 0&&(r=0),o===void 0&&(o=null),n===void 0&&(n=1),o===null&&(o=r,r=0);for(var i=[],s=Math.max(e((o-r)/(n||1)),0),u=0;u<s;u++)i.push(r),r+=n;return i};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(74),d=function(r,o,n,i){if(i===void 0&&(i=r),o<0||o>r.length-1)throw new Error("Index out of bounds");var s=e(r,o);return n&&n.call(i,s),s};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),d=function(r,o,n,i,s){if(o===void 0&&(o=0),n===void 0&&(n=r.length),s===void 0&&(s=r),e(r,o,n)){var u=n-o,h=r.splice(o,u);if(i)for(var l=0;l<h.length;l++){var f=h[l];i.call(s,f)}return h}else return[]};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(74),d=function(r,o,n){o===void 0&&(o=0),n===void 0&&(n=r.length);var i=o+Math.floor(Math.random()*n);return e(r,i)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=e.indexOf(d),n=e.indexOf(r);return o!==-1&&n===-1?(e[o]=r,!0):!1};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.indexOf(d);return r!==-1&&r>0&&(e.splice(r,1),e.unshift(d)),d};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),d=function(r,o,n,i,s){if(i===void 0&&(i=0),s===void 0&&(s=r.length),e(r,i,s))for(var u=i;u<s;u++){var h=r[u];h.hasOwnProperty(o)&&(h[o]=n)}return r};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){if(d===r)return e;var o=e.indexOf(d),n=e.indexOf(r);if(o<0||n<0)throw new Error("Supplied items must be elements of the same array");return e[o]=r,e[n]=d,e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(211),r=t(24),o=t(20),n=new e({Extends:d,initialize:function(s){d.call(this),this.checkQueue=!0,this.scene=s,this.systems=s.sys,s.sys.events.once(o.BOOT,this.boot,this),s.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var i=this.systems.events;i.on(o.PRE_UPDATE,this.update,this),i.on(o.UPDATE,this.sceneUpdate,this),i.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(i,s){for(var u=this._active,h=u.length,l=0;l<h;l++){var f=u[l];f.active&&f.preUpdate.call(f,i,s)}},shutdown:function(){for(var i=this._active.length;i--;)this._active[i].destroy(!0);for(i=this._pending.length;i--;)this._pending[i].destroy(!0);for(i=this._destroy.length;i--;)this._destroy[i].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var s=this.systems.events;s.off(o.PRE_UPDATE,this.update,this),s.off(o.UPDATE,this.sceneUpdate,this),s.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});r.register("UpdateList",n,"updateList"),a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="add"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="remove"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){if(r===void 0&&(r=!1),o===void 0)return o={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},o;var n=e.text,i=n.length,s=e.maxWidth,u=e.wordWrapCharCode,h=Number.MAX_VALUE,l=Number.MAX_VALUE,f=0,v=0,c=e.fontData.chars,p=e.fontData.lineHeight,m=e.letterSpacing,y=0,T=0,E=0,S=null,P=e._align,M=0,O=0,L=e.fontSize/e.fontData.size,F=L*e.scaleX,b=L*e.scaleY,B=null,U=0,X=[],W=Number.MAX_VALUE,Z=0,J=0,N=0,I,G=[],V=[],Y=null;if(s>0){for(I=0;I<i;I++){if(E=n.charCodeAt(I),E===10){Y!==null&&(G.push({word:Y.word,i:Y.i,x:Y.x*F,y:Y.y*b,w:Y.w*F,h:Y.h*b,cr:!0}),Y=null),y=0,T+=p,B=null;continue}if(S=c[E],!!S){if(B!==null)var z=S.kerning[U];E===u?Y!==null&&(G.push({word:Y.word,i:Y.i,x:Y.x*F,y:Y.y*b,w:Y.w*F,h:Y.h*b,cr:!1}),Y=null):(Y===null&&(Y={word:"",i:I,x:y,y:T,w:0,h:p,cr:!1}),Y.word=Y.word.concat(n[I]),Y.w+=S.xOffset+S.xAdvance+(z!==void 0?z:0)),y+=S.xAdvance+m,B=S,U=E}}Y!==null&&G.push({word:Y.word,i:Y.i,x:Y.x*F,y:Y.y*b,w:Y.w*F,h:Y.h*b,cr:!1}),y=0,T=0,B=null,U=0;var H,$=0,Q=[];for(I=0;I<G.length;I++){var k=G[I],tt=k.x,it=k.x+k.w;if(H){var st=tt-(H.x+H.w);$=tt-(st+H.w),H=null}var ot=tt-$,rt=it-$;ot>s||rt>s?(Q.push(k.i-1),k.cr?(Q.push(k.i+k.word.length),$=0,H=null):H=k):k.cr&&(Q.push(k.i+k.word.length),$=0,H=null)}var ut=function(ft,Mt,pt){return ft.substr(0,Mt)+pt+ft.substr(Mt+1)};for(I=Q.length-1;I>=0;I--)n=ut(n,Q[I],`
`);o.wrappedText=n,i=n.length,G=[],Y=null}var gt=0;for(I=0;I<i;I++){if(E=n.charCodeAt(I),E===10){Y!==null&&(G.push({word:Y.word,i:Y.i,x:Y.x*F,y:Y.y*b,w:Y.w*F,h:Y.h*b}),Y=null),y=0,T+=p,B=null,X[J]=N,N>Z&&(Z=N),N<W&&(W=N),J++,N=0;continue}if(S=c[E],!!S){if(M=y,O=T,B!==null){var mt=S.kerning[U];M+=mt!==void 0?mt:0}h>M&&(h=M),l>O&&(l=O);var dt=M+S.xAdvance,at=O+p;f<dt&&(f=dt),v<at&&(v=at);var Rt=S.xOffset+S.xAdvance+(mt!==void 0?mt:0);E===u?Y!==null&&(G.push({word:Y.word,i:Y.i,x:Y.x*F,y:Y.y*b,w:Y.w*F,h:Y.h*b}),Y=null):(Y===null&&(Y={word:"",i:gt,x:y,y:T,w:0,h:p}),Y.word=Y.word.concat(n[I]),Y.w+=Rt),V.push({i:gt,char:n[I],code:E,x:(S.xOffset+y)*L,y:(S.yOffset+T)*L,w:S.width*L,h:S.height*L,t:T*L,r:dt*L,b:p*L,line:J,glyph:S}),y+=S.xAdvance+m,B=S,U=E,N=dt*L,gt++}}if(Y!==null&&G.push({word:Y.word,i:Y.i,x:Y.x*F,y:Y.y*b,w:Y.w*F,h:Y.h*b}),X[J]=N,N>Z&&(Z=N),N<W&&(W=N),P>0)for(var ct=0;ct<V.length;ct++){var yt=V[ct];if(P===1){var $t=(Z-X[yt.line])/2;yt.x+=$t,yt.r+=$t}else if(P===2){var q=Z-X[yt.line];yt.x+=q,yt.r+=q}}var et=o.local,nt=o.global,ht=o.lines;return et.x=h*L,et.y=l*L,et.width=f*L,et.height=v*L,nt.x=e.x-e._displayOriginX+h*F,nt.y=e.y-e._displayOriginY+l*b,nt.width=f*F,nt.height=v*b,ht.shortest=W,ht.longest=Z,ht.lengths=X,d&&(et.x=Math.ceil(et.x),et.y=Math.ceil(et.y),et.width=Math.ceil(et.width),et.height=Math.ceil(et.height),nt.x=Math.ceil(nt.x),nt.y=Math.ceil(nt.y),nt.width=Math.ceil(nt.width),nt.height=Math.ceil(nt.height),ht.shortest=Math.ceil(W),ht.longest=Math.ceil(Z)),r&&(e._displayOriginX=e.originX*et.width,e._displayOriginY=e.originY*et.height,nt.x=e.x-e._displayOriginX*e.scaleX,nt.y=e.y-e._displayOriginY*e.scaleY,d&&(nt.x=Math.ceil(nt.x),nt.y=Math.ceil(nt.y))),o.words=G,o.characters=V,o.lines.height=p,o.scale=L,o.scaleX=e.scaleX,o.scaleY=e.scaleY,o};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(212),d=function(r,o,n,i,s,u,h){var l=r.sys.textures.get(n),f=l.get(i),v=r.sys.cache.xml.get(s);if(f&&v){var c=e(v,f,u,h,l);return r.sys.cache.bitmapFont.add(o,{data:c,texture:n,frame:i,fromAtlas:!0}),!0}else return!1};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1046),d=t(1048),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1047),d=t(19),r=t(12),o=function(n,i,s,u){var h=i._text,l=h.length;if(l!==0){s.addToRenderList(i);var f=n.pipelines.set(i.pipeline,i),v=d(i,s,u).calc,c=s.roundPixels,p=s.alpha,m=i.charColors,y=i.tintFill,T=r.getTintAppendFloatAlpha,E=T(i.tintTopLeft,p*i._alphaTL),S=T(i.tintTopRight,p*i._alphaTR),P=T(i.tintBottomLeft,p*i._alphaBL),M=T(i.tintBottomRight,p*i._alphaBR),O=i.frame.glTexture,L=f.setGameObject(i),F=i.getTextBounds(!1),b,B,U,X=F.characters,W=i.dropShadowX,Z=i.dropShadowY,J=W!==0||Z!==0;if(n.pipelines.preBatch(i),J){var N=i.dropShadowColor,I=i.dropShadowAlpha,G=T(N,p*I*i._alphaTL),V=T(N,p*I*i._alphaTR),Y=T(N,p*I*i._alphaBL),z=T(N,p*I*i._alphaBR);for(b=0;b<X.length;b++)B=X[b],U=B.glyph,!(B.code===32||U.width===0||U.height===0)&&e(f,i,B,U,W,Z,v,c,G,V,Y,z,1,O,L)}for(b=0;b<X.length;b++)if(B=X[b],U=B.glyph,!(B.code===32||U.width===0||U.height===0))if(m[B.i]){var H=m[B.i],$=H.tintEffect,Q=T(H.tintTL,p*i._alphaTL),k=T(H.tintTR,p*i._alphaTR),tt=T(H.tintBL,p*i._alphaBL),it=T(H.tintBR,p*i._alphaBR);e(f,i,B,U,0,0,v,c,Q,k,tt,it,$,O,L)}else e(f,i,B,U,0,0,v,c,E,S,P,M,y,O,L);n.pipelines.postBatch(i)}};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n,i,s,u,h,l,f,v,c,p,m){var y=r.x-d.displayOriginX+n,T=r.y-d.displayOriginY+i,E=y+r.w,S=T+r.h,P=s.getXRound(y,T,u),M=s.getYRound(y,T,u),O=s.getXRound(y,S,u),L=s.getYRound(y,S,u),F=s.getXRound(E,S,u),b=s.getYRound(E,S,u),B=s.getXRound(E,T,u),U=s.getYRound(E,T,u);e.batchQuad(d,P,M,O,L,F,b,B,U,o.u0,o.v0,o.u1,o.v1,h,l,f,v,c,p,m)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(30),d=function(r,o,n,i){var s=o._text,u=s.length,h=r.currentContext;if(!(u===0||!e(r,h,o,n,i))){n.addToRenderList(o);var l=o.fromAtlas?o.frame:o.texture.frames.__BASE,f=o.fontData.chars,v=o.fontData.lineHeight,c=o._letterSpacing,p=0,m=0,y=0,T=null,E=0,S=0,P=0,M=0,O=0,L=0,F=null,b=0,B=l.source.image,U=l.cutX,X=l.cutY,W=o._fontSize/o.fontData.size,Z=o._align,J=0,N=0,I=o.getTextBounds(!1);o.maxWidth>0&&(s=I.wrappedText,u=s.length);var G=o._bounds.lines;Z===1?N=(G.longest-G.lengths[0])/2:Z===2&&(N=G.longest-G.lengths[0]),h.translate(-o.displayOriginX,-o.displayOriginY);for(var V=n.roundPixels,Y=0;Y<u;Y++){if(y=s.charCodeAt(Y),y===10){J++,Z===1?N=(G.longest-G.lengths[J])/2:Z===2&&(N=G.longest-G.lengths[J]),p=0,m+=v,F=null;continue}if(T=f[y],!!T){if(E=U+T.x,S=X+T.y,P=T.width,M=T.height,O=T.xOffset+p,L=T.yOffset+m,F!==null){var z=T.kerning[b];O+=z!==void 0?z:0}O*=W,L*=W,O+=N,p+=T.xAdvance+c,F=T,b=y,!(P===0||M===0||y===32)&&(V&&(O=Math.round(O),L=Math.round(L)),h.save(),h.translate(O,L),h.scale(W,W),h.drawImage(B,E,S,P,M,0,0,P,M),h.restore())}}h.restore()}};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1050),d=t(1051),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),d=t(12),r=new e,o=function(n,i,s,u){var h=i.getRenderList();if(h.length!==0){var l=s.alpha*i.alpha;if(l!==0){s.addToRenderList(i);var f=n.pipelines.set(this.pipeline,i),v=s.scrollX*i.scrollFactorX,c=s.scrollY*i.scrollFactorY,p=r.copyFrom(s.matrix);u&&(p.multiplyWithOffset(u,-v,-c),v=0,c=0);var m=i.x-v,y=i.y-c,T=-1,E=!1,S=s.roundPixels;n.pipelines.preBatch(i);for(var P=0;P<h.length;P++){var M=h[P],O=M.frame,L=M.alpha*l;if(L!==0){var F=O.width,b=O.height,B=m+M.x+O.x,U=y+M.y+O.y;M.flipX&&(F*=-1,B+=O.width),M.flipY&&(b*=-1,U+=O.height);var X=B+F,W=U+b,Z=p.getX(B,U),J=p.getY(B,U),N=p.getX(X,W),I=p.getY(X,W),G=d.getTintAppendFloatAlpha(M.tint,L);if(O.sourceIndex!==T){var V=f.setGameObject(i,O);T=O.sourceIndex}S&&(Z=Math.round(Z),J=Math.round(J),N=Math.round(N),I=Math.round(I)),f.batchQuad(i,Z,J,Z,I,N,I,N,J,O.u0,O.v0,O.u1,O.v1,G,G,G,G,E,O.glTexture,V)&&(T=-1)}}n.pipelines.postBatch(i)}}};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n=d.getRenderList();if(n.length!==0){var i=e.currentContext,s=r.alpha*d.alpha;if(s!==0){r.addToRenderList(d),i.globalCompositeOperation=e.blendModes[d.blendMode],i.imageSmoothingEnabled=!(!e.antialias||d.frame.source.scaleMode);var u=d.x-r.scrollX*d.scrollFactorX,h=d.y-r.scrollY*d.scrollFactorY;i.save(),o&&o.copyToContext(i);for(var l=r.roundPixels,f=0;f<n.length;f++){var v=n[f],c=v.flipX||v.flipY,p=v.frame,m=p.canvasData,y=p.x,T=p.y,E=1,S=1,P=v.alpha*s;P!==0&&(i.globalAlpha=P,c?(v.flipX&&(E=-1,y-=m.width),v.flipY&&(S=-1,T-=m.height),i.save(),i.translate(v.x+u,v.y+h),i.scale(E,S),i.drawImage(p.source.image,m.x,m.y,m.width,m.height,y,T,m.width,m.height),i.restore()):(l&&(y=Math.round(y),T=Math.round(T)),i.drawImage(p.source.image,m.x,m.y,m.width,m.height,y+v.x+u,T+v.y+h,m.width,m.height)))}i.restore()}}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1053),d=t(1054),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){r.addToRenderList(d);var n=d.list,i=n.length;if(i!==0){var s=d.localTransform;o?(s.loadIdentity(),s.multiply(o),s.translate(d.x,d.y),s.rotate(d.rotation),s.scale(d.scaleX,d.scaleY)):s.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY),e.pipelines.preBatch(d);var u=d.blendMode!==-1;u||e.setBlendMode(0);for(var h=d.alpha,l=d.scrollFactorX,f=d.scrollFactorY,v=0;v<i;v++){var c=n[v];if(c.willRender(r)){var p,m,y,T;if(c.alphaTopLeft!==void 0)p=c.alphaTopLeft,m=c.alphaTopRight,y=c.alphaBottomLeft,T=c.alphaBottomRight;else{var E=c.alpha;p=E,m=E,y=E,T=E}var S=c.scrollFactorX,P=c.scrollFactorY;!u&&c.blendMode!==e.currentBlendMode&&e.setBlendMode(c.blendMode);var M=c.mask;M&&M.preRenderWebGL(e,c,r);var O=c.type;O!==e.currentType&&(e.newType=!0,e.currentType=O),e.nextTypeMatch=v<i-1?n[v+1].type===e.currentType:!1,c.setScrollFactor(S*l,P*f),c.setAlpha(p*h,m*h,y*h,T*h),c.renderWebGL(e,c,r,s),c.setAlpha(p,m,y,T),c.setScrollFactor(S,P),M&&M.postRenderWebGL(e,r),e.newType=!1}}e.pipelines.postBatch(d)}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){r.addToRenderList(d);var n=d.list;if(n.length!==0){var i=d.localTransform;o?(i.loadIdentity(),i.multiply(o),i.translate(d.x,d.y),i.rotate(d.rotation),i.scale(d.scaleX,d.scaleY)):i.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var s=d.blendMode!==-1;s||e.setBlendMode(0);var u=d._alpha,h=d.scrollFactorX,l=d.scrollFactorY;d.mask&&d.mask.preRenderCanvas(e,null,r);for(var f=0;f<n.length;f++){var v=n[f];if(v.willRender(r)){var c=v.alpha,p=v.scrollFactorX,m=v.scrollFactorY;!s&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode),v.setScrollFactor(p*h,m*l),v.setAlpha(c*u),v.renderCanvas(e,v,r,i),v.setAlpha(c),v.setScrollFactor(p,m)}}d.mask&&d.mask.postRenderCanvas(e)}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(443),d=t(443),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1058),d=t(1059),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=t(25),r=t(12),o=new d,n=function(i,s,u,h){var l=s.text,f=l.length;if(f!==0){u.addToRenderList(s);var v=i.pipelines.set(s.pipeline,s),c=e(s,u,h),p=c.sprite,m=c.calc,y=o,T=s.cropWidth>0||s.cropHeight>0;T&&(v.flush(),i.pushScissor(m.tx,m.ty,s.cropWidth*m.scaleX,s.cropHeight*m.scaleY));var E=s.frame,S=E.glTexture,P=s.tintFill,M=r.getTintAppendFloatAlpha(s.tintTopLeft,u.alpha*s._alphaTL),O=r.getTintAppendFloatAlpha(s.tintTopRight,u.alpha*s._alphaTR),L=r.getTintAppendFloatAlpha(s.tintBottomLeft,u.alpha*s._alphaBL),F=r.getTintAppendFloatAlpha(s.tintBottomRight,u.alpha*s._alphaBR),b=v.setGameObject(s),B=0,U=0,X=0,W=0,Z=s.letterSpacing,J,N=0,I=0,G,V=s.scrollX,Y=s.scrollY,z=s.fontData,H=z.chars,$=z.lineHeight,Q=s.fontSize/z.size,k=0,tt=s._align,it=0,st=0,ot=s.getTextBounds(!1);s.maxWidth>0&&(l=ot.wrappedText,f=l.length);var rt=s._bounds.lines;tt===1?st=(rt.longest-rt.lengths[0])/2:tt===2&&(st=rt.longest-rt.lengths[0]);var ut=u.roundPixels,gt=s.displayCallback,mt=s.callbackData;i.pipelines.preBatch(s);for(var dt=0;dt<f;dt++){if(X=l.charCodeAt(dt),X===10){it++,tt===1?st=(rt.longest-rt.lengths[it])/2:tt===2&&(st=rt.longest-rt.lengths[it]),B=0,U+=$,G=null;continue}if(J=H[X],!!J){N=J.width,I=J.height;var at=J.xOffset+B-V,Rt=J.yOffset+U-Y;if(G!==null){var ct=J.kerning[W];at+=ct!==void 0?ct:0}if(B+=J.xAdvance+Z,G=J,W=X,!(N===0||I===0||X===32)){if(Q=s.fontSize/s.fontData.size,k=0,gt){mt.color=0,mt.tint.topLeft=M,mt.tint.topRight=O,mt.tint.bottomLeft=L,mt.tint.bottomRight=F,mt.index=dt,mt.charCode=X,mt.x=at,mt.y=Rt,mt.scale=Q,mt.rotation=k,mt.data=J.data;var yt=gt(mt);at=yt.x,Rt=yt.y,Q=yt.scale,k=yt.rotation,yt.color?(M=yt.color,O=yt.color,L=yt.color,F=yt.color):(M=yt.tint.topLeft,O=yt.tint.topRight,L=yt.tint.bottomLeft,F=yt.tint.bottomRight),M=r.getTintAppendFloatAlpha(M,u.alpha*s._alphaTL),O=r.getTintAppendFloatAlpha(O,u.alpha*s._alphaTR),L=r.getTintAppendFloatAlpha(L,u.alpha*s._alphaBL),F=r.getTintAppendFloatAlpha(F,u.alpha*s._alphaBR)}at*=Q,Rt*=Q,at-=s.displayOriginX,Rt-=s.displayOriginY,at+=st,y.applyITRS(at,Rt,k,Q,Q),m.multiply(y,p);var $t=J.u0,q=J.v0,et=J.u1,nt=J.v1,ht=N,ft=I,Mt=p.e,pt=p.f,Et=ft*p.c+p.e,vt=ft*p.d+p.f,Ct=ht*p.a+ft*p.c+p.e,At=ht*p.b+ft*p.d+p.f,Ut=ht*p.a+p.e,Qt=ht*p.b+p.f;ut&&(Mt=Math.round(Mt),pt=Math.round(pt),Et=Math.round(Et),vt=Math.round(vt),Ct=Math.round(Ct),At=Math.round(At),Ut=Math.round(Ut),Qt=Math.round(Qt)),v.batchQuad(s,Mt,pt,Et,vt,Ct,At,Ut,Qt,$t,q,et,nt,M,O,L,F,P,S,b)}}}T&&(v.flush(),i.popScissor()),i.pipelines.postBatch(s)}};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(30),d=function(r,o,n,i){var s=o._text,u=s.length,h=r.currentContext;if(!(u===0||!e(r,h,o,n,i))){n.addToRenderList(o);var l=o.fromAtlas?o.frame:o.texture.frames.__BASE,f=o.displayCallback,v=o.callbackData,c=o.fontData.chars,p=o.fontData.lineHeight,m=o._letterSpacing,y=0,T=0,E=0,S=null,P=0,M=0,O=0,L=0,F=0,b=0,B=null,U=0,X=o.frame.source.image,W=l.cutX,Z=l.cutY,J=0,N=0,I=o._fontSize/o.fontData.size,G=o._align,V=0,Y=0;o.getTextBounds(!1);var z=o._bounds.lines;G===1?Y=(z.longest-z.lengths[0])/2:G===2&&(Y=z.longest-z.lengths[0]),h.translate(-o.displayOriginX,-o.displayOriginY);var H=n.roundPixels;o.cropWidth>0&&o.cropHeight>0&&(h.beginPath(),h.rect(0,0,o.cropWidth,o.cropHeight),h.clip());for(var $=0;$<u;$++){if(N=I,J=0,E=s.charCodeAt($),E===10){V++,G===1?Y=(z.longest-z.lengths[V])/2:G===2&&(Y=z.longest-z.lengths[V]),y=0,T+=p,B=null;continue}if(S=c[E],!!S){if(P=W+S.x,M=Z+S.y,O=S.width,L=S.height,F=S.xOffset+y-o.scrollX,b=S.yOffset+T-o.scrollY,B!==null){var Q=S.kerning[U];F+=Q!==void 0?Q:0}if(f){v.index=$,v.charCode=E,v.x=F,v.y=b,v.scale=N,v.rotation=J,v.data=S.data;var k=f(v);F=k.x,b=k.y,N=k.scale,J=k.rotation}F*=N,b*=N,F+=Y,y+=S.xAdvance+m,B=S,U=E,!(O===0||L===0||E===32)&&(H&&(F=Math.round(F),b=Math.round(b)),h.save(),h.translate(F,b),h.rotate(J),h.scale(N,N),h.drawImage(X,P,M,O,L,0,0,O,L),h.restore())}}h.restore()}};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1061),d=t(1062),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=function(r,o,n,i){r.pipelines.clear();var s=e(o,n,i).calc;o.render.call(o,r,n,s),r.pipelines.rebind()};a.exports=d},function(a,x){},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1064),d=t(448),d=t(448),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(217),d=t(19),r=t(25),o=t(12),n=function(l,f,v){this.x=l,this.y=f,this.width=v},i=function(l,f,v){this.points=[],this.pointsLength=1,this.points[0]=new n(l,f,v)},s=[],u=new r,h=function(l,f,v,c){if(f.commandBuffer.length!==0){v.addToRenderList(f);var p=l.pipelines.set(f.pipeline,f);l.pipelines.preBatch(f);for(var m=d(f,v,c).calc,y=u.loadIdentity(),T=f.commandBuffer,E=v.alpha*f.alpha,S=1,P=p.fillTint,M=p.strokeTint,O=0,L=0,F=0,b=.01,B=Math.PI*2,U,X=[],W=0,Z=!0,J=null,N=o.getTintAppendFloatAlpha,I=0;I<T.length;I++)switch(U=T[I],U){case e.BEGIN_PATH:{X.length=0,J=null,Z=!0;break}case e.CLOSE_PATH:{Z=!1,J&&J.points.length&&J.points.push(J.points[0]);break}case e.FILL_PATH:{for(W=0;W<X.length;W++)p.batchFillPath(X[W].points,y,m);break}case e.STROKE_PATH:{for(W=0;W<X.length;W++)p.batchStrokePath(X[W].points,S,Z,y,m);break}case e.LINE_STYLE:{S=T[++I];var G=T[++I],V=T[++I]*E,Y=N(G,V);M.TL=Y,M.TR=Y,M.BL=Y,M.BR=Y;break}case e.FILL_STYLE:{var z=T[++I],H=T[++I]*E,$=N(z,H);P.TL=$,P.TR=$,P.BL=$,P.BR=$;break}case e.GRADIENT_FILL_STYLE:{var Q=T[++I]*E,k=T[++I]*E,tt=T[++I]*E,it=T[++I]*E;P.TL=N(T[++I],Q),P.TR=N(T[++I],k),P.BL=N(T[++I],tt),P.BR=N(T[++I],it);break}case e.GRADIENT_LINE_STYLE:{S=T[++I];var st=T[++I]*E;M.TL=N(T[++I],st),M.TR=N(T[++I],st),M.BL=N(T[++I],st),M.BR=N(T[++I],st);break}case e.ARC:{var ot=0,rt=T[++I],ut=T[++I],gt=T[++I],mt=T[++I],dt=T[++I],at=T[++I],Rt=T[++I];for(dt-=mt,at?dt<-B?dt=-B:dt>0&&(dt=-B+dt%B):dt>B?dt=B:dt<0&&(dt=B+dt%B),J===null&&(J=new i(rt+Math.cos(mt)*gt,ut+Math.sin(mt)*gt,S),X.push(J),ot+=b);ot<1+Rt;)F=dt*ot+mt,O=rt+Math.cos(F)*gt,L=ut+Math.sin(F)*gt,J.points.push(new n(O,L,S)),ot+=b;F=dt+mt,O=rt+Math.cos(F)*gt,L=ut+Math.sin(F)*gt,J.points.push(new n(O,L,S));break}case e.FILL_RECT:{p.batchFillRect(T[++I],T[++I],T[++I],T[++I],y,m);break}case e.FILL_TRIANGLE:{p.batchFillTriangle(T[++I],T[++I],T[++I],T[++I],T[++I],T[++I],y,m);break}case e.STROKE_TRIANGLE:{p.batchStrokeTriangle(T[++I],T[++I],T[++I],T[++I],T[++I],T[++I],S,y,m);break}case e.LINE_TO:{J!==null?J.points.push(new n(T[++I],T[++I],S)):(J=new i(T[++I],T[++I],S),X.push(J));break}case e.MOVE_TO:{J=new i(T[++I],T[++I],S),X.push(J);break}case e.SAVE:{s.push(y.copyToArray());break}case e.RESTORE:{y.copyFromArray(s.pop());break}case e.TRANSLATE:{rt=T[++I],ut=T[++I],y.translate(rt,ut);break}case e.SCALE:{rt=T[++I],ut=T[++I],y.scale(rt,ut);break}case e.ROTATE:{y.rotate(T[++I]);break}}l.pipelines.postBatch(f)}};a.exports=h},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1066),d=t(1067),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){r.addToRenderList(d),d.pipeline.batchSprite(d,r,o)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){r.addToRenderList(d),e.batchSprite(d,d.frame,r,o)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1069),d=t(1070),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){r.addToRenderList(d),this.pipeline.batchSprite(d,r,o)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){r.addToRenderList(d),e.batchSprite(d,d.frame,r,o)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1072),d=t(1073),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=d.list,n=o.length;if(n!==0){d.depthSort(),e.pipelines.preBatch(d);var i=d.blendMode!==-1;i||e.setBlendMode(0);for(var s=d.alpha,u=0;u<n;u++){var h=o[u];if(h.willRender(r)){var l,f,v,c;if(h.alphaTopLeft!==void 0)l=h.alphaTopLeft,f=h.alphaTopRight,v=h.alphaBottomLeft,c=h.alphaBottomRight;else{var p=h.alpha;l=p,f=p,v=p,c=p}!i&&h.blendMode!==e.currentBlendMode&&e.setBlendMode(h.blendMode);var m=h.mask;m&&m.preRenderWebGL(e,h,r);var y=h.type;y!==e.currentType&&(e.newType=!0,e.currentType=y),e.nextTypeMatch=u<n-1?o[u+1].type===e.currentType:!1,h.setAlpha(l*s,f*s,v*s,c*s),h.renderWebGL(e,h,r),h.setAlpha(l,f,v,c),m&&m.postRenderWebGL(e,r),e.newType=!1}}e.pipelines.postBatch(d)}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=d.list;if(o.length!==0){d.depthSort();var n=d.blendMode!==-1;n||e.setBlendMode(0);var i=d._alpha;d.mask&&d.mask.preRenderCanvas(e,null,r);for(var s=0;s<o.length;s++){var u=o[s];if(u.willRender(r)){var h=u.alpha;!n&&u.blendMode!==e.currentBlendMode&&e.setBlendMode(u.blendMode),u.setAlpha(h*i),u.renderCanvas(e,u,r),u.setAlpha(h)}}d.mask&&d.mask.postRenderCanvas(e)}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={EmitterOp:t(449),GravityWell:t(450),Particle:t(451),ParticleEmitter:t(452),ParticleEmitterManager:t(220),Zones:t(1078)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1076),d=t(1077),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),d=t(12),r=new e,o=new e,n=new e,i=new e,s=function(u,h,l,f){var v=h.emitters.list,c=v.length;if(c!==0){var p=u.pipelines.set(h.pipeline),m=r,y=o,T=n,E=i;f?(E.loadIdentity(),E.multiply(f),E.translate(h.x,h.y),E.rotate(h.rotation),E.scale(h.scaleX,h.scaleY)):E.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var S=l.roundPixels,P=h.defaultFrame.glTexture,M=d.getTintAppendFloatAlpha,O=p.setGameObject(h,h.defaultFrame);u.pipelines.preBatch(h);for(var L=0;L<c;L++){var F=v[L],b=F.alive,B=b.length;if(!(!F.visible||B===0)){l.addToRenderList(F);var U=F.scrollFactorX,X=F.scrollFactorY;u.setBlendMode(F.blendMode),F.mask&&(F.mask.preRenderWebGL(u,F,l),u.pipelines.set(h.pipeline));for(var W=0,Z=0;Z<B;Z++){var J=b[Z],N=J.alpha*l.alpha;if(!(N<=0)){T.applyITRS(J.x,J.y,J.rotation,J.scaleX,J.scaleY),m.copyFrom(l.matrix),m.multiplyWithOffset(E,-l.scrollX*U,-l.scrollY*X),T.e=J.x,T.f=J.y,m.multiply(T,y);var I=J.frame,G=-I.halfWidth,V=-I.halfHeight,Y=G+I.width,z=V+I.height,H=y.getXRound(G,V,S),$=y.getYRound(G,V,S),Q=y.getXRound(G,z,S),k=y.getYRound(G,z,S),tt=y.getXRound(Y,z,S),it=y.getYRound(Y,z,S),st=y.getXRound(Y,V,S),ot=y.getYRound(Y,V,S),rt=M(J.tint,N);p.batchQuad(F,H,$,Q,k,tt,it,st,ot,I.u0,I.v0,I.u1,I.v1,rt,rt,rt,rt,W,P,O)}}F.mask&&F.mask.postRenderWebGL(u,l)}}u.pipelines.postBatch(h)}};a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),d=new e,r=new e,o=new e,n=new e,i=function(s,u,h,l){var f=u.emitters.list,v=f.length;if(v!==0){var c=d.copyFrom(h.matrix),p=r,m=o,y=n;l?(y.loadIdentity(),y.multiply(l),y.translate(u.x,u.y),y.rotate(u.rotation),y.scale(u.scaleX,u.scaleY)):y.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);for(var T=s.currentContext,E=h.roundPixels,S=0;S<v;S++){var P=f[S],M=P.alive,O=M.length;if(!(!P.visible||O===0)){h.addToRenderList(P);var L=P.scrollFactorX,F=P.scrollFactorY;T.save(),T.globalCompositeOperation=s.blendModes[P.blendMode];for(var b=0;b<O;b++){var B=M[b],U=B.alpha*h.alpha;if(!(U<=0)){m.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),c.copyFrom(h.matrix),c.multiplyWithOffset(y,-h.scrollX*L,-h.scrollY*F),m.e=B.x,m.f=B.y,c.multiply(m,p);var X=B.frame,W=X.canvasData,Z=-X.halfWidth,J=-X.halfHeight;T.globalAlpha=U,T.save(),p.setToContext(T),E&&(Z=Math.round(Z),J=Math.round(J)),T.imageSmoothingEnabled=!(!s.antialias||X.source.scaleMode),T.drawImage(X.source.image,W.x,W.y,W.width,W.height,Z,J,W.width,W.height),T.restore()}}T.restore()}}}};a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={DeathZone:t(453),EdgeZone:t(454),RandomZone:t(456)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1080),d=t(1081),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),d=function(r,o,n,i){n.addToRenderList(o);var s=n.alpha,u=o.renderTarget,h=u.width,l=u.height,f=e.getTintAppendFloatAlpha,v=r.pipelines.set(o.pipeline),c=v.setTexture2D(u.texture);r.pipelines.preBatch(o),v.batchTexture(o,u.texture,h,l,o.x,o.y,h,l,o.scaleX,o.scaleY,o.rotation,o.flipX,!o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,h,l,f(o.tintTopLeft,s*o._alphaTL),f(o.tintTopRight,s*o._alphaTR),f(o.tintBottomLeft,s*o._alphaBL),f(o.tintBottomRight,s*o._alphaBR),o.tintFill,0,0,n,i,!0,c),r.resetTextures(),r.pipelines.postBatch(o)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){r.addToRenderList(d),e.batchSprite(d,d.frame,r,o)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1083),d=t(17),r={Parse:t(1084)};r=d(!1,r,e),a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),d=function(r,o){var n=o.width,i=o.height,s=Math.floor(n/2),u=Math.floor(i/2),h=e(o,"chars","");if(h!==""){var l=e(o,"image",""),f=r.sys.textures.getFrame(l),v=f.cutX,c=f.cutY,p=f.source.width,m=f.source.height,y=e(o,"offset.x",0),T=e(o,"offset.y",0),E=e(o,"spacing.x",0),S=e(o,"spacing.y",0),P=e(o,"lineSpacing",0),M=e(o,"charsPerRow",null);M===null&&(M=p/n,M>h.length&&(M=h.length));for(var O=y,L=T,F={retroFont:!0,font:l,size:n,lineHeight:i+P,chars:{}},b=0,B=0;B<h.length;B++){var U=h.charCodeAt(B),X=(v+O)/p,W=(c+L)/m,Z=(v+O+n)/p,J=(c+L+i)/m;F.chars[U]={x:O,y:L,width:n,height:i,centerX:s,centerY:u,xOffset:0,yOffset:0,xAdvance:n,data:{},kerning:{},u0:X,v0:W,u1:Z,v1:J},b++,b===M?(b=0,O=y,L+=i+S):O+=n+E}var N={data:F,frame:null,texture:l};return N}};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1086),d=t(1087),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=t(12),r=function(o,n,i,s){i.addToRenderList(n);var u=o.pipelines.set(n.pipeline,n),h=e(n,i,s).calc,l=n.vertices,f=n.uv,v=n.colors,c=n.alphas,p=n.alpha,m=d.getTintAppendFloatAlpha,y=i.roundPixels,T=l.length,E=Math.floor(T*.5);u.flush(),o.pipelines.preBatch(n);var S=u.setGameObject(n),P=u.vertexViewF32,M=u.vertexViewU32,O=u.vertexCount*u.currentShader.vertexComponentCount-1,L=0,F=n.tintFill;n.dirty&&n.updateVertices();for(var b=n.debugCallback,B=[],U=0;U<T;U+=2){var X=l[U+0],W=l[U+1],Z=X*h.a+W*h.c+h.e,J=X*h.b+W*h.d+h.f;y&&(Z=Math.round(Z),J=Math.round(J)),P[++O]=Z,P[++O]=J,P[++O]=f[U+0],P[++O]=f[U+1],P[++O]=S,P[++O]=F,M[++O]=m(v[L],i.alpha*(c[L]*p)),L++,b&&(B[U+0]=Z,B[U+1]=J)}b&&b.call(n,n,T,B),u.vertexCount+=E,o.pipelines.postBatch(n)};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1089),d=t(1090),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),d=function(r,o,n,i){if(!(o.width===0||o.height===0)){n.addToRenderList(o);var s=o.frame,u=s.width,h=s.height,l=e.getTintAppendFloatAlpha,f=r.pipelines.set(o.pipeline,o),v=f.setTexture2D(s.glTexture,o);r.pipelines.preBatch(o),f.batchTexture(o,s.glTexture,u,h,o.x,o.y,u/o.style.resolution,h/o.style.resolution,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,u,h,l(o.tintTopLeft,n.alpha*o._alphaTL),l(o.tintTopRight,n.alpha*o._alphaTR),l(o.tintBottomLeft,n.alpha*o._alphaBL),l(o.tintBottomRight,n.alpha*o._alphaBR),o.tintFill,0,0,n,i,!1,v),r.pipelines.postBatch(o)}};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){d.width===0||d.height===0||(r.addToRenderList(d),e.batchSprite(d,d.frame,r,o))};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1092),d=t(1093),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),d=function(r,o,n,i){o.updateCanvas();var s=o.width,u=o.height;if(!(s===0||u===0)){n.addToRenderList(o),r.pipelines.preBatch(o);var h=e.getTintAppendFloatAlpha,l=r.pipelines.set(o.pipeline,o),f=l.setTexture2D(o.fillPattern,o);l.batchTexture(o,o.fillPattern,o.displayFrame.width*o.tileScaleX,o.displayFrame.height*o.tileScaleY,o.x,o.y,s,u,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.originX*s,o.originY*u,0,0,s,u,h(o.tintTopLeft,n.alpha*o._alphaTL),h(o.tintTopRight,n.alpha*o._alphaTR),h(o.tintBottomLeft,n.alpha*o._alphaBL),h(o.tintBottomRight,n.alpha*o._alphaBR),o.tintFill,o.tilePositionX%o.displayFrame.width/o.displayFrame.width,o.tilePositionY%o.displayFrame.height/o.displayFrame.height,n,i,!1,f),r.pipelines.postBatch(o)}};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){d.updateCanvas(),r.addToRenderList(d),e.batchSprite(d,d.frame,r,o)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1095),d=t(1096),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){d.videoTexture&&(r.addToRenderList(d),d.pipeline.batchSprite(d,r,o))};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){d.videoTexture&&(r.addToRenderList(d),e.batchSprite(d,d.frame,r,o))};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1098),d=t(1099),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=t(114),r=t(81),o=function(n,i,s,u){s.addToRenderList(i);var h=n.pipelines.set(i.pipeline),l=e(i,s,u),f=h.calcMatrix.copyFrom(l.calc),v=i._displayOriginX,c=i._displayOriginY,p=s.alpha*i.alpha;n.pipelines.preBatch(i),i.isFilled&&d(h,f,i,p,v,c),i.isStroked&&r(h,i,p,v,c),n.pipelines.postBatch(i)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(36),d=t(48),r=t(60),o=t(30),n=function(i,s,u,h){u.addToRenderList(s);var l=i.currentContext;if(o(i,l,s,u,h)){var f=s.radius;l.beginPath(),l.arc(f-s.originX*(f*2),f-s.originY*(f*2),f,e(s._startAngle),e(s._endAngle),s.anticlockwise),s.closePath&&l.closePath(),s.isFilled&&(d(l,s),l.fill()),s.isStroked&&(r(l,s),l.stroke()),l.restore()}};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1101),d=t(1102),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),d=t(19),r=t(81),o=function(n,i,s,u){s.addToRenderList(i);var h=n.pipelines.set(i.pipeline),l=d(i,s,u),f=h.calcMatrix.copyFrom(l.calc),v=i._displayOriginX+i._curveBounds.x,c=i._displayOriginY+i._curveBounds.y,p=s.alpha*i.alpha;n.pipelines.preBatch(i),i.isFilled&&e(h,f,i,p,v,c),i.isStroked&&r(h,i,p,v,c),n.pipelines.postBatch(i)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),d=t(60),r=t(30),o=function(n,i,s,u){s.addToRenderList(i);var h=n.currentContext;if(r(n,h,i,s,u)){var l=i._displayOriginX+i._curveBounds.x,f=i._displayOriginY+i._curveBounds.y,v=i.pathData,c=v.length-1,p=v[0]-l,m=v[1]-f;h.beginPath(),h.moveTo(p,m),i.closePath||(c-=2);for(var y=2;y<c;y+=2){var T=v[y]-l,E=v[y+1]-f;h.lineTo(T,E)}i.closePath&&h.closePath(),i.isFilled&&(e(h,i),h.fill()),i.isStroked&&(d(h,i),h.stroke()),h.restore()}};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1104),d=t(1105),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),d=t(19),r=t(81),o=function(n,i,s,u){s.addToRenderList(i);var h=n.pipelines.set(i.pipeline),l=d(i,s,u),f=h.calcMatrix.copyFrom(l.calc),v=i._displayOriginX,c=i._displayOriginY,p=s.alpha*i.alpha;n.pipelines.preBatch(i),i.isFilled&&e(h,f,i,p,v,c),i.isStroked&&r(h,i,p,v,c),n.pipelines.postBatch(i)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),d=t(60),r=t(30),o=function(n,i,s,u){s.addToRenderList(i);var h=n.currentContext;if(r(n,h,i,s,u)){var l=i._displayOriginX,f=i._displayOriginY,v=i.pathData,c=v.length-1,p=v[0]-l,m=v[1]-f;h.beginPath(),h.moveTo(p,m),i.closePath||(c-=2);for(var y=2;y<c;y+=2){var T=v[y]-l,E=v[y+1]-f;h.lineTo(T,E)}h.closePath(),i.isFilled&&(e(h,i),h.fill()),i.isStroked&&(d(h,i),h.stroke()),h.restore()}};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1107),d=t(1108),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=t(12),r=function(o,n,i,s){i.addToRenderList(n);var u=o.pipelines.set(n.pipeline),h=e(n,i,s),l=u.calcMatrix.copyFrom(h.calc);l.translate(-n._displayOriginX,-n._displayOriginY);var f=i.alpha*n.alpha,v=n.width,c=n.height,p=n.cellWidth,m=n.cellHeight,y=Math.ceil(v/p),T=Math.ceil(c/m),E=p,S=m,P=p-(y*p-v),M=m-(T*m-c),O,L,F=n.showCells,b=n.showAltCells,B=n.showOutline,U=0,X=0,W=0,Z=0,J=0;if(B&&(E--,S--,P===p&&P--,M===m&&M--),o.pipelines.preBatch(n),F&&n.fillAlpha>0)for(O=u.fillTint,L=d.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*f),O.TL=L,O.TR=L,O.BL=L,O.BR=L,X=0;X<T;X++)for(b&&(W=X%2),U=0;U<y;U++){if(b&&W){W=0;continue}W++,Z=U<y-1?E:P,J=X<T-1?S:M,u.batchFillRect(U*p,X*m,Z,J)}if(b&&n.altFillAlpha>0)for(O=u.fillTint,L=d.getTintAppendFloatAlpha(n.altFillColor,n.altFillAlpha*f),O.TL=L,O.TR=L,O.BL=L,O.BR=L,X=0;X<T;X++)for(b&&(W=X%2),U=0;U<y;U++){if(b&&!W){W=1;continue}W=0,Z=U<y-1?E:P,J=X<T-1?S:M,u.batchFillRect(U*p,X*m,Z,J)}if(B&&n.outlineFillAlpha>0){var N=u.strokeTint,I=d.getTintAppendFloatAlpha(n.outlineFillColor,n.outlineFillAlpha*f);for(N.TL=I,N.TR=I,N.BL=I,N.BR=I,U=1;U<y;U++){var G=U*p;u.batchLine(G,0,G,c,1,1,1,0,!1)}for(X=1;X<T;X++){var V=X*m;u.batchLine(0,V,v,V,1,1,1,0,!1)}}o.pipelines.postBatch(n)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),d=t(60),r=t(30),o=function(n,i,s,u){s.addToRenderList(i);var h=n.currentContext;if(r(n,h,i,s,u)){var l=-i._displayOriginX,f=-i._displayOriginY,v=s.alpha*i.alpha,c=i.width,p=i.height,m=i.cellWidth,y=i.cellHeight,T=Math.ceil(c/m),E=Math.ceil(p/y),S=m,P=y,M=m-(T*m-c),O=y-(E*y-p),L=i.showCells,F=i.showAltCells,b=i.showOutline,B=0,U=0,X=0,W=0,Z=0;if(b&&(S--,P--,M===m&&M--,O===y&&O--),L&&i.fillAlpha>0)for(e(h,i),U=0;U<E;U++)for(F&&(X=U%2),B=0;B<T;B++){if(F&&X){X=0;continue}X++,W=B<T-1?S:M,Z=U<E-1?P:O,h.fillRect(l+B*m,f+U*y,W,Z)}if(F&&i.altFillAlpha>0)for(e(h,i,i.altFillColor,i.altFillAlpha*v),U=0;U<E;U++)for(F&&(X=U%2),B=0;B<T;B++){if(F&&!X){X=1;continue}X=0,W=B<T-1?S:M,Z=U<E-1?P:O,h.fillRect(l+B*m,f+U*y,W,Z)}if(b&&i.outlineFillAlpha>0){for(d(h,i,i.outlineFillColor,i.outlineFillAlpha*v),B=1;B<T;B++){var J=B*m;h.beginPath(),h.moveTo(J+l,f),h.lineTo(J+l,p+f),h.stroke()}for(U=1;U<E;U++){var N=U*y;h.beginPath(),h.moveTo(l,N+f),h.lineTo(l+c,N+f),h.stroke()}}h.restore()}};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1110),d=t(1111),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=t(12),r=function(o,n,i,s){i.addToRenderList(n);var u=o.pipelines.set(n.pipeline),h=e(n,i,s),l=u.calcMatrix.copyFrom(h.calc),f=n.width,v=n.height,c=f/2,p=f/n.projection,m=i.alpha*n.alpha;if(n.isFilled){var y,T,E,S,P,M,O,L,F;o.pipelines.preBatch(n),n.showTop&&(y=d.getTintAppendFloatAlpha(n.fillTop,m),T=l.getX(-c,-v),E=l.getY(-c,-v),S=l.getX(0,-p-v),P=l.getY(0,-p-v),M=l.getX(c,-v),O=l.getY(c,-v),L=l.getX(0,p-v),F=l.getY(0,p-v),u.batchQuad(n,T,E,S,P,M,O,L,F,0,0,1,1,y,y,y,y,2)),n.showLeft&&(y=d.getTintAppendFloatAlpha(n.fillLeft,m),T=l.getX(-c,0),E=l.getY(-c,0),S=l.getX(0,p),P=l.getY(0,p),M=l.getX(0,p-v),O=l.getY(0,p-v),L=l.getX(-c,-v),F=l.getY(-c,-v),u.batchQuad(n,T,E,S,P,M,O,L,F,0,0,1,1,y,y,y,y,2)),n.showRight&&(y=d.getTintAppendFloatAlpha(n.fillRight,m),T=l.getX(c,0),E=l.getY(c,0),S=l.getX(0,p),P=l.getY(0,p),M=l.getX(0,p-v),O=l.getY(0,p-v),L=l.getX(c,-v),F=l.getY(c,-v),u.batchQuad(n,T,E,S,P,M,O,L,F,0,0,1,1,y,y,y,y,2)),o.pipelines.postBatch(n)}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),d=t(30),r=function(o,n,i,s){i.addToRenderList(n);var u=o.currentContext;if(d(o,u,n,i,s)&&n.isFilled){var h=n.width,l=n.height,f=h/2,v=h/n.projection;n.showTop&&(e(u,n,n.fillTop),u.beginPath(),u.moveTo(-f,-l),u.lineTo(0,-v-l),u.lineTo(f,-l),u.lineTo(f,-1),u.lineTo(0,v-1),u.lineTo(-f,-1),u.lineTo(-f,-l),u.fill()),n.showLeft&&(e(u,n,n.fillLeft),u.beginPath(),u.moveTo(-f,0),u.lineTo(0,v),u.lineTo(0,v-l),u.lineTo(-f,-l),u.lineTo(-f,0),u.fill()),n.showRight&&(e(u,n,n.fillRight),u.beginPath(),u.moveTo(f,0),u.lineTo(0,v),u.lineTo(0,v-l),u.lineTo(f,-l),u.lineTo(f,0),u.fill()),u.restore()}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1113),d=t(1114),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=t(12),r=function(o,n,i,s){i.addToRenderList(n);var u=o.pipelines.set(n.pipeline),h=e(n,i,s),l=u.calcMatrix.copyFrom(h.calc),f=n.width,v=n.height,c=f/2,p=f/n.projection,m=n.isReversed,y=i.alpha*n.alpha;if(n.isFilled){o.pipelines.preBatch(n);var T,E,S,P,M,O,L;if(n.showTop&&m){T=d.getTintAppendFloatAlpha(n.fillTop,y),E=l.getX(-c,-v),S=l.getY(-c,-v),P=l.getX(0,-p-v),M=l.getY(0,-p-v),O=l.getX(c,-v),L=l.getY(c,-v);var F=l.getX(0,p-v),b=l.getY(0,p-v);u.batchQuad(n,E,S,P,M,O,L,F,b,0,0,1,1,T,T,T,T,2)}n.showLeft&&(T=d.getTintAppendFloatAlpha(n.fillLeft,y),m?(E=l.getX(-c,-v),S=l.getY(-c,-v),P=l.getX(0,p),M=l.getY(0,p),O=l.getX(0,p-v),L=l.getY(0,p-v)):(E=l.getX(-c,0),S=l.getY(-c,0),P=l.getX(0,p),M=l.getY(0,p),O=l.getX(0,p-v),L=l.getY(0,p-v)),u.batchTri(n,E,S,P,M,O,L,0,0,1,1,T,T,T,2)),n.showRight&&(T=d.getTintAppendFloatAlpha(n.fillRight,y),m?(E=l.getX(c,-v),S=l.getY(c,-v),P=l.getX(0,p),M=l.getY(0,p),O=l.getX(0,p-v),L=l.getY(0,p-v)):(E=l.getX(c,0),S=l.getY(c,0),P=l.getX(0,p),M=l.getY(0,p),O=l.getX(0,p-v),L=l.getY(0,p-v)),u.batchTri(n,E,S,P,M,O,L,0,0,1,1,T,T,T,2)),o.pipelines.postBatch(n)}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),d=t(30),r=function(o,n,i,s){i.addToRenderList(n);var u=o.currentContext;if(d(o,u,n,i,s)&&n.isFilled){var h=n.width,l=n.height,f=h/2,v=h/n.projection,c=n.isReversed;n.showTop&&c&&(e(u,n,n.fillTop),u.beginPath(),u.moveTo(-f,-l),u.lineTo(0,-v-l),u.lineTo(f,-l),u.lineTo(0,v-l),u.fill()),n.showLeft&&(e(u,n,n.fillLeft),u.beginPath(),c?(u.moveTo(-f,-l),u.lineTo(0,v),u.lineTo(0,v-l)):(u.moveTo(-f,0),u.lineTo(0,v),u.lineTo(0,v-l)),u.fill()),n.showRight&&(e(u,n,n.fillRight),u.beginPath(),c?(u.moveTo(f,-l),u.lineTo(0,v),u.lineTo(0,v-l)):(u.moveTo(f,0),u.lineTo(0,v),u.lineTo(0,v-l)),u.fill()),u.restore()}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1116),d=t(1117),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=t(12),r=function(o,n,i,s){i.addToRenderList(n);var u=o.pipelines.set(n.pipeline),h=e(n,i,s);u.calcMatrix.copyFrom(h.calc);var l=n._displayOriginX,f=n._displayOriginY,v=i.alpha*n.alpha;if(o.pipelines.preBatch(n),n.isStroked){var c=u.strokeTint,p=d.getTintAppendFloatAlpha(n.strokeColor,n.strokeAlpha*v);c.TL=p,c.TR=p,c.BL=p,c.BR=p;var m=n._startWidth,y=n._endWidth;u.batchLine(n.geom.x1-l,n.geom.y1-f,n.geom.x2-l,n.geom.y2-f,m,y,1,0,!1,h.sprite,h.camera)}o.pipelines.postBatch(n)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(60),d=t(30),r=function(o,n,i,s){i.addToRenderList(n);var u=o.currentContext;if(d(o,u,n,i,s)){var h=n._displayOriginX,l=n._displayOriginY;n.isStroked&&(e(u,n),u.beginPath(),u.moveTo(n.geom.x1-h,n.geom.y1-l),u.lineTo(n.geom.x2-h,n.geom.y2-l),u.stroke()),u.restore()}};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1119),d=t(1120),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),d=t(19),r=t(81),o=function(n,i,s,u){s.addToRenderList(i);var h=n.pipelines.set(i.pipeline),l=d(i,s,u),f=h.calcMatrix.copyFrom(l.calc),v=i._displayOriginX,c=i._displayOriginY,p=s.alpha*i.alpha;n.pipelines.preBatch(i),i.isFilled&&e(h,f,i,p,v,c),i.isStroked&&r(h,i,p,v,c),n.pipelines.postBatch(i)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),d=t(60),r=t(30),o=function(n,i,s,u){s.addToRenderList(i);var h=n.currentContext;if(r(n,h,i,s,u)){var l=i._displayOriginX,f=i._displayOriginY,v=i.pathData,c=v.length-1,p=v[0]-l,m=v[1]-f;h.beginPath(),h.moveTo(p,m),i.closePath||(c-=2);for(var y=2;y<c;y+=2){var T=v[y]-l,E=v[y+1]-f;h.lineTo(T,E)}h.closePath(),i.isFilled&&(e(h,i),h.fill()),i.isStroked&&(d(h,i),h.stroke()),h.restore()}};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1122),d=t(1123),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=t(81),r=t(12),o=function(n,i,s,u){s.addToRenderList(i);var h=n.pipelines.set(i.pipeline),l=e(i,s,u);h.calcMatrix.copyFrom(l.calc);var f=i._displayOriginX,v=i._displayOriginY,c=s.alpha*i.alpha;if(n.pipelines.preBatch(i),i.isFilled){var p=h.fillTint,m=r.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*c);p.TL=m,p.TR=m,p.BL=m,p.BR=m,h.batchFillRect(-f,-v,i.width,i.height)}i.isStroked&&d(h,i,c,f,v),n.pipelines.postBatch(i)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),d=t(60),r=t(30),o=function(n,i,s,u){s.addToRenderList(i);var h=n.currentContext;if(r(n,h,i,s,u)){var l=i._displayOriginX,f=i._displayOriginY;i.isFilled&&(e(h,i),h.fillRect(-l,-f,i.width,i.height)),i.isStroked&&(d(h,i),h.beginPath(),h.rect(-l,-f,i.width,i.height),h.stroke()),h.restore()}};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1125),d=t(1126),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),d=t(19),r=t(81),o=function(n,i,s,u){s.addToRenderList(i);var h=n.pipelines.set(i.pipeline),l=d(i,s,u),f=h.calcMatrix.copyFrom(l.calc),v=i._displayOriginX,c=i._displayOriginY,p=s.alpha*i.alpha;n.pipelines.preBatch(i),i.isFilled&&e(h,f,i,p,v,c),i.isStroked&&r(h,i,p,v,c),n.pipelines.postBatch(i)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),d=t(60),r=t(30),o=function(n,i,s,u){s.addToRenderList(i);var h=n.currentContext;if(r(n,h,i,s,u)){var l=i._displayOriginX,f=i._displayOriginY,v=i.pathData,c=v.length-1,p=v[0]-l,m=v[1]-f;h.beginPath(),h.moveTo(p,m),i.closePath||(c-=2);for(var y=2;y<c;y+=2){var T=v[y]-l,E=v[y+1]-f;h.lineTo(T,E)}h.closePath(),i.isFilled&&(e(h,i),h.fill()),i.isStroked&&(d(h,i),h.stroke()),h.restore()}};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1128),d=t(1129),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=t(81),r=t(12),o=function(n,i,s,u){s.addToRenderList(i);var h=n.pipelines.set(i.pipeline),l=e(i,s,u);h.calcMatrix.copyFrom(l.calc);var f=i._displayOriginX,v=i._displayOriginY,c=s.alpha*i.alpha;if(n.pipelines.preBatch(i),i.isFilled){var p=h.fillTint,m=r.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*c);p.TL=m,p.TR=m,p.BL=m,p.BR=m;var y=i.geom.x1-f,T=i.geom.y1-v,E=i.geom.x2-f,S=i.geom.y2-v,P=i.geom.x3-f,M=i.geom.y3-v;h.batchFillTriangle(y,T,E,S,P,M,l.sprite,l.camera)}i.isStroked&&d(h,i,c,f,v),n.pipelines.postBatch(i)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),d=t(60),r=t(30),o=function(n,i,s,u){s.addToRenderList(i);var h=n.currentContext;if(r(n,h,i,s,u)){var l=i._displayOriginX,f=i._displayOriginY,v=i.geom.x1-l,c=i.geom.y1-f,p=i.geom.x2-l,m=i.geom.y2-f,y=i.geom.x3-l,T=i.geom.y3-f;h.beginPath(),h.moveTo(v,c),h.lineTo(p,m),h.lineTo(y,T),h.closePath(),i.isFilled&&(e(h,i),h.fill()),i.isStroked&&(d(h,i),h.stroke()),h.restore()}};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(213),d=t(5);d.register("blitter",function(r,o,n,i){return this.displayList.add(new e(this.scene,r,o,n,i))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(214),d=t(5);d.register("container",function(r,o,n){return this.displayList.add(new e(this.scene,r,o,n))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(442),d=t(5);d.register("dom",function(r,o,n,i,s){var u=new e(this.scene,r,o,n,i,s);return this.displayList.add(u),u})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(215),d=t(5);d.register("dynamicBitmapText",function(r,o,n,i,s){return this.displayList.add(new e(this.scene,r,o,n,i,s))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(444),d=t(5);d.register("extern",function(){var r=new e(this.scene);return this.displayList.add(r),r})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(216),d=t(5);d.register("graphics",function(r){return this.displayList.add(new e(this.scene,r))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(113),d=t(5);d.register("group",function(r,o){return this.updateList.add(new e(this.scene,r,o))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(125),d=t(5);d.register("image",function(r,o,n,i){return this.displayList.add(new e(this.scene,r,o,n,i))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(219),d=t(5);d.register("layer",function(r){return this.displayList.add(new e(this.scene,r))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(220);e.register("particles",function(r,o,n){return this.displayList.add(new d(this.scene,r,o,n))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(457);e.register("follower",function(r,o,n,i,s){var u=new d(this.scene,r,o,n,i,s);return this.displayList.add(u),this.updateList.add(u),u})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(221);e.register("renderTexture",function(r,o,n,i,s,u){return this.displayList.add(new d(this.scene,r,o,n,i,s,u))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(223),d=t(5);d.register("rope",function(r,o,n,i,s,u,h,l){return this.displayList.add(new e(this.scene,r,o,n,i,s,u,h,l))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(73);e.register("sprite",function(r,o,n,i){var s=new d(this.scene,r,o,n,i);return this.displayList.add(s),s})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(148),d=t(5);d.register("bitmapText",function(r,o,n,i,s,u){return this.displayList.add(new e(this.scene,r,o,n,i,s,u))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(224),d=t(5);d.register("text",function(r,o,n,i){return this.displayList.add(new e(this.scene,r,o,n,i))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(225),d=t(5);d.register("tileSprite",function(r,o,n,i,s,u){return this.displayList.add(new e(this.scene,r,o,n,i,s,u))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(129),d=t(5);d.register("zone",function(r,o,n,i){return this.displayList.add(new e(this.scene,r,o,n,i))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(226),d=t(5);d.register("video",function(r,o,n){return this.displayList.add(new e(this.scene,r,o,n))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(461),d=t(5);d.register("arc",function(r,o,n,i,s,u,h,l){return this.displayList.add(new e(this.scene,r,o,n,i,s,u,h,l))}),d.register("circle",function(r,o,n,i,s){return this.displayList.add(new e(this.scene,r,o,n,0,360,!1,i,s))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(462);e.register("curve",function(r,o,n,i,s){return this.displayList.add(new d(this.scene,r,o,n,i,s))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(463),d=t(5);d.register("ellipse",function(r,o,n,i,s,u){return this.displayList.add(new e(this.scene,r,o,n,i,s,u))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(464);e.register("grid",function(r,o,n,i,s,u,h,l,f,v){return this.displayList.add(new d(this.scene,r,o,n,i,s,u,h,l,f,v))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(465);e.register("isobox",function(r,o,n,i,s,u,h){return this.displayList.add(new d(this.scene,r,o,n,i,s,u,h))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(466);e.register("isotriangle",function(r,o,n,i,s,u,h,l){return this.displayList.add(new d(this.scene,r,o,n,i,s,u,h,l))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(467);e.register("line",function(r,o,n,i,s,u,h,l){return this.displayList.add(new d(this.scene,r,o,n,i,s,u,h,l))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(468);e.register("polygon",function(r,o,n,i,s){return this.displayList.add(new d(this.scene,r,o,n,i,s))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(473);e.register("rectangle",function(r,o,n,i,s,u){return this.displayList.add(new d(this.scene,r,o,n,i,s,u))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(474),d=t(5);d.register("star",function(r,o,n,i,s,u,h){return this.displayList.add(new e(this.scene,r,o,n,i,s,u,h))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(475);e.register("triangle",function(r,o,n,i,s,u,h,l,f,v){return this.displayList.add(new d(this.scene,r,o,n,i,s,u,h,l,f,v))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(213),d=t(28),r=t(16),o=t(13);r.register("blitter",function(n,i){n===void 0&&(n={});var s=o(n,"key",null),u=o(n,"frame",null),h=new e(this.scene,0,0,s,u);return i!==void 0&&(n.add=i),d(this.scene,h,n),h})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),d=t(214),r=t(16),o=t(13);r.register("container",function(n,i){n===void 0&&(n={});var s=o(n,"x",0),u=o(n,"y",0),h=o(n,"children",null),l=new d(this.scene,s,u,h);return i!==void 0&&(n.add=i),e(this.scene,l,n),l})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(215),d=t(28),r=t(16),o=t(13);r.register("dynamicBitmapText",function(n,i){n===void 0&&(n={});var s=o(n,"font",""),u=o(n,"text",""),h=o(n,"size",!1),l=new e(this.scene,0,0,s,u,h);return i!==void 0&&(n.add=i),d(this.scene,l,n),l})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),d=t(216);e.register("graphics",function(r,o){r===void 0&&(r={}),o!==void 0&&(r.add=o);var n=new d(this.scene,r);return r.add&&this.scene.sys.displayList.add(n),n})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),d=t(113);e.register("group",function(r){return new d(this.scene,null,r)})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),d=t(16),r=t(13),o=t(125);d.register("image",function(n,i){n===void 0&&(n={});var s=r(n,"key",null),u=r(n,"frame",null),h=new o(this.scene,0,0,s,u);return i!==void 0&&(n.add=i),e(this.scene,h,n),h})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),d=t(219),r=t(16),o=t(13);r.register("layer",function(n,i){n===void 0&&(n={});var s=o(n,"children",null),u=new d(this.scene,s);return i!==void 0&&(n.add=i),e(this.scene,u,n),u})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),d=t(13),r=t(2),o=t(220);e.register("particles",function(n,i){n===void 0&&(n={});var s=d(n,"key",null),u=d(n,"frame",null),h=r(n,"emitters",null),l=new o(this.scene,s,u,h);i!==void 0&&(n.add=i);var f=r(n,"add",!1);return f?this.displayList.add(l):this.updateList.add(l),l})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),d=t(16),r=t(13),o=t(221);d.register("renderTexture",function(n,i){n===void 0&&(n={});var s=r(n,"x",0),u=r(n,"y",0),h=r(n,"width",32),l=r(n,"height",32),f=r(n,"key",void 0),v=r(n,"frame",void 0),c=new o(this.scene,s,u,h,l,f,v);return i!==void 0&&(n.add=i),e(this.scene,c,n),c})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),d=t(16),r=t(13),o=t(6),n=t(223);d.register("rope",function(i,s){i===void 0&&(i={});var u=r(i,"key",null),h=r(i,"frame",null),l=r(i,"horizontal",!0),f=o(i,"points",void 0),v=o(i,"colors",void 0),c=o(i,"alphas",void 0),p=new n(this.scene,0,0,u,h,f,l,v,c);return s!==void 0&&(i.add=s),e(this.scene,p,i),i.add||this.updateList.add(p),p})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),d=t(439),r=t(16),o=t(13),n=t(73);r.register("sprite",function(i,s){i===void 0&&(i={});var u=o(i,"key",null),h=o(i,"frame",null),l=new n(this.scene,0,0,u,h);return s!==void 0&&(i.add=s),e(this.scene,l,i),d(l,i),l})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(148),d=t(28),r=t(16),o=t(13),n=t(6);r.register("bitmapText",function(i,s){i===void 0&&(i={});var u=n(i,"font",""),h=o(i,"text",""),l=o(i,"size",!1),f=n(i,"align",0),v=new e(this.scene,0,0,u,h,l,f);return s!==void 0&&(i.add=s),d(this.scene,v,i),v})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),d=t(16),r=t(13),o=t(224);d.register("text",function(n,i){n===void 0&&(n={});var s=r(n,"text",""),u=r(n,"style",null),h=r(n,"padding",null);h!==null&&(u.padding=h);var l=new o(this.scene,0,0,s,u);return i!==void 0&&(n.add=i),e(this.scene,l,n),l.autoRound=r(n,"autoRound",!0),l.resolution=r(n,"resolution",1),l})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),d=t(16),r=t(13),o=t(225);d.register("tileSprite",function(n,i){n===void 0&&(n={});var s=r(n,"x",0),u=r(n,"y",0),h=r(n,"width",512),l=r(n,"height",512),f=r(n,"key",""),v=r(n,"frame",""),c=new o(this.scene,s,u,h,l,f,v);return i!==void 0&&(n.add=i),e(this.scene,c,n),c})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),d=t(13),r=t(129);e.register("zone",function(o){var n=d(o,"x",0),i=d(o,"y",0),s=d(o,"width",1),u=d(o,"height",s);return new r(this.scene,n,i,s,u)})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),d=t(16),r=t(13),o=t(226);d.register("video",function(n,i){n===void 0&&(n={});var s=r(n,"key",null),u=new o(this.scene,0,0,s);return i!==void 0&&(n.add=i),e(this.scene,u,n),n.add||this.updateList.add(u),u})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1177),d=t(1178),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=function(r,o,n,i){if(o.shader){if(n.addToRenderList(o),r.pipelines.clear(),o.renderToTexture)o.load(),o.flush();else{var s=e(o,n,i).calc;(r.width!==o._rendererWidth||r.height!==o._rendererHeight)&&o.projOrtho(0,r.width,r.height,0),o.load(s.matrix),o.flush()}r.pipelines.rebind()}};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1180),d=t(1181),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=function(r,o,n,i){var s=o.faces,u=s.length;if(u!==0){n.addToRenderList(o);var h=r.pipelines.set(o.pipeline,o),l=e(o,n,i).calc,f=h.setGameObject(o),v=h.vertexViewF32,c=h.vertexViewU32,p=h.vertexCount*h.currentShader.vertexComponentCount-1,m=o.tintFill,y=[],T=o.debugCallback,E=l.a,S=l.b,P=l.c,M=l.d,O=l.e,L=l.f,F=o.viewPosition.z,b=o.hideCCW,B=n.roundPixels,U=n.alpha*o.alpha,X=0;r.pipelines.preBatch(o);for(var W=0;W<u;W++){var Z=s[W];Z.isInView(n,b,F,U,E,S,P,M,O,L,B)&&(h.shouldFlush(3)&&(h.flush(),p=0),p=Z.load(v,c,p,f,m),X++,h.vertexCount+=3,T&&y.push(Z))}o.totalFrame+=X,T&&T.call(o,o,y),r.pipelines.postBatch(o)}};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1183),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),d=function(r,o,n,i){n.addToRenderList(o);var s=r.pipelines.set(o.pipeline),u=e(o,n,i).calc,h=o.width,l=o.height,f=-o._radius,v=-o._radius,c=f+h,p=v+l,m=u.getX(0,0),y=u.getY(0,0),T=u.getX(f,v),E=u.getY(f,v),S=u.getX(f,p),P=u.getY(f,p),M=u.getX(c,p),O=u.getY(c,p),L=u.getX(c,v),F=u.getY(c,v);r.pipelines.preBatch(o),s.batchPointLight(o,n,T,E,S,P,M,O,L,F,m,y),r.pipelines.postBatch(o)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(229),d=t(5);d.register("shader",function(r,o,n,i,s,u,h){return this.displayList.add(new e(this.scene,r,o,n,i,s,u,h))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(230),d=t(5);d.register("mesh",function(r,o,n,i,s,u,h,l,f,v,c){return this.displayList.add(new e(this.scene,r,o,n,i,s,u,h,l,f,v,c))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(150);e.register("pointlight",function(r,o,n,i,s,u){return this.displayList.add(new d(this.scene,r,o,n,i,s,u))})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),d=t(16),r=t(13),o=t(229);d.register("shader",function(n,i){n===void 0&&(n={});var s=r(n,"key",null),u=r(n,"x",0),h=r(n,"y",0),l=r(n,"width",128),f=r(n,"height",128),v=new o(this.scene,s,u,h,l,f);return i!==void 0&&(n.add=i),e(this.scene,v,n),v})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),d=t(16),r=t(13),o=t(6),n=t(230);d.register("mesh",function(i,s){i===void 0&&(i={});var u=r(i,"key",null),h=r(i,"frame",null),l=o(i,"vertices",[]),f=o(i,"uvs",[]),v=o(i,"indicies",[]),c=o(i,"containsZ",!1),p=o(i,"normals",[]),m=o(i,"colors",16777215),y=o(i,"alphas",1),T=new n(this.scene,0,0,u,h,l,f,v,c,p,m,y);return s!==void 0&&(i.add=s),e(this.scene,T,i),T})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),d=t(16),r=t(13),o=t(150);d.register("pointlight",function(n,i){n===void 0&&(n={});var s=r(n,"color",16777215),u=r(n,"radius",128),h=r(n,"intensity",1),l=r(n,"attenuation",.1),f=new o(this.scene,0,0,s,u,h,l);return i!==void 0&&(n.add=i),e(this.scene,f,n),f})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(482),r=t(24),o=t(20),n=new e({Extends:d,initialize:function(s){this.scene=s,this.systems=s.sys,s.sys.settings.isBooted||s.sys.events.once(o.BOOT,this.boot,this),d.call(this)},boot:function(){var i=this.systems.events;i.on(o.SHUTDOWN,this.shutdown,this),i.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});r.register("LightsPlugin",n,"lights"),a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65);e.Area=t(1192),e.Circumference=t(302),e.CircumferencePoint=t(169),e.Clone=t(1193),e.Contains=t(66),e.ContainsPoint=t(1194),e.ContainsRect=t(1195),e.CopyFrom=t(1196),e.Equals=t(1197),e.GetBounds=t(1198),e.GetPoint=t(300),e.GetPoints=t(301),e.Offset=t(1199),e.OffsetPoint=t(1200),e.Random=t(170),a.exports=e},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),d=function(r){return new e(r.x,r.y,r.radius)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),d=function(r,o){return e(r,o.x,o.y)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),d=function(r,o){return e(r,o.x,o.y)&&e(r,o.right,o.y)&&e(r,o.x,o.bottom)&&e(r,o.right,o.bottom)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d.setTo(e.x,e.y,e.radius)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.x===d.x&&e.y===d.y&&e.radius===d.radius};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),d=function(r,o){return o===void 0&&(o=new e),o.x=r.left,o.y=r.top,o.width=r.diameter,o.height=r.diameter,o};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return e.x+=d,e.y+=r,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.x+=d.x,e.y+=d.y,e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(111);e.Area=t(1202),e.Circumference=t(447),e.CircumferencePoint=t(218),e.Clone=t(1203),e.Contains=t(112),e.ContainsPoint=t(1204),e.ContainsRect=t(1205),e.CopyFrom=t(1206),e.Equals=t(1207),e.GetBounds=t(1208),e.GetPoint=t(445),e.GetPoints=t(446),e.Offset=t(1209),e.OffsetPoint=t(1210),e.Random=t(180),a.exports=e},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(111),d=function(r){return new e(r.x,r.y,r.width,r.height)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(112),d=function(r,o){return e(r,o.x,o.y)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(112),d=function(r,o){return e(r,o.x,o.y)&&e(r,o.right,o.y)&&e(r,o.x,o.bottom)&&e(r,o.right,o.bottom)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d.setTo(e.x,e.y,e.width,e.height)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.x===d.x&&e.y===d.y&&e.width===d.width&&e.height===d.height};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),d=function(r,o){return o===void 0&&(o=new e),o.x=r.left,o.y=r.top,o.width=r.width,o.height=r.height,o};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return e.x+=d,e.y+=r,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.x+=d.x,e.y+=d.y,e};a.exports=t},function(a,x,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=t(231),r=function(o,n,i){if(i===void 0&&(i=[]),d(o,n)){var s=o.x,u=o.y,h=o.radius,l=n.x,f=n.y,v=n.radius,c,p,m,y,T;if(u===f)T=(v*v-h*h-l*l+s*s)/(2*(s-l)),c=1,p=-2*f,m=l*l+T*T-2*l*T+f*f-v*v,y=p*p-4*c*m,y===0?i.push(new e(T,-p/(2*c))):y>0&&(i.push(new e(T,(-p+Math.sqrt(y))/(2*c))),i.push(new e(T,(-p-Math.sqrt(y))/(2*c))));else{var E=(s-l)/(u-f),S=(v*v-h*h-l*l+s*s-f*f+u*u)/(2*(u-f));c=E*E+1,p=2*u*E-2*S*E-2*s,m=s*s+u*u+S*S-h*h-2*u*S,y=p*p-4*c*m,y===0?(T=-p/(2*c),i.push(new e(T,S-T*E))):y>0&&(T=(-p+Math.sqrt(y))/(2*c),i.push(new e(T,S-T*E)),T=(-p-Math.sqrt(y))/(2*c),i.push(new e(T,S-T*E)))}}return i};a.exports=r},function(a,x,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(232),d=t(151),r=function(o,n,i){if(i===void 0&&(i=[]),d(o,n)){var s=n.getLineA(),u=n.getLineB(),h=n.getLineC(),l=n.getLineD();e(s,o,i),e(u,o,i),e(h,o,i),e(l,o,i)}return i};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(140),d=t(487),r=t(47),o=new r;function n(u,h,l,f,v){var c=Math.cos(u),p=Math.sin(u);o.setTo(h,l,h+c,l+p);var m=d(o,f);m&&v.push(new e(m.x,m.y,u,m.w))}function i(u,h){return u.z-h.z}var s=function(u,h,l){Array.isArray(l)||(l=[l]);for(var f=[],v=[],c=0;c<l.length;c++)for(var p=l[c].points,m=0;m<p.length;m++){var y=Math.atan2(p[m].y-h,p[m].x-u);v.indexOf(y)===-1&&(n(y,u,h,l,f),n(y-1e-5,u,h,l,f),n(y+1e-5,u,h,l,f),v.push(y))}return f.sort(i)};a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),d=t(152),r=function(o,n,i){return i===void 0&&(i=new e),d(o,n)&&(i.x=Math.max(o.x,n.x),i.y=Math.max(o.y,n.y),i.width=Math.min(o.right,n.right)-i.x,i.height=Math.min(o.bottom,n.bottom)-i.y),i};a.exports=r},function(a,x,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(234),d=t(152),r=function(o,n,i){if(i===void 0&&(i=[]),d(o,n)){var s=o.getLineA(),u=o.getLineB(),h=o.getLineC(),l=o.getLineD();e(s,n,i),e(u,n,i),e(h,n,i),e(l,n,i)}return i};a.exports=r},function(a,x,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(489),d=t(234),r=function(o,n,i){if(i===void 0&&(i=[]),e(o,n)){var s=n.getLineA(),u=n.getLineB(),h=n.getLineC();d(s,o,i),d(u,o,i),d(h,o,i)}return i};a.exports=r},function(a,x,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(232),d=t(491),r=function(o,n,i){if(i===void 0&&(i=[]),d(o,n)){var s=o.getLineA(),u=o.getLineB(),h=o.getLineC();e(s,n,i),e(u,n,i),e(h,n,i)}return i};a.exports=r},function(a,x,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(494),d=t(492),r=function(o,n,i){if(i===void 0&&(i=[]),e(o,n)){var s=n.getLineA(),u=n.getLineB(),h=n.getLineC();d(o,s,i),d(o,u,i),d(o,h,i)}return i};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(496),d=function(r,o){if(!e(r,o))return!1;var n=Math.min(o.x1,o.x2),i=Math.max(o.x1,o.x2),s=Math.min(o.y1,o.y2),u=Math.max(o.y1,o.y2);return r.x>=n&&r.x<=i&&r.y>=s&&r.y<=u};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n,i){return i===void 0&&(i=0),!(d>e.right+i||r<e.left-i||o>e.bottom+i||n<e.top-i)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(47);e.Angle=t(97),e.BresenhamPoints=t(317),e.CenterOn=t(1222),e.Clone=t(1223),e.CopyFrom=t(1224),e.Equals=t(1225),e.Extend=t(1226),e.GetEasedPoints=t(1227),e.GetMidPoint=t(1228),e.GetNearestPoint=t(1229),e.GetNormal=t(1230),e.GetPoint=t(307),e.GetPoints=t(172),e.GetShortestDistance=t(1231),e.Height=t(1232),e.Length=t(67),e.NormalAngle=t(497),e.NormalX=t(1233),e.NormalY=t(1234),e.Offset=t(1235),e.PerpSlope=t(1236),e.Random=t(173),e.ReflectAngle=t(1237),e.Rotate=t(1238),e.RotateAroundPoint=t(1239),e.RotateAroundXY=t(236),e.SetToAngle=t(1240),e.Slope=t(1241),e.Width=t(1242),a.exports=e},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=d-(e.x1+e.x2)/2,n=r-(e.y1+e.y2)/2;return e.x1+=o,e.y1+=n,e.x2+=o,e.y2+=n,e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(47),d=function(r){return new e(r.x1,r.y1,r.x2,r.y2)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d.setTo(e.x1,e.y1,e.x2,e.y2)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.x1===d.x1&&e.y1===d.y1&&e.x2===d.x2&&e.y2===d.y2};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),d=function(r,o,n){n===void 0&&(n=o);var i=e(r),s=r.x2-r.x1,u=r.y2-r.y1;return o&&(r.x1=r.x1-s/i*o,r.y1=r.y1-u/i*o),n&&(r.x2=r.x2+s/i*n,r.y2=r.y2+u/i*n),r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(352),d=t(80),r=t(4),o=function(n,i,s,u,h){u===void 0&&(u=0),h===void 0&&(h=[]);var l=[],f=n.x1,v=n.y1,c=n.x2-f,p=n.y2-v,m=d(i,h),y,T,E=s-1;for(y=0;y<E;y++)T=m(y/E),l.push(new r(f+c*T,v+p*T));if(T=m(1),l.push(new r(f+c*T,v+p*T)),u>0){var S=l[0],P=[S];for(y=1;y<l.length-1;y++){var M=l[y];e(S,M)>=u&&(P.push(M),S=M)}var O=l[l.length-1];return e(S,O)<u&&P.pop(),P.push(O),P}else return l};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o){return o===void 0&&(o=new e),o.x=(r.x1+r.x2)/2,o.y=(r.y1+r.y2)/2,o};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o,n){n===void 0&&(n=new e);var i=r.x1,s=r.y1,u=r.x2,h=r.y2,l=(u-i)*(u-i)+(h-s)*(h-s);if(l===0)return n;var f=((o.x-i)*(u-i)+(o.y-s)*(h-s))/l;return n.x=i+f*(u-i),n.y=s+f*(h-s),n};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),d=t(97),r=t(4),o=function(n,i){i===void 0&&(i=new r);var s=d(n)-e.TAU;return i.x=Math.cos(s),i.y=Math.sin(s),i};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=e.x1,o=e.y1,n=e.x2,i=e.y2,s=(n-r)*(n-r)+(i-o)*(i-o);if(s===0)return!1;var u=((o-d.y)*(n-r)-(r-d.x)*(i-o))/s;return Math.abs(u)*Math.sqrt(s)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.abs(e.y1-e.y2)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),d=t(97),r=function(o){return Math.cos(d(o)-e.TAU)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),d=t(97),r=function(o){return Math.sin(d(o)-e.TAU)};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return e.x1+=d,e.y1+=r,e.x2+=d,e.y2+=r,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(97),d=t(497),r=function(o,n){return 2*d(n)-Math.PI-e(o)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(236),d=function(r,o){var n=(r.x1+r.x2)/2,i=(r.y1+r.y2)/2;return e(r,n,i,o)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(236),d=function(r,o,n){return e(r,o.x,o.y,n)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o,n){return e.x1=d,e.y1=r,e.x2=d+Math.cos(o)*n,e.y2=r+Math.sin(o)*n,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.abs(e.x1-e.x2)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={Face:t(116),GenerateGridVerts:t(1244),GenerateObjVerts:t(480),GenerateVerts:t(479),ParseObj:t(498),ParseObjMaterial:t(499),RotateFace:t(1245),Vertex:t(117)};a.exports=e},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(116),d=t(2),r=t(69),o=t(39),n=t(117),i=new o,s=new o,u=new r,h=function(l){var f=d(l,"mesh"),v=d(l,"texture",null),c=d(l,"frame"),p=d(l,"width",1),m=d(l,"height",p),y=d(l,"widthSegments",1),T=d(l,"heightSegments",y),E=d(l,"x",0),S=d(l,"y",0),P=d(l,"z",0),M=d(l,"rotateX",0),O=d(l,"rotateY",0),L=d(l,"rotateZ",0),F=d(l,"zIsUp",!0),b=d(l,"isOrtho",f?f.dirtyCache[11]:!1),B=d(l,"colors",[16777215]),U=d(l,"alphas",[1]),X=d(l,"tile",!1),W=d(l,"flipY",!1),Z=d(l,"width",null),J={faces:[],verts:[]};if(i.set(E,S,P),s.set(M,O,L),u.fromRotationXYTranslation(s,i,F),!v&&f)v=f.texture;else if(f&&typeof v=="string")v=f.scene.sys.textures.get(v);else return J;var N=v.get(c);!Z&&b&&v&&f&&(p=N.width/f.height,m=N.height/f.height);var I=p/2,G=m/2,V=Math.floor(y),Y=Math.floor(T),z=V+1,H=Y+1,$=p/V,Q=m/Y,k=[],tt=[],it,st,ot=0,rt=1,ut=0,gt=1;N&&(ot=N.u0,rt=N.u1,W?(ut=N.v1,gt=N.v0):(ut=N.v0,gt=N.v1));var mt=rt-ot,dt=gt-ut;for(st=0;st<H;st++){var at=st*Q-G;for(it=0;it<z;it++){var Rt=it*$-I;tt.push(Rt,-at);var ct=ot+mt*(it/V),yt=ut+dt*(st/Y);k.push(ct,yt)}}Array.isArray(B)||(B=[B]),Array.isArray(U)||(U=[U]);var $t=0,q=0;for(st=0;st<Y;st++)for(it=0;it<V;it++){var et=(it+z*st)*2,nt=(it+z*(st+1))*2,ht=(it+1+z*(st+1))*2,ft=(it+1+z*st)*2,Mt=B[q],pt=U[$t],Et=new n(tt[et],tt[et+1],0,k[et],k[et+1],Mt,pt).transformMat4(u),vt=new n(tt[nt],tt[nt+1],0,k[nt],k[nt+1],Mt,pt).transformMat4(u),Ct=new n(tt[ft],tt[ft+1],0,k[ft],k[ft+1],Mt,pt).transformMat4(u),At=new n(tt[nt],tt[nt+1],0,k[nt],k[nt+1],Mt,pt).transformMat4(u),Ut=new n(tt[ht],tt[ht+1],0,k[ht],k[ht+1],Mt,pt).transformMat4(u),Qt=new n(tt[ft],tt[ft+1],0,k[ft],k[ft+1],Mt,pt).transformMat4(u);X&&(Et.setUVs(ot,gt),vt.setUVs(ot,ut),Ct.setUVs(rt,gt),At.setUVs(ot,ut),Ut.setUVs(rt,ut),Qt.setUVs(rt,gt)),q++,q===B.length&&(q=0),$t++,$t===U.length&&($t=0),J.verts.push(Et,vt,Ct,At,Ut,Qt),J.faces.push(new e(Et,vt,Ct),new e(At,Ut,Qt))}return f&&(f.faces=f.faces.concat(J.faces),f.vertices=f.vertices.concat(J.verts)),J};a.exports=h},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){var n,i;if(r===void 0&&o===void 0){var s=e.getInCenter();n=s.x,i=s.y}var u=Math.cos(d),h=Math.sin(d),l=e.vertex1,f=e.vertex2,v=e.vertex3,c=l.x-n,p=l.y-i;l.set(c*u-p*h+n,c*h+p*u+i),c=f.x-n,p=f.y-i,f.set(c*u-p*h+n,c*h+p*u+i),c=v.x-n,p=v.y-i,v.set(c*u-p*h+n,c*h+p*u+i)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4);e.Ceil=t(1247),e.Clone=t(1248),e.CopyFrom=t(1249),e.Equals=t(1250),e.Floor=t(1251),e.GetCentroid=t(1252),e.GetMagnitude=t(500),e.GetMagnitudeSq=t(501),e.GetRectangleFromPoints=t(1253),e.Interpolate=t(1254),e.Invert=t(1255),e.Negative=t(1256),e.Project=t(1257),e.ProjectUnit=t(1258),e.SetMagnitude=t(1259),a.exports=e},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r){return new e(r.x,r.y)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d.setTo(e.x,e.y)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.x===d.x&&e.y===d.y};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o){if(o===void 0&&(o=new e),!Array.isArray(r))throw new Error("GetCentroid points argument must be an array");var n=r.length;if(n<1)throw new Error("GetCentroid points array must not be empty");if(n===1)o.x=r[0].x,o.y=r[0].y;else{for(var i=0;i<n;i++)o.x+=r[i].x,o.y+=r[i].y;o.x/=n,o.y/=n}return o};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),d=function(r,o){o===void 0&&(o=new e);for(var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,h=0;h<r.length;h++){var l=r[h];l.x>n&&(n=l.x),l.x<i&&(i=l.x),l.y>s&&(s=l.y),l.y<u&&(u=l.y)}return o.x=i,o.y=u,o.width=n-i,o.height=s-u,o};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o,n,i){return n===void 0&&(n=0),i===void 0&&(i=new e),i.x=r.x+(o.x-r.x)*n,i.y=r.y+(o.y-r.y)*n,i};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.setTo(e.y,e.x)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o){return o===void 0&&(o=new e),o.setTo(-r.x,-r.y)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=t(501),r=function(o,n,i){i===void 0&&(i=new e);var s=o.x*n.x+o.y*n.y,u=s/d(n);return u!==0&&(i.x=u*n.x,i.y=u*n.y),i};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o,n){n===void 0&&(n=new e);var i=r.x*o.x+r.y*o.y;return i!==0&&(n.x=i*o.x,n.y=i*o.y),n};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(500),d=function(r,o){if(r.x!==0||r.y!==0){var n=e(r);r.x/=n,r.y/=n}return r.x*=o,r.y*=o,r};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(227);e.Clone=t(1261),e.Contains=t(228),e.ContainsPoint=t(1262),e.Earcut=t(59),e.GetAABB=t(469),e.GetNumberArray=t(1263),e.GetPoints=t(470),e.Perimeter=t(471),e.Reverse=t(1264),e.Simplify=t(1265),e.Smooth=t(472),e.Translate=t(1266),a.exports=e},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(227),d=function(r){return new e(r.points)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(228),d=function(r,o){return e(r,o.x,o.y)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){d===void 0&&(d=[]);for(var r=0;r<e.points.length;r++)d.push(e.points[r].x),d.push(e.points[r].y);return d};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.points.reverse(),e};a.exports=t},function(a,x){function t(i,s){var u=i.x-s.x,h=i.y-s.y;return u*u+h*h}function e(i,s,u){var h=s.x,l=s.y,f=u.x-h,v=u.y-l;if(f!==0||v!==0){var c=((i.x-h)*f+(i.y-l)*v)/(f*f+v*v);c>1?(h=u.x,l=u.y):c>0&&(h+=f*c,l+=v*c)}return f=i.x-h,v=i.y-l,f*f+v*v}function d(i,s){for(var u=i[0],h=[u],l,f=1,v=i.length;f<v;f++)l=i[f],t(l,u)>s&&(h.push(l),u=l);return u!==l&&h.push(l),h}function r(i,s,u,h,l){for(var f=h,v,c=s+1;c<u;c++){var p=e(i[c],i[s],i[u]);p>f&&(v=c,f=p)}f>h&&(v-s>1&&r(i,s,v,h,l),l.push(i[v]),u-v>1&&r(i,v,u,h,l))}function o(i,s){var u=i.length-1,h=[i[0]];return r(i,0,u,s,h),h.push(i[u]),h}var n=function(i,s,u){s===void 0&&(s=1),u===void 0&&(u=!1);var h=i.points;if(h.length>2){var l=s*s;u||(h=d(h,l)),i.setTo(o(h,l))}return i};a.exports=n},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){for(var o=e.points,n=0;n<o.length;n++)o[n].x+=d,o[n].y+=r;return e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.width*e.height};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),d=function(r){return new e(r.x,r.y,r.width,r.height)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(57),d=function(r,o){return e(r,o.x,o.y)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d.setTo(e.x,e.y,e.width,e.height)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.x===d.x&&e.y===d.y&&e.width===d.width&&e.height===d.height};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(237),d=function(r,o){var n=e(r);return n<e(o)?r.setSize(o.height*n,o.height):r.setSize(o.width,o.width/n),r.setPosition(o.centerX-r.width/2,o.centerY-r.height/2)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(237),d=function(r,o){var n=e(r);return n>e(o)?r.setSize(o.height*n,o.height):r.setSize(o.width,o.width/n),r.setPosition(o.centerX-r.width/2,o.centerY-r.height/2)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};a.exports=t},function(a,x,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),d=function(r,o,n,i,s){return s===void 0&&(s=new e),s.setTo(Math.min(r,n),Math.min(o,i),Math.abs(r-n),Math.abs(o-i))};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o){return o===void 0&&(o=new e),o.x=r.centerX,o.y=r.centerY,o};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=function(r,o){return o===void 0&&(o=new e),o.x=r.width,o.y=r.height,o};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(190),d=function(r,o,n){var i=r.centerX,s=r.centerY;return r.setSize(r.width+o*2,r.height+n*2),e(r,i,s)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),d=t(152),r=function(o,n,i){return i===void 0&&(i=new e),d(o,n)?(i.x=Math.max(o.x,n.x),i.y=Math.max(o.y,n.y),i.width=Math.min(o.right,n.right)-i.x,i.height=Math.min(o.bottom,n.bottom)-i.y):i.setEmpty(),i};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){for(var r=e.x,o=e.right,n=e.y,i=e.bottom,s=0;s<d.length;s++)r=Math.min(r,d[s].x),o=Math.max(o,d[s].x),n=Math.min(n,d[s].y),i=Math.max(i,d[s].y);return e.x=r,e.y=n,e.width=o-r,e.height=i-n,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){var r=Math.min(e.x,d.x),o=Math.max(e.right,d.right);e.x=r,e.width=o-r;var n=Math.min(e.y,d.y),i=Math.max(e.bottom,d.bottom);return e.y=n,e.height=i-n,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){var o=Math.min(e.x,d),n=Math.max(e.right,d);e.x=o,e.width=n-o;var i=Math.min(e.y,r),s=Math.max(e.bottom,r);return e.y=i,e.height=s-i,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return e.x+=d,e.y+=r,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.x+=d.x,e.y+=d.y,e};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.x<d.right&&e.right>d.x&&e.y<d.bottom&&e.bottom>d.y};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),d=t(36),r=function(o,n,i){i===void 0&&(i=new e),n=d(n);var s=Math.sin(n),u=Math.cos(n),h=u>0?o.width/2:o.width/-2,l=s>0?o.height/2:o.height/-2;return Math.abs(h*s)<Math.abs(l*u)?l=h*s/u:h=l*u/s,i.x=h+o.centerX,i.y=l+o.centerY,i};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(195),d=t(503),r=t(4),o=function(n,i,s){if(s===void 0&&(s=new r),d(n,i))switch(e(0,3)){case 0:s.x=n.x+Math.random()*(i.right-n.x),s.y=n.y+Math.random()*(i.top-n.y);break;case 1:s.x=i.x+Math.random()*(n.right-i.x),s.y=i.bottom+Math.random()*(n.bottom-i.bottom);break;case 2:s.x=n.x+Math.random()*(i.x-n.x),s.y=i.y+Math.random()*(n.bottom-i.y);break;case 3:s.x=i.right+Math.random()*(n.right-i.right),s.y=n.y+Math.random()*(i.bottom-n.y);break}return s};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.width===d.width&&e.height===d.height};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r){return r===void 0&&(r=d),e.width*=d,e.height*=r,e};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82);e.Area=t(1294),e.BuildEquilateral=t(1295),e.BuildFromPolygon=t(1296),e.BuildRight=t(1297),e.CenterOn=t(1298),e.Centroid=t(504),e.CircumCenter=t(1299),e.CircumCircle=t(1300),e.Clone=t(1301),e.Contains=t(115),e.ContainsArray=t(235),e.ContainsPoint=t(1302),e.CopyFrom=t(1303),e.Decompose=t(495),e.Equals=t(1304),e.GetPoint=t(476),e.GetPoints=t(477),e.InCenter=t(506),e.Perimeter=t(1305),e.Offset=t(505),e.Random=t(181),e.Rotate=t(1306),e.RotateAroundPoint=t(1307),e.RotateAroundXY=t(238),a.exports=e},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var d=e.x1,r=e.y1,o=e.x2,n=e.y2,i=e.x3,s=e.y3;return Math.abs(((i-d)*(n-r)-(o-d)*(s-r))/2)};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82),d=function(r,o,n){var i=n*(Math.sqrt(3)/2),s=r,u=o,h=r+n/2,l=o+i,f=r-n/2,v=o+i;return new e(s,u,h,l,f,v)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(59),d=t(82),r=function(o,n,i,s,u){n===void 0&&(n=null),i===void 0&&(i=1),s===void 0&&(s=1),u===void 0&&(u=[]);for(var h=e(o,n),l,f,v,c,p,m,y,T,E,S=0;S<h.length;S+=3)l=h[S],f=h[S+1],v=h[S+2],c=o[l*2]*i,p=o[l*2+1]*s,m=o[f*2]*i,y=o[f*2+1]*s,T=o[v*2]*i,E=o[v*2+1]*s,u.push(new d(c,p,m,y,T,E));return u};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82),d=function(r,o,n,i){i===void 0&&(i=n);var s=r,u=o,h=r,l=o-i,f=r+n,v=o;return new e(s,u,h,l,f,v)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(504),d=t(505),r=function(o,n,i,s){s===void 0&&(s=e);var u=s(o),h=n-u.x,l=i-u.y;return d(o,h,l)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3);function d(o,n,i,s){return o*s-n*i}var r=function(o,n){n===void 0&&(n=new e);var i=o.x3,s=o.y3,u=o.x1-i,h=o.y1-s,l=o.x2-i,f=o.y2-s,v=2*d(u,h,l,f),c=d(h,u*u+h*h,f,l*l+f*f),p=d(u,u*u+h*h,l,l*l+f*f);return n.x=i-c/v,n.y=s+p/v,n};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),d=function(r,o){o===void 0&&(o=new e);var n=r.x1,i=r.y1,s=r.x2,u=r.y2,h=r.x3,l=r.y3,f=s-n,v=u-i,c=h-n,p=l-i,m=f*(n+s)+v*(i+u),y=c*(n+h)+p*(i+l),T=2*(f*(l-u)-v*(h-s)),E,S;if(Math.abs(T)<1e-6){var P=Math.min(n,s,h),M=Math.min(i,u,l);E=(Math.max(n,s,h)-P)*.5,S=(Math.max(i,u,l)-M)*.5,o.x=P+E,o.y=M+S,o.radius=Math.sqrt(E*E+S*S)}else o.x=(p*m-v*y)/T,o.y=(f*y-c*m)/T,E=o.x-n,S=o.y-i,o.radius=Math.sqrt(E*E+S*S);return o};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82),d=function(r){return new e(r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(115),d=function(r,o){return e(r,o.x,o.y)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.x1===d.x1&&e.y1===d.y1&&e.x2===d.x2&&e.y2===d.y2&&e.x3===d.x3&&e.y3===d.y3};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),d=function(r){var o=r.getLineA(),n=r.getLineB(),i=r.getLineC();return e(o)+e(n)+e(i)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(238),d=t(506),r=function(o,n){var i=d(o);return e(o,i.x,i.y,n)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(238),d=function(r,o,n){return e(r,o.x,o.y,n)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(203),d=t(17),r={CreatePixelPerfectHandler:t(507),CreateInteractiveObject:t(508),Events:t(51),Gamepad:t(1309),InputManager:t(409),InputPlugin:t(1321),InputPluginCache:t(153),Keyboard:t(1322),Mouse:t(1336),Pointer:t(412),Touch:t(1337)};r=d(!1,r,e),a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Axis:t(509),Button:t(510),Events:t(239),Gamepad:t(511),GamepadPlugin:t(1316),Configs:t(1317)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="down"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="up"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="connected"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="disconnected"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="down"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="up"},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(9),r=t(239),o=t(511),n=t(6),i=t(153),s=t(51),u=new e({Extends:d,initialize:function(l){d.call(this),this.scene=l.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=l,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,l.pluginEvents.once(s.BOOT,this.boot,this),l.pluginEvents.on(s.START,this.start,this)},boot:function(){var h=this.scene.sys.game,l=this.settings.input,f=h.config;this.enabled=n(l,"gamepad",f.inputGamepad)&&h.device.input.gamepads,this.target=n(l,"gamepad.target",f.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(s.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(s.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var h=this,l=this.target,f=function(v){v.defaultPrevented||!h.isActive()||(h.refreshPads(),h.queue.push(v))};this.onGamepadHandler=f,l.addEventListener("gamepadconnected",f,!1),l.addEventListener("gamepaddisconnected",f,!1),this.sceneInputPlugin.pluginEvents.on(s.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(s.UPDATE,this.update);for(var h=0;h<this.gamepads.length;h++)this.gamepads[h].removeAllListeners()},disconnectAll:function(){for(var h=0;h<this.gamepads.length;h++)this.gamepads[h].pad.connected=!1},refreshPads:function(){var h=navigator.getGamepads();if(!h)this.disconnectAll();else for(var l=this.gamepads,f=0;f<h.length;f++){var v=h[f];if(v){var c=v.id,p=v.index,m=l[p];if(m)m.id!==c?(m.destroy(),l[p]=new o(this,v)):m.update(v);else{var y=new o(this,v);l[p]=y,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=y):this._pad3=y:this._pad2=y:this._pad1=y}}}},getAll:function(){for(var h=[],l=this.gamepads,f=0;f<l.length;f++)l[f]&&h.push(l[f]);return h},getPad:function(h){for(var l=this.gamepads,f=0;f<l.length;f++)if(l[f]&&l[f].index===h)return l[f]},update:function(){if(this.enabled){this.refreshPads();var h=this.queue.length;if(h!==0)for(var l=this.queue.splice(0,h),f=0;f<h;f++){var v=l[f],c=this.getPad(v.gamepad.index);v.type==="gamepadconnected"?this.emit(r.CONNECTED,c,v):v.type==="gamepaddisconnected"&&this.emit(r.DISCONNECTED,c,v)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var h=0;h<this.gamepads.length;h++)this.gamepads[h]&&this.gamepads[h].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});i.register("GamepadPlugin",u,"gamepad","gamepad","inputGamepad"),a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={DUALSHOCK_4:t(1318),SNES_USB:t(1319),XBOX_360:t(1320)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),d=t(66),r=t(0),o=t(203),n=t(508),i=t(507),s=t(50),u=t(111),h=t(112),l=t(51),f=t(9),v=t(2),c=t(56),p=t(153),m=t(7),y=t(24),T=t(10),E=t(57),S=t(20),P=t(82),M=t(115),O=new r({Extends:f,initialize:function(F){f.call(this),this.scene=F,this.systems=F.sys,this.settings=F.sys.settings,this.manager=F.sys.game.input,this.pluginEvents=new f,this.enabled=!0,this.displayList,this.cameras,p.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var b={cancelled:!1};this._eventContainer={stopPropagation:function(){b.cancelled=!0}},this._eventData=b,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,F.sys.events.once(S.BOOT,this.boot,this),F.sys.events.on(S.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(S.DESTROY,this.destroy,this),this.pluginEvents.emit(l.BOOT)},start:function(){var L=this.systems.events;L.on(S.TRANSITION_START,this.transitionIn,this),L.on(S.TRANSITION_OUT,this.transitionOut,this),L.on(S.TRANSITION_COMPLETE,this.transitionComplete,this),L.on(S.PRE_UPDATE,this.preUpdate,this),L.once(S.SHUTDOWN,this.shutdown,this),this.manager.events.on(l.GAME_OUT,this.onGameOut,this),this.manager.events.on(l.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(l.START)},onGameOver:function(L){this.isActive()&&this.emit(l.GAME_OVER,L.timeStamp,L)},onGameOut:function(L){this.isActive()&&this.emit(l.GAME_OUT,L.timeStamp,L)},preUpdate:function(){this.pluginEvents.emit(l.PRE_UPDATE);var L=this._pendingRemoval,F=this._pendingInsertion,b=L.length,B=F.length;if(!(b===0&&B===0)){for(var U=this._list,X=0;X<b;X++){var W=L[X],Z=U.indexOf(W);Z>-1&&(U.splice(Z,1),this.clear(W,!0))}L.length=0,this._pendingRemoval.length=0,this._list=U.concat(F.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(L,F){if(!this.isActive())return!1;if(this.pluginEvents.emit(l.UPDATE,L,F),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var b,B=this.manager,U=B.pointers,X=B.pointersTotal;for(b=0;b<X;b++)U[b].updateMotion();if(this._list.length===0)return!1;var W=this.pollRate;if(W===-1)return!1;if(W>0)if(this._pollTimer-=F,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var Z=!1;for(b=0;b<X;b++){var J=0,N=U[b];this._tempZones=[],this._temp=this.hitTestPointer(N),this.sortGameObjects(this._temp,N),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),J+=this.processOverOutEvents(N),this.getDragState(N)===2&&this.processDragThresholdEvent(N,L),J>0&&(Z=!0)}return Z},update:function(L,F){if(!this.isActive())return!1;for(var b=F.length,B=!1,U=0;U<b;U++){var X=0,W=F[U];switch(this._tempZones=[],this._temp=this.hitTestPointer(W),this.sortGameObjects(this._temp,W),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),L){case o.MOUSE_DOWN:X+=this.processDragDownEvent(W),X+=this.processDownEvents(W),X+=this.processOverOutEvents(W);break;case o.MOUSE_UP:X+=this.processDragUpEvent(W),X+=this.processUpEvents(W),X+=this.processOverOutEvents(W);break;case o.TOUCH_START:X+=this.processDragDownEvent(W),X+=this.processDownEvents(W),X+=this.processOverEvents(W);break;case o.TOUCH_END:case o.TOUCH_CANCEL:X+=this.processDragUpEvent(W),X+=this.processUpEvents(W),X+=this.processOutEvents(W);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:X+=this.processDragMoveEvent(W),X+=this.processMoveEvents(W),X+=this.processOverOutEvents(W);break;case o.MOUSE_WHEEL:X+=this.processWheelEvent(W);break}X>0&&(B=!0)}return this._updatedThisFrame=!0,B},clear:function(L,F){F===void 0&&(F=!1);var b=L.input;if(b){F||this.queueForRemoval(L),b.gameObject=void 0,b.target=void 0,b.hitArea=void 0,b.hitAreaCallback=void 0,b.callbackContext=void 0,L.input=null;var B=this._draggable.indexOf(L);return B>-1&&this._draggable.splice(B,1),B=this._drag[0].indexOf(L),B>-1&&this._drag[0].splice(B,1),B=this._over[0].indexOf(L),B>-1&&(this._over[0].splice(B,1),this.manager.resetCursor(b)),L}},disable:function(L){L.input.enabled=!1},enable:function(L,F,b,B){return B===void 0&&(B=!1),L.input?L.input.enabled=!0:this.setHitArea(L,F,b),L.input&&B&&!L.input.dropZone&&(L.input.dropZone=B),this},hitTestPointer:function(L){for(var F=this.cameras.getCamerasBelowPointer(L),b=0;b<F.length;b++){for(var B=F[b],U=this.manager.hitTest(L,this._list,B),X=0;X<U.length;X++){var W=U[X];W.input.dropZone&&this._tempZones.push(W)}if(U.length>0)return L.camera=B,U}return L.camera=F[0],[]},processDownEvents:function(L){var F=0,b=this._temp,B=this._eventData,U=this._eventContainer;B.cancelled=!1;for(var X=!1,W=0;W<b.length;W++){var Z=b[W];if(Z.input){if(F++,Z.emit(l.GAMEOBJECT_POINTER_DOWN,L,Z.input.localX,Z.input.localY,U),B.cancelled||!Z.input){X=!0;break}if(this.emit(l.GAMEOBJECT_DOWN,L,Z,U),B.cancelled||!Z.input){X=!0;break}}}return!X&&this.manager&&(L.downElement===this.manager.game.canvas?this.emit(l.POINTER_DOWN,L,b):this.emit(l.POINTER_DOWN_OUTSIDE,L)),F},getDragState:function(L){return this._dragState[L.id]},setDragState:function(L,F){this._dragState[L.id]=F},processDragThresholdEvent:function(L,F){var b=!1,B=this.dragTimeThreshold,U=this.dragDistanceThreshold;if((U>0&&s(L.x,L.y,L.downX,L.downY)>=U||B>0&&F>=L.downTime+B)&&(b=!0),b)return this.setDragState(L,3),this.processDragStartList(L)},processDragStartList:function(L){if(this.getDragState(L)!==3)return 0;for(var F=this._drag[L.id],b=0;b<F.length;b++){var B=F[b],U=B.input;U.dragState=2,U.dragStartX=B.x,U.dragStartY=B.y,U.dragStartXGlobal=L.worldX,U.dragStartYGlobal=L.worldY,U.dragX=U.dragStartXGlobal-U.dragStartX,U.dragY=U.dragStartYGlobal-U.dragStartY,B.emit(l.GAMEOBJECT_DRAG_START,L,U.dragX,U.dragY),this.emit(l.DRAG_START,L,B)}return this.setDragState(L,4),F.length},processDragDownEvent:function(L){var F=this._temp;if(this._draggable.length===0||F.length===0||!L.primaryDown||this.getDragState(L)!==0)return 0;this.setDragState(L,1);for(var b=[],B=0;B<F.length;B++){var U=F[B];U.input.draggable&&U.input.dragState===0&&b.push(U)}return b.length===0?(this.setDragState(L,0),0):(b.length>1&&(this.sortGameObjects(b,L),this.topOnly&&b.splice(1)),this._drag[L.id]=b,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(L,3),this.processDragStartList(L)):(this.setDragState(L,2),0))},processDragMoveEvent:function(L){if(this.getDragState(L)===2&&this.processDragThresholdEvent(L,this.manager.game.loop.now),this.getDragState(L)!==4)return 0;for(var F=this._tempZones,b=this._drag[L.id],B=0;B<b.length;B++){var U=b[B],X=U.input,W=X.target;if(W){var Z=F.indexOf(W);Z===0?(U.emit(l.GAMEOBJECT_DRAG_OVER,L,W),this.emit(l.DRAG_OVER,L,U,W)):Z>0?(U.emit(l.GAMEOBJECT_DRAG_LEAVE,L,W),this.emit(l.DRAG_LEAVE,L,U,W),X.target=F[0],W=X.target,U.emit(l.GAMEOBJECT_DRAG_ENTER,L,W),this.emit(l.DRAG_ENTER,L,U,W)):(U.emit(l.GAMEOBJECT_DRAG_LEAVE,L,W),this.emit(l.DRAG_LEAVE,L,U,W),F[0]?(X.target=F[0],W=X.target,U.emit(l.GAMEOBJECT_DRAG_ENTER,L,W),this.emit(l.DRAG_ENTER,L,U,W)):X.target=null)}else!W&&F[0]&&(X.target=F[0],W=X.target,U.emit(l.GAMEOBJECT_DRAG_ENTER,L,W),this.emit(l.DRAG_ENTER,L,U,W));var J,N;if(!U.parentContainer)J=L.worldX-X.dragX,N=L.worldY-X.dragY;else{var I=L.worldX-X.dragStartXGlobal,G=L.worldY-X.dragStartYGlobal,V=U.getParentRotation(),Y=I*Math.cos(V)+G*Math.sin(V),z=G*Math.cos(V)-I*Math.sin(V);Y*=1/U.parentContainer.scaleX,z*=1/U.parentContainer.scaleY,J=Y+X.dragStartX,N=z+X.dragStartY}U.emit(l.GAMEOBJECT_DRAG,L,J,N),this.emit(l.DRAG,L,U,J,N)}return b.length},processDragUpEvent:function(L){for(var F=this._drag[L.id],b=0;b<F.length;b++){var B=F[b],U=B.input;if(U&&U.dragState===2){U.dragState=0,U.dragX=U.localX-B.displayOriginX,U.dragY=U.localY-B.displayOriginY;var X=!1,W=U.target;W&&(B.emit(l.GAMEOBJECT_DROP,L,W),this.emit(l.DROP,L,B,W),U.target=null,X=!0),B.input&&(B.emit(l.GAMEOBJECT_DRAG_END,L,U.dragX,U.dragY,X),this.emit(l.DRAG_END,L,B,X))}}return this.setDragState(L,0),F.splice(0),0},processMoveEvents:function(L){var F=0,b=this._temp,B=this._eventData,U=this._eventContainer;B.cancelled=!1;for(var X=!1,W=0;W<b.length;W++){var Z=b[W];if(Z.input){if(F++,Z.emit(l.GAMEOBJECT_POINTER_MOVE,L,Z.input.localX,Z.input.localY,U),B.cancelled||!Z.input){X=!0;break}if(this.emit(l.GAMEOBJECT_MOVE,L,Z,U),B.cancelled||!Z.input){X=!0;break}if(this.topOnly)break}}return X||this.emit(l.POINTER_MOVE,L,b),F},processWheelEvent:function(L){var F=0,b=this._temp,B=this._eventData,U=this._eventContainer;B.cancelled=!1;for(var X=!1,W=L.deltaX,Z=L.deltaY,J=L.deltaZ,N=0;N<b.length;N++){var I=b[N];if(I.input){if(F++,I.emit(l.GAMEOBJECT_POINTER_WHEEL,L,W,Z,J,U),B.cancelled||!I.input){X=!0;break}if(this.emit(l.GAMEOBJECT_WHEEL,L,I,W,Z,J,U),B.cancelled||!I.input){X=!0;break}}}return X||this.emit(l.POINTER_WHEEL,L,b,W,Z,J),F},processOverEvents:function(L){var F=this._temp,b=0,B=F.length,U=[];if(B>0){var X=this.manager,W=this._eventData,Z=this._eventContainer;W.cancelled=!1;for(var J=!1,N=0;N<B;N++){var I=F[N];if(I.input){if(U.push(I),X.setCursor(I.input),I.emit(l.GAMEOBJECT_POINTER_OVER,L,I.input.localX,I.input.localY,Z),b++,W.cancelled||!I.input){J=!0;break}if(this.emit(l.GAMEOBJECT_OVER,L,I,Z),W.cancelled||!I.input){J=!0;break}}}J||this.emit(l.POINTER_OVER,L,U)}return this._over[L.id]=U,b},processOutEvents:function(L){var F=this._over[L.id],b=0,B=F.length;if(B>0){var U=this.manager,X=this._eventData,W=this._eventContainer;X.cancelled=!1;var Z=!1;this.sortGameObjects(F,L);for(var J=0;J<B;J++){var N=F[J];if(N=F[J],!!N.input){if(U.resetCursor(N.input),N.emit(l.GAMEOBJECT_POINTER_OUT,L,W),b++,X.cancelled||!N.input){Z=!0;break}if(this.emit(l.GAMEOBJECT_OUT,L,N,W),X.cancelled||!N.input){Z=!0;break}Z||this.emit(l.POINTER_OUT,L,F)}}this._over[L.id]=[]}return b},processOverOutEvents:function(L){var F=this._temp,b,B,U=[],X=[],W=[],Z=this._over[L.id],J=this._drag[L.id],N=this.manager;for(b=0;b<Z.length;b++)B=Z[b],F.indexOf(B)===-1&&J.indexOf(B)===-1?U.push(B):W.push(B);for(b=0;b<F.length;b++)B=F[b],Z.indexOf(B)===-1&&X.push(B);var I=U.length,G=0,V=this._eventData,Y=this._eventContainer;V.cancelled=!1;var z=!1;if(I>0){for(this.sortGameObjects(U,L),b=0;b<I;b++)if(B=U[b],!!B.input){if(N.resetCursor(B.input),B.emit(l.GAMEOBJECT_POINTER_OUT,L,Y),G++,V.cancelled||!B.input){z=!0;break}if(this.emit(l.GAMEOBJECT_OUT,L,B,Y),V.cancelled||!B.input){z=!0;break}}z||this.emit(l.POINTER_OUT,L,U)}if(I=X.length,V.cancelled=!1,z=!1,I>0){for(this.sortGameObjects(X,L),b=0;b<I;b++)if(B=X[b],!!B.input){if(N.setCursor(B.input),B.emit(l.GAMEOBJECT_POINTER_OVER,L,B.input.localX,B.input.localY,Y),G++,V.cancelled||!B.input){z=!0;break}if(this.emit(l.GAMEOBJECT_OVER,L,B,Y),V.cancelled||!B.input){z=!0;break}}z||this.emit(l.POINTER_OVER,L,X)}return Z=W.concat(X),this._over[L.id]=this.sortGameObjects(Z,L),G},processUpEvents:function(L){var F=this._temp,b=this._eventData,B=this._eventContainer;b.cancelled=!1;for(var U=!1,X=0;X<F.length;X++){var W=F[X];if(W.input){if(W.emit(l.GAMEOBJECT_POINTER_UP,L,W.input.localX,W.input.localY,B),b.cancelled||!W.input){U=!0;break}if(this.emit(l.GAMEOBJECT_UP,L,W,B),b.cancelled||!W.input){U=!0;break}}}return!U&&this.manager&&(L.upElement===this.manager.game.canvas?this.emit(l.POINTER_UP,L,F):this.emit(l.POINTER_UP_OUTSIDE,L)),F.length},queueForInsertion:function(L){return this._pendingInsertion.indexOf(L)===-1&&this._list.indexOf(L)===-1&&this._pendingInsertion.push(L),this},queueForRemoval:function(L){return this._pendingRemoval.push(L),this},setDraggable:function(L,F){F===void 0&&(F=!0),Array.isArray(L)||(L=[L]);for(var b=0;b<L.length;b++){var B=L[b];B.input.draggable=F;var U=this._draggable.indexOf(B);F&&U===-1?this._draggable.push(B):!F&&U>-1&&this._draggable.splice(U,1)}return this},makePixelPerfect:function(L){L===void 0&&(L=1);var F=this.systems.textures;return i(F,L)},setHitArea:function(L,F,b){if(F===void 0)return this.setHitAreaFromTexture(L);Array.isArray(L)||(L=[L]);var B=!1,U=!1,X=!1,W=!1,Z=!1,J=!0;if(m(F)){var N=F;F=v(N,"hitArea",null),b=v(N,"hitAreaCallback",null),B=v(N,"draggable",!1),U=v(N,"dropZone",!1),X=v(N,"cursor",!1),W=v(N,"useHandCursor",!1),Z=v(N,"pixelPerfect",!1);var I=v(N,"alphaTolerance",1);Z&&(F={},b=this.makePixelPerfect(I)),(!F||!b)&&(this.setHitAreaFromTexture(L),J=!1)}else typeof F=="function"&&!b&&(b=F,F={});for(var G=0;G<L.length;G++){var V=L[G];if(Z&&V.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var Y=V.input?V.input:n(V,F,b);Y.customHitArea=J,Y.dropZone=U,Y.cursor=W?"pointer":X,V.input=Y,B&&this.setDraggable(V),this.queueForInsertion(V)}return this},setHitAreaCircle:function(L,F,b,B,U){U===void 0&&(U=d);var X=new e(F,b,B);return this.setHitArea(L,X,U)},setHitAreaEllipse:function(L,F,b,B,U,X){X===void 0&&(X=h);var W=new u(F,b,B,U);return this.setHitArea(L,W,X)},setHitAreaFromTexture:function(L,F){F===void 0&&(F=E),Array.isArray(L)||(L=[L]);for(var b=0;b<L.length;b++){var B=L[b],U=B.frame,X=0,W=0;if(B.width?(X=B.width,W=B.height):U&&(X=U.realWidth,W=U.realHeight),B.type==="Container"&&(X===0||W===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}X!==0&&W!==0&&(B.input=n(B,new T(0,0,X,W),F),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(L,F,b,B,U,X){X===void 0&&(X=E);var W=new T(F,b,B,U);return this.setHitArea(L,W,X)},setHitAreaTriangle:function(L,F,b,B,U,X,W,Z){Z===void 0&&(Z=M);var J=new P(F,b,B,U,X,W);return this.setHitArea(L,J,Z)},enableDebug:function(L,F){F===void 0&&(F=65280);var b=L.input;if(!b||!b.hitArea)return this;var B=b.hitArea,U=B.type,X=b.hitAreaDebug,W=this.systems.add,Z=this.systems.updateList;X&&(Z.remove(X),X.destroy(),X=null);var J=0,N=0;switch(U){case c.CIRCLE:X=W.arc(0,0,B.radius),J=B.x-B.radius,N=B.y-B.radius;break;case c.ELLIPSE:X=W.ellipse(0,0,B.width,B.height),J=B.x-B.width/2,N=B.y-B.height/2;break;case c.LINE:X=W.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case c.POLYGON:X=W.polygon(0,0,B.points);break;case c.RECTANGLE:X=W.rectangle(0,0,B.width,B.height),J=B.x,N=B.y;break;case c.TRIANGLE:X=W.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return X&&(X.isFilled=!1,X.preUpdate=function(){X.setStrokeStyle(1/L.scale,F),X.setDisplayOrigin(L.displayOriginX,L.displayOriginY);var I=L.x,G=L.y,V=L.rotation,Y=L.scaleX,z=L.scaleY;if(L.parentContainer){var H=L.getWorldTransformMatrix();I=H.tx,G=H.ty,V=H.rotation,Y=H.scaleX,z=H.scaleY}X.setRotation(V),X.setScale(Y,z),X.setPosition(I+J,G+N),X.setScrollFactor(L.scrollFactorX,L.scrollFactorY),X.setDepth(L.depth)},Z.add(X),b.hitAreaDebug=X),this},removeDebug:function(L){var F=L.input;if(F&&F.hitAreaDebug){var b=F.hitAreaDebug;this.systems.updateList.remove(b),b.destroy(),F.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(L){return this.pollRate=L,this._pollTimer=0,this},setGlobalTopOnly:function(L){return this.manager.globalTopOnly=L,this},setTopOnly:function(L){return this.topOnly=L,this},sortGameObjects:function(L,F){if(L.length<2)return L;var b=F.camera.renderList;return L.sort(function(B,U){return b.indexOf(U)-b.indexOf(B)})},sortDropZones:function(L){return L.length<2?L:(this.scene.sys.depthSort(),L.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(L,F){if(!L.parentContainer&&!F.parentContainer)return this.displayList.getIndex(F)-this.displayList.getIndex(L);if(L.parentContainer===F.parentContainer)return F.parentContainer.getIndex(F)-L.parentContainer.getIndex(L);if(L.parentContainer===F)return-1;if(F.parentContainer===L)return 1;for(var b=L.getIndexList(),B=F.getIndexList(),U=Math.min(b.length,B.length),X=0;X<U;X++){var W=b[X],Z=B[X];if(W!==Z)return Z-W}return B.length-b.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(L){return this.manager.addPointer(L)},setDefaultCursor:function(L){return this.manager.setDefaultCursor(L),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(l.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var L=0;L<10;L++)this._drag[L]=[],this._over[L]=[];this.removeAllListeners();var F=this.manager;F.canvas.style.cursor=F.defaultCursor;var b=this.systems.events;b.off(S.TRANSITION_START,this.transitionIn,this),b.off(S.TRANSITION_OUT,this.transitionOut,this),b.off(S.TRANSITION_COMPLETE,this.transitionComplete,this),b.off(S.PRE_UPDATE,this.preUpdate,this),F.events.off(l.GAME_OUT,this.onGameOut,this),F.events.off(l.GAME_OVER,this.onGameOver,this),b.off(S.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(l.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(S.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});y.register("InputPlugin",O,"input"),a.exports=O},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Events:t(154),KeyboardManager:t(410),KeyboardPlugin:t(1330),Key:t(512),KeyCodes:t(143),KeyCombo:t(513),AdvanceKeyCombo:t(515),ProcessKeyCombo:t(514),ResetKeyCombo:t(516),JustDown:t(1332),JustUp:t(1333),DownDuration:t(1334),UpDuration:t(1335)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="keydown"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="keyup"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="keycombomatch"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="down"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="keydown-"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="keyup-"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="up"},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(9),r=t(154),o=t(22),n=t(6),i=t(51),s=t(153),u=t(512),h=t(143),l=t(513),f=t(1331),v=t(20),c=t(76),p=new e({Extends:d,initialize:function(y){d.call(this),this.game=y.systems.game,this.scene=y.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=y,this.manager=y.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,y.pluginEvents.once(i.BOOT,this.boot,this),y.pluginEvents.on(i.START,this.start,this)},boot:function(){var m=this.settings.input;this.enabled=n(m,"keyboard",!0);var y=n(m,"keyboard.capture",null);y&&this.addCaptures(y),this.sceneInputPlugin.pluginEvents.once(i.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(i.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(i.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(v.PAUSE,this.resetKeys,this),this.scene.sys.events.on(v.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(m){return this.manager.addCapture(m),this},removeCapture:function(m){return this.manager.removeCapture(m),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:h.UP,down:h.DOWN,left:h.LEFT,right:h.RIGHT,space:h.SPACE,shift:h.SHIFT})},addKeys:function(m,y,T){y===void 0&&(y=!0),T===void 0&&(T=!1);var E={};if(typeof m=="string"){m=m.split(",");for(var S=0;S<m.length;S++){var P=m[S].trim();P&&(E[P]=this.addKey(P,y,T))}}else for(var M in m)E[M]=this.addKey(m[M],y,T);return E},addKey:function(m,y,T){y===void 0&&(y=!0),T===void 0&&(T=!1);var E=this.keys;if(m instanceof u){var S=E.indexOf(m);return S>-1?E[S]=m:E[m.keyCode]=m,y&&this.addCapture(m.keyCode),m.setEmitOnRepeat(T),m}return typeof m=="string"&&(m=h[m.toUpperCase()]),E[m]||(E[m]=new u(this,m),y&&this.addCapture(m),E[m].setEmitOnRepeat(T)),E[m]},removeKey:function(m,y){y===void 0&&(y=!1);var T=this.keys,E;if(m instanceof u){var S=T.indexOf(m);S>-1&&(E=this.keys[S],this.keys[S]=void 0)}else typeof m=="string"&&(m=h[m.toUpperCase()]);return T[m]&&(E=T[m],T[m]=void 0),E&&(E.plugin=null,y&&E.destroy()),this},removeAllKeys:function(m){for(var y=this.keys,T=0;T<y.length;T++){var E=y[T];E&&(y[T]=void 0,m&&E.destroy())}return this},createCombo:function(m,y){return new l(this,m,y)},checkDown:function(m,y){if(y===void 0&&(y=0),this.enabled&&m.isDown){var T=c(this.time-m.timeDown,y);if(T>m._tick)return m._tick=T,!0}return!1},update:function(){var m=this.manager.queue,y=m.length;if(!(!this.isActive()||y===0))for(var T=this.keys,E=0;E<y;E++){var S=m[E],P=S.keyCode,M=T[P],O=!1;S.cancelled===void 0&&(S.cancelled=0,S.stopImmediatePropagation=function(){S.cancelled=1},S.stopPropagation=function(){S.cancelled=-1}),S.cancelled!==-1&&(P===this.prevCode&&S.timeStamp===this.prevTime&&S.type===this.prevType||(this.prevCode=P,this.prevTime=S.timeStamp,this.prevType=S.type,S.type==="keydown"?(M&&(O=M.isDown,M.onDown(S)),!S.cancelled&&(!M||!O)&&(f[P]&&this.emit(r.KEY_DOWN+f[P],S),S.cancelled||this.emit(r.ANY_KEY_DOWN,S))):(M&&M.onUp(S),S.cancelled||(f[P]&&this.emit(r.KEY_UP+f[P],S),S.cancelled||this.emit(r.ANY_KEY_UP,S))),S.cancelled===1&&(S.cancelled=0)))}},resetKeys:function(){for(var m=this.keys,y=0;y<m.length;y++)m[y]&&m[y].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(i.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(v.PAUSE,this.resetKeys,this),this.scene.sys.events.off(v.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var m=this.keys,y=0;y<m.length;y++)m[y]&&m[y].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});s.register("KeyboardPlugin",p,"keyboard","keyboard","inputKeyboard"),a.exports=p},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(143),d={};for(var r in e)d[e[r]]=r;a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e._justDown?(e._justDown=!1,!0):!1};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e._justUp?(e._justUp=!1,!0):!1};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){d===void 0&&(d=50);var r=e.plugin.game.loop.time-e.timeDown;return e.isDown&&r<d};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){d===void 0&&(d=50);var r=e.plugin.game.loop.time-e.timeUp;return e.isUp&&r<d};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={MouseManager:t(411)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={TouchManager:t(413)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(21),d=t(17),r={Events:t(95),FileTypes:t(1339),File:t(23),FileTypesManager:t(8),GetURL:t(155),LoaderPlugin:t(1365),MergeXHRSettings:t(240),MultiFile:t(49),XHRLoader:t(517),XHRSettings:t(156)};r=d(!1,r,e),a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AnimationJSONFile:t(1340),AsepriteFile:t(1341),AtlasJSONFile:t(1342),AtlasXMLFile:t(1343),AudioFile:t(518),AudioSpriteFile:t(1344),BinaryFile:t(1345),BitmapFontFile:t(1346),CSSFile:t(1347),GLSLFile:t(1348),HTML5AudioFile:t(519),HTMLFile:t(1349),HTMLTextureFile:t(1350),ImageFile:t(71),JSONFile:t(61),MultiAtlasFile:t(1351),MultiScriptFile:t(1352),OBJFile:t(1353),PackFile:t(1354),PluginFile:t(1355),SceneFile:t(1356),ScenePluginFile:t(1357),ScriptFile:t(520),SpriteSheetFile:t(1358),SVGFile:t(1359),TextFile:t(242),TilemapCSVFile:t(1360),TilemapImpactFile:t(1361),TilemapJSONFile:t(1362),UnityAtlasFile:t(1363),VideoFile:t(1364),XMLFile:t(241)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(8),r=t(61),o=t(95),n=new e({Extends:r,initialize:function(s,u,h,l,f){r.call(this,s,u,h,l,f),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),r.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});d.register("animation",function(i,s,u,h){if(Array.isArray(i))for(var l=0;l<i.length;l++)this.addFile(new n(this,i[l]));else this.addFile(new n(this,i,s,h,u));return this}),a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(8),r=t(2),o=t(71),n=t(7),i=t(61),s=t(49),u=new e({Extends:s,initialize:function(l,f,v,c,p,m){var y,T;if(n(f)){var E=f;f=r(E,"key"),y=new o(l,{key:f,url:r(E,"textureURL"),extension:r(E,"textureExtension","png"),normalMap:r(E,"normalMap"),xhrSettings:r(E,"textureXhrSettings")}),T=new i(l,{key:f,url:r(E,"atlasURL"),extension:r(E,"atlasExtension","json"),xhrSettings:r(E,"atlasXhrSettings")})}else y=new o(l,f,v,p),T=new i(l,f,c,m);y.linkFile?s.call(this,l,"atlasjson",f,[y,T,y.linkFile]):s.call(this,l,"atlasjson",f,[y,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],l=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(h.key,h.data,l.data,f),l.addToCache(),this.complete=!0}}});d.register("aseprite",function(h,l,f,v,c){var p;if(Array.isArray(h))for(var m=0;m<h.length;m++)p=new u(this,h[m]),this.addFile(p.files);else p=new u(this,h,l,f,v,c),this.addFile(p.files);return this}),a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(8),r=t(2),o=t(71),n=t(7),i=t(61),s=t(49),u=new e({Extends:s,initialize:function(l,f,v,c,p,m){var y,T;if(n(f)){var E=f;f=r(E,"key"),y=new o(l,{key:f,url:r(E,"textureURL"),extension:r(E,"textureExtension","png"),normalMap:r(E,"normalMap"),xhrSettings:r(E,"textureXhrSettings")}),T=new i(l,{key:f,url:r(E,"atlasURL"),extension:r(E,"atlasExtension","json"),xhrSettings:r(E,"atlasXhrSettings")})}else y=new o(l,f,v,p),T=new i(l,f,c,m);y.linkFile?s.call(this,l,"atlasjson",f,[y,T,y.linkFile]):s.call(this,l,"atlasjson",f,[y,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],l=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(h.key,h.data,l.data,f),l.pendingDestroy(),this.complete=!0}}});d.register("atlas",function(h,l,f,v,c){var p;if(Array.isArray(h))for(var m=0;m<h.length;m++)p=new u(this,h[m]),this.addFile(p.files);else p=new u(this,h,l,f,v,c),this.addFile(p.files);return this}),a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(8),r=t(2),o=t(71),n=t(7),i=t(49),s=t(241),u=new e({Extends:i,initialize:function(l,f,v,c,p,m){var y,T;if(n(f)){var E=f;f=r(E,"key"),y=new o(l,{key:f,url:r(E,"textureURL"),extension:r(E,"textureExtension","png"),normalMap:r(E,"normalMap"),xhrSettings:r(E,"textureXhrSettings")}),T=new s(l,{key:f,url:r(E,"atlasURL"),extension:r(E,"atlasExtension","xml"),xhrSettings:r(E,"atlasXhrSettings")})}else y=new o(l,f,v,p),T=new s(l,f,c,m);y.linkFile?i.call(this,l,"atlasxml",f,[y,T,y.linkFile]):i.call(this,l,"atlasxml",f,[y,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],l=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(h.key,h.data,l.data,f),l.pendingDestroy(),this.complete=!0}}});d.register("atlasXML",function(h,l,f,v,c){var p;if(Array.isArray(h))for(var m=0;m<h.length;m++)p=new u(this,h[m]),this.addFile(p.files);else p=new u(this,h,l,f,v,c),this.addFile(p.files);return this}),a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(518),d=t(0),r=t(8),o=t(2),n=t(7),i=t(61),s=t(49),u=new d({Extends:s,initialize:function(l,f,v,c,p,m,y){if(n(f)){var T=f;f=o(T,"key"),v=o(T,"jsonURL"),c=o(T,"audioURL"),p=o(T,"audioConfig"),m=o(T,"audioXhrSettings"),y=o(T,"jsonXhrSettings")}var E;if(!c)E=new i(l,f,v,y),s.call(this,l,"audiosprite",f,[E]),this.config.resourceLoad=!0,this.config.audioConfig=p,this.config.audioXhrSettings=m;else{var S=e.create(l,f,c,p,m);S&&(E=new i(l,f,v,y),s.call(this,l,"audiosprite",f,[S,E]),this.config.resourceLoad=!1)}},onFileComplete:function(h){var l=this.files.indexOf(h);if(l!==-1&&(this.pending--,this.config.resourceLoad&&h.type==="json"&&h.data.hasOwnProperty("resources"))){var f=h.data.resources,v=o(this.config,"audioConfig"),c=o(this.config,"audioXhrSettings"),p=e.create(this.loader,h.key,f,v,c);p&&(this.addToMultiFile(p),this.loader.addFile(p))}},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],l=this.files[1];h.addToCache(),l.addToCache(),this.complete=!0}}});r.register("audioSprite",function(h,l,f,v,c,p){var m=this.systems.game,y=m.config.audio,T=m.device.audio;if(y&&y.noAudio||!T.webAudio&&!T.audioData)return this;var E;if(Array.isArray(h))for(var S=0;S<h.length;S++)E=new u(this,h[S]),E.files&&this.addFile(E.files);else E=new u(this,h,l,f,v,c,p),E.files&&this.addFile(E.files);return this})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=new e({Extends:r,initialize:function(h,l,f,v,c){var p="bin";if(i(l)){var m=l;l=n(m,"key"),f=n(m,"url"),v=n(m,"xhrSettings"),p=n(m,"extension",p),c=n(m,"dataType",c)}var y={type:"binary",cache:h.cacheManager.binary,extension:p,responseType:"arraybuffer",key:l,url:f,xhrSettings:v,config:{dataType:c}};r.call(this,h,y)},onProcess:function(){this.state=d.FILE_PROCESSING;var u=this.config.dataType;this.data=u?new u(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",function(u,h,l,f){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new s(this,u[v]));else this.addFile(new s(this,u,h,f,l));return this}),a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(8),r=t(2),o=t(71),n=t(7),i=t(49),s=t(212),u=t(241),h=new e({Extends:i,initialize:function(f,v,c,p,m,y){var T,E;if(n(v)){var S=v;v=r(S,"key"),T=new o(f,{key:v,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),E=new u(f,{key:v,url:r(S,"fontDataURL"),extension:r(S,"fontDataExtension","xml"),xhrSettings:r(S,"fontDataXhrSettings")})}else T=new o(f,v,c,m),E=new u(f,v,p,y);T.linkFile?i.call(this,f,"bitmapfont",v,[T,E,T.linkFile]):i.call(this,f,"bitmapfont",v,[T,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1];l.addToCache(),f.pendingDestroy();var v=l.cache.get(l.key),c=s(f.data,l.cache.getFrame(l.key),0,0,v);this.loader.cacheManager.bitmapFont.add(l.key,{data:c,texture:l.key,frame:null}),this.complete=!0}}});d.register("bitmapFont",function(l,f,v,c,p){var m;if(Array.isArray(l))for(var y=0;y<l.length;y++)m=new h(this,l[y]),this.addFile(m.files);else m=new h(this,l,f,v,c,p),this.addFile(m.files);return this}),a.exports=h},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=new e({Extends:r,initialize:function(h,l,f,v){var c="css";if(i(l)){var p=l;l=n(p,"key"),f=n(p,"url"),v=n(p,"xhrSettings"),c=n(p,"extension",c)}var m={type:"script",cache:!1,extension:c,responseType:"text",key:l,url:f,xhrSettings:v};r.call(this,h,m)},onProcess:function(){this.state=d.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",function(u,h,l){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new s(this,u[f]));else this.addFile(new s(this,u,h,l));return this}),a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=t(396),u=new e({Extends:r,initialize:function(l,f,v,c,p){var m="glsl";if(i(f)){var y=f;f=n(y,"key"),v=n(y,"url"),c=n(y,"shaderType","fragment"),p=n(y,"xhrSettings"),m=n(y,"extension",m)}else c===void 0&&(c="fragment");var T={type:"glsl",cache:l.cacheManager.shader,extension:m,responseType:"text",key:f,url:v,config:{shaderType:c},xhrSettings:p};r.call(this,l,T)},onProcess:function(){this.state=d.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h=this.data.split(`
`),l=this.extractBlock(h,0);if(l)for(;l;){var f=this.getShaderName(l.header),v=this.getShaderType(l.header),c=this.getShaderUniforms(l.header),p=l.shader;if(this.cache.has(f)){var m=this.cache.get(f);v==="fragment"?m.fragmentSrc=p:m.vertexSrc=p,m.uniforms||(m.uniforms=c)}else v==="fragment"?this.cache.add(f,new s(f,p,"",c)):this.cache.add(f,new s(f,"",p,c));l=this.extractBlock(h,l.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new s(this.key,this.data)):this.cache.add(this.key,new s(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(h){for(var l=0;l<h.length;l++){var f=h[l].trim();if(f.substring(0,5)==="name:")return f.substring(5).trim()}return this.key},getShaderType:function(h){for(var l=0;l<h.length;l++){var f=h[l].trim();if(f.substring(0,5)==="type:")return f.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(h){for(var l={},f=0;f<h.length;f++){var v=h[f].trim();if(v.substring(0,8)==="uniform."){var c=v.indexOf(":");if(c){var p=v.substring(8,c);try{l[p]=JSON.parse(v.substring(c+1))}catch{console.warn("Invalid uniform JSON: "+p)}}}}return l},extractBlock:function(h,l){for(var f=-1,v=-1,c=-1,p=!1,m=!1,y=[],T=[],E=l;E<h.length;E++){var S=h[E].trim();if(S==="---")if(f===-1)f=E,p=!0;else if(p)v=E,p=!1,m=!0;else{m=!1;break}else p?y.push(S):m&&(T.push(S),c=E)}return!p&&v!==-1?{header:y,shader:T.join(`
`),offset:c}:null}});o.register("glsl",function(h,l,f,v){if(Array.isArray(h))for(var c=0;c<h.length;c++)this.addFile(new u(this,h[c]));else this.addFile(new u(this,h,l,f,v));return this}),a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=new e({Extends:r,initialize:function(h,l,f,v){var c="html";if(i(l)){var p=l;l=n(p,"key"),f=n(p,"url"),v=n(p,"xhrSettings"),c=n(p,"extension",c)}var m={type:"text",cache:h.cacheManager.html,extension:c,responseType:"text",key:l,url:f,xhrSettings:v};r.call(this,h,m)},onProcess:function(){this.state=d.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",function(u,h,l){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new s(this,u[f]));else this.addFile(new s(this,u,h,l));return this}),a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=new e({Extends:r,initialize:function(h,l,f,v,c,p){v===void 0&&(v=512),c===void 0&&(c=512);var m="html";if(i(l)){var y=l;l=n(y,"key"),f=n(y,"url"),p=n(y,"xhrSettings"),m=n(y,"extension",m),v=n(y,"width",v),c=n(y,"height",c)}var T={type:"html",cache:h.textureManager,extension:m,responseType:"text",key:l,url:f,xhrSettings:p,config:{width:v,height:c}};r.call(this,h,T)},onProcess:function(){this.state=d.FILE_PROCESSING;var u=this.config.width,h=this.config.height,l=[];l.push('<svg width="'+u+'px" height="'+h+'px" viewBox="0 0 '+u+" "+h+'" xmlns="http://www.w3.org/2000/svg">'),l.push('<foreignObject width="100%" height="100%">'),l.push('<body xmlns="http://www.w3.org/1999/xhtml">'),l.push(this.xhrLoader.responseText),l.push("</body>"),l.push("</foreignObject>"),l.push("</svg>");var f=[l.join(`
`)],v=this;try{var c=new window.Blob(f,{type:"image/svg+xml;charset=utf-8"})}catch{v.state=d.FILE_ERRORED,v.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){r.revokeObjectURL(v.data),v.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(v.data),v.onProcessError()},r.createObjectURL(this.data,c,"image/svg+xml")},addToCache:function(){var u=this.cache.addImage(this.key,this.data);this.pendingDestroy(u)}});o.register("htmlTexture",function(u,h,l,f,v){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new s(this,u[c]));else this.addFile(new s(this,u,h,l,f,v));return this}),a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(8),r=t(2),o=t(71),n=t(7),i=t(61),s=t(49),u=new e({Extends:s,initialize:function(l,f,v,c,p,m,y){if(n(f)){var T=f;f=r(T,"key"),r(T,"url",!1)?v=r(T,"url"):v=r(T,"atlasURL"),m=r(T,"xhrSettings"),c=r(T,"path"),p=r(T,"baseURL"),y=r(T,"textureXhrSettings")}var E=new i(l,f,v,m);s.call(this,l,"multiatlas",f,[E]),this.config.path=c,this.config.baseURL=p,this.config.textureXhrSettings=y},onFileComplete:function(h){var l=this.files.indexOf(h);if(l!==-1&&(this.pending--,h.type==="json"&&h.data.hasOwnProperty("textures"))){var f=h.data.textures,v=this.config,c=this.loader,p=c.baseURL,m=c.path,y=c.prefix,T=r(v,"baseURL",this.baseURL),E=r(v,"path",this.path),S=r(v,"prefix",this.prefix),P=r(v,"textureXhrSettings");c.setBaseURL(T),c.setPath(E),c.setPrefix(S);for(var M=0;M<f.length;M++){var O=f[M].image,L="MA"+this.multiKeyIndex+"_"+O,F=new o(c,L,O,P);if(this.addToMultiFile(F),c.addFile(F),f[M].normalMap){var b=new o(c,L,f[M].normalMap,P);b.type="normalMap",F.setLink(b),this.addToMultiFile(b),c.addFile(b)}}c.setBaseURL(p),c.setPath(m),c.setPrefix(y)}},addToCache:function(){if(this.isReadyToProcess()){for(var h=this.files[0],l=[],f=[],v=[],c=1;c<this.files.length;c++){var p=this.files[c];if(p.type!=="normalMap")for(var m=p.key.indexOf("_"),y=p.key.substr(m+1),T=p.data,E=0;E<h.data.textures.length;E++){var S=h.data.textures[E];if(S.image===y){f.push(T),l.push(S),p.linkFile&&v.push(p.linkFile.data);break}}}for(v.length===0&&(v=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,f,l,v),this.complete=!0,c=0;c<this.files.length;c++)this.files[c].pendingDestroy()}}});d.register("multiatlas",function(h,l,f,v,c){var p;if(Array.isArray(h))for(var m=0;m<h.length;m++)p=new u(this,h[m]),this.addFile(p.files);else p=new u(this,h,l,f,v,c),this.addFile(p.files);return this}),a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(8),r=t(2),o=t(7),n=t(49),i=t(520),s=new e({Extends:n,initialize:function(h,l,f,v){var c="js",p=[];if(o(l)){var m=l;l=r(m,"key"),f=r(m,"url"),v=r(m,"xhrSettings"),c=r(m,"extension",c)}Array.isArray(f)||(f=[f]);for(var y=0;y<f.length;y++){var T=new i(h,{key:l+"_"+y.toString(),url:f[y],extension:c,xhrSettings:v});T.onProcess=function(){this.onProcessComplete()},p.push(T)}n.call(this,h,"scripts",l,p)},addToCache:function(){if(this.isReadyToProcess()){for(var u=0;u<this.files.length;u++){var h=this.files[u];h.data=document.createElement("script"),h.data.language="javascript",h.data.type="text/javascript",h.data.defer=!1,h.data.text=h.xhrLoader.responseText,document.head.appendChild(h.data)}this.complete=!0}}});d.register("scripts",function(u,h,l){var f;if(Array.isArray(u))for(var v=0;v<u.length;v++)f=new s(this,u[v]),this.addFile(f.files);else f=new s(this,u,h,l),this.addFile(f.files);return this}),a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(8),r=t(2),o=t(7),n=t(49),i=t(498),s=t(499),u=t(242),h=new e({Extends:n,initialize:function(f,v,c,p,m,y){var T,E,S=f.cacheManager.obj;if(o(v)){var P=v;v=r(P,"key"),T=new u(f,{key:v,type:"obj",cache:S,url:r(P,"url"),extension:r(P,"extension","obj"),xhrSettings:r(P,"xhrSettings"),config:{flipUV:r(P,"flipUV",m)}}),p=r(P,"matURL"),p&&(E=new u(f,{key:v,type:"mat",cache:S,url:p,extension:r(P,"matExtension","mat"),xhrSettings:r(P,"xhrSettings")}))}else T=new u(f,{key:v,url:c,type:"obj",cache:S,extension:"obj",xhrSettings:y,config:{flipUV:m}}),p&&(E=new u(f,{key:v,url:p,type:"mat",cache:S,extension:"mat",xhrSettings:y}));n.call(this,f,"obj",v,[T,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],v=i(l.data,l.config.flipUV);f&&(v.materials=s(f.data)),l.cache.add(l.key,v),this.complete=!0}}});d.register("obj",function(l,f,v,c,p){var m;if(Array.isArray(l))for(var y=0;y<l.length;y++)m=new h(this,l[y]),this.addFile(m.files);else m=new h(this,l,f,v,c,p),this.addFile(m.files);return this}),a.exports=h},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(8),o=t(61),n=new e({Extends:o,initialize:function(s,u,h,l,f){o.call(this,s,u,h,l,f),this.type="packfile"},onProcess:function(){this.state!==d.FILE_POPULATED&&(this.state=d.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});r.register("pack",function(i,s,u,h){if(Array.isArray(i))for(var l=0;l<i.length;l++)this.addFile(new n(this,i[l]));else this.addFile(new n(this,i,s,h,u));return this}),a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=new e({Extends:r,initialize:function(h,l,f,v,c,p){var m="js";if(i(l)){var y=l;l=n(y,"key"),f=n(y,"url"),p=n(y,"xhrSettings"),m=n(y,"extension",m),v=n(y,"start"),c=n(y,"mapping")}var T={type:"plugin",cache:!1,extension:m,responseType:"text",key:l,url:f,xhrSettings:p,config:{start:v,mapping:c}};r.call(this,h,T),typeof f=="function"&&(this.data=f,this.state=d.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,h=this.config,l=n(h,"start",!1),f=n(h,"mapping",null);if(this.state===d.FILE_POPULATED)u.install(this.key,this.data,l,f);else{this.state=d.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var v=u.install(this.key,window[this.key],l,f);(l||f)&&(this.loader.systems[f]=v,this.loader.scene[f]=v)}this.onProcessComplete()}});o.register("plugin",function(u,h,l,f,v){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new s(this,u[c]));else this.addFile(new s(this,u,h,l,f,v));return this}),a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=new e({Extends:r,initialize:function(h,l,f,v){var c="js";if(i(l)){var p=l;l=n(p,"key"),f=n(p,"url"),v=n(p,"xhrSettings"),c=n(p,"extension",c)}var m={type:"text",extension:c,responseType:"text",key:l,url:f,xhrSettings:v};r.call(this,h,m)},onProcess:function(){this.state=d.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),h=eval;this.loader.sceneManager.add(this.key,h(u)),this.complete=!0}});o.register("sceneFile",function(u,h,l){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new s(this,u[f]));else this.addFile(new s(this,u,h,l));return this}),a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=new e({Extends:r,initialize:function(h,l,f,v,c,p){var m="js";if(i(l)){var y=l;l=n(y,"key"),f=n(y,"url"),p=n(y,"xhrSettings"),m=n(y,"extension",m),v=n(y,"systemKey"),c=n(y,"sceneKey")}var T={type:"scenePlugin",cache:!1,extension:m,responseType:"text",key:l,url:f,xhrSettings:p,config:{systemKey:v,sceneKey:c}};r.call(this,h,T),typeof f=="function"&&(this.data=f,this.state=d.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,h=this.config,l=this.key,f=n(h,"systemKey",l),v=n(h,"sceneKey",l);this.state===d.FILE_POPULATED?u.installScenePlugin(f,this.data,v,this.loader.scene,!0):(this.state=d.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),u.installScenePlugin(f,window[this.key],v,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",function(u,h,l,f,v){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new s(this,u[c]));else this.addFile(new s(this,u,h,l,f,v));return this}),a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(8),r=t(71),o=new e({Extends:r,initialize:function(i,s,u,h,l){r.call(this,i,s,u,l,h),this.type="spritesheet"},addToCache:function(){var n=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(n)}});d.register("spritesheet",function(n,i,s,u){if(Array.isArray(n))for(var h=0;h<n.length;h++)this.addFile(new o(this,n[h]));else this.addFile(new o(this,n,i,s,u));return this}),a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=new e({Extends:r,initialize:function(h,l,f,v,c){var p="svg";if(i(l)){var m=l;l=n(m,"key"),f=n(m,"url"),v=n(m,"svgConfig",{}),c=n(m,"xhrSettings"),p=n(m,"extension",p)}var y={type:"svg",cache:h.textureManager,extension:p,responseType:"text",key:l,url:f,xhrSettings:c,config:{width:n(v,"width"),height:n(v,"height"),scale:n(v,"scale")}};r.call(this,h,y)},onProcess:function(){this.state=d.FILE_PROCESSING;var u=this.xhrLoader.responseText,h=[u],l=this.config.width,f=this.config.height,v=this.config.scale;t:if(l&&f||v){var c=null,p=new DOMParser;c=p.parseFromString(u,"text/xml");var m=c.getElementsByTagName("svg")[0],y=m.hasAttribute("viewBox"),T=parseFloat(m.getAttribute("width")),E=parseFloat(m.getAttribute("height"));if(!y&&T&&E)m.setAttribute("viewBox","0  0 "+T+" "+E);else if(y&&!T&&!E){var S=m.getAttribute("viewBox").split(/\s+|,/);T=S[2],E=S[3]}if(v)if(T&&E)l=T*v,f=E*v;else break t;m.setAttribute("width",l.toString()+"px"),m.setAttribute("height",f.toString()+"px"),h=[new XMLSerializer().serializeToString(m)]}try{var P=new window.Blob(h,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var M=this,O=!1;this.data.onload=function(){O||r.revokeObjectURL(M.data),M.onProcessComplete()},this.data.onerror=function(){O?M.onProcessError():(O=!0,r.revokeObjectURL(M.data),M.data.src="data:image/svg+xml,"+encodeURIComponent(h.join("")))},r.createObjectURL(this.data,P,"image/svg+xml")},addToCache:function(){var u=this.cache.addImage(this.key,this.data);this.pendingDestroy(u)}});o.register("svg",function(u,h,l,f){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new s(this,u[v]));else this.addFile(new s(this,u,h,l,f));return this}),a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(2),i=t(7),s=t(40),u=new e({Extends:r,initialize:function(l,f,v,c){var p="csv";if(i(f)){var m=f;f=n(m,"key"),v=n(m,"url"),c=n(m,"xhrSettings"),p=n(m,"extension",p)}var y={type:"tilemapCSV",cache:l.cacheManager.tilemap,extension:p,responseType:"text",key:f,url:v,xhrSettings:c};r.call(this,l,y),this.tilemapFormat=s.CSV},onProcess:function(){this.state=d.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,h),this.pendingDestroy(h)}});o.register("tilemapCSV",function(h,l,f){if(Array.isArray(h))for(var v=0;v<h.length;v++)this.addFile(new u(this,h[v]));else this.addFile(new u(this,h,l,f));return this}),a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(8),r=t(61),o=t(40),n=new e({Extends:r,initialize:function(s,u,h,l){r.call(this,s,u,h,l),this.type="tilemapJSON",this.cache=s.cacheManager.tilemap},addToCache:function(){var i={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,i),this.pendingDestroy(i)}});d.register("tilemapImpact",function(i,s,u){if(Array.isArray(i))for(var h=0;h<i.length;h++)this.addFile(new n(this,i[h]));else this.addFile(new n(this,i,s,u));return this}),a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(8),r=t(61),o=t(40),n=new e({Extends:r,initialize:function(s,u,h,l){r.call(this,s,u,h,l),this.type="tilemapJSON",this.cache=s.cacheManager.tilemap},addToCache:function(){var i={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,i),this.pendingDestroy(i)}});d.register("tilemapTiledJSON",function(i,s,u){if(Array.isArray(i))for(var h=0;h<i.length;h++)this.addFile(new n(this,i[h]));else this.addFile(new n(this,i,s,u));return this}),a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(8),r=t(2),o=t(71),n=t(7),i=t(49),s=t(242),u=new e({Extends:i,initialize:function(l,f,v,c,p,m){var y,T;if(n(f)){var E=f;f=r(E,"key"),y=new o(l,{key:f,url:r(E,"textureURL"),extension:r(E,"textureExtension","png"),normalMap:r(E,"normalMap"),xhrSettings:r(E,"textureXhrSettings")}),T=new s(l,{key:f,url:r(E,"atlasURL"),extension:r(E,"atlasExtension","txt"),xhrSettings:r(E,"atlasXhrSettings")})}else y=new o(l,f,v,p),T=new s(l,f,c,m);y.linkFile?i.call(this,l,"unityatlas",f,[y,T,y.linkFile]):i.call(this,l,"unityatlas",f,[y,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],l=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(h.key,h.data,l.data,f),l.pendingDestroy(),this.complete=!0}}});d.register("unityAtlas",function(h,l,f,v,c){var p;if(Array.isArray(h))for(var m=0;m<h.length;m++)p=new u(this,h[m]),this.addFile(p.files);else p=new u(this,h,l,f,v,c),this.addFile(p.files);return this}),a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(23),o=t(8),n=t(155),i=t(2),s=t(7),u=new e({Extends:r,initialize:function(l,f,v,c,p,m,y){c===void 0&&(c="loadeddata"),p===void 0&&(p=!1),m===void 0&&(m=!1),c!=="loadeddata"&&c!=="canplay"&&c!=="canplaythrough"&&(c="loadeddata");var T={type:"video",cache:l.cacheManager.video,extension:v.type,responseType:"blob",key:f,url:v.url,xhrSettings:y,config:{loadEvent:c,asBlob:p,noAudio:m}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),r.call(this,l,T)},onProcess:function(){if(this.state=d.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var h=this.createVideoElement();this.data=h;var l=this;this.data.onloadeddata=function(){l.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(l.data),l.onProcessError()},r.createObjectURL(h,this.xhrLoader.response,""),h.load()},createVideoElement:function(){var h=document.createElement("video");return h.controls=!1,h.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(h.muted=!0,h.defaultMuted=!0,h.setAttribute("autoplay","autoplay")),h.setAttribute("playsinline","playsinline"),h.setAttribute("preload","auto"),h},onVideoLoadHandler:function(h){var l=h.target;l.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),l.removeEventListener("error",this.onErrorCallback,!0),this.data=l,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(h){var l=h.target;l&&(l.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),l.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var h=this.config.loadEvent;if(this.config.asBlob)r.prototype.load.call(this);else{this.percentComplete=0;var l=this.createVideoElement();l.addEventListener(h,this.onLoadCallback,!0),l.addEventListener("error",this.onErrorCallback,!0),l.src=n(this,this.loader.baseURL),l.load()}}});u.create=function(h,l,f,v,c,p,m){var y=h.systems.game;s(l)&&(f=i(l,"url",[]),v=i(l,"loadEvent","loadeddata"),c=i(l,"asBlob",!1),p=i(l,"noAudio",!1),m=i(l,"xhrSettings"),l=i(l,"key"));var T=u.getVideoURL(y,f);if(T)return new u(h,l,T,v,c,p,m)},u.getVideoURL=function(h,l){Array.isArray(l)||(l=[l]);for(var f=0;f<l.length;f++){var v=i(l[f],"url",l[f]);if(v.indexOf("blob:")===0)return{url:v,type:""};var c;if(v.indexOf("data:")===0?c=v.split(",")[0].match(/\/(.*?);/):c=v.match(/\.([a-zA-Z0-9]+)($|\?)/),c=i(l[f],"type",c?c[1]:"").toLowerCase(),h.device.video[c])return{url:v,type:c}}return null},o.register("video",function(h,l,f,v,c,p){var m;if(Array.isArray(h))for(var y=0;y<h.length;y++)m=u.create(this,h[y]),m&&this.addFile(m);else m=u.create(this,h,l,f,v,c,p),m&&this.addFile(m);return this}),a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(21),r=t(149),o=t(9),n=t(95),i=t(8),s=t(2),u=t(24),h=t(20),l=t(156),f=new e({Extends:o,initialize:function(c){o.call(this);var p=c.sys.game.config,m=c.sys.settings.loader;this.scene=c,this.systems=c.sys,this.cacheManager=c.sys.cache,this.textureManager=c.sys.textures,this.sceneManager=c.sys.game.scene,i.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(s(m,"baseURL",p.loaderBaseURL)),this.setPath(s(m,"path",p.loaderPath)),this.setPrefix(s(m,"prefix",p.loaderPrefix)),this.maxParallelDownloads=s(m,"maxParallelDownloads",p.loaderMaxParallelDownloads),this.xhr=l(s(m,"responseType",p.loaderResponseType),s(m,"async",p.loaderAsync),s(m,"user",p.loaderUser),s(m,"password",p.loaderPassword),s(m,"timeout",p.loaderTimeout),s(m,"withCredentials",p.loaderWithCredentials)),this.crossOrigin=s(m,"crossOrigin",p.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new r,this.inflight=new r,this.queue=new r,this._deleteQueue=new r,this.totalFailed=0,this.totalComplete=0,this.state=d.LOADER_IDLE,this.multiKeyIndex=0,c.sys.events.once(h.BOOT,this.boot,this),c.sys.events.on(h.START,this.pluginStart,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(h.SHUTDOWN,this.shutdown,this)},setBaseURL:function(v){return v===void 0&&(v=""),v!==""&&v.substr(-1)!=="/"&&(v=v.concat("/")),this.baseURL=v,this},setPath:function(v){return v===void 0&&(v=""),v!==""&&v.substr(-1)!=="/"&&(v=v.concat("/")),this.path=v,this},setPrefix:function(v){return v===void 0&&(v=""),this.prefix=v,this},setCORS:function(v){return this.crossOrigin=v,this},addFile:function(v){Array.isArray(v)||(v=[v]);for(var c=0;c<v.length;c++){var p=v[c];this.keyExists(p)||(this.list.set(p),this.emit(n.ADD,p.key,p.type,this,p),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(v){var c=v.hasCacheConflict();return c||this.list.iterate(function(p){if(p.type===v.type&&p.key===v.key)return c=!0,!1}),!c&&this.isLoading()&&(this.inflight.iterate(function(p){if(p.type===v.type&&p.key===v.key)return c=!0,!1}),this.queue.iterate(function(p){if(p.type===v.type&&p.key===v.key)return c=!0,!1})),c},addPack:function(v,c){c&&v.hasOwnProperty(c)&&(v={packKey:v[c]});var p=0,m=this.baseURL,y=this.path,T=this.prefix;for(var E in v)if(Object.prototype.hasOwnProperty.call(v,E)){var S=v[E],P=s(S,"baseURL",m),M=s(S,"path",y),O=s(S,"prefix",T),L=s(S,"files",null),F=s(S,"defaultType","void");if(Array.isArray(L)){this.setBaseURL(P),this.setPath(M),this.setPrefix(O);for(var b=0;b<L.length;b++){var B=L[b],U=B.hasOwnProperty("type")?B.type:F;this[U]&&(this[U](B),p++)}}}return this.setBaseURL(m),this.setPath(y),this.setPrefix(T),p>0},isLoading:function(){return this.state===d.LOADER_LOADING||this.state===d.LOADER_PROCESSING},isReady:function(){return this.state===d.LOADER_IDLE||this.state===d.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(n.START,this),this.list.size===0?this.loadComplete():(this.state=d.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(h.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(n.PROGRESS,this.progress)},update:function(){this.state===d.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(v){if((v.state===d.FILE_POPULATED||v.state===d.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(v),this.list.delete(v),v.crossOrigin||(v.crossOrigin=this.crossOrigin),v.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(v,c){this.inflight&&(this.inflight.delete(v),this.updateProgress(),c?(this.totalComplete++,this.queue.set(v),this.emit(n.FILE_LOAD,v),v.onProcess()):(this.totalFailed++,this._deleteQueue.set(v),this.emit(n.FILE_LOAD_ERROR,v),this.fileProcessComplete(v)))},fileProcessComplete:function(v){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(v.state===d.FILE_ERRORED?v.multiFile&&v.multiFile.onFileFailed(v):v.state===d.FILE_COMPLETE&&(v.multiFile?v.multiFile.isReadyToProcess()&&v.multiFile.addToCache():v.addToCache()),this.queue.delete(v),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(n.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=d.LOADER_COMPLETE,this.systems.events.off(h.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(n.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(v){this._deleteQueue.set(v)},saveJSON:function(v,c){return this.save(JSON.stringify(v),c)},save:function(v,c,p){c===void 0&&(c="file.json"),p===void 0&&(p="application/json");var m=new Blob([v],{type:p}),y=URL.createObjectURL(m),T=document.createElement("a");return T.download=c,T.textContent="Download "+c,T.href=y,T.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var v=this.systems.game.config,c=this.systems.settings.loader;this.setBaseURL(s(c,"baseURL",v.loaderBaseURL)),this.setPath(s(c,"path",v.loaderPath)),this.setPrefix(s(c,"prefix",v.loaderPrefix)),this.state=d.LOADER_IDLE},shutdown:function(){this.reset(),this.state=d.LOADER_SHUTDOWN,this.systems.events.off(h.UPDATE,this.update,this),this.systems.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=d.LOADER_DESTROYED,this.systems.events.off(h.UPDATE,this.update,this),this.systems.events.off(h.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});u.register("Loader",f,"load"),a.exports=f},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(62),d=t(17),r={ArcadePhysics:t(1367),Body:t(527),Collider:t(528),Components:t(243),Events:t(245),Factory:t(521),GetOverlapX:t(246),GetOverlapY:t(247),SeparateX:t(537),SeparateY:t(538),Group:t(524),Image:t(522),Sprite:t(157),StaticBody:t(539),StaticGroup:t(525),Tilemap:t(1391),World:t(526)};r=d(!1,r,e),a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(36),r=t(50),o=t(353),n=t(521),i=t(2),s=t(127),u=t(523),h=t(244),l=t(24),f=t(20),v=t(3),c=t(526),p=new e({initialize:function(y){this.scene=y,this.systems=y.sys,this.config=this.getConfig(),this.world,this.add,y.sys.events.once(f.BOOT,this.boot,this),y.sys.events.on(f.START,this.start,this)},boot:function(){this.world=new c(this.scene,this.config),this.add=new n(this.world),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new c(this.scene,this.config),this.add=new n(this.world));var m=this.systems.events;i(this.config,"customUpdate",!1)||m.on(f.UPDATE,this.world.update,this.world),m.on(f.POST_UPDATE,this.world.postUpdate,this.world),m.once(f.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(f.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(f.UPDATE,this.world.update,this.world)},getConfig:function(){var m=this.systems.game.config.physics,y=this.systems.settings.physics,T=s(i(y,"arcade",{}),i(m,"arcade",{}));return T},overlap:function(m,y,T,E,S){return T===void 0&&(T=null),E===void 0&&(E=null),S===void 0&&(S=T),this.world.collideObjects(m,y,T,E,S,!0)},collide:function(m,y,T,E,S){return T===void 0&&(T=null),E===void 0&&(E=null),S===void 0&&(S=T),this.world.collideObjects(m,y,T,E,S,!1)},collideTiles:function(m,y,T,E,S){return this.world.collideTiles(m,y,T,E,S)},overlapTiles:function(m,y,T,E,S){return this.world.overlapTiles(m,y,T,E,S)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(m,y,T,E,S,P){E===void 0&&(E=60);var M=Math.atan2(T-m.y,y-m.x);return m.body.acceleration.setToPolar(M,E),S!==void 0&&P!==void 0&&m.body.maxVelocity.set(S,P),M},accelerateToObject:function(m,y,T,E,S){return this.accelerateTo(m,y.x,y.y,T,E,S)},closest:function(m,y){y||(y=this.world.bodies.entries);for(var T=Number.MAX_VALUE,E=null,S=m.x,P=m.y,M=y.length,O=0;O<M;O++){var L=y[O],F=L.body||L;if(!(m===L||m===F||m===F.gameObject||m===F.center)){var b=o(S,P,F.center.x,F.center.y);b<T&&(E=L,T=b)}}return E},furthest:function(m,y){y||(y=this.world.bodies.entries);for(var T=-1,E=null,S=m.x,P=m.y,M=y.length,O=0;O<M;O++){var L=y[O],F=L.body||L;if(!(m===L||m===F||m===F.gameObject||m===F.center)){var b=o(S,P,F.center.x,F.center.y);b>T&&(E=L,T=b)}}return E},moveTo:function(m,y,T,E,S){E===void 0&&(E=60),S===void 0&&(S=0);var P=Math.atan2(T-m.y,y-m.x);return S>0&&(E=r(m.x,m.y,y,T)/(S/1e3)),m.body.velocity.setToPolar(P,E),P},moveToObject:function(m,y,T,E){return this.moveTo(m,y.x,y.y,T,E)},velocityFromAngle:function(m,y,T){return y===void 0&&(y=60),T===void 0&&(T=new v),T.setToPolar(d(m),y)},velocityFromRotation:function(m,y,T){return y===void 0&&(y=60),T===void 0&&(T=new v),T.setToPolar(m,y)},overlapRect:function(m,y,T,E,S,P){return h(this.world,m,y,T,E,S,P)},overlapCirc:function(m,y,T,E,S){return u(this.world,m,y,T,E,S)},shutdown:function(){if(this.world){var m=this.systems.events;m.off(f.UPDATE,this.world.update,this.world),m.off(f.POST_UPDATE,this.world.postUpdate,this.world),m.off(f.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});l.register("ArcadePhysics",p,"arcadePhysics"),a.exports=p},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAcceleration:function(e,d){return this.body.acceleration.set(e,d),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(e,d){return this.body.bounce.set(e,d),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,d,r){return this.body.setCollideWorldBounds(e,d,r),this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDebug:function(e,d,r){return this.debugShowBody=e,this.debugShowVelocity=d,this.debugBodyColor=r,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDrag:function(e,d){return this.body.drag.set(e,d),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={enableBody:function(e,d,r,o,n){return e&&this.body.reset(d,r),o&&(this.body.gameObject.active=!0),n&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,d){return e===void 0&&(e=!1),d===void 0&&(d=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),d&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(e,d){return this.body.friction.set(e,d),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setGravity:function(e,d){return this.body.gravity.set(e,d),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setMass:function(e){return this.body.mass=e,this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setOffset:function(e,d){return this.body.setOffset(e,d),this},setSize:function(e,d,r){return this.body.setSize(e,d,r),this},setBodySize:function(e,d,r){return this.body.setSize(e,d,r),this},setCircle:function(e,d,r){return this.body.setCircle(e,d,r),this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setVelocity:function(e,d){return this.body.setVelocity(e,d),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,d){return this.body.maxVelocity.set(e,d),this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="collide"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="overlap"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pause"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resume"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="tilecollide"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="tileoverlap"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="worldbounds"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="worldstep"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,e,d,r,o,n,i,s,u,h,l,f,v,c,p,m,y,T=function(L,F,b){t=L,e=F;var B=t.velocity.x,U=e.velocity.x;return d=t.pushable,u=t._dx<0,h=t._dx>0,l=t._dx===0,p=Math.abs(t.right-e.x)<=Math.abs(e.right-t.x),i=U-B*t.bounce.x,r=e.pushable,f=e._dx<0,v=e._dx>0,c=e._dx===0,m=!p,s=B-U*e.bounce.x,y=Math.abs(b),E()},E=function(){return h&&p&&e.blocked.right?(t.processX(-y,i,!1,!0),1):u&&m&&e.blocked.left?(t.processX(y,i,!0),1):v&&m&&t.blocked.right?(e.processX(-y,s,!1,!0),2):f&&p&&t.blocked.left?(e.processX(y,s,!0),2):0},S=function(){var L=t.velocity.x,F=e.velocity.x,b=Math.sqrt(F*F*e.mass/t.mass)*(F>0?1:-1),B=Math.sqrt(L*L*t.mass/e.mass)*(L>0?1:-1),U=(b+B)*.5;return b-=U,B-=U,o=U+b*t.bounce.x,n=U+B*e.bounce.x,u&&m?P(0):f&&p?P(1):h&&p?P(2):v&&m?P(3):!1},P=function(L){if(d&&r)y*=.5,L===0||L===3?(t.processX(y,o),e.processX(-y,n)):(t.processX(-y,o),e.processX(y,n));else if(d&&!r)L===0||L===3?t.processX(y,i,!0):t.processX(-y,i,!1,!0);else if(!d&&r)L===0||L===3?e.processX(-y,s,!1,!0):e.processX(y,s,!0);else{var F=y*.5;L===0?c?(t.processX(y,0,!0),e.processX(0,null,!1,!0)):v?(t.processX(F,0,!0),e.processX(-F,0,!1,!0)):(t.processX(F,e.velocity.x,!0),e.processX(-F,null,!1,!0)):L===1?l?(t.processX(0,null,!1,!0),e.processX(y,0,!0)):h?(t.processX(-F,0,!1,!0),e.processX(F,0,!0)):(t.processX(-F,null,!1,!0),e.processX(F,t.velocity.x,!0)):L===2?c?(t.processX(-y,0,!1,!0),e.processX(0,null,!0)):f?(t.processX(-F,0,!1,!0),e.processX(F,0,!0)):(t.processX(-F,e.velocity.x,!1,!0),e.processX(F,null,!0)):L===3&&(l?(t.processX(0,null,!0),e.processX(-y,0,!1,!0)):u?(t.processX(F,0,!0),e.processX(-F,0,!1,!0)):(t.processX(F,e.velocity.y,!0),e.processX(-F,null,!1,!0)))}return!0},M=function(L){L===1?e.velocity.x=0:p?e.processX(y,s,!0):e.processX(-y,s,!1,!0),t.moves&&(e.y+=(t.y-t.prev.y)*t.friction.y,e._dy=e.y-e.prev.y)},O=function(L){L===2?t.velocity.x=0:m?t.processX(y,i,!0):t.processX(-y,i,!1,!0),e.moves&&(t.y+=(e.y-e.prev.y)*e.friction.y,t._dy=t.y-t.prev.y)};a.exports={BlockCheck:E,Check:S,Set:T,Run:P,RunImmovableBody1:M,RunImmovableBody2:O}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,e,d,r,o,n,i,s,u,h,l,f,v,c,p,m,y,T=function(L,F,b){t=L,e=F;var B=t.velocity.y,U=e.velocity.y;return d=t.pushable,u=t._dy<0,h=t._dy>0,l=t._dy===0,p=Math.abs(t.bottom-e.y)<=Math.abs(e.bottom-t.y),i=U-B*t.bounce.y,r=e.pushable,f=e._dy<0,v=e._dy>0,c=e._dy===0,m=!p,s=B-U*e.bounce.y,y=Math.abs(b),E()},E=function(){return h&&p&&e.blocked.down?(t.processY(-y,i,!1,!0),1):u&&m&&e.blocked.up?(t.processY(y,i,!0),1):v&&m&&t.blocked.down?(e.processY(-y,s,!1,!0),2):f&&p&&t.blocked.up?(e.processY(y,s,!0),2):0},S=function(){var L=t.velocity.y,F=e.velocity.y,b=Math.sqrt(F*F*e.mass/t.mass)*(F>0?1:-1),B=Math.sqrt(L*L*t.mass/e.mass)*(L>0?1:-1),U=(b+B)*.5;return b-=U,B-=U,o=U+b*t.bounce.y,n=U+B*e.bounce.y,u&&m?P(0):f&&p?P(1):h&&p?P(2):v&&m?P(3):!1},P=function(L){if(d&&r)y*=.5,L===0||L===3?(t.processY(y,o),e.processY(-y,n)):(t.processY(-y,o),e.processY(y,n));else if(d&&!r)L===0||L===3?t.processY(y,i,!0):t.processY(-y,i,!1,!0);else if(!d&&r)L===0||L===3?e.processY(-y,s,!1,!0):e.processY(y,s,!0);else{var F=y*.5;L===0?c?(t.processY(y,0,!0),e.processY(0,null,!1,!0)):v?(t.processY(F,0,!0),e.processY(-F,0,!1,!0)):(t.processY(F,e.velocity.y,!0),e.processY(-F,null,!1,!0)):L===1?l?(t.processY(0,null,!1,!0),e.processY(y,0,!0)):h?(t.processY(-F,0,!1,!0),e.processY(F,0,!0)):(t.processY(-F,null,!1,!0),e.processY(F,t.velocity.y,!0)):L===2?c?(t.processY(-y,0,!1,!0),e.processY(0,null,!0)):f?(t.processY(-F,0,!1,!0),e.processY(F,0,!0)):(t.processY(-F,e.velocity.y,!1,!0),e.processY(F,null,!0)):L===3&&(l?(t.processY(0,null,!0),e.processY(-y,0,!1,!0)):u?(t.processY(F,0,!0),e.processY(-F,0,!1,!0)):(t.processY(F,e.velocity.y,!0),e.processY(-F,null,!1,!0)))}return!0},M=function(L){L===1?e.velocity.y=0:p?e.processY(y,s,!0):e.processY(-y,s,!1,!0),t.moves&&(e.x+=(t.x-t.prev.x)*t.friction.x,e._dx=e.x-e.prev.x)},O=function(L){L===2?t.velocity.y=0:m?t.processY(y,i,!0):t.processY(-y,i,!1,!0),e.moves&&(t.x+=(e.x-e.prev.x)*e.friction.x,t._dx=t.x-t.prev.x)};a.exports={BlockCheck:E,Check:S,Set:T,Run:P,RunImmovableBody1:M,RunImmovableBody2:O}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={ProcessTileCallbacks:t(530),ProcessTileSeparationX:t(534),ProcessTileSeparationY:t(536),SeparateTile:t(532),TileCheckX:t(533),TileCheckY:t(535),TileIntersectsBody:t(248)};a.exports=e},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(3),r=new e({initialize:function(){this.boundsCenter=new d,this.centerDiff=new d},parseBody:function(o){if(o=o.hasOwnProperty("body")?o.body:o,!o.hasOwnProperty("bounds")||!o.hasOwnProperty("centerOfMass"))return!1;var n=this.boundsCenter,i=this.centerDiff,s=o.bounds.max.x-o.bounds.min.x,u=o.bounds.max.y-o.bounds.min.y,h=s*o.centerOfMass.x,l=u*o.centerOfMass.y;return n.set(s/2,u/2),i.set(h-n.x,l-n.y),!0},getTopLeft:function(o,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(o)){var s=this.boundsCenter,u=this.centerDiff;return new d(n+s.x+u.x,i+s.y+u.y)}return!1},getTopCenter:function(o,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(o)){var s=this.boundsCenter,u=this.centerDiff;return new d(n+u.x,i+s.y+u.y)}return!1},getTopRight:function(o,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(o)){var s=this.boundsCenter,u=this.centerDiff;return new d(n-(s.x-u.x),i+s.y+u.y)}return!1},getLeftCenter:function(o,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(o)){var s=this.boundsCenter,u=this.centerDiff;return new d(n+s.x+u.x,i+u.y)}return!1},getCenter:function(o,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(o)){var s=this.centerDiff;return new d(n+s.x,i+s.y)}return!1},getRightCenter:function(o,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(o)){var s=this.boundsCenter,u=this.centerDiff;return new d(n-(s.x-u.x),i+u.y)}return!1},getBottomLeft:function(o,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(o)){var s=this.boundsCenter,u=this.centerDiff;return new d(n+s.x+u.x,i-(s.y-u.y))}return!1},getBottomCenter:function(o,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(o)){var s=this.boundsCenter,u=this.centerDiff;return new d(n+u.x,i-(s.y-u.y))}return!1},getBottomRight:function(o,n,i){if(n===void 0&&(n=0),i===void 0&&(i=0),this.parseBody(o)){var s=this.boundsCenter,u=this.centerDiff;return new d(n-(s.x-u.x),i-(s.y-u.y))}return!1}});a.exports=r},function(a,x){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={decomp:L,quickDecomp:U,isSimple:b,removeCollinearPoints:X,removeDuplicatePoints:W,makeCCW:p};function t(N,I,G){G=G||0;var V=[0,0],Y,z,H,$,Q,k,tt;return Y=N[1][1]-N[0][1],z=N[0][0]-N[1][0],H=Y*N[0][0]+z*N[0][1],$=I[1][1]-I[0][1],Q=I[0][0]-I[1][0],k=$*I[0][0]+Q*I[0][1],tt=Y*Q-$*z,Z(tt,0,G)||(V[0]=(Q*H-z*k)/tt,V[1]=(Y*k-$*H)/tt),V}function e(N,I,G,V){var Y=I[0]-N[0],z=I[1]-N[1],H=V[0]-G[0],$=V[1]-G[1];if(H*z-$*Y===0)return!1;var Q=(Y*(G[1]-N[1])+z*(N[0]-G[0]))/(H*z-$*Y),k=(H*(N[1]-G[1])+$*(G[0]-N[0]))/($*Y-H*z);return Q>=0&&Q<=1&&k>=0&&k<=1}function d(N,I,G){return(I[0]-N[0])*(G[1]-N[1])-(G[0]-N[0])*(I[1]-N[1])}function r(N,I,G){return d(N,I,G)>0}function o(N,I,G){return d(N,I,G)>=0}function n(N,I,G){return d(N,I,G)<0}function i(N,I,G){return d(N,I,G)<=0}var s=[],u=[];function h(N,I,G,V){if(V){var Y=s,z=u;Y[0]=I[0]-N[0],Y[1]=I[1]-N[1],z[0]=G[0]-I[0],z[1]=G[1]-I[1];var H=Y[0]*z[0]+Y[1]*z[1],$=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]),Q=Math.sqrt(z[0]*z[0]+z[1]*z[1]),k=Math.acos(H/($*Q));return k<V}else return d(N,I,G)===0}function l(N,I){var G=I[0]-N[0],V=I[1]-N[1];return G*G+V*V}function f(N,I){var G=N.length;return N[I<0?I%G+G:I%G]}function v(N){N.length=0}function c(N,I,G,V){for(var Y=G;Y<V;Y++)N.push(I[Y])}function p(N){for(var I=0,G=N,V=1;V<N.length;++V)(G[V][1]<G[I][1]||G[V][1]===G[I][1]&&G[V][0]>G[I][0])&&(I=V);return r(f(N,I-1),f(N,I),f(N,I+1))?!1:(m(N),!0)}function m(N){for(var I=[],G=N.length,V=0;V!==G;V++)I.push(N.pop());for(var V=0;V!==G;V++)N[V]=I[V]}function y(N,I){return n(f(N,I-1),f(N,I),f(N,I+1))}var T=[],E=[];function S(N,I,G){var V,Y,z=T,H=E;if(o(f(N,I+1),f(N,I),f(N,G))&&i(f(N,I-1),f(N,I),f(N,G)))return!1;Y=l(f(N,I),f(N,G));for(var $=0;$!==N.length;++$)if(!(($+1)%N.length===I||$===I)&&o(f(N,I),f(N,G),f(N,$+1))&&i(f(N,I),f(N,G),f(N,$))&&(z[0]=f(N,I),z[1]=f(N,G),H[0]=f(N,$),H[1]=f(N,$+1),V=t(z,H),l(f(N,I),V)<Y))return!1;return!0}function P(N,I,G){for(var V=0;V!==N.length;++V)if(!(V===I||V===G||(V+1)%N.length===I||(V+1)%N.length===G)&&e(f(N,I),f(N,G),f(N,V),f(N,V+1)))return!1;return!0}function M(N,I,G,V){var Y=V||[];if(v(Y),I<G)for(var z=I;z<=G;z++)Y.push(N[z]);else{for(var z=0;z<=G;z++)Y.push(N[z]);for(var z=I;z<N.length;z++)Y.push(N[z])}return Y}function O(N){for(var I=[],G=[],V=[],Y=[],z=Number.MAX_VALUE,H=0;H<N.length;++H)if(y(N,H)){for(var $=0;$<N.length;++$)if(S(N,H,$)){G=O(M(N,H,$,Y)),V=O(M(N,$,H,Y));for(var Q=0;Q<V.length;Q++)G.push(V[Q]);G.length<z&&(I=G,z=G.length,I.push([f(N,H),f(N,$)]))}}return I}function L(N){var I=O(N);return I.length>0?F(N,I):[N]}function F(N,I){if(I.length===0)return[N];if(I instanceof Array&&I.length&&I[0]instanceof Array&&I[0].length===2&&I[0][0]instanceof Array){for(var G=[N],V=0;V<I.length;V++)for(var Y=I[V],z=0;z<G.length;z++){var H=G[z],$=F(H,Y);if($){G.splice(z,1),G.push($[0],$[1]);break}}return G}else{var Y=I,V=N.indexOf(Y[0]),z=N.indexOf(Y[1]);return V!==-1&&z!==-1?[M(N,V,z),M(N,z,V)]:!1}}function b(N){var I=N,G;for(G=0;G<I.length-1;G++)for(var V=0;V<G-1;V++)if(e(I[G],I[G+1],I[V],I[V+1]))return!1;for(G=1;G<I.length-2;G++)if(e(I[0],I[I.length-1],I[G],I[G+1]))return!1;return!0}function B(N,I,G,V,Y){Y=Y||0;var z=I[1]-N[1],H=N[0]-I[0],$=z*N[0]+H*N[1],Q=V[1]-G[1],k=G[0]-V[0],tt=Q*G[0]+k*G[1],it=z*k-Q*H;return Z(it,0,Y)?[0,0]:[(k*$-H*tt)/it,(z*tt-Q*$)/it]}function U(N,I,G,V,Y,z,H){z=z||100,H=H||0,Y=Y||25,I=typeof I<"u"?I:[],G=G||[],V=V||[];var $=[0,0],Q=[0,0],k=[0,0],tt=0,it=0,st=0,ot=0,rt=0,ut=0,gt=0,mt=[],dt=[],at=N,Rt=N;if(Rt.length<3)return I;if(H++,H>z)return console.warn("quickDecomp: max level ("+z+") reached."),I;for(var ct=0;ct<N.length;++ct)if(y(at,ct)){G.push(at[ct]),tt=it=Number.MAX_VALUE;for(var yt=0;yt<N.length;++yt)r(f(at,ct-1),f(at,ct),f(at,yt))&&i(f(at,ct-1),f(at,ct),f(at,yt-1))&&(k=B(f(at,ct-1),f(at,ct),f(at,yt),f(at,yt-1)),n(f(at,ct+1),f(at,ct),k)&&(st=l(at[ct],k),st<it&&(it=st,Q=k,ut=yt))),r(f(at,ct+1),f(at,ct),f(at,yt+1))&&i(f(at,ct+1),f(at,ct),f(at,yt))&&(k=B(f(at,ct+1),f(at,ct),f(at,yt),f(at,yt+1)),r(f(at,ct-1),f(at,ct),k)&&(st=l(at[ct],k),st<tt&&(tt=st,$=k,rt=yt)));if(ut===(rt+1)%N.length)k[0]=(Q[0]+$[0])/2,k[1]=(Q[1]+$[1])/2,V.push(k),ct<rt?(c(mt,at,ct,rt+1),mt.push(k),dt.push(k),ut!==0&&c(dt,at,ut,at.length),c(dt,at,0,ct+1)):(ct!==0&&c(mt,at,ct,at.length),c(mt,at,0,rt+1),mt.push(k),dt.push(k),c(dt,at,ut,ct+1));else{if(ut>rt&&(rt+=N.length),ot=Number.MAX_VALUE,rt<ut)return I;for(var yt=ut;yt<=rt;++yt)o(f(at,ct-1),f(at,ct),f(at,yt))&&i(f(at,ct+1),f(at,ct),f(at,yt))&&(st=l(f(at,ct),f(at,yt)),st<ot&&P(at,ct,yt)&&(ot=st,gt=yt%N.length));ct<gt?(c(mt,at,ct,gt+1),gt!==0&&c(dt,at,gt,Rt.length),c(dt,at,0,ct+1)):(ct!==0&&c(mt,at,ct,Rt.length),c(mt,at,0,gt+1),c(dt,at,gt,ct+1))}return mt.length<dt.length?(U(mt,I,G,V,Y,z,H),U(dt,I,G,V,Y,z,H)):(U(dt,I,G,V,Y,z,H),U(mt,I,G,V,Y,z,H)),I}return I.push(N),I}function X(N,I){for(var G=0,V=N.length-1;N.length>3&&V>=0;--V)h(f(N,V-1),f(N,V),f(N,V+1),I)&&(N.splice(V%N.length,1),G++);return G}function W(N,I){for(var G=N.length-1;G>=1;--G)for(var V=N[G],Y=G-1;Y>=0;--Y)if(J(V,N[Y],I)){N.splice(G,1);continue}}function Z(N,I,G){return G=G||0,Math.abs(N-I)<=G}function J(N,I,G){return Z(N[0],I[0],G)&&Z(N[1],I[1],G)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),d=t(0),r=t(591),o=t(128),n=t(592),i=t(1395),s=t(1396),u=t(1397),h=t(593),l=t(589),f=t(590),v=t(1398),c=t(64),p=new d({initialize:function(y){this.world=y,this.scene=y.scene,this.sys=y.scene.sys},rectangle:function(m,y,T,E,S){var P=e.rectangle(m,y,T,E,S);return this.world.add(P),P},trapezoid:function(m,y,T,E,S,P){var M=e.trapezoid(m,y,T,E,S,P);return this.world.add(M),M},circle:function(m,y,T,E,S){var P=e.circle(m,y,T,E,S);return this.world.add(P),P},polygon:function(m,y,T,E,S){var P=e.polygon(m,y,T,E,S);return this.world.add(P),P},fromVertices:function(m,y,T,E,S,P,M){typeof T=="string"&&(T=c.fromPath(T));var O=e.fromVertices(m,y,T,E,S,P,M);return this.world.add(O),O},fromPhysicsEditor:function(m,y,T,E,S){S===void 0&&(S=!0);var P=l.parseBody(m,y,T,E);return S&&!this.world.has(P)&&this.world.add(P),P},fromSVG:function(m,y,T,E,S,P){E===void 0&&(E=1),S===void 0&&(S={}),P===void 0&&(P=!0);for(var M=T.getElementsByTagName("path"),O=[],L=0;L<M.length;L++){var F=n.pathToVertices(M[L],30);E!==1&&c.scale(F,E,E),O.push(F)}var b=e.fromVertices(m,y,O,S);return P&&this.world.add(b),b},fromJSON:function(m,y,T,E,S){E===void 0&&(E={}),S===void 0&&(S=!0);var P=f.parseBody(m,y,T,E);return P&&S&&this.world.add(P),P},imageStack:function(m,y,T,E,S,P,M,O,L){M===void 0&&(M=0),O===void 0&&(O=0),L===void 0&&(L={});var F=this.world,b=this.sys.displayList;L.addToWorld=!1;var B=r.stack(T,E,S,P,M,O,function(U,X){var W=new s(F,U,X,m,y,L);return b.add(W),W.body});return F.add(B),B},stack:function(m,y,T,E,S,P,M){var O=r.stack(m,y,T,E,S,P,M);return this.world.add(O),O},pyramid:function(m,y,T,E,S,P,M){var O=r.pyramid(m,y,T,E,S,P,M);return this.world.add(O),O},chain:function(m,y,T,E,S,P){return r.chain(m,y,T,E,S,P)},mesh:function(m,y,T,E,S){return r.mesh(m,y,T,E,S)},newtonsCradle:function(m,y,T,E,S){var P=r.newtonsCradle(m,y,T,E,S);return this.world.add(P),P},car:function(m,y,T,E,S){var P=r.car(m,y,T,E,S);return this.world.add(P),P},softBody:function(m,y,T,E,S,P,M,O,L,F){var b=r.softBody(m,y,T,E,S,P,M,O,L,F);return this.world.add(b),b},joint:function(m,y,T,E,S){return this.constraint(m,y,T,E,S)},spring:function(m,y,T,E,S){return this.constraint(m,y,T,E,S)},constraint:function(m,y,T,E,S){E===void 0&&(E=1),S===void 0&&(S={}),S.bodyA=m.type==="body"?m:m.body,S.bodyB=y.type==="body"?y:y.body,isNaN(T)||(S.length=T),S.stiffness=E;var P=o.create(S);return this.world.add(P),P},worldConstraint:function(m,y,T,E){T===void 0&&(T=1),E===void 0&&(E={}),E.bodyB=m.type==="body"?m:m.body,isNaN(y)||(E.length=y),E.stiffness=T;var S=o.create(E);return this.world.add(S),S},mouseSpring:function(m){return this.pointerConstraint(m)},pointerConstraint:function(m){m===void 0&&(m={}),m.hasOwnProperty("render")||(m.render={visible:!1});var y=new v(this.scene,this.world,m);return this.world.add(y.constraint),y},image:function(m,y,T,E,S){var P=new s(this.world,m,y,T,E,S);return this.sys.displayList.add(P),P},tileBody:function(m,y){return new h(this.world,m,y)},sprite:function(m,y,T,E,S){var P=new u(this.world,m,y,T,E,S);return this.sys.displayList.add(P),this.sys.updateList.add(P),P},gameObject:function(m,y,T){return i(this.world,m,y,T)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});a.exports=p},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(249),d=t(2),r=t(3);function o(i){return!!i.get&&typeof i.get=="function"||!!i.set&&typeof i.set=="function"}var n=function(i,s,u,h){u===void 0&&(u={}),h===void 0&&(h=!0);var l=s.x,f=s.y;s.body={temp:!0,position:{x:l,y:f}};var v=[e.Bounce,e.Collision,e.Force,e.Friction,e.Gravity,e.Mass,e.Sensor,e.SetBody,e.Sleep,e.Static,e.Transform,e.Velocity];if(v.forEach(function(p){for(var m in p)o(p[m])?Object.defineProperty(s,m,{get:p[m].get,set:p[m].set}):Object.defineProperty(s,m,{value:p[m]})}),s.world=i,s._tempVec2=new r(l,f),u.hasOwnProperty("type")&&u.type==="body")s.setExistingBody(u,h);else{var c=d(u,"shape",null);c||(c="rectangle"),u.addToWorld=h,s.setBody(c,u)}return s};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(249),r=t(15),o=t(2),n=t(125),i=t(167),s=t(3),u=new e({Extends:n,Mixins:[d.Bounce,d.Collision,d.Force,d.Friction,d.Gravity,d.Mass,d.Sensor,d.SetBody,d.Sleep,d.Static,d.Transform,d.Velocity,i],initialize:function(l,f,v,c,p,m){r.call(this,l.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(c,p),this.setSizeToFrame(),this.setOrigin(),this.world=l,this._tempVec2=new s(f,v);var y=o(m,"shape",null);y?this.setBody(y,m):this.setRectangle(this.width,this.height,m),this.setPosition(f,v),this.initPipeline()}});a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(164),d=t(0),r=t(249),o=t(15),n=t(2),i=t(167),s=t(73),u=t(3),h=new d({Extends:s,Mixins:[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity,i],initialize:function(f,v,c,p,m,y){o.call(this,f.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new e(this),this.setTexture(p,m),this.setSizeToFrame(),this.setOrigin(),this.world=f,this._tempVec2=new u(v,c);var T=n(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(v,c),this.initPipeline()}});a.exports=h},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(84),d=t(0),r=t(118),o=t(128),n=t(273),i=t(272),s=t(51),u=t(127),h=t(165),l=t(3),f=t(64),v=new d({initialize:function(p,m,y){y===void 0&&(y={});var T={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=p,this.world=m,this.camera=null,this.pointer=null,this.active=!0,this.position=new l,this.body=null,this.part=null,this.constraint=o.create(u(y,T)),this.world.on(i.BEFORE_UPDATE,this.update,this),p.sys.input.on(s.POINTER_DOWN,this.onDown,this),p.sys.input.on(s.POINTER_UP,this.onUp,this)},onDown:function(c){this.pointer||(this.pointer=c,this.camera=c.camera)},onUp:function(c){c===this.pointer&&(this.pointer=null)},getBody:function(c){var p=this.position,m=this.constraint;this.camera.getWorldPoint(c.x,c.y,p);for(var y=r.allBodies(this.world.localWorld),T=0;T<y.length;T++){var E=y[T];if(!E.ignorePointer&&e.contains(E.bounds,p)&&n.canCollide(E.collisionFilter,m.collisionFilter)&&this.hitTestBody(E,p))return this.world.emit(i.DRAG_START,E,this.part,this),!0}return!1},hitTestBody:function(c,p){for(var m=this.constraint,y=c.parts.length,T=y>1?1:0,E=T;E<y;E++){var S=c.parts[E];if(f.contains(S.vertices,p))return m.pointA=p,m.pointB={x:p.x-c.position.x,y:p.y-c.position.y},m.bodyB=c,m.angleB=c.angle,h.set(c,!1),this.part=S,this.body=c,!0}return!1},update:function(){var c=this.pointer,p=this.body;if(!this.active||!c){p&&this.stopDrag();return}if(!c.isDown&&p){this.stopDrag();return}else if(c.isDown){if(!p&&!this.getBody(c))return;p=this.body;var m=this.position,y=this.constraint;this.camera.getWorldPoint(c.x,c.y,m),y.pointA.x=m.x,y.pointA.y=m.y,h.set(p,!1),this.world.emit(i.DRAG,p,this)}},stopDrag:function(){var c=this.body,p=this.constraint;p.bodyB=null,p.pointB=null,this.pointer=null,this.body=null,this.part=null,c&&this.world.emit(i.DRAG_END,c,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(i.BEFORE_UPDATE,this.update),this.scene.sys.input.off(s.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(s.POINTER_UP,this.onUp,this)}});a.exports=v},function(a,x,t){var e={};a.exports=e;var d=t(595),r=t(32);(function(){e.name="matter-js",e.version="0.14.2",e.uses=[],e.used=[],e.use=function(){d.use(e,Array.prototype.slice.call(arguments))},e.before=function(o,n){return o=o.replace(/^Matter./,""),r.chainPathBefore(e,o,n)},e.after=function(o,n){return o=o.replace(/^Matter./,""),r.chainPathAfter(e,o,n)}})()},function(a,x,t){var e={};a.exports=e;var d=t(83),r=t(274),o=t(84),n=t(86),i=t(64);(function(){e.collides=function(s,u){for(var h=[],l=0;l<u.length;l++){var f=u[l];if(s!==f&&o.overlaps(f.bounds,s.bounds))for(var v=f.parts.length===1?0:1;v<f.parts.length;v++){var c=f.parts[v];if(o.overlaps(c.bounds,s.bounds)){var p=r.collides(c,s);if(p.collided){h.push(p);break}}}}return h},e.ray=function(s,u,h,l){l=l||1e-100;for(var f=d.angle(u,h),v=d.magnitude(d.sub(u,h)),c=(h.x+u.x)*.5,p=(h.y+u.y)*.5,m=n.rectangle(c,p,v,l,{angle:f}),y=e.collides(m,s),T=0;T<y.length;T+=1){var E=y[T];E.body=E.bodyB=E.bodyA}return y},e.region=function(s,u,h){for(var l=[],f=0;f<s.length;f++){var v=s[f],c=o.overlaps(v.bounds,u);(c&&!h||!c&&h)&&l.push(v)}return l},e.point=function(s,u){for(var h=[],l=0;l<s.length;l++){var f=s[l];if(o.contains(f.bounds,u))for(var v=f.parts.length===1?0:1;v<f.parts.length;v++){var c=f.parts[v];if(o.contains(c.bounds,u)&&i.contains(c.vertices,u)){h.push(f);break}}}return h}})()},function(a,x,t){var e={};a.exports=e;var d=t(596),r=t(165),o=t(599),n=t(598),i=t(1523),s=t(597),u=t(166),h=t(118),l=t(128),f=t(32),v=t(41);(function(){e.create=function(c,p){p=f.isElement(c)?p:c,c=f.isElement(c)?c:null,p=p||{},(c||p.render)&&f.warn("Engine.create: engine.render is deprecated (see docs)");var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:s}},y=f.extend(m,p);return y.world=p.world||d.create(y.world),y.pairs=n.create(),y.broadphase=y.broadphase.controller.create(y.broadphase),y.metrics=y.metrics||{extended:!1},y.metrics=i.create(y.metrics),y},e.update=function(c,p,m){p=p||1e3/60,m=m||1;var y=c.world,T=c.timing,E=c.broadphase,S=[],P;T.timestamp+=p*T.timeScale;var M={timestamp:T.timestamp};u.trigger(c,"beforeUpdate",M);var O=h.allBodies(y),L=h.allConstraints(y);for(i.reset(c.metrics),c.enableSleeping&&r.update(O,T.timeScale),e._bodiesApplyGravity(O,y.gravity),e._bodiesUpdate(O,p,T.timeScale,m,y.bounds),l.preSolveAll(O),P=0;P<c.constraintIterations;P++)l.solveAll(L,T.timeScale);l.postSolveAll(O),E.controller?(y.isModified&&E.controller.clear(E),E.controller.update(E,O,c,y.isModified),S=E.pairsList):S=O,y.isModified&&h.setModified(y,!1,!1,!0);var F=E.detector(S,c),b=c.pairs,B=T.timestamp;for(n.update(b,F,B),n.removeOld(b,B),c.enableSleeping&&r.afterCollisions(b.list,T.timeScale),b.collisionStart.length>0&&u.trigger(c,"collisionStart",{pairs:b.collisionStart}),o.preSolvePosition(b.list),P=0;P<c.positionIterations;P++)o.solvePosition(b.list,O,T.timeScale);for(o.postSolvePosition(O),l.preSolveAll(O),P=0;P<c.constraintIterations;P++)l.solveAll(L,T.timeScale);for(l.postSolveAll(O),o.preSolveVelocity(b.list),P=0;P<c.velocityIterations;P++)o.solveVelocity(b.list,T.timeScale);return b.collisionActive.length>0&&u.trigger(c,"collisionActive",{pairs:b.collisionActive}),b.collisionEnd.length>0&&u.trigger(c,"collisionEnd",{pairs:b.collisionEnd}),i.update(c.metrics,c),e._bodiesClearForces(O),u.trigger(c,"afterUpdate",M),c},e.merge=function(c,p){if(f.extend(c,p),p.world){c.world=p.world,e.clear(c);for(var m=h.allBodies(c.world),y=0;y<m.length;y++){var T=m[y];r.set(T,!1),T.id=f.nextId()}}},e.clear=function(c){var p=c.world;n.clear(c.pairs);var m=c.broadphase;if(m.controller){var y=h.allBodies(p);m.controller.clear(m),m.controller.update(m,y,c,!0)}},e._bodiesClearForces=function(c){for(var p=0;p<c.length;p++){var m=c[p];m.force.x=0,m.force.y=0,m.torque=0}},e._bodiesApplyGravity=function(c,p){var m=typeof p.scale<"u"?p.scale:.001;if(!(p.x===0&&p.y===0||m===0))for(var y=0;y<c.length;y++){var T=c[y];T.ignoreGravity||T.isStatic||T.isSleeping||(T.force.x+=T.mass*p.x*m*T.gravityScale.x,T.force.y+=T.mass*p.y*m*T.gravityScale.y)}},e._bodiesUpdate=function(c,p,m,y,T){for(var E=0;E<c.length;E++){var S=c[E];S.isStatic||S.isSleeping||v.update(S,p,m,y)}}})()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),d=t(41),r=t(0),o=t(32),n=t(118),i=t(1401),s=t(9),u=t(272),h=t(2),l=t(6),f=t(41),v=t(166),c=t(593),p=t(596),m=t(83),y=new r({Extends:s,initialize:function(E,S){s.call(this),this.scene=E,this.engine=i.create(S),this.localWorld=this.engine.world;var P=l(S,"gravity",null);P?this.setGravity(P.x,P.y,P.scale):P===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=l(S,"enabled",!0),this.correction=l(S,"correction",1),this.getDelta=l(S,"getDelta",this.update60Hz);var M=h(S,"runner",{}),O=h(M,"fps",!1),L=h(M,"fps",60),F=h(M,"delta",1e3/L),b=h(M,"deltaMin",1e3/L),B=h(M,"deltaMax",1e3/(L*.5));O||(L=1e3/F),this.runner={fps:L,correction:h(M,"correction",1),deltaSampleSize:h(M,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:h(M,"isFixed",!1),delta:F,deltaMin:b,deltaMax:B},this.autoUpdate=l(S,"autoUpdate",!0);var U=l(S,"debug",!1);if(this.drawDebug=typeof U=="object"?!0:U,this.debugGraphic,this.debugConfig={showAxes:h(U,"showAxes",!1),showAngleIndicator:h(U,"showAngleIndicator",!1),angleColor:h(U,"angleColor",15208787),showBroadphase:h(U,"showBroadphase",!1),broadphaseColor:h(U,"broadphaseColor",16757760),showBounds:h(U,"showBounds",!1),boundsColor:h(U,"boundsColor",16777215),showVelocity:h(U,"showVelocity",!1),velocityColor:h(U,"velocityColor",44783),showCollisions:h(U,"showCollisions",!1),collisionColor:h(U,"collisionColor",16094476),showSeparations:h(U,"showSeparations",!1),separationColor:h(U,"separationColor",16753920),showBody:h(U,"showBody",!0),showStaticBody:h(U,"showStaticBody",!0),showInternalEdges:h(U,"showInternalEdges",!1),renderFill:h(U,"renderFill",!1),renderLine:h(U,"renderLine",!0),fillColor:h(U,"fillColor",1075465),fillOpacity:h(U,"fillOpacity",1),lineColor:h(U,"lineColor",2678297),lineOpacity:h(U,"lineOpacity",1),lineThickness:h(U,"lineThickness",1),staticFillColor:h(U,"staticFillColor",857979),staticLineColor:h(U,"staticLineColor",1255396),showSleeping:h(U,"showSleeping",!1),staticBodySleepOpacity:h(U,"staticBodySleepOpacity",.7),sleepFillColor:h(U,"sleepFillColor",4605510),sleepLineColor:h(U,"sleepLineColor",10066585),showSensors:h(U,"showSensors",!0),sensorFillColor:h(U,"sensorFillColor",857979),sensorLineColor:h(U,"sensorLineColor",1255396),showPositions:h(U,"showPositions",!0),positionSize:h(U,"positionSize",4),positionColor:h(U,"positionColor",14697178),showJoint:h(U,"showJoint",!0),jointColor:h(U,"jointColor",14737474),jointLineOpacity:h(U,"jointLineOpacity",1),jointLineThickness:h(U,"jointLineThickness",2),pinSize:h(U,"pinSize",4),pinColor:h(U,"pinColor",4382944),springColor:h(U,"springColor",14697184),anchorColor:h(U,"anchorColor",15724527),anchorSize:h(U,"anchorSize",4),showConvexHulls:h(U,"showConvexHulls",!1),hullColor:h(U,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),h(S,"setBounds",!1)){var X=S.setBounds;if(typeof X=="boolean")this.setBounds();else{var W=h(X,"x",0),Z=h(X,"y",0),J=h(X,"width",E.sys.scale.width),N=h(X,"height",E.sys.scale.height),I=h(X,"thickness",64),G=h(X,"left",!0),V=h(X,"right",!0),Y=h(X,"top",!0),z=h(X,"bottom",!0);this.setBounds(W,Z,J,N,I,G,V,Y,z)}}},setCompositeRenderStyle:function(T){var E=T.bodies,S=T.constraints,P=T.composites,M,O,L;for(M=0;M<E.length;M++)O=E[M],L=O.render,this.setBodyRenderStyle(O,L.lineColor,L.lineOpacity,L.lineThickness,L.fillColor,L.fillOpacity);for(M=0;M<S.length;M++)O=S[M],L=O.render,this.setConstraintRenderStyle(O,L.lineColor,L.lineOpacity,L.lineThickness,L.pinSize,L.anchorColor,L.anchorSize);for(M=0;M<P.length;M++)O=P[M],this.setCompositeRenderStyle(O);return this},setBodyRenderStyle:function(T,E,S,P,M,O){var L=T.render,F=this.debugConfig;return L?(E==null&&(E=T.isStatic?F.staticLineColor:F.lineColor),S==null&&(S=F.lineOpacity),P==null&&(P=F.lineThickness),M==null&&(M=T.isStatic?F.staticFillColor:F.fillColor),O==null&&(O=F.fillOpacity),E!==!1&&(L.lineColor=E),S!==!1&&(L.lineOpacity=S),P!==!1&&(L.lineThickness=P),M!==!1&&(L.fillColor=M),O!==!1&&(L.fillOpacity=O),this):this},setConstraintRenderStyle:function(T,E,S,P,M,O,L){var F=T.render,b=this.debugConfig;if(!F)return this;if(E==null){var B=F.type;B==="line"?E=b.jointColor:B==="pin"?E=b.pinColor:B==="spring"&&(E=b.springColor)}return S==null&&(S=b.jointLineOpacity),P==null&&(P=b.jointLineThickness),M==null&&(M=b.pinSize),O==null&&(O=b.anchorColor),L==null&&(L=b.anchorSize),E!==!1&&(F.lineColor=E),S!==!1&&(F.lineOpacity=S),P!==!1&&(F.lineThickness=P),M!==!1&&(F.pinSize=M),O!==!1&&(F.anchorColor=O),L!==!1&&(F.anchorSize=L),this},setEventsProxy:function(){var T=this,E=this.engine,S=this.localWorld;this.drawDebug&&(v.on(S,"compositeModified",function(P){T.setCompositeRenderStyle(P)}),v.on(S,"beforeAdd",function(P){for(var M=[].concat(P.object),O=0;O<M.length;O++){var L=M[O],F=L.render;L.type==="body"?T.setBodyRenderStyle(L,F.lineColor,F.lineOpacity,F.lineThickness,F.fillColor,F.fillOpacity):L.type==="composite"?T.setCompositeRenderStyle(L):L.type==="constraint"&&T.setConstraintRenderStyle(L,F.lineColor,F.lineOpacity,F.lineThickness,F.pinSize,F.anchorColor,F.anchorSize)}})),v.on(S,"beforeAdd",function(P){T.emit(u.BEFORE_ADD,P)}),v.on(S,"afterAdd",function(P){T.emit(u.AFTER_ADD,P)}),v.on(S,"beforeRemove",function(P){T.emit(u.BEFORE_REMOVE,P)}),v.on(S,"afterRemove",function(P){T.emit(u.AFTER_REMOVE,P)}),v.on(E,"beforeUpdate",function(P){T.emit(u.BEFORE_UPDATE,P)}),v.on(E,"afterUpdate",function(P){T.emit(u.AFTER_UPDATE,P)}),v.on(E,"collisionStart",function(P){var M=P.pairs,O,L;M.length>0&&(O=M[0].bodyA,L=M[0].bodyB),T.emit(u.COLLISION_START,P,O,L)}),v.on(E,"collisionActive",function(P){var M=P.pairs,O,L;M.length>0&&(O=M[0].bodyA,L=M[0].bodyB),T.emit(u.COLLISION_ACTIVE,P,O,L)}),v.on(E,"collisionEnd",function(P){var M=P.pairs,O,L;M.length>0&&(O=M[0].bodyA,L=M[0].bodyB),T.emit(u.COLLISION_END,P,O,L)})},setBounds:function(T,E,S,P,M,O,L,F,b){return T===void 0&&(T=0),E===void 0&&(E=0),S===void 0&&(S=this.scene.sys.scale.width),P===void 0&&(P=this.scene.sys.scale.height),M===void 0&&(M=64),O===void 0&&(O=!0),L===void 0&&(L=!0),F===void 0&&(F=!0),b===void 0&&(b=!0),this.updateWall(O,"left",T-M,E-M,M,P+M*2),this.updateWall(L,"right",T+S,E-M,M,P+M*2),this.updateWall(F,"top",T,E-M,S,M),this.updateWall(b,"bottom",T,E+P,S,M),this},updateWall:function(T,E,S,P,M,O){var L=this.walls[E];T?(L&&p.remove(this.localWorld,L),S+=M/2,P+=O/2,this.walls[E]=this.create(S,P,M,O,{isStatic:!0,friction:0,frictionStatic:0})):(L&&p.remove(this.localWorld,L),this.walls[E]=null)},createDebugGraphic:function(){var T=this.scene.sys.add.graphics({x:0,y:0});return T.setDepth(Number.MAX_VALUE),this.debugGraphic=T,this.drawDebug=!0,T},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(T,E,S){return T===void 0&&(T=0),E===void 0&&(E=1),this.localWorld.gravity.x=T,this.localWorld.gravity.y=E,S!==void 0&&(this.localWorld.gravity.scale=S),this},create:function(T,E,S,P,M){var O=e.rectangle(T,E,S,P,M);return p.add(this.localWorld,O),O},add:function(T){return p.add(this.localWorld,T),this},remove:function(T,E){Array.isArray(T)||(T=[T]);for(var S=0;S<T.length;S++){var P=T[S],M=P.body?P.body:P;n.remove(this.localWorld,M,E)}return this},removeConstraint:function(T,E){return n.remove(this.localWorld,T,E),this},convertTilemapLayer:function(T,E){var S=T.layer,P=T.getTilesWithin(0,0,S.width,S.height,{isColliding:!0});return this.convertTiles(P,E),this},convertTiles:function(T,E){if(T.length===0)return this;for(var S=0;S<T.length;S++)new c(this,T[S],E);return this},nextGroup:function(T){return f.nextGroup(T)},nextCategory:function(){return f.nextCategory()},pause:function(){return this.enabled=!1,this.emit(u.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(u.RESUME),this},update:function(T,E){if(!(!this.enabled||!this.autoUpdate)){var S=this.engine,P=this.runner,M=S.timing,O=this.correction;P.isFixed?E=this.getDelta(T,E):(E=T-P.timePrev||P.delta,P.timePrev=T,P.deltaHistory.push(E),P.deltaHistory=P.deltaHistory.slice(-P.deltaSampleSize),E=Math.min.apply(null,P.deltaHistory),E=E<P.deltaMin?P.deltaMin:E,E=E>P.deltaMax?P.deltaMax:E,O=E/P.delta,P.delta=E),P.timeScalePrev!==0&&(O*=M.timeScale/P.timeScalePrev),M.timeScale===0&&(O=0),P.timeScalePrev=M.timeScale,P.correction=O,P.frameCounter+=1,T-P.counterTimestamp>=1e3&&(P.fps=P.frameCounter*((T-P.counterTimestamp)/1e3),P.counterTimestamp=T,P.frameCounter=0),i.update(S,E,O)}},step:function(T,E){i.update(this.engine,T,E)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(T){var E=T.hasOwnProperty("body")?T.body:T;return n.get(this.localWorld,E.id,E.type)!==null},getAllBodies:function(){return n.allBodies(this.localWorld)},getAllConstraints:function(){return n.allConstraints(this.localWorld)},getAllComposites:function(){return n.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var T=this.debugConfig,E=this.engine,S=this.debugGraphic,P=n.allBodies(this.localWorld);this.debugGraphic.clear(),T.showBroadphase&&E.broadphase.controller&&this.renderGrid(E.broadphase,S,T.broadphaseColor,.5),T.showBounds&&this.renderBodyBounds(P,S,T.boundsColor,.5),(T.showBody||T.showStaticBody)&&this.renderBodies(P),T.showJoint&&this.renderJoints(),(T.showAxes||T.showAngleIndicator)&&this.renderBodyAxes(P,S,T.showAxes,T.angleColor,.5),T.showVelocity&&this.renderBodyVelocity(P,S,T.velocityColor,1,2),T.showSeparations&&this.renderSeparations(E.pairs.list,S,T.separationColor),T.showCollisions&&this.renderCollisions(E.pairs.list,S,T.collisionColor)}},renderGrid:function(T,E,S,P){E.lineStyle(1,S,P);for(var M=o.keys(T.buckets),O=0;O<M.length;O++){var L=M[O];if(!(T.buckets[L].length<2)){var F=L.split(/C|R/);E.strokeRect(parseInt(F[1],10)*T.bucketWidth,parseInt(F[2],10)*T.bucketHeight,T.bucketWidth,T.bucketHeight)}}return this},renderSeparations:function(T,E,S){E.lineStyle(1,S,1);for(var P=0;P<T.length;P++){var M=T[P];if(M.isActive){var O=M.collision,L=O.bodyA,F=O.bodyB,b=L.position,B=F.position,U=O.penetration,X=!L.isStatic&&!F.isStatic?4:1;F.isStatic&&(X=0),E.lineBetween(B.x,B.y,B.x-U.x*X,B.y-U.y*X),X=!L.isStatic&&!F.isStatic?4:1,L.isStatic&&(X=0),E.lineBetween(b.x,b.y,b.x-U.x*X,b.y-U.y*X)}}return this},renderCollisions:function(T,E,S){E.lineStyle(1,S,.5),E.fillStyle(S,1);var P,M;for(P=0;P<T.length;P++)if(M=T[P],!!M.isActive)for(var O=0;O<M.activeContacts.length;O++){var L=M.activeContacts[O],F=L.vertex;E.fillRect(F.x-2,F.y-2,5,5)}for(P=0;P<T.length;P++)if(M=T[P],!!M.isActive){var b=M.collision,B=M.activeContacts;if(B.length>0){var U=B[0].vertex.x,X=B[0].vertex.y;B.length===2&&(U=(B[0].vertex.x+B[1].vertex.x)/2,X=(B[0].vertex.y+B[1].vertex.y)/2),b.bodyB===b.supports[0].body||b.bodyA.isStatic?E.lineBetween(U-b.normal.x*8,X-b.normal.y*8,U,X):E.lineBetween(U+b.normal.x*8,X+b.normal.y*8,U,X)}}return this},renderBodyBounds:function(T,E,S,P){E.lineStyle(1,S,P);for(var M=0;M<T.length;M++){var O=T[M];if(O.render.visible){var L=O.bounds;if(L)E.strokeRect(L.min.x,L.min.y,L.max.x-L.min.x,L.max.y-L.min.y);else for(var F=O.parts,b=F.length>1?1:0;b<F.length;b++){var B=F[b];E.strokeRect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}}return this},renderBodyAxes:function(T,E,S,P,M){E.lineStyle(1,P,M);for(var O=0;O<T.length;O++){var L=T[O],F=L.parts;if(L.render.visible){var b,B,U;if(S)for(B=F.length>1?1:0;B<F.length;B++)for(b=F[B],U=0;U<b.axes.length;U++){var X=b.axes[U];E.lineBetween(b.position.x,b.position.y,b.position.x+X.x*20,b.position.y+X.y*20)}else for(B=F.length>1?1:0;B<F.length;B++)for(b=F[B],U=0;U<b.axes.length;U++)E.lineBetween(b.position.x,b.position.y,(b.vertices[0].x+b.vertices[b.vertices.length-1].x)/2,(b.vertices[0].y+b.vertices[b.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(T,E,S,P,M){E.lineStyle(M,S,P);for(var O=0;O<T.length;O++){var L=T[O];L.render.visible&&E.lineBetween(L.position.x,L.position.y,L.position.x+(L.position.x-L.positionPrev.x)*2,L.position.y+(L.position.y-L.positionPrev.y)*2)}return this},renderBodies:function(T){for(var E=this.debugGraphic,S=this.debugConfig,P=S.showBody,M=S.showStaticBody,O=S.showSleeping,L=S.showInternalEdges,F=S.showConvexHulls,b=S.renderFill,B=S.renderLine,U=S.staticBodySleepOpacity,X=S.sleepFillColor,W=S.sleepLineColor,Z=S.hullColor,J=0;J<T.length;J++){var N=T[J];if(N.render.visible&&!(!M&&N.isStatic||!P&&!N.isStatic)){var I=N.render.lineColor,G=N.render.lineOpacity,V=N.render.lineThickness,Y=N.render.fillColor,z=N.render.fillOpacity;O&&N.isSleeping&&(N.isStatic?(G*=U,z*=U):(I=W,Y=X)),b||(Y=null),B||(I=null),this.renderBody(N,E,L,I,G,V,Y,z);var H=N.parts.length;F&&H>1&&this.renderConvexHull(N,E,Z,V)}}},renderBody:function(T,E,S,P,M,O,L,F){P===void 0&&(P=null),M===void 0&&(M=null),O===void 0&&(O=1),L===void 0&&(L=null),F===void 0&&(F=null);for(var b=this.debugConfig,B=b.sensorFillColor,U=b.sensorLineColor,X=T.parts,W=X.length,Z=W>1?1:0;Z<W;Z++){var J=X[Z],N=J.render,I=N.opacity;if(!(!N.visible||I===0||J.isSensor&&!b.showSensors)){var G=J.circleRadius;if(E.beginPath(),J.isSensor?(L!==null&&E.fillStyle(B,F*I),P!==null&&E.lineStyle(O,U,M*I)):(L!==null&&E.fillStyle(L,F*I),P!==null&&E.lineStyle(O,P,M*I)),G)E.arc(J.position.x,J.position.y,G,0,2*Math.PI);else{var V=J.vertices,Y=V.length;E.moveTo(V[0].x,V[0].y);for(var z=1;z<Y;z++){var H=V[z];if(!V[z-1].isInternal||S?E.lineTo(H.x,H.y):E.moveTo(H.x,H.y),z<Y&&H.isInternal&&!S){var $=(z+1)%Y;E.moveTo(V[$].x,V[$].y)}}E.closePath()}L!==null&&E.fillPath(),P!==null&&E.strokePath()}}if(b.showPositions&&!T.isStatic){var Q=T.position.x,k=T.position.y,tt=Math.ceil(b.positionSize/2);E.fillStyle(b.positionColor,1),E.fillRect(Q-tt,k-tt,b.positionSize,b.positionSize)}return this},renderConvexHull:function(T,E,S,P){P===void 0&&(P=1);var M=T.parts,O=M.length;if(O>1){var L=T.vertices;E.lineStyle(P,S),E.beginPath(),E.moveTo(L[0].x,L[0].y);for(var F=1;F<L.length;F++)E.lineTo(L[F].x,L[F].y);E.lineTo(L[0].x,L[0].y),E.strokePath()}return this},renderJoints:function(){for(var T=this.debugGraphic,E=n.allConstraints(this.localWorld),S=0;S<E.length;S++){var P=E[S].render,M=P.lineColor,O=P.lineOpacity,L=P.lineThickness,F=P.pinSize,b=P.anchorColor,B=P.anchorSize;this.renderConstraint(E[S],T,M,O,L,F,b,B)}},renderConstraint:function(T,E,S,P,M,O,L,F){var b=T.render;if(!b.visible||!T.pointA||!T.pointB)return this;E.lineStyle(M,S,P);var B=T.bodyA,U=T.bodyB,X,W;if(B?X=m.add(B.position,T.pointA):X=T.pointA,b.type==="pin")E.strokeCircle(X.x,X.y,O);else{if(U?W=m.add(U.position,T.pointB):W=T.pointB,E.beginPath(),E.moveTo(X.x,X.y),b.type==="spring")for(var Z=m.sub(W,X),J=m.perp(m.normalise(Z)),N=Math.ceil(o.clamp(T.length/5,12,20)),I,G=1;G<N;G+=1)I=G%2===0?1:-1,E.lineTo(X.x+Z.x*(G/N)+J.x*I*4,X.y+Z.y*(G/N)+J.y*I*4);E.lineTo(W.x,W.y)}return E.strokePath(),b.anchors&&F>0&&(E.fillStyle(L),E.fillCircle(X.x,X.y,F),E.fillCircle(W.x,W.y,F)),this},resetCollisionIDs:function(){return d._nextCollidingGroupId=1,d._nextNonCollidingGroupId=-1,d._nextCategory=1,this},shutdown:function(){v.off(this.engine),this.removeAllListeners(),p.clear(this.localWorld,!1),i.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});a.exports=y},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BasePlugin:t(540),DefaultPlugins:t(197),PluginCache:t(24),PluginManager:t(414),ScenePlugin:t(1404)}},function(a,x,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var e=t(540),d=t(0),r=t(20),o=new d({Extends:e,initialize:function(i,s,u){e.call(this,s),this.scene=i,this.systems=i.sys,this.pluginKey=u,i.sys.events.once(r.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Canvas:t(1406),Events:t(91),Snapshot:t(1407),WebGL:t(1408)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CanvasRenderer:t(368),GetBlendModes:t(370),SetTransform:t(30)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Canvas:t(369),WebGL:t(383)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(107),d=t(17),r={PipelineManager:t(372),Pipelines:t(1409),RenderTarget:t(141),Utils:t(12),WebGLPipeline:t(58),WebGLRenderer:t(371),WebGLShader:t(375)};r=d(!1,r,e),a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(92),d=t(17),r={BitmapMaskPipeline:t(373),Events:t(374),GraphicsPipeline:t(376),LightPipeline:t(377),MultiPipeline:t(108),PointLightPipeline:t(378),PostFXPipeline:t(1410),RopePipeline:t(379),SinglePipeline:t(380),UtilityPipeline:t(381)};r=d(!1,r,e),a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(198),r=t(2),o=t(1411),n=t(382),i=t(58),s=new e({Extends:i,initialize:function(h){h.renderTarget=r(h,"renderTarget",1),h.fragShader=r(h,"fragShader",o),h.vertShader=r(h,"vertShader",n),h.attributes=r(h,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),h.batchSize=1,h.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],i.call(this,h),this.isPostFX=!0,this.gameObject,this.colorMatrix=new d,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){i.prototype.boot.call(this);var u=this.manager.UTILITY_PIPELINE;this.fullFrame1=u.fullFrame1,this.fullFrame2=u.fullFrame2,this.halfFrame1=u.halfFrame1,this.halfFrame2=u.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(u){this.bindAndDraw(u)},copyFrame:function(u,h,l,f,v){this.manager.copyFrame(u,h,l,f,v)},copyToGame:function(u){this.manager.copyToGame(u)},drawFrame:function(u,h,l){this.manager.drawFrame(u,h,l,this.colorMatrix)},blendFrames:function(u,h,l,f,v){this.manager.blendFrames(u,h,l,f,v)},blendFramesAdditive:function(u,h,l,f,v){this.manager.blendFramesAdditive(u,h,l,f,v)},clearFrame:function(u,h){this.manager.clearFrame(u,h)},blitFrame:function(u,h,l,f,v,c){this.manager.blitFrame(u,h,l,f,v,c)},copyFrameRect:function(u,h,l,f,v,c,p,m){this.manager.copyFrameRect(u,h,l,f,v,c,p,m)},bindAndDraw:function(u,h,l,f,v){l===void 0&&(l=!0),f===void 0&&(f=!0);var c=this.gl,p=this.renderer;this.bind(v),this.set1i("uMainSampler",0),h?(c.viewport(0,0,h.width,h.height),c.bindFramebuffer(c.FRAMEBUFFER,h.framebuffer),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,h.texture,0),l&&(f?c.clearColor(0,0,0,0):c.clearColor(0,0,0,1),c.clear(c.COLOR_BUFFER_BIT))):(p.popFramebuffer(!1,!1,!1),p.currentFramebuffer||c.viewport(0,0,p.width,p.height)),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.texture),c.bufferData(c.ARRAY_BUFFER,this.vertexData,c.STATIC_DRAW),c.drawArrays(c.TRIANGLES,0,6),h?(c.bindTexture(c.TEXTURE_2D,null),c.bindFramebuffer(c.FRAMEBUFFER,null)):p.resetTextures()}});a.exports=s},function(a,x){a.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),d=t(201),r={Center:t(403),Events:t(104),Orientation:t(404),ScaleManager:t(415),ScaleModes:t(405),Zoom:t(406)};r=e(!1,r,d.CENTER),r=e(!1,r,d.ORIENTATION),r=e(!1,r,d.SCALE_MODE),r=e(!1,r,d.ZOOM),a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(144),d=t(17),r={Events:t(20),GetPhysicsPlugins:t(419),GetScenePlugins:t(420),SceneManager:t(417),ScenePlugin:t(1414),Settings:t(421),Systems:t(204)};r=d(!1,r,e),a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),d=t(0),r=t(20),o=t(2),n=t(24),i=new d({initialize:function(u){this.scene=u,this.systems=u.sys,this.settings=u.sys.settings,this.key=u.sys.settings.key,this.manager=u.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,u.sys.events.once(r.BOOT,this.boot,this),u.sys.events.on(r.START,this.pluginStart,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},start:function(s,u){return s===void 0&&(s=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",s,u),this},restart:function(s){var u=this.key;return this.manager.queueOp("stop",u),this.manager.queueOp("start",u,s),this},transition:function(s){s===void 0&&(s={});var u=o(s,"target",!1),h=this.manager.getScene(u);if(!u||!this.checkValidTransition(h))return!1;var l=o(s,"duration",1e3);this._elapsed=0,this._target=h,this._duration=l,this._willSleep=o(s,"sleep",!1),this._willRemove=o(s,"remove",!1);var f=o(s,"onUpdate",null);f&&(this._onUpdate=f,this._onUpdateScope=o(s,"onUpdateScope",this.scene));var v=o(s,"allowInput",!1);this.settings.transitionAllowInput=v;var c=h.sys.settings;return c.isTransition=!0,c.transitionFrom=this.scene,c.transitionDuration=l,c.transitionAllowInput=v,o(s,"moveAbove",!1)?this.manager.moveAbove(this.key,u):o(s,"moveBelow",!1)&&this.manager.moveBelow(this.key,u),h.sys.isSleeping()?h.sys.wake(o(s,"data")):this.manager.start(u,o(s,"data")),this.systems.events.emit(r.TRANSITION_OUT,h,l),this.systems.events.on(r.UPDATE,this.step,this),!0},checkValidTransition:function(s){return!(!s||s.sys.isActive()||s.sys.isTransitioning()||s===this.scene||this.systems.isTransitioning())},step:function(s,u){this._elapsed+=u,this.transitionProgress=e(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var s=this._target.sys,u=this._target.sys.settings;this.systems.events.off(r.UPDATE,this.step,this),s.events.emit(r.TRANSITION_COMPLETE,this.scene),u.isTransition=!1,u.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(s,u,h,l){return this.manager.add(s,u,h,l)},launch:function(s,u){return s&&s!==this.key&&this.manager.queueOp("start",s,u),this},run:function(s,u){return s&&s!==this.key&&this.manager.queueOp("run",s,u),this},pause:function(s,u){return s===void 0&&(s=this.key),this.manager.queueOp("pause",s,u),this},resume:function(s,u){return s===void 0&&(s=this.key),this.manager.queueOp("resume",s,u),this},sleep:function(s,u){return s===void 0&&(s=this.key),this.manager.queueOp("sleep",s,u),this},wake:function(s,u){return s===void 0&&(s=this.key),this.manager.queueOp("wake",s,u),this},switch:function(s){return s!==this.key&&this.manager.queueOp("switch",this.key,s),this},stop:function(s,u){return s===void 0&&(s=this.key),this.manager.queueOp("stop",s,u),this},setActive:function(s,u,h){u===void 0&&(u=this.key);var l=this.manager.getScene(u);return l&&l.sys.setActive(s,h),this},setVisible:function(s,u){u===void 0&&(u=this.key);var h=this.manager.getScene(u);return h&&h.sys.setVisible(s),this},isSleeping:function(s){return s===void 0&&(s=this.key),this.manager.isSleeping(s)},isActive:function(s){return s===void 0&&(s=this.key),this.manager.isActive(s)},isPaused:function(s){return s===void 0&&(s=this.key),this.manager.isPaused(s)},isVisible:function(s){return s===void 0&&(s=this.key),this.manager.isVisible(s)},swapPosition:function(s,u){return u===void 0&&(u=this.key),s!==u&&this.manager.swapPosition(s,u),this},moveAbove:function(s,u){return u===void 0&&(u=this.key),s!==u&&this.manager.moveAbove(s,u),this},moveBelow:function(s,u){return u===void 0&&(u=this.key),s!==u&&this.manager.moveBelow(s,u),this},remove:function(s){return s===void 0&&(s=this.key),this.manager.remove(s),this},moveUp:function(s){return s===void 0&&(s=this.key),this.manager.moveUp(s),this},moveDown:function(s){return s===void 0&&(s=this.key),this.manager.moveDown(s),this},bringToTop:function(s){return s===void 0&&(s=this.key),this.manager.bringToTop(s),this},sendToBack:function(s){return s===void 0&&(s=this.key),this.manager.sendToBack(s),this},get:function(s){return this.manager.getScene(s)},getIndex:function(s){return s===void 0&&(s=this.key),this.manager.getIndex(s)},shutdown:function(){var s=this.systems.events;s.off(r.SHUTDOWN,this.shutdown,this),s.off(r.POST_UPDATE,this.step,this),s.off(r.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});n.register("ScenePlugin",i,"scenePlugin"),a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Events:t(438),List:t(110),Map:t(102),ProcessQueue:t(211),RTree:t(531),Set:t(149),Size:t(416)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),d=t(1417),r={CanvasTexture:t(423),Events:t(106),FilterMode:d,Frame:t(109),Parsers:t(425),Texture:t(206),TextureManager:t(422),TextureSource:t(424)};r=e(!1,r,d),a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LINEAR:0,NEAREST:1};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),d=t(1419),r={Components:t(251),Parsers:t(1452),Formats:t(40),ImageCollection:t(576),ParseToTilemap:t(262),Tile:t(85),Tilemap:t(580),TilemapCreator:t(1459),TilemapFactory:t(1460),Tileset:t(122),TilemapLayer:t(581),Orientation:t(29),LayerData:t(120),MapData:t(121),ObjectLayer:t(572)};r=e(!1,r,d.ORIENTATION),a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={ORIENTATION:t(29)};a.exports=e},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=t(63),r=function(o,n,i,s,u,h,l,f){l===void 0&&(l=!0),o<0&&(o=0),n<0&&(n=0);for(var v=e(o,n,i,s,null,f),c=u-o,p=h-n,m=0;m<v.length;m++){var y=v[m].x+c,T=v[m].y+p;y>=0&&y<f.width&&T>=0&&T<f.height&&f.data[T][y]&&f.data[T][y].copy(v[m])}l&&d(u-1,h-1,i+2,s+2,f)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=t(542),r=function(o,n,i,s,u,h){i||(i={}),Array.isArray(o)||(o=[o]);var l=h.tilemapLayer;s||(s=l.scene),u||(u=s.cameras.main);var f=e(0,0,h.width,h.height,null,h),v=[],c;for(c=0;c<f.length;c++){var p=f[c];if(o.indexOf(p.index)!==-1){var m=l.tileToWorldXY(p.x,p.y,void 0,u,h);i.x=m.x,i.y=m.y,v.push(s.make.sprite(i))}}if(typeof n=="number")for(c=0;c<o.length;c++)d(o[c],n,0,0,h.width,h.height,h);else if(Array.isArray(n))for(c=0;c<o.length;c++)d(o[c],n[c],0,0,h.width,h.height,h);return v};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=t(63),r=t(72),o=function(n,i,s,u,h,l,f){for(var v=f.collideIndexes.indexOf(n)!==-1,c=e(i,s,u,h,null,f),p=0;p<c.length;p++)c[p].index=n,r(c[p],v);l&&d(i-1,s-1,u+2,h+2,f)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=function(r,o,n,i,s,u,h,l){var f=e(n,i,s,u,h,l);return f.filter(r,o)};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){d===void 0&&(d=0),r===void 0&&(r=!1);var n=0,i,s,u;if(r){for(s=o.height-1;s>=0;s--)for(i=o.width-1;i>=0;i--)if(u=o.data[s][i],u&&u.index===e){if(n===d)return u;n+=1}}else for(s=0;s<o.height;s++)for(i=0;i<o.width;i++)if(u=o.data[s][i],u&&u.index===e){if(n===d)return u;n+=1}return null};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=function(r,o,n,i,s,u,h,l){var f=e(n,i,s,u,h,l);return f.find(r,o)||null};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=function(r,o,n,i,s,u,h,l){var f=e(n,i,s,u,h,l);f.forEach(r,o)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),d=t(544),r=t(545),o=t(547),n=t(1),i=t(548),s=function(u){return u===e.ORTHOGONAL?d:u===e.HEXAGONAL?r:u===e.STAGGERED?i:u===e.ISOMETRIC?o:n};a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(158),d=t(3),r=new d,o=function(n,i,s,u,h){return h.tilemapLayer.worldToTileXY(n,i,!0,r,u),e(r.x,r.y,s,h)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(483),d=t(26),r=t(484),o=t(1),n=t(3),i=function(f,v){return r.RectangleToTriangle(v,f)},s=new n,u=new n,h=new n,l=function(f,v,c,p){if(f===void 0)return[];var m=o;f instanceof e.Circle?m=r.CircleToRectangle:f instanceof e.Rectangle?m=r.RectangleToRectangle:f instanceof e.Triangle?m=i:f instanceof e.Line&&(m=r.LineToRectangle),p.tilemapLayer.worldToTileXY(f.left,f.top,!0,u,c);var y=u.x,T=u.y;p.tilemapLayer.worldToTileXY(f.right,f.bottom,!0,h,c);var E=Math.ceil(h.x),S=Math.ceil(h.y),P=Math.max(E-y,1),M=Math.max(S-T,1),O=d(y,T,P,M,v,p),L=p.tileWidth,F=p.tileHeight;p.tilemapLayer&&(L*=p.tilemapLayer.scaleX,F*=p.tilemapLayer.scaleY);for(var b=[],B=new e.Rectangle(0,0,L,F),U=0;U<O.length;U++){var X=O[U];p.tilemapLayer.tileToWorldXY(X.x,X.y,s,c),B.x=s.x,B.y=s.y,m(f,B)&&b.push(X)}return b};a.exports=l},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),d=t(1),r=t(253),o=function(n){return n===e.ORTHOGONAL?r:d};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),d=t(550),r=t(551),o=t(1),n=t(552),i=t(553),s=function(u){return u===e.ORTHOGONAL?i:u===e.ISOMETRIC?r:u===e.HEXAGONAL?d:u===e.STAGGERED?n:o};a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),d=t(554),r=t(1),o=t(555),n=t(254),i=function(s){return s===e.ORTHOGONAL?n:s===e.HEXAGONAL?d:s===e.STAGGERED?o:r};a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),d=t(1),r=t(255),o=function(n){return n===e.ORTHOGONAL?r:d};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),d=t(556),r=t(557),o=t(1),n=t(558),i=t(559),s=function(u){return u===e.ORTHOGONAL?i:u===e.ISOMETRIC?r:u===e.HEXAGONAL?d:u===e.STAGGERED?n:o};a.exports=s},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),d=t(560),r=t(1),o=t(561),n=t(256),i=function(s){return s===e.ORTHOGONAL?n:s===e.HEXAGONAL?d:s===e.STAGGERED?o:r};a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(562),d=t(3),r=new d,o=function(n,i,s,u){u.tilemapLayer.worldToTileXY(n,i,!0,r,s);var h=r.x,l=r.y;return e(h,l,u)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(257),d=t(3),r=new d,o=function(n,i,s,u,h,l){return l.tilemapLayer.worldToTileXY(i,s,!0,r,h,l),e(n,r.x,r.y,u,l)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(63),d=t(257),r=function(o,n,i,s,u){if(s===void 0&&(s=!0),!Array.isArray(o))return null;Array.isArray(o[0])||(o=[o]);for(var h=o.length,l=o[0].length,f=0;f<h;f++)for(var v=0;v<l;v++){var c=o[f][v];d(c,n+v,i+f,!1,u)}s&&e(n-1,i-1,l+2,h+2,u)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=t(210),r=function(o,n,i,s,u,h){var l,f=e(o,n,i,s,{},h);if(!u)for(u=[],l=0;l<f.length;l++)u.indexOf(f[l].index)===-1&&u.push(f[l].index);for(l=0;l<f.length;l++)f[l].index=d(u)};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(563),d=t(3),r=new d,o=function(n,i,s,u,h,l){return l.tilemapLayer.worldToTileXY(n,i,!0,r,h,l),e(r.x,r.y,s,u,l)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=t(397),r=new d(105,210,231,150),o=new d(243,134,48,200),n=new d(40,39,37,150),i=function(s,u,h){u===void 0&&(u={});var l=u.tileColor!==void 0?u.tileColor:r,f=u.collidingTileColor!==void 0?u.collidingTileColor:o,v=u.faceColor!==void 0?u.faceColor:n,c=e(0,0,h.width,h.height,null,h);s.translateCanvas(h.tilemapLayer.x,h.tilemapLayer.y),s.scaleCanvas(h.tilemapLayer.scaleX,h.tilemapLayer.scaleY);for(var p=0;p<c.length;p++){var m=c[p],y=m.width,T=m.height,E=m.pixelX,S=m.pixelY,P=m.collides?f:l;P!==null&&(s.fillStyle(P.color,P.alpha/255),s.fillRect(E,S,y,T)),E+=1,S+=1,y-=2,T-=2,v!==null&&(s.lineStyle(1,v.color,v.alpha/255),m.faceTop&&s.lineBetween(E,S,E+y,S),m.faceRight&&s.lineBetween(E+y,S,E+y,S+T),m.faceBottom&&s.lineBetween(E,S+T,E+y,S+T),m.faceLeft&&s.lineBetween(E,S,E,S+T))}};a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),d=t(63),r=t(160),o=function(n,i,s,u,h){i===void 0&&(i=!0),s===void 0&&(s=!0),h===void 0&&(h=!0),Array.isArray(n)||(n=[n]);for(var l=0;l<n.length;l++)r(n[l],i,u);if(h)for(var f=0;f<u.height;f++)for(var v=0;v<u.width;v++){var c=u.data[f][v];c&&n.indexOf(c.index)!==-1&&e(c,i)}s&&d(0,0,u.width,u.height,u)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),d=t(63),r=t(160),o=function(n,i,s,u,h,l){if(s===void 0&&(s=!0),u===void 0&&(u=!0),l===void 0&&(l=!0),!(n>i)){for(var f=n;f<=i;f++)r(f,s,h);if(l)for(var v=0;v<h.height;v++)for(var c=0;c<h.width;c++){var p=h.data[v][c];p&&p.index>=n&&p.index<=i&&e(p,s)}u&&d(0,0,h.width,h.height,h)}};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),d=t(63),r=t(160),o=function(n,i,s,u){i===void 0&&(i=!0),s===void 0&&(s=!0),Array.isArray(n)||(n=[n]);for(var h=0;h<u.height;h++)for(var l=0;l<u.width;l++){var f=u.data[h][l];f&&n.indexOf(f.index)===-1&&(e(f,i),r(f.index,i,u))}s&&d(0,0,u.width,u.height,u)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),d=t(63),r=t(126),o=function(n,i,s,u){i===void 0&&(i=!0),s===void 0&&(s=!0);for(var h=0;h<u.height;h++)for(var l=0;l<u.width;l++){var f=u.data[h][l];if(f){for(var v in n)if(r(f.properties,v)){var c=n[v];Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++)f.properties[v]===c[p]&&e(f,i)}}}s&&d(0,0,u.width,u.height,u)};a.exports=o},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),d=t(63),r=function(o,n,i){o===void 0&&(o=!0),n===void 0&&(n=!0);for(var s=0;s<i.height;s++)for(var u=0;u<i.width;u++){var h=i.data[s][u];if(h){var l=h.getCollisionGroup();l&&l.objects&&l.objects.length>0&&e(h,o)}}n&&d(0,0,i.width,i.height,i)};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d,r,o){if(typeof e=="number")o.callbacks[e]=d!==null?{callback:d,callbackContext:r}:void 0;else for(var n=0,i=e.length;n<i;n++)o.callbacks[e[n]]=d!==null?{callback:d,callbackContext:r}:void 0};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=function(r,o,n,i,s,u,h){for(var l=e(r,o,n,i,null,h),f=0;f<l.length;f++)l[f].setCollisionCallback(s,u)};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=t(131),r=function(o,n,i,s,u){var h=e(o,n,i,s,null,u),l=h.map(function(v){return v.index});d(l);for(var f=0;f<h.length;f++)h[f].index=l[f]};a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=function(r,o,n,i,s,u,h){for(var l=e(n,i,s,u,null,h),f=0;f<l.length;f++)l[f]&&(l[f].index===r?l[f].index=o:l[f].index===o&&(l[f].index=r))};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),d=function(r,o,n,i,s,u){if(s){var h,l=e(r,o,n,i,null,u),f=0;for(h=0;h<s.length;h++)f+=s[h].weight;if(!(f<=0))for(h=0;h<l.length;h++){for(var v=Math.random()*f,c=0,p=-1,m=0;m<s.length;m++)if(c+=s[m].weight,v<=c){var y=s[m].index;p=Array.isArray(y)?y[Math.floor(Math.random()*y.length)]:y;break}l[h].index=p}}};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={FromOrientationString:t(258),Parse:t(564),Parse2DArray:t(259),ParseCSV:t(565),Impact:t(1454),Tiled:t(1455)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){for(var r=0;r<e.length;r++){var o=e[r],n=r;if(o.name&&o.name!==""&&(n=o.name),Array.isArray(o.wangtiles)&&o.wangtiles.length>0){var i={},s={},u,h,l;if(Array.isArray(o.edgecolors))for(u=0;u<o.edgecolors.length;u++)l=1+u,h=o.edgecolors[u],h.name!==""&&(i[l]=h.name);if(Array.isArray(o.cornercolors))for(u=0;u<o.cornercolors.length;u++)l=1+u,h=o.cornercolors[u],h.name!==""&&(s[l]=h.name);if(Array.isArray(o.colors))for(u=0;u<o.colors.length;u++)h=o.colors[u],l=1+u,h.name!==""&&(i[l]=s[l]=h.name);for(var f=[i,s,i,s,i,s,i,s],v=0;v<o.wangtiles.length;v++){var c=o.wangtiles[v],p=d[c.tileid]||(d[c.tileid]={});p=p.wangid||(p.wangid={});for(var m=[],y=0;y<Math.min(f.length,c.wangid.length);y++){if(h=c.wangid[y],h===0){m.push(void 0);continue}var T=f[y][h];if(T!==void 0){m.push(T);continue}m.push(h)}p[n]=m}}}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ParseTileLayers:t(578),ParseTilesets:t(579),ParseWeltmeister:t(577)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AssignTileProperties:t(567),Base64Decode:t(574),BuildTilesetIndex:t(568),CreateGroupLayer:t(161),ParseGID:t(261),ParseImageLayers:t(569),ParseJSONTiled:t(566),ParseObject:t(260),ParseObjectLayers:t(570),ParseTileLayers:t(573),ParseTilesets:t(575)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),d=t(1);e=t(1457),d=t(1458),a.exports={renderWebGL:e,renderCanvas:d}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),d=function(r,o,n){var i=o.cull(n),s=i.length,u=n.alpha*o.alpha;if(!(s===0||u<=0)){var h=o.gidMap,l=r.pipelines.set(o.pipeline,o),f=e.getTintAppendFloatAlpha,v=o.scrollFactorX,c=o.scrollFactorY,p=o.x,m=o.y,y=o.scaleX,T=o.scaleY;r.pipelines.preBatch(o);for(var E=0;E<s;E++){var S=i[E],P=h[S.index];if(P){var M=P.getTileTextureCoordinates(S.index);if(M!==null){var O=P.glTexture,L=l.setTexture2D(O,o),F=P.tileWidth,b=P.tileHeight,B=M.x,U=M.y,X=P.tileWidth*.5,W=P.tileHeight*.5,Z=f(S.tint,u*S.alpha);l.batchTexture(o,O,O.width,O.height,p+(X+S.pixelX)*y,m+(W+S.pixelY)*T,S.width,S.height,y,T,S.rotation,S.flipX,S.flipY,v,c,X,W,B,U,F,b,Z,Z,Z,Z,!1,0,0,n,null,!0,L)}}}r.pipelines.postBatch(o)}};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),d=new e,r=new e,o=new e,n=function(i,s,u,h){var l=s.cull(u),f=l.length,v=u.alpha*s.alpha;if(!(f===0||v<=0)){var c=d,p=r,m=o;p.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),c.copyFrom(u.matrix);var y=i.currentContext,T=s.gidMap;y.save(),h?(c.multiplyWithOffset(h,-u.scrollX*s.scrollFactorX,-u.scrollY*s.scrollFactorY),p.e=s.x,p.f=s.y,c.multiply(p,m),m.copyToContext(y)):(p.e-=u.scrollX*s.scrollFactorX,p.f-=u.scrollY*s.scrollFactorY,p.copyToContext(y)),(!i.antialias||s.scaleX>1||s.scaleY>1)&&(y.imageSmoothingEnabled=!1);for(var E=0;E<f;E++){var S=l[E],P=T[S.index];if(P){var M=P.image.getSourceImage(),O=P.getTileTextureCoordinates(S.index);if(O!==null){var L=P.tileWidth,F=P.tileHeight,b=L*.5,B=F*.5;y.save(),y.translate(S.pixelX+b,S.pixelY+B),S.rotation!==0&&y.rotate(S.rotation),(S.flipX||S.flipY)&&y.scale(S.flipX?-1:1,S.flipY?-1:1),y.globalAlpha=v*S.alpha,y.drawImage(M,O.x,O.y,L,F,-b,-B,L,F),y.restore()}}}y.restore()}};a.exports=n},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),d=t(262);e.register("tilemap",function(r){var o=r!==void 0?r:{};return d(this.scene,o.key,o.tileWidth,o.tileHeight,o.width,o.height,o.data,o.insertNull)})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),d=t(262);e.register("tilemap",function(r,o,n,i,s,u,h){return r===null&&(r=void 0),o===null&&(o=void 0),n===null&&(n=void 0),i===null&&(i=void 0),s===null&&(s=void 0),d(this.scene,r,o,n,i,s,u,h)})},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Clock:t(1462),TimerEvent:t(582)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),d=t(24),r=t(20),o=t(582),n=t(93),i=new e({initialize:function(u){this.scene=u,this.systems=u.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],u.sys.events.once(r.BOOT,this.boot,this),u.sys.events.on(r.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var s=this.systems.events;s.on(r.PRE_UPDATE,this.preUpdate,this),s.on(r.UPDATE,this.update,this),s.once(r.SHUTDOWN,this.shutdown,this)},addEvent:function(s){var u;return s instanceof o?(u=s,this.removeEvent(u),u.elapsed=u.startAt,u.hasDispatched=!1,u.repeatCount=u.repeat===-1||u.loop?999999999999:u.repeat):u=new o(s),this._pendingInsertion.push(u),u},delayedCall:function(s,u,h,l){return this.addEvent({delay:s,callback:u,args:h,callbackScope:l})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(s){Array.isArray(s)||(s=[s]);for(var u=0;u<s.length;u++){var h=s[u];n(this._pendingRemoval,h),n(this._pendingInsertion,h),n(this._active,h)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var s=this._pendingRemoval.length,u=this._pendingInsertion.length;if(!(s===0&&u===0)){var h,l;for(h=0;h<s;h++){l=this._pendingRemoval[h];var f=this._active.indexOf(l);f>-1&&this._active.splice(f,1),l.destroy()}for(h=0;h<u;h++)l=this._pendingInsertion[h],this._active.push(l);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(s,u){if(this.now=s,!this.paused){u*=this.timeScale;for(var h=0;h<this._active.length;h++){var l=this._active[h];if(!l.paused&&(l.elapsed+=u*l.timeScale,l.elapsed>=l.delay)){var f=l.elapsed-l.delay;l.elapsed=l.delay,!l.hasDispatched&&l.callback&&(l.hasDispatched=!0,l.callback.apply(l.callbackScope,l.args)),l.repeatCount>0?(l.repeatCount--,l.elapsed=f,l.hasDispatched=!1):this._pendingRemoval.push(l)}}}},shutdown:function(){var s;for(s=0;s<this._pendingInsertion.length;s++)this._pendingInsertion[s].destroy();for(s=0;s<this._active.length;s++)this._active[s].destroy();for(s=0;s<this._pendingRemoval.length;s++)this._pendingRemoval[s].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var u=this.systems.events;u.off(r.PRE_UPDATE,this.preUpdate,this),u.off(r.UPDATE,this.update,this),u.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});d.register("Clock",i,"time"),a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(100),d=t(17),r={Builders:t(1464),Events:t(267),TweenManager:t(1480),Tween:t(266),TweenData:t(268),Timeline:t(588)};r=d(!1,r,e),a.exports=r},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={GetBoolean:t(99),GetEaseFunction:t(80),GetNewValue:t(162),GetProps:t(583),GetTargets:t(263),GetTweens:t(584),GetValueOp:t(264),NumberTweenBuilder:t(585),StaggerBuilder:t(586),TimelineBuilder:t(587),TweenBuilder:t(163)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="complete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="loop"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pause"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resume"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="start"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="update"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="active"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="complete"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="loop"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="repeat"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="start"},function(a,x){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="stop"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="update"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="yoyo"},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(93),d=t(0),r=t(585),o=t(24),n=t(20),i=t(586),s=t(587),u=t(100),h=t(163),l=new d({initialize:function(v){this.scene=v,this.systems=v.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,v.sys.events.once(n.BOOT,this.boot,this),v.sys.events.on(n.START,this.start,this)},boot:function(){this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){var f=this.systems.events;f.on(n.PRE_UPDATE,this.preUpdate,this),f.on(n.UPDATE,this.update,this),f.once(n.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(f){return s(this,f)},timeline:function(f){var v=s(this,f);return v.paused||(this._add.push(v),this._toProcess++),v},create:function(f){return h(this,f)},add:function(f){var v=h(this,f);return this._add.push(v),this._toProcess++,v},existing:function(f){return this._add.push(f),this._toProcess++,this},addCounter:function(f){var v=r(this,f);return this._add.push(v),this._toProcess++,v},stagger:function(f,v){return i(f,v)},preUpdate:function(){if(this._toProcess!==0){var f=this._destroy,v=this._active,c=this._pending,p,m;for(p=0;p<f.length;p++){m=f[p];var y=v.indexOf(m);y===-1?(y=c.indexOf(m),y>-1&&(m.state=u.REMOVED,c.splice(y,1))):(m.state=u.REMOVED,v.splice(y,1))}for(f.length=0,f=this._add,p=0;p<f.length;p++)m=f[p],m.state===u.PENDING_ADD&&(m.init()?(m.play(),this._active.push(m)):this._pending.push(m));f.length=0,this._toProcess=0}},update:function(f,v){var c=this._active,p;v*=this.timeScale;for(var m=0;m<c.length;m++)p=c[m],p.update(f,v)&&(this._destroy.push(p),this._toProcess++)},remove:function(f){return e(this._add,f),e(this._pending,f),e(this._active,f),e(this._destroy,f),f.state=u.REMOVED,this},makeActive:function(f){if(this._add.indexOf(f)!==-1||this._active.indexOf(f)!==-1)return this;var v=this._pending.indexOf(f);return v!==-1&&this._pending.splice(v,1),this._add.push(f),f.state=u.PENDING_ADD,this._toProcess++,this},each:function(f,v){for(var c=[null],p=1;p<arguments.length;p++)c.push(arguments[p]);for(var m in this.list)c[0]=this.list[m],f.apply(v,c)},getAllTweens:function(){for(var f=this._active,v=[],c=0;c<f.length;c++)v.push(f[c]);return v},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(f,v){v===void 0&&(v=!1);var c=this._active,p,m=[],y,T;for(Array.isArray(f)||(f=[f]),y=0;y<c.length;y++)for(p=c[y],T=0;T<f.length;T++)p.hasTarget(f[T])&&m.push(p);if(v)for(c=this._pending,y=0;y<c.length;y++)for(p=c[y],T=0;T<f.length;T++)p.hasTarget(f[T])&&m.push(p);return m},isTweening:function(f){for(var v=this._active,c,p=0;p<v.length;p++)if(c=v[p],c.hasTarget(f)&&c.isPlaying())return!0;return!1},killAll:function(){for(var f=this.getAllTweens(),v=0;v<f.length;v++)f[v].stop();return this},killTweensOf:function(f){for(var v=this.getTweensOf(f),c=0;c<v.length;c++)v[c].stop();return this},pauseAll:function(){for(var f=this._active,v=0;v<f.length;v++)f[v].pause();return this},resumeAll:function(){for(var f=this._active,v=0;v<f.length;v++)f[v].resume();return this},setGlobalTimeScale:function(f){return this.timeScale=f,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var f=this.systems.events;f.off(n.PRE_UPDATE,this.preUpdate,this),f.off(n.UPDATE,this.update,this),f.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});o.register("TweenManager",l,"tweens"),a.exports=l},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Array:t(208),Base64:t(1482),Objects:t(1484),String:t(1488),NOOP:t(1)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ArrayBufferToBase64:t(1483),Base64ToArrayBuffer:t(433)}},function(a,x){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(d,r){for(var o=new Uint8Array(d),n=o.length,i=r?"data:"+r+";base64,":"",s=0;s<n;s+=3)i+=t[o[s]>>2],i+=t[(o[s]&3)<<4|o[s+1]>>4],i+=t[(o[s+1]&15)<<2|o[s+2]>>6],i+=t[o[s+2]&63];return n%3===2?i=i.substring(0,i.length-1)+"=":n%3===1&&(i=i.substring(0,i.length-2)+"=="),i};a.exports=e},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Clone:t(77),DeepCopy:t(175),Extend:t(17),GetAdvancedValue:t(13),GetFastValue:t(2),GetMinMaxValue:t(1485),GetValue:t(6),HasAll:t(1486),HasAny:t(455),HasValue:t(126),IsPlainObject:t(7),Merge:t(127),MergeRight:t(1487),Pick:t(571),SetValue:t(478)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),d=t(18),r=function(o,n,i,s,u){u===void 0&&(u=i);var h=e(o,n,u);return d(h,i,s)};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){for(var r=0;r<d.length;r++)if(!e.hasOwnProperty(d[r]))return!1;return!0};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),d=function(r,o){var n=e(r);for(var i in o)n.hasOwnProperty(i)&&(n[i]=o[i]);return n};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Format:t(1489),Pad:t(186),RemoveAt:t(1490),Reverse:t(1491),UppercaseFirst:t(205),UUID:t(222)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return e.replace(/%([0-9]+)/g,function(r,o){return d[Number(o)-1]})};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,d){return d===0?e.slice(1):e.slice(0,d-1)+e.slice(d)};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.split("").reverse().join("")};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={SoundManagerCreator:t(426),Events:t(70),BaseSound:t(146),BaseSoundManager:t(145),WebAudioSound:t(434),WebAudioSoundManager:t(432),HTML5AudioSound:t(429),HTML5AudioSoundManager:t(427),NoAudioSound:t(431),NoAudioSoundManager:t(430)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Arcade:t(1366),Matter:t(1494)}},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BodyBounds:t(1392),Components:t(249),Events:t(272),Factory:t(1394),MatterGameObject:t(1395),Image:t(1396),Matter:t(594),MatterPhysics:t(1524),PolyDecomp:t(1393),Sprite:t(1397),TileBody:t(593),PhysicsEditorParser:t(589),PhysicsJSONParser:t(590),PointerConstraint:t(1398),World:t(1402)}},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(e){return this.body.restitution=e,this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var d=0;if(!Array.isArray(e))d=e;else for(var r=0;r<e.length;r++)d|=e[r];return this.body.collisionFilter.mask=d,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,d){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var o=e[r].hasOwnProperty("body")?e[r].body:e[r];this.body.setOnCollideWith(o,d)}return this}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),d={applyForce:function(r){return this._tempVec2.set(this.body.position.x,this.body.position.y),e.applyForce(this.body,this._tempVec2,r),this},applyForceFrom:function(r,o){return e.applyForce(this.body,r,o),this},thrust:function(r){var o=this.body.angle;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(r){var o=this.body.angle-Math.PI/2;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(r){var o=this.body.angle+Math.PI/2;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(r){var o=this.body.angle-Math.PI;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};a.exports=d},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(e,d,r){return this.body.friction=e,d!==void 0&&(this.body.frictionAir=d),r!==void 0&&(this.body.frictionStatic=r),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};a.exports=t},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),d=t(3),r={setMass:function(o){return e.setMass(this.body,o),this},setDensity:function(o){return e.setDensity(this.body,o),this},centerOfMass:{get:function(){return new d(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};a.exports=r},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};a.exports=t},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),d=t(41),r=t(124),o=t(2),n=t(589),i=t(590),s=t(64),u={setRectangle:function(h,l,f){return this.setBody({type:"rectangle",width:h,height:l},f)},setCircle:function(h,l){return this.setBody({type:"circle",radius:h},l)},setPolygon:function(h,l,f){return this.setBody({type:"polygon",sides:l,radius:h},f)},setTrapezoid:function(h,l,f,v){return this.setBody({type:"trapezoid",width:h,height:l,slope:f},v)},setExistingBody:function(h,l){l===void 0&&(l=!0),this.body&&this.world.remove(this.body,!0),this.body=h;for(var f=0;f<h.parts.length;f++)h.parts[f].gameObject=this;var v=this;if(h.destroy=function(){v.world.remove(v.body,!0),v.body.gameObject=null},l&&(this.world.has(h)&&this.world.remove(h,!0),this.world.add(h)),this._originComponent){var c=h.render.sprite.xOffset,p=h.render.sprite.yOffset,m=h.centerOfMass.x,y=h.centerOfMass.y;if(r(m,.5)&&r(y,.5))this.setOrigin(c+.5,p+.5);else{var T=h.centerOffset.x,E=h.centerOffset.y;this.setOrigin(c+T/this.displayWidth,p+E/this.displayHeight)}}return this},setBody:function(h,l){if(!h)return this;var f;typeof h=="string"&&(h={type:h});var v=o(h,"type","rectangle"),c=o(h,"x",this._tempVec2.x),p=o(h,"y",this._tempVec2.y),m=o(h,"width",this.width),y=o(h,"height",this.height);switch(v){case"rectangle":f=e.rectangle(c,p,m,y,l);break;case"circle":var T=o(h,"radius",Math.max(m,y)/2),E=o(h,"maxSides",25);f=e.circle(c,p,T,l,E);break;case"trapezoid":var S=o(h,"slope",.5);f=e.trapezoid(c,p,m,y,S,l);break;case"polygon":var P=o(h,"sides",5),M=o(h,"radius",Math.max(m,y)/2);f=e.polygon(c,p,P,M,l);break;case"fromVertices":case"fromVerts":var O=o(h,"verts",null);if(O)if(typeof O=="string"&&(O=s.fromPath(O)),this.body&&!this.body.hasOwnProperty("temp"))d.setVertices(this.body,O),f=this.body;else{var L=o(h,"flagInternal",!1),F=o(h,"removeCollinear",.01),b=o(h,"minimumArea",10);f=e.fromVertices(c,p,O,l,L,F,b)}break;case"fromPhysicsEditor":f=n.parseBody(c,p,h,l);break;case"fromPhysicsTracer":f=i.parseBody(c,p,h,l);break}return f&&this.setExistingBody(f,h.addToWorld),this}};a.exports=u},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(272),d=t(165),r=t(166),o={setToSleep:function(){return d.set(this.body,!0),this},setAwake:function(){return d.set(this.body,!1),this},setSleepThreshold:function(n){return n===void 0&&(n=60),this.body.sleepThreshold=n,this},setSleepEvents:function(n,i){return this.setSleepStartEvent(n),this.setSleepEndEvent(i),this},setSleepStartEvent:function(n){if(n){var i=this.world;r.on(this.body,"sleepStart",function(s){i.emit(e.SLEEP_START,s,this)})}else r.off(this.body,"sleepStart");return this},setSleepEndEvent:function(n){if(n){var i=this.world;r.on(this.body,"sleepEnd",function(s){i.emit(e.SLEEP_END,s,this)})}else r.off(this.body,"sleepEnd");return this}};a.exports=o},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="afteradd"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="afterremove"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="afterupdate"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="beforeadd"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="beforeremove"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="beforeupdate"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="collisionactive"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="collisionend"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="collisionstart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragend"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="drag"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragstart"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pause"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resume"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="sleepend"},function(a,x){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="sleepstart"},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),d={setStatic:function(r){return e.setStatic(this.body,r),this},isStatic:function(){return this.body.isStatic}};a.exports=d},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),d=t(14),r=t(269),o=t(270),n=4,i={x:{get:function(){return this.body.position.x},set:function(s){this._tempVec2.set(s,this.y),e.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(s){this._tempVec2.set(this.x,s),e.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(s){var u=1/this._scaleX,h=1/this._scaleY;this._scaleX=s,this._scaleX===0?this.renderFlags&=~n:this.renderFlags|=n,e.scale(this.body,u,h),e.scale(this.body,s,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(s){var u=1/this._scaleX,h=1/this._scaleY;this._scaleY=s,this._scaleY===0?this.renderFlags&=~n:this.renderFlags|=n,e.scale(this.body,u,h),e.scale(this.body,this._scaleX,s)}},angle:{get:function(){return o(this.body.angle*d.RAD_TO_DEG)},set:function(s){this.rotation=o(s)*d.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(s){this._rotation=r(s),e.setAngle(this.body,this._rotation)}},setPosition:function(s,u){return s===void 0&&(s=0),u===void 0&&(u=s),this._tempVec2.set(s,u),e.setPosition(this.body,this._tempVec2),this},setRotation:function(s){return s===void 0&&(s=0),this._rotation=r(s),e.setAngle(this.body,s),this},setFixedRotation:function(){return e.setInertia(this.body,1/0),this},setAngle:function(s){return s===void 0&&(s=0),this.angle=s,e.setAngle(this.body,this.rotation),this},setScale:function(s,u,h){s===void 0&&(s=1),u===void 0&&(u=s);var l=1/this._scaleX,f=1/this._scaleY;return this._scaleX=s,this._scaleY=u,e.scale(this.body,l,f,h),e.scale(this.body,s,u,h),this}};a.exports=i},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),d={setAngularVelocity:function(r){return e.setAngularVelocity(this.body,r),this},setVelocityX:function(r){return this._tempVec2.set(r,this.body.velocity.y),e.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(r){return this._tempVec2.set(this.body.velocity.x,r),e.setVelocity(this.body,this._tempVec2),this},setVelocity:function(r,o){return this._tempVec2.set(r,o),e.setVelocity(this.body,this._tempVec2),this}};a.exports=d},function(a,x,t){var e={};a.exports=e;var d=t(118),r=t(32);(function(){e.create=function(o){var n={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return r.extend(n,!1,o)},e.reset=function(o){o.extended&&(o.narrowDetections=0,o.narrowphaseTests=0,o.narrowReuse=0,o.narrowReuseCount=0,o.midphaseTests=0,o.broadphaseTests=0,o.narrowEff=0,o.midEff=0,o.broadEff=0,o.collisions=0,o.buckets=0,o.pairs=0,o.bodies=0)},e.update=function(o,n){if(o.extended){var i=n.world,s=d.allBodies(i);o.collisions=o.narrowDetections,o.pairs=n.pairs.list.length,o.bodies=s.length,o.midEff=(o.narrowDetections/(o.midphaseTests||1)).toFixed(2),o.narrowEff=(o.narrowDetections/(o.narrowphaseTests||1)).toFixed(2),o.broadEff=(1-o.broadphaseTests/(s.length||1)).toFixed(2),o.narrowReuse=(o.narrowReuseCount/(o.narrowphaseTests||1)).toFixed(2)}}})()},function(a,x,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),d=t(271),r=t(86),o=t(41),n=t(1392),i=t(84),s=t(0),u=t(118),h=t(591),l=t(128),f=t(273),v=t(50),c=t(1394),p=t(2),m=t(6),y=t(597),T=t(1525),E=t(1526),S=t(1399),P=t(1527),M=t(127),O=t(250),L=t(598),F=t(595),b=t(24),B=t(1400),U=t(599),X=t(274),W=t(20),Z=t(592),J=t(83),N=t(64),I=t(1402),G=new s({initialize:function(Y){this.scene=Y,this.systems=Y.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=u,this.detector=f,this.grid=y,this.pair=O,this.pairs=L,this.query=B,this.resolver=U,this.sat=X,this.constraint=l,this.bodies=r,this.composites=h,this.axes=d,this.bounds=i,this.svg=Z,this.vector=J,this.vertices=N,this.verts=N,this._tempVec2=J.create(),m(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),m(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),m(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),U._restingThresh=m(this.config,"restingThresh",4),U._restingThreshTangent=m(this.config,"restingThreshTangent",6),U._positionDampen=m(this.config,"positionDampen",.9),U._positionWarming=m(this.config,"positionWarming",.8),U._frictionNormalMultiplier=m(this.config,"frictionNormalMultiplier",5),Y.sys.events.once(W.BOOT,this.boot,this),Y.sys.events.on(W.START,this.start,this)},boot:function(){this.world=new I(this.scene,this.config),this.add=new c(this.world),this.bodyBounds=new n,this.systems.events.once(W.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new I(this.scene,this.config),this.add=new c(this.world));var V=this.systems.events;V.on(W.UPDATE,this.world.update,this.world),V.on(W.POST_UPDATE,this.world.postUpdate,this.world),V.once(W.SHUTDOWN,this.shutdown,this)},getConfig:function(){var V=this.systems.game.config.physics,Y=this.systems.settings.physics,z=M(p(Y,"matter",{}),p(V,"matter",{}));return z},enableAttractorPlugin:function(){return F.register(T),F.use(S,T),this},enableWrapPlugin:function(){return F.register(P),F.use(S,P),this},enableCollisionEventsPlugin:function(){return F.register(E),F.use(S,E),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(V,Y){this.world.step(V,Y)},containsPoint:function(V,Y,z){V=this.getMatterBodies(V);var H=J.create(Y,z),$=B.point(V,H);return $.length>0},intersectPoint:function(V,Y,z){z=this.getMatterBodies(z);var H=J.create(V,Y),$=[],Q=B.point(z,H);return Q.forEach(function(k){$.indexOf(k)===-1&&$.push(k)}),$},intersectRect:function(V,Y,z,H,$,Q){$===void 0&&($=!1),Q=this.getMatterBodies(Q);var k={min:{x:V,y:Y},max:{x:V+z,y:Y+H}},tt=[],it=B.region(Q,k,$);return it.forEach(function(st){tt.indexOf(st)===-1&&tt.push(st)}),tt},intersectRay:function(V,Y,z,H,$,Q){$===void 0&&($=1),Q=this.getMatterBodies(Q);for(var k=[],tt=B.ray(Q,J.create(V,Y),J.create(z,H),$),it=0;it<tt.length;it++)k.push(tt[it].body);return k},intersectBody:function(V,Y){Y=this.getMatterBodies(Y);for(var z=[],H=B.collides(V,Y),$=0;$<H.length;$++){var Q=H[$];Q.bodyA===V?z.push(Q.bodyB):z.push(Q.bodyA)}return z},overlap:function(V,Y,z,H,$){z===void 0&&(z=null),H===void 0&&(H=null),$===void 0&&($=z),Array.isArray(V)||(V=[V]),V=this.getMatterBodies(V),Y=this.getMatterBodies(Y);for(var Q=!1,k=0;k<V.length;k++)for(var tt=V[k],it=B.collides(tt,Y),st=0;st<it.length;st++){var ot=it[st],rt=ot.bodyA.id===tt.id?ot.bodyB:ot.bodyA;if(!H||H.call($,tt,rt,ot)){if(Q=!0,z)z.call($,tt,rt,ot);else if(!H)return!0}}return Q},setCollisionCategory:function(V,Y){return V=this.getMatterBodies(V),V.forEach(function(z){z.collisionFilter.category=Y}),this},setCollisionGroup:function(V,Y){return V=this.getMatterBodies(V),V.forEach(function(z){z.collisionFilter.group=Y}),this},setCollidesWith:function(V,Y){V=this.getMatterBodies(V);var z=0;if(!Array.isArray(Y))z=Y;else for(var H=0;H<Y.length;H++)z|=Y[H];return V.forEach(function($){$.collisionFilter.mask=z}),this},getMatterBodies:function(V){if(!V)return this.world.getAllBodies();Array.isArray(V)||(V=[V]);for(var Y=[],z=0;z<V.length;z++){var H=V[z].hasOwnProperty("body")?V[z].body:V[z];Y.push(H)}return Y},setVelocity:function(V,Y,z){V=this.getMatterBodies(V);var H=this._tempVec2;return H.x=Y,H.y=z,V.forEach(function($){o.setVelocity($,H)}),this},setVelocityX:function(V,Y){V=this.getMatterBodies(V);var z=this._tempVec2;return z.x=Y,V.forEach(function(H){z.y=H.velocity.y,o.setVelocity(H,z)}),this},setVelocityY:function(V,Y){V=this.getMatterBodies(V);var z=this._tempVec2;return z.y=Y,V.forEach(function(H){z.x=H.velocity.x,o.setVelocity(H,z)}),this},setAngularVelocity:function(V,Y){return V=this.getMatterBodies(V),V.forEach(function(z){o.setAngularVelocity(z,Y)}),this},applyForce:function(V,Y){V=this.getMatterBodies(V);var z=this._tempVec2;return V.forEach(function(H){z.x=H.position.x,z.y=H.position.y,o.applyForce(H,z,Y)}),this},applyForceFromPosition:function(V,Y,z,H){V=this.getMatterBodies(V);var $=this._tempVec2;return V.forEach(function(Q){H===void 0&&(H=Q.angle),$.x=z*Math.cos(H),$.y=z*Math.sin(H),o.applyForce(Q,Y,$)}),this},applyForceFromAngle:function(V,Y,z){V=this.getMatterBodies(V);var H=this._tempVec2;return V.forEach(function($){z===void 0&&(z=$.angle),H.x=Y*Math.cos(z),H.y=Y*Math.sin(z),o.applyForce($,{x:$.position.x,y:$.position.y},H)}),this},getConstraintLength:function(V){var Y=V.pointA.x,z=V.pointA.y,H=V.pointB.x,$=V.pointB.y;return V.bodyA&&(Y+=V.bodyA.position.x,z+=V.bodyA.position.y),V.bodyB&&(H+=V.bodyB.position.x,$+=V.bodyB.position.y),v(Y,z,H,$)},alignBody:function(V,Y,z,H){V=V.hasOwnProperty("body")?V.body:V;var $;switch(H){case e.TOP_LEFT:case e.LEFT_TOP:$=this.bodyBounds.getTopLeft(V,Y,z);break;case e.TOP_CENTER:$=this.bodyBounds.getTopCenter(V,Y,z);break;case e.TOP_RIGHT:case e.RIGHT_TOP:$=this.bodyBounds.getTopRight(V,Y,z);break;case e.LEFT_CENTER:$=this.bodyBounds.getLeftCenter(V,Y,z);break;case e.CENTER:$=this.bodyBounds.getCenter(V,Y,z);break;case e.RIGHT_CENTER:$=this.bodyBounds.getRightCenter(V,Y,z);break;case e.LEFT_BOTTOM:case e.BOTTOM_LEFT:$=this.bodyBounds.getBottomLeft(V,Y,z);break;case e.BOTTOM_CENTER:$=this.bodyBounds.getBottomCenter(V,Y,z);break;case e.BOTTOM_RIGHT:case e.RIGHT_BOTTOM:$=this.bodyBounds.getBottomRight(V,Y,z);break}return $&&o.setPosition(V,$),this},shutdown:function(){var V=this.systems.events;this.world&&(V.off(W.UPDATE,this.world.update,this.world),V.off(W.POST_UPDATE,this.world.postUpdate,this.world)),V.off(W.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(W.START,this.start,this),this.scene=null,this.systems=null}});b.register("MatterPhysics",G,"matterPhysics"),a.exports=G},function(a,x,t){var e=t(594),d={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(r){r.after("Body.create",function(){d.Body.init(this)}),r.before("Engine.update",function(o){d.Engine.update(o)})},Body:{init:function(r){r.plugin.attractors=r.plugin.attractors||[]}},Engine:{update:function(r){for(var o=e.Composite.allBodies(r.world),n=0;n<o.length;n++){var i=o[n],s=i.plugin.attractors;if(s&&s.length>0)for(var u=0;u<o.length;u++){var h=o[u];if(n!==u)for(var l=0;l<s.length;l++){var f=s[l],v=f;e.Common.isFunction(f)&&(v=f(i,h)),v&&e.Body.applyForce(h,h.position,v)}}}}},Attractors:{gravityConstant:.001,gravity:function(r,o){var n=e.Vector.sub(o.position,r.position),i=e.Vector.magnitudeSquared(n)||1e-4,s=e.Vector.normalise(n),u=-d.Attractors.gravityConstant*(r.mass*o.mass/i),h=e.Vector.mult(s,u);e.Body.applyForce(r,r.position,e.Vector.neg(h)),e.Body.applyForce(o,o.position,h)}}};a.exports=d},function(a,x){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(d){d.pairs.map(function(r){var o=r.bodyA,n=r.bodyB;o.gameObject&&o.gameObject.emit("collide",o,n,r),n.gameObject&&n.gameObject.emit("collide",n,o,r),e.Events.trigger(o,"onCollide",{pair:r}),e.Events.trigger(n,"onCollide",{pair:r}),o.onCollideCallback&&o.onCollideCallback(r),n.onCollideCallback&&n.onCollideCallback(r),o.onCollideWith[n.id]&&o.onCollideWith[n.id](n,r),n.onCollideWith[o.id]&&n.onCollideWith[o.id](o,r)})}),e.Events.on(this,"collisionActive",function(d){d.pairs.map(function(r){var o=r.bodyA,n=r.bodyB;o.gameObject&&o.gameObject.emit("collideActive",o,n,r),n.gameObject&&n.gameObject.emit("collideActive",n,o,r),e.Events.trigger(o,"onCollideActive",{pair:r}),e.Events.trigger(n,"onCollideActive",{pair:r}),o.onCollideActiveCallback&&o.onCollideActiveCallback(r),n.onCollideActiveCallback&&n.onCollideActiveCallback(r)})}),e.Events.on(this,"collisionEnd",function(d){d.pairs.map(function(r){var o=r.bodyA,n=r.bodyB;o.gameObject&&o.gameObject.emit("collideEnd",o,n,r),n.gameObject&&n.gameObject.emit("collideEnd",n,o,r),e.Events.trigger(o,"onCollideEnd",{pair:r}),e.Events.trigger(n,"onCollideEnd",{pair:r}),o.onCollideEndCallback&&o.onCollideEndCallback(r),n.onCollideEndCallback&&n.onCollideEndCallback(r)})})})}};a.exports=t},function(a,x,t){var e=t(594),d={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(r){r.after("Engine.update",function(){d.Engine.update(this)})},Engine:{update:function(r){for(var o=r.world,n=e.Composite.allBodies(o),i=e.Composite.allComposites(o),s=0;s<n.length;s+=1){var u=n[s];u.plugin.wrap&&d.Body.wrap(u,u.plugin.wrap)}for(s=0;s<i.length;s+=1){var h=i[s];h.plugin.wrap&&d.Composite.wrap(h,h.plugin.wrap)}}},Bounds:{wrap:function(r,o){var n=null,i=null;if(typeof o.min.x<"u"&&typeof o.max.x<"u"&&(r.min.x>o.max.x?n=o.min.x-r.max.x:r.max.x<o.min.x&&(n=o.max.x-r.min.x)),typeof o.min.y<"u"&&typeof o.max.y<"u"&&(r.min.y>o.max.y?i=o.min.y-r.max.y:r.max.y<o.min.y&&(i=o.max.y-r.min.y)),n!==null||i!==null)return{x:n||0,y:i||0}}},Body:{wrap:function(r,o){var n=d.Bounds.wrap(r.bounds,o);return n&&e.Body.translate(r,n),n}},Composite:{bounds:function(r){for(var o=e.Composite.allBodies(r),n=[],i=0;i<o.length;i+=1){var s=o[i];n.push(s.bounds.min,s.bounds.max)}return e.Bounds.create(n)},wrap:function(r,o){var n=d.Bounds.wrap(d.Composite.bounds(r),o);return n&&e.Composite.translate(r,n),n}}};a.exports=d},function(a,x,t){(function(e){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var d=t(33),r=t(17),o={Actions:t(275),Animations:t(723),BlendModes:t(35),Cache:t(735),Cameras:t(738),Core:t(806),Class:t(0),Create:t(888),Curves:t(894),Data:t(896),Display:t(898),DOM:t(917),Events:t(918),Game:t(920),GameObjects:t(1011),Geom:t(483),Input:t(1308),Loader:t(1338),Math:t(193),Physics:t(1493),Plugins:t(1403),Renderer:t(1405),Scale:t(1412),ScaleModes:t(168),Scene:t(418),Scenes:t(1413),Structs:t(1415),Textures:t(1416),Tilemaps:t(1418),Time:t(1461),Tweens:t(1463),Utils:t(1481)};o.Sound=t(1492),o=r(!1,o,d),a.exports=o,e.Phaser=o}).call(this,t(600))}])})})(op);const Ie=Qd(Fr);class hp extends Ie.Scene{constructor(){super("BootScene");Lt(this,"progressBar")}preload(){this.progressBar=this.add.graphics(),this.progressBar.fillStyle(16777215,1),this.progressBar.fillRect(240,290,320,20);const a=this.add.graphics();a.lineStyle(4,16777215,1),a.strokeRect(240,290,320,20),this.load.on("progress",x=>{this.progressBar.clear(),this.progressBar.fillStyle(16777215,1),this.progressBar.fillRect(240,290,320*x,20)}),this.load.on(Ie.Loader.Events.FILE_LOAD_ERROR,x=>{const t=x.key;x.destroy();const e=ap(t,32,32);this.textures.exists(t)&&this.textures.remove(t),console.log(e),this.load.svg(t,e),this.load.emit(Ie.Loader.Events.FILE_COMPLETE,x)},this),this.loadTitleMenuAssets(),this.loadTerrainAssets(),this.loadObjectAssets(),this.loadUIAssets()}create(){this.scene.start("TitleScene")}loadTitleMenuAssets(){this.load.svg("starry_night","assets/ui/starry_night.svg",{width:800,height:600}),this.load.svg("forest_silhouette","assets/ui/forest_silhouette.svg",{width:800,height:600}),this.load.svg("postapoc_title","assets/ui/postapoc_title.svg",{width:800,height:100}),this.load.svg("mushroom_cloud","assets/ui/mushroom_cloud.svg",{width:100,height:100})}loadTerrainAssets(){this.load.svg("grass","assets/tiles/grass.svg"),this.load.svg("grass2","assets/tiles/grass2.svg"),this.load.svg("white_tile","assets/tiles/white_tile.svg"),this.load.svg("concrete_wall","assets/tiles/concrete_wall.svg")}loadObjectAssets(){this.load.svg("player","assets/objects/player.svg"),this.load.svg("pipe","assets/objects/pipe.svg"),this.load.svg("bench","assets/objects/bench.svg"),this.load.svg("door","assets/objects/door.svg"),this.load.svg("tree","assets/objects/tree.svg")}loadUIAssets(){this.load.svg("grey_arrow","assets/ui/grey_arrow.svg"),this.load.svg("red_arrow","assets/ui/red_arrow.svg")}}const lp={control:!1,collision:!1,focus:!1,health:!1,keyBindings:!1,movement:!1,eventBus:!1,time:!0,universe:!1},up={moveEvents:!1},Xo={modules:lp,events:up},mr=10,zo=(C=0)=>g=>`\x1B[${g+C}m`,Wo=(C=0)=>g=>`\x1B[${38+C};5;${g}m`,Ho=(C=0)=>(g,a,x)=>`\x1B[${38+C};2;${g};${a};${x}m`,Ht={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(Ht.modifier);const fp=Object.keys(Ht.color),dp=Object.keys(Ht.bgColor);[...fp,...dp];function cp(){const C=new Map;for(const[g,a]of Object.entries(Ht)){for(const[x,t]of Object.entries(a))Ht[x]={open:`\x1B[${t[0]}m`,close:`\x1B[${t[1]}m`},a[x]=Ht[x],C.set(t[0],t[1]);Object.defineProperty(Ht,g,{value:a,enumerable:!1})}return Object.defineProperty(Ht,"codes",{value:C,enumerable:!1}),Ht.color.close="\x1B[39m",Ht.bgColor.close="\x1B[49m",Ht.color.ansi=zo(),Ht.color.ansi256=Wo(),Ht.color.ansi16m=Ho(),Ht.bgColor.ansi=zo(mr),Ht.bgColor.ansi256=Wo(mr),Ht.bgColor.ansi16m=Ho(mr),Object.defineProperties(Ht,{rgbToAnsi256:{value(g,a,x){return g===a&&a===x?g<8?16:g>248?231:Math.round((g-8)/247*24)+232:16+36*Math.round(g/255*5)+6*Math.round(a/255*5)+Math.round(x/255*5)},enumerable:!1},hexToRgb:{value(g){const a=/[a-f\d]{6}|[a-f\d]{3}/i.exec(g.toString(16));if(!a)return[0,0,0];let[x]=a;x.length===3&&(x=[...x].map(e=>e+e).join(""));const t=Number.parseInt(x,16);return[t>>16&255,t>>8&255,t&255]},enumerable:!1},hexToAnsi256:{value:g=>Ht.rgbToAnsi256(...Ht.hexToRgb(g)),enumerable:!1},ansi256ToAnsi:{value(g){if(g<8)return 30+g;if(g<16)return 90+(g-8);let a,x,t;if(g>=232)a=((g-232)*10+8)/255,x=a,t=a;else{g-=16;const r=g%36;a=Math.floor(g/36)/5,x=Math.floor(r/6)/5,t=r%6/5}const e=Math.max(a,x,t)*2;if(e===0)return 30;let d=30+(Math.round(t)<<2|Math.round(x)<<1|Math.round(a));return e===2&&(d+=60),d},enumerable:!1},rgbToAnsi:{value:(g,a,x)=>Ht.ansi256ToAnsi(Ht.rgbToAnsi256(g,a,x)),enumerable:!1},hexToAnsi:{value:g=>Ht.ansi256ToAnsi(Ht.hexToAnsi256(g)),enumerable:!1}}),Ht}const Te=cp(),$n=(()=>{if(navigator.userAgentData){const C=navigator.userAgentData.brands.find(({brand:g})=>g==="Chromium");if(C&&C.version>93)return 3}return/\b(Chrome|Chromium)\//.test(navigator.userAgent)?1:0})(),Ko=$n!==0&&{level:$n,hasBasic:!0,has256:$n>=2,has16m:$n>=3},vp={stdout:Ko,stderr:Ko};function pp(C,g,a){let x=C.indexOf(g);if(x===-1)return C;const t=g.length;let e=0,d="";do d+=C.slice(e,x)+g+a,e=x+t,x=C.indexOf(g,e);while(x!==-1);return d+=C.slice(e),d}function mp(C,g,a,x){let t=0,e="";do{const d=C[x-1]==="\r";e+=C.slice(t,d?x-1:x)+g+(d?`\r
`:`
`)+a,t=x+1,x=C.indexOf(`
`,t)}while(x!==-1);return e+=C.slice(t),e}const{stdout:Zo,stderr:$o}=vp,Ir=Symbol("GENERATOR"),Mi=Symbol("STYLER"),mn=Symbol("IS_EMPTY"),Jo=["ansi","ansi","ansi256","ansi16m"],Ri=Object.create(null),gp=(C,g={})=>{if(g.level&&!(Number.isInteger(g.level)&&g.level>=0&&g.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const a=Zo?Zo.level:0;C.level=g.level===void 0?a:g.level},xp=C=>{const g=(...a)=>a.join(" ");return gp(g,C),Object.setPrototypeOf(g,Fn.prototype),g};function Fn(C){return xp(C)}Object.setPrototypeOf(Fn.prototype,Function.prototype);for(const[C,g]of Object.entries(Te))Ri[C]={get(){const a=ss(this,Dr(g.open,g.close,this[Mi]),this[mn]);return Object.defineProperty(this,C,{value:a}),a}};Ri.visible={get(){const C=ss(this,this[Mi],!0);return Object.defineProperty(this,"visible",{value:C}),C}};const br=(C,g,a,...x)=>C==="rgb"?g==="ansi16m"?Te[a].ansi16m(...x):g==="ansi256"?Te[a].ansi256(Te.rgbToAnsi256(...x)):Te[a].ansi(Te.rgbToAnsi(...x)):C==="hex"?br("rgb",g,a,...Te.hexToRgb(...x)):Te[a][C](...x),yp=["rgb","hex","ansi256"];for(const C of yp){Ri[C]={get(){const{level:a}=this;return function(...x){const t=Dr(br(C,Jo[a],"color",...x),Te.color.close,this[Mi]);return ss(this,t,this[mn])}}};const g="bg"+C[0].toUpperCase()+C.slice(1);Ri[g]={get(){const{level:a}=this;return function(...x){const t=Dr(br(C,Jo[a],"bgColor",...x),Te.bgColor.close,this[Mi]);return ss(this,t,this[mn])}}}}const Tp=Object.defineProperties(()=>{},{...Ri,level:{enumerable:!0,get(){return this[Ir].level},set(C){this[Ir].level=C}}}),Dr=(C,g,a)=>{let x,t;return a===void 0?(x=C,t=g):(x=a.openAll+C,t=g+a.closeAll),{open:C,close:g,openAll:x,closeAll:t,parent:a}},ss=(C,g,a)=>{const x=(...t)=>Ep(x,t.length===1?""+t[0]:t.join(" "));return Object.setPrototypeOf(x,Tp),x[Ir]=C,x[Mi]=g,x[mn]=a,x},Ep=(C,g)=>{if(C.level<=0||!g)return C[mn]?"":g;let a=C[Mi];if(a===void 0)return g;const{openAll:x,closeAll:t}=a;if(g.includes("\x1B"))for(;a!==void 0;)g=pp(g,a.close,a.open),a=a.parent;const e=g.indexOf(`
`);return e!==-1&&(g=mp(g,t,x,e)),x+g+t};Object.defineProperties(Fn.prototype,Ri);const ei=Fn();Fn({level:$o?$o.level:0});var gn={},Sp={get exports(){return gn},set exports(C){gn=C}};(function(C){(function(g,a){C.exports?C.exports=a():g.log=a()})(fn,function(){var g=function(){},a="undefined",x=typeof window!==a&&typeof window.navigator!==a&&/Trident\/|MSIE /.test(window.navigator.userAgent),t=["trace","debug","info","warn","error"];function e(f,v){var c=f[v];if(typeof c.bind=="function")return c.bind(f);try{return Function.prototype.bind.call(c,f)}catch{return function(){return Function.prototype.apply.apply(c,[f,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function r(f){return f==="debug"&&(f="log"),typeof console===a?!1:f==="trace"&&x?d:console[f]!==void 0?e(console,f):console.log!==void 0?e(console,"log"):g}function o(f,v){for(var c=0;c<t.length;c++){var p=t[c];this[p]=c<f?g:this.methodFactory(p,f,v)}this.log=this.debug}function n(f,v,c){return function(){typeof console!==a&&(o.call(this,v,c),this[f].apply(this,arguments))}}function i(f,v,c){return r(f)||n.apply(this,arguments)}function s(f,v,c){var p=this,m;v=v??"WARN";var y="loglevel";typeof f=="string"?y+=":"+f:typeof f=="symbol"&&(y=void 0);function T(M){var O=(t[M]||"silent").toUpperCase();if(!(typeof window===a||!y)){try{window.localStorage[y]=O;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+O+";"}catch{}}}function E(){var M;if(!(typeof window===a||!y)){try{M=window.localStorage[y]}catch{}if(typeof M===a)try{var O=window.document.cookie,L=O.indexOf(encodeURIComponent(y)+"=");L!==-1&&(M=/^([^;]+)/.exec(O.slice(L))[1])}catch{}return p.levels[M]===void 0&&(M=void 0),M}}function S(){if(!(typeof window===a||!y)){try{window.localStorage.removeItem(y);return}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}p.name=f,p.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},p.methodFactory=c||i,p.getLevel=function(){return m},p.setLevel=function(M,O){if(typeof M=="string"&&p.levels[M.toUpperCase()]!==void 0&&(M=p.levels[M.toUpperCase()]),typeof M=="number"&&M>=0&&M<=p.levels.SILENT){if(m=M,O!==!1&&T(M),o.call(p,M,f),typeof console===a&&M<p.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+M},p.setDefaultLevel=function(M){v=M,E()||p.setLevel(M,!1)},p.resetLevel=function(){p.setLevel(v,!1),S()},p.enableAll=function(M){p.setLevel(p.levels.TRACE,M)},p.disableAll=function(M){p.setLevel(p.levels.SILENT,M)};var P=E();P==null&&(P=v),p.setLevel(P,!1)}var u=new s,h={};u.getLogger=function(v){if(typeof v!="symbol"&&typeof v!="string"||v==="")throw new TypeError("You must supply a name when creating a logger.");var c=h[v];return c||(c=h[v]=new s(v,u.getLevel(),u.methodFactory)),c};var l=typeof window!==a?window.log:void 0;return u.noConflict=function(){return typeof window!==a&&window.log===u&&(window.log=l),u},u.getLoggers=function(){return h},u.default=u,u})})(Sp);const De=gn,Cp={trace:ei.magenta,debug:ei.cyan,info:ei.blue,warn:ei.yellow,error:ei.red};De.setLevel(De.levels.INFO);const Ap=De.methodFactory,Gh=(C,g,a="global")=>{const x=String(a),t=Ap(C,g,x);return(...e)=>{const d=new Date().toLocaleTimeString();t(`${ei.gray(`[${d}]`)} ${Cp[C](C.toUpperCase())} ${ei.green(`${x}`)}
`,...e)}};De.methodFactory=Gh;const Qi={};function ve(C){return Qi[C]||(Qi[C]=De.getLogger(C),Qi[C].setLevel(De.levels.INFO),Qi[C].methodFactory=Gh),Qi[C]}function Pp(C){return{all:C=C||new Map,on:function(g,a){var x=C.get(g);x?x.push(a):C.set(g,[a])},off:function(g,a){var x=C.get(g);x&&(a?x.splice(x.indexOf(a)>>>0,1):C.set(g,[]))},emit:function(g,a){var x=C.get(g);x&&x.slice().map(function(t){t(a)}),(x=C.get("*"))&&x.slice().map(function(t){t(g,a)})}}}const jt=Pp(),Mp=(C,g)=>{ve("eventBus").debug(`Event triggered: ${C} ${JSON.stringify(g)}`)};jt.on("*",Mp);var Fe={i8:"i8",ui8:"ui8",ui8c:"ui8c",i16:"i16",ui16:"ui16",i32:"i32",ui32:"ui32",f32:"f32",f64:"f64",eid:"eid"},rs={i8:"Int8",ui8:"Uint8",ui8c:"Uint8Clamped",i16:"Int16",ui16:"Uint16",i32:"Int32",ui32:"Uint32",eid:"Uint32",f32:"Float32",f64:"Float64"},Ee={i8:Int8Array,ui8:Uint8Array,ui8c:Uint8ClampedArray,i16:Int16Array,ui16:Uint16Array,i32:Int32Array,ui32:Uint32Array,f32:Float32Array,f64:Float64Array,eid:Uint32Array},as={uint8:2**8,uint16:2**16,uint32:2**32},Rp=C=>g=>Math.ceil(g/C)*C,Vh=Rp(4),Lp=Symbol("storeRef"),xn=Symbol("storeSize"),wp=Symbol("storeMaps"),Se=Symbol("storeFlattened"),Jn=Symbol("storeBase"),Uh=Symbol("storeType"),oa=Symbol("storeArrayElementCounts"),si=Symbol("storeSubarrays"),yn=Symbol("subarrayCursors"),Yh=Symbol("subarray"),Tn=Symbol("parentArray"),ha=Symbol("tagStore"),os=Symbol("indexType"),hs=Symbol("indexBytes"),Xh=Symbol("isEidType"),Le={},zh=(C,g)=>{const a=new ArrayBuffer(g*C.BYTES_PER_ELEMENT),x=new C.constructor(a);return x.set(C,0),x},Op=(C,g)=>{if(ArrayBuffer.isView(C))C[g]=C.slice(0);else{const a=C[Tn].slice(0);C[g]=C.map((x,t)=>{const{length:e}=C[t],d=e*t,r=d+e;return a.subarray(d,r)})}},Fp=(C,g,a)=>{const x=C[yn];let t=g[Uh];const e=g[0].length,d=e<=as.uint8?Fe.ui8:e<=as.uint16?Fe.ui16:Fe.ui32;if(x[t]===0){const n=C[oa][t],i=new Ee[t](Vh(n*a));i.set(C[si][t]),C[si][t]=i,i[os]=rs[d],i[hs]=Ee[d].BYTES_PER_ELEMENT}const r=x[t],o=r+a*e;x[t]=o,g[Tn]=C[si][t].subarray(r,o);for(let n=0;n<a;n++){const i=e*n,s=i+e;g[n]=g[Tn].subarray(i,s),g[n][os]=rs[d],g[n][hs]=Ee[d].BYTES_PER_ELEMENT,g[n][Yh]=!0}},Wh=(C,g,a)=>{Object.keys(g).forEach(x=>{const t=g[x];Array.isArray(t)?(Fp(C,t,a),g[Se].push(t)):ArrayBuffer.isView(t)?(g[x]=zh(t,a),g[Se].push(g[x])):typeof t=="object"&&Wh(C,g[x],a)})},Hh=(C,g)=>{C[ha]||(C[xn]=g,C[Se].length=0,Object.keys(C[yn]).forEach(a=>{C[yn][a]=0}),Wh(C,C,g))},Ip=(C,g)=>{C[Se]&&C[Se].forEach(a=>{ArrayBuffer.isView(a)?a[g]=0:a[g].fill(0)})},bp=(C,g)=>{const a=g*Ee[C].BYTES_PER_ELEMENT,x=new ArrayBuffer(a),t=new Ee[C](x);return t[Xh]=C===Fe.eid,t},Dp=(C,g,a)=>{const x=C[xn],t=Array(x).fill(0);t[Uh]=g,t[Xh]=g===Fe.eid;const e=C[yn],d=a<=as.uint8?Fe.ui8:a<=as.uint16?Fe.ui16:Fe.ui32;if(!a)throw new Error("bitECS - Must define component array length");if(!Ee[g])throw new Error(`bitECS - Invalid component array property type ${g}`);if(!C[si][g]){const n=C[oa][g],i=new Ee[g](Vh(n*x));i[os]=rs[d],i[hs]=Ee[d].BYTES_PER_ELEMENT,C[si][g]=i}const r=e[g],o=r+x*a;e[g]=o,t[Tn]=C[si][g].subarray(r,o);for(let n=0;n<x;n++){const i=a*n,s=i+a;t[n]=t[Tn].subarray(i,s),t[n][os]=rs[d],t[n][hs]=Ee[d].BYTES_PER_ELEMENT,t[n][Yh]=!0}return t},jo=C=>Array.isArray(C)&&typeof C[0]=="string"&&typeof C[1]=="number",Bp=(C,g)=>{const a=Symbol("store");if(!C||!Object.keys(C).length)return Le[a]={[xn]:g,[ha]:!0,[Jn]:()=>Le[a]},Le[a];C=JSON.parse(JSON.stringify(C));const x={},t=d=>{const r=Object.keys(d);for(const o of r)jo(d[o])?(x[d[o][0]]||(x[d[o][0]]=0),x[d[o][0]]+=d[o][1]):d[o]instanceof Object&&t(d[o])};t(C);const e={[xn]:g,[wp]:{},[si]:{},[Lp]:a,[yn]:Object.keys(Ee).reduce((d,r)=>({...d,[r]:0}),{}),[Se]:[],[oa]:x};if(C instanceof Object&&Object.keys(C).length){const d=(r,o)=>{if(typeof r[o]=="string")r[o]=bp(r[o],g),r[o][Jn]=()=>Le[a],e[Se].push(r[o]);else if(jo(r[o])){const[n,i]=r[o];r[o]=Dp(e,n,i),r[o][Jn]=()=>Le[a],e[Se].push(r[o])}else r[o]instanceof Object&&(r[o]=Object.keys(r[o]).reduce(d,r[o]));return r};return Le[a]=Object.assign(Object.keys(C).reduce(d,C),e),Le[a][Jn]=()=>Le[a],Le[a]}},tn=()=>{const C=[],g=[];C.sort=function(e){const d=Array.prototype.sort.call(this,e);for(let r=0;r<C.length;r++)g[C[r]]=r;return d};const a=e=>C[g[e]]===e;return{add:e=>{a(e)||(g[e]=C.push(e)-1)},remove:e=>{if(!a(e))return;const d=g[e],r=C.pop();r!==e&&(C[d]=r,g[r]=d)},has:a,sparse:g,dense:C}},ge=Symbol("entityMasks"),Cs=Symbol("entityComponents"),hi=Symbol("entitySparseSet"),an=Symbol("entityArray"),As=1e5,ls=0,li=As,Np=()=>li-li/5,En=()=>li,us=[],Gp=()=>{li=As,ls=0,us.length=0},Vp=C=>{const g=li;As=C,Gp(),li=C,tm(C),jp(C),console.info(`👾 bitECS - resizing all data stores from ${g} to ${C}`)},Up=()=>ls,Yp=new Map,Kh=C=>{if(ls>=Np()){const a=li,x=Math.ceil(a/2/4)*4;Vp(a+x)}const g=us.length>Math.round(As*.01)?us.shift():ls++;return C[hi].add(g),Yp.set(g,C),C[la].forEach(a=>{ua(C,a,g)&&fa(a,g)}),C[Cs].set(g,new Set),g},Zh=(C,g)=>{if(C[hi].has(g)){C[Ps].forEach(a=>{jh(C,a,g)}),us.push(g),C[hi].remove(g),C[Cs].delete(g),C[kh].delete(C[Nr].get(g)),C[Nr].delete(g);for(let a=0;a<C[ge].length;a++)C[ge][a][g]=0}},Ps=Symbol("queries"),la=Symbol("notQueries"),Xp=Symbol("queryAny"),zp=Symbol("queryAll"),Wp=Symbol("queryNone"),fs=Symbol("queryMap"),on=Symbol("$dirtyQueries"),$h=Symbol("queryComponents"),Hp=(C,g)=>{const a=[],x=[],t=[];g[$h].forEach(T=>{if(typeof T=="function"){const[E,S]=T();C[be].has(E)||Br(C,E),S==="not"&&x.push(E),S==="changed"&&(t.push(E),a.push(E))}else C[be].has(T)||Br(C,T),a.push(T)});const e=T=>C[be].get(T),d=a.concat(x).map(e),r=tn(),o=[],n=[],i=tn(),s=tn(),u=tn(),h=d.map(T=>T.generationId).reduce((T,E)=>(T.includes(E)||T.push(E),T),[]),l=(T,E)=>(T[E.generationId]||(T[E.generationId]=0),T[E.generationId]|=E.bitflag,T),f=a.map(e).reduce(l,{}),v=x.map(e).reduce(l,{}),c=d.reduce(l,{}),p=a.filter(T=>!T[ha]).map(T=>Object.getOwnPropertySymbols(T).includes(Se)?T[Se]:[T]).reduce((T,E)=>T.concat(E),[]),y=Object.assign(r,{archetypes:o,changed:n,components:a,notComponents:x,changedComponents:t,allComponents:d,masks:f,notMasks:v,hasMasks:c,generations:h,flatProps:p,toRemove:i,entered:s,exited:u,shadows:[]});C[fs].set(g,y),C[Ps].add(y),d.forEach(T=>{T.queries.add(y)}),x.length&&C[la].add(y);for(let T=0;T<Up();T++){if(!C[hi].has(T))continue;ua(C,y,T)&&fa(y,T)}},Kp=(C,g)=>{const a=Symbol(),x=C.flatProps[g];return Op(x,a),C.shadows[g]=x[a],x[a]},Zp=(C,g)=>{g&&(C.changed=[]);const{flatProps:a,shadows:x}=C;for(let t=0;t<C.dense.length;t++){const e=C.dense[t];let d=!1;for(let r=0;r<a.length;r++){const o=a[r],n=x[r]||Kp(C,r);if(ArrayBuffer.isView(o[e])){for(let i=0;i<o[e].length;i++)if(o[e][i]!==n[e][i]){d=!0;break}n[e].set(o[e])}else o[e]!==n[e]&&(d=!0,n[e]=o[e])}d&&C.changed.push(e)}return C.changed},Jh=(...C)=>{let g,a,x,t;if(Array.isArray(C[0])&&(g=C[0]),g===void 0||g[be]!==void 0)return d=>d?d[an]:g[an];const e=function(d,r=!0){d[fs].has(e)||Hp(d,e);const o=d[fs].get(e);return Jp(d),o.changedComponents.length?Zp(o,r):o.dense};return e[$h]=g,e[Xp]=a,e[zp]=x,e[Wp]=t,e},ua=(C,g,a)=>{const{masks:x,notMasks:t,generations:e}=g;for(let d=0;d<e.length;d++){const r=e[d],o=x[r],n=t[r],i=C[ge][r][a];if(n&&i&n||o&&(i&o)!==o)return!1}return!0},fa=(C,g)=>{C.toRemove.remove(g),C.entered.add(g),C.add(g)},$p=C=>{for(let g=C.toRemove.dense.length-1;g>=0;g--){const a=C.toRemove.dense[g];C.toRemove.remove(a),C.remove(a)}},Jp=C=>{C[on].size&&(C[on].forEach($p),C[on].clear())},jh=(C,g,a)=>{!g.has(a)||g.toRemove.has(a)||(g.toRemove.add(a),C[on].add(g),g.exited.add(a))},be=Symbol("componentMap"),Qh=[],jp=C=>{Qh.forEach(g=>Hh(g,C))},Ms=(C,g)=>{const a=Bp(C,g||En());return C&&Object.keys(C).length&&Qh.push(a),a},Qp=C=>{C[ln]*=2,C[ln]>=2**31&&(C[ln]=1,C[ge].push(new Uint32Array(C[hn])))},Br=(C,g)=>{if(!g)throw new Error("bitECS - Cannot register null or undefined component");const a=new Set,x=new Set,t=new Set;C[Ps].forEach(e=>{e.allComponents.includes(g)&&a.add(e)}),C[be].set(g,{generationId:C[ge].length-1,bitflag:C[ln],store:g,queries:a,notQueries:x,changedQueries:t}),g[xn]<En()&&Hh(g,En()),Qp(C)},kp=(C,g,a)=>{const x=C[be].get(g);if(!x)return!1;const{generationId:t,bitflag:e}=x;return(C[ge][t][a]&e)===e},Rs=(C,g,a,x=!1)=>{if(a===void 0)throw new Error("bitECS - entity is undefined.");if(!C[hi].has(a))throw new Error("bitECS - entity does not exist in the world.");if(C[be].has(g)||Br(C,g),kp(C,g,a))return;const t=C[be].get(g),{generationId:e,bitflag:d,queries:r,notQueries:o}=t;C[ge][e][a]|=d,r.forEach(n=>{n.toRemove.has(a)&&n.toRemove.remove(a);const i=ua(C,n,a);i&&fa(n,a),i||jh(C,n,a)}),C[Cs].get(a).add(g),x&&Ip(g,a)},hn=Symbol("size"),qp=Symbol("resizeThreshold"),ln=Symbol("bitflag"),_p=Symbol("archetypes"),kh=Symbol("localEntities"),Nr=Symbol("localEntityLookp"),qh=[],tm=C=>{qh.forEach(g=>{g[hn]=C;for(let a=0;a<g[ge].length;a++){const x=g[ge][a];g[ge][a]=zh(x,C)}g[qp]=g[hn]-g[hn]/5})},em=(...C)=>{const g=typeof C[0]=="object"?C[0]:{},a=typeof C[0]=="number"?C[0]:typeof C[1]=="number"?C[1]:En();return im(g,a),qh.push(g),g},im=(C,g=En())=>(C[hn]=g,C[an]&&C[an].forEach(a=>Zh(C,a)),C[ge]=[new Uint32Array(g)],C[Cs]=new Map,C[_p]=[],C[hi]=tn(),C[an]=C[hi].dense,C[ln]=1,C[be]=new Map,C[fs]=new Map,C[Ps]=new Set,C[la]=new Set,C[on]=new Set,C[kh]=new Map,C[Nr]=new Map,C),re=Fe;const Vt=Ms({x:re.f32,y:re.f32,xSpeed:re.f32,ySpeed:re.f32});function nm(C,g,a,x,t,e){Rs(C,Vt,g),Vt.x[g]=a,Vt.y[g]=x,Vt.xSpeed[g]=t,Vt.ySpeed[g]=e}var ds={},sm={get exports(){return ds},set exports(C){ds=C}};/*! Tweakpane 3.1.7 (c) 2016 cocopon, licensed under the MIT license. */(function(C,g){(function(a,x){x(g)})(fn,function(a){class x{constructor(A){const[R,D]=A.split("-"),K=R.split(".");this.major=parseInt(K[0],10),this.minor=parseInt(K[1],10),this.patch=parseInt(K[2],10),this.prerelease=D??null}toString(){const A=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[A,this.prerelease].join("-"):A}}class t{constructor(A){this.controller_=A}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(A){this.controller_.viewProps.set("disabled",A)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(A){this.controller_.viewProps.set("hidden",A)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class e{constructor(A){this.target=A}}class d extends e{constructor(A,R,D,K){super(A),this.value=R,this.presetKey=D,this.last=K??!0}}class r extends e{constructor(A,R,D){super(A),this.value=R,this.presetKey=D}}class o extends e{constructor(A,R){super(A),this.expanded=R}}class n extends e{constructor(A,R){super(A),this.index=R}}function i(w){return w}function s(w){return w==null}function u(w,A){if(w.length!==A.length)return!1;for(let R=0;R<w.length;R++)if(w[R]!==A[R])return!1;return!0}function h(w,A){let R=w;do{const D=Object.getOwnPropertyDescriptor(R,A);if(D&&(D.set!==void 0||D.writable===!0))return!0;R=Object.getPrototypeOf(R)}while(R!==null);return!1}const l={alreadydisposed:()=>"View has been already disposed",invalidparams:w=>`Invalid parameters for '${w.name}'`,nomatchingcontroller:w=>`No matching controller for '${w.key}'`,nomatchingview:w=>`No matching view for '${JSON.stringify(w.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:w=>`Property '${w.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class f{static alreadyDisposed(){return new f({type:"alreadydisposed"})}static notBindable(){return new f({type:"notbindable"})}static propertyNotFound(A){return new f({type:"propertynotfound",context:{name:A}})}static shouldNeverHappen(){return new f({type:"shouldneverhappen"})}constructor(A){var R;this.message=(R=l[A.type](A.context))!==null&&R!==void 0?R:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=A.type}}class v{constructor(A,R,D){this.obj_=A,this.key_=R,this.presetKey_=D??R}static isBindable(A){return!(A===null||typeof A!="object")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(A){this.obj_[this.key_]=A}writeProperty(A,R){const D=this.read();if(!v.isBindable(D))throw f.notBindable();if(!(A in D))throw f.propertyNotFound(A);D[A]=R}}class c extends t{get label(){return this.controller_.props.get("label")}set label(A){this.controller_.props.set("label",A)}get title(){var A;return(A=this.controller_.valueController.props.get("title"))!==null&&A!==void 0?A:""}set title(A){this.controller_.valueController.props.set("title",A)}on(A,R){const D=R.bind(this);return this.controller_.valueController.emitter.on(A,()=>{D(new e(this))}),this}}class p{constructor(){this.observers_={}}on(A,R){let D=this.observers_[A];return D||(D=this.observers_[A]=[]),D.push({handler:R}),this}off(A,R){const D=this.observers_[A];return D&&(this.observers_[A]=D.filter(K=>K.handler!==R)),this}emit(A,R){const D=this.observers_[A];D&&D.forEach(K=>{K.handler(R)})}}const m="tp";function y(w){return(R,D)=>[m,"-",w,"v",R?`_${R}`:"",D?`-${D}`:""].join("")}function T(w,A){return R=>A(w(R))}function E(w){return w.rawValue}function S(w,A){w.emitter.on("change",T(E,A)),A(w.rawValue)}function P(w,A,R){S(w.value(A),R)}function M(w,A,R){R?w.classList.add(A):w.classList.remove(A)}function O(w,A){return R=>{M(w,A,R)}}function L(w,A){S(w,R=>{A.textContent=R??""})}const F=y("btn");class b{constructor(A,R){this.element=A.createElement("div"),this.element.classList.add(F()),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("button");D.classList.add(F("b")),R.viewProps.bindDisabled(D),this.element.appendChild(D),this.buttonElement=D;const K=A.createElement("div");K.classList.add(F("t")),L(R.props.value("title"),K),this.buttonElement.appendChild(K)}}class B{constructor(A,R){this.emitter=new p,this.onClick_=this.onClick_.bind(this),this.props=R.props,this.viewProps=R.viewProps,this.view=new b(A,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class U{constructor(A,R){var D;this.constraint_=R==null?void 0:R.constraint,this.equals_=(D=R==null?void 0:R.equals)!==null&&D!==void 0?D:(K,j)=>K===j,this.emitter=new p,this.rawValue_=A}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(A){this.setRawValue(A,{forceEmit:!1,last:!0})}setRawValue(A,R){const D=R??{forceEmit:!1,last:!0},K=this.constraint_?this.constraint_.constrain(A):A,j=this.rawValue_;this.equals_(j,K)&&!D.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=K,this.emitter.emit("change",{options:D,previousRawValue:j,rawValue:K,sender:this}))}}class X{constructor(A){this.emitter=new p,this.value_=A}get rawValue(){return this.value_}set rawValue(A){this.setRawValue(A,{forceEmit:!1,last:!0})}setRawValue(A,R){const D=R??{forceEmit:!1,last:!0},K=this.value_;K===A&&!D.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=A,this.emitter.emit("change",{options:D,previousRawValue:K,rawValue:this.value_,sender:this}))}}function W(w,A){const R=A==null?void 0:A.constraint,D=A==null?void 0:A.equals;return!R&&!D?new X(w):new U(w,A)}class Z{constructor(A){this.emitter=new p,this.valMap_=A;for(const R in this.valMap_)this.valMap_[R].emitter.on("change",()=>{this.emitter.emit("change",{key:R,sender:this})})}static createCore(A){return Object.keys(A).reduce((D,K)=>Object.assign(D,{[K]:W(A[K])}),{})}static fromObject(A){const R=this.createCore(A);return new Z(R)}get(A){return this.valMap_[A].rawValue}set(A,R){this.valMap_[A].rawValue=R}value(A){return this.valMap_[A]}}function J(w,A){const D=Object.keys(A).reduce((K,j)=>{if(K===void 0)return;const _=A[j],lt=_(w[j]);return lt.succeeded?Object.assign(Object.assign({},K),{[j]:lt.value}):void 0},{});return D}function N(w,A){return w.reduce((R,D)=>{if(R===void 0)return;const K=A(D);if(!(!K.succeeded||K.value===void 0))return[...R,K.value]},[])}function I(w){return w===null?!1:typeof w=="object"}function G(w){return A=>R=>{if(!A&&R===void 0)return{succeeded:!1,value:void 0};if(A&&R===void 0)return{succeeded:!0,value:void 0};const D=w(R);return D!==void 0?{succeeded:!0,value:D}:{succeeded:!1,value:void 0}}}function V(w){return{custom:A=>G(A)(w),boolean:G(A=>typeof A=="boolean"?A:void 0)(w),number:G(A=>typeof A=="number"?A:void 0)(w),string:G(A=>typeof A=="string"?A:void 0)(w),function:G(A=>typeof A=="function"?A:void 0)(w),constant:A=>G(R=>R===A?A:void 0)(w),raw:G(A=>A)(w),object:A=>G(R=>{if(I(R))return J(R,A)})(w),array:A=>G(R=>{if(Array.isArray(R))return N(R,A)})(w)}}const Y={optional:V(!0),required:V(!1)};function z(w,A){const R=Y.required.object(A)(w);return R.succeeded?R.value:void 0}function H(w){console.warn([`Missing '${w.key}' of ${w.target} in ${w.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function $(w){return w&&w.parentElement&&w.parentElement.removeChild(w),null}class Q{constructor(A){this.value_=A}static create(A){return[new Q(A),(R,D)=>{A.setRawValue(R,D)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const k=y("");function tt(w,A){return O(w,k(void 0,A))}class it extends Z{constructor(A){var R;super(A),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Q.create(W(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(R=this.get("parent"))===null||R===void 0||R.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(A){var R,D,K;const j=A??{};return new it(Z.createCore({disabled:(R=j.disabled)!==null&&R!==void 0?R:!1,disposed:!1,hidden:(D=j.hidden)!==null&&D!==void 0?D:!1,parent:(K=j.parent)!==null&&K!==void 0?K:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(A){S(this.globalDisabled_,tt(A,"disabled")),P(this,"hidden",tt(A,"hidden"))}bindDisabled(A){S(this.globalDisabled_,R=>{A.disabled=R})}bindTabIndex(A){S(this.globalDisabled_,R=>{A.tabIndex=R?-1:0})}handleDispose(A){this.value("disposed").emitter.on("change",R=>{R&&A()})}getGlobalDisabled_(){const A=this.get("parent");return(A?A.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(A){var R;const D=A.previousRawValue;D==null||D.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(R=this.get("parent"))===null||R===void 0||R.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function st(){return["veryfirst","first","last","verylast"]}const ot=y(""),rt={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class ut{constructor(A){this.parent_=null,this.blade=A.blade,this.view=A.view,this.viewProps=A.viewProps;const R=this.view.element;this.blade.value("positions").emitter.on("change",()=>{st().forEach(D=>{R.classList.remove(ot(void 0,rt[D]))}),this.blade.get("positions").forEach(D=>{R.classList.add(ot(void 0,rt[D]))})}),this.viewProps.handleDispose(()=>{$(R)})}get parent(){return this.parent_}set parent(A){if(this.parent_=A,!("parent"in this.viewProps.valMap_)){H({key:"parent",target:it.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}}const gt="http://www.w3.org/2000/svg";function mt(w){w.offsetHeight}function dt(w,A){const R=w.style.transition;w.style.transition="none",A(),w.style.transition=R}function at(w){return w.ontouchstart!==void 0}function Rt(){return globalThis}function ct(){return Rt().document}function yt(w){const A=w.ownerDocument.defaultView;return A&&"document"in A?w.getContext("2d",{willReadFrequently:!0}):null}const $t={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function q(w,A){const R=w.createElementNS(gt,"svg");return R.innerHTML=$t[A],R}function et(w,A,R){w.insertBefore(A,w.children[R])}function nt(w){w.parentElement&&w.parentElement.removeChild(w)}function ht(w){for(;w.children.length>0;)w.removeChild(w.children[0])}function ft(w){for(;w.childNodes.length>0;)w.removeChild(w.childNodes[0])}function Mt(w){return w.relatedTarget?w.relatedTarget:"explicitOriginalTarget"in w?w.explicitOriginalTarget:null}const pt=y("lbl");function Et(w,A){const R=w.createDocumentFragment();return A.split(`
`).map(K=>w.createTextNode(K)).forEach((K,j)=>{j>0&&R.appendChild(w.createElement("br")),R.appendChild(K)}),R}class vt{constructor(A,R){this.element=A.createElement("div"),this.element.classList.add(pt()),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("div");D.classList.add(pt("l")),P(R.props,"label",j=>{s(j)?this.element.classList.add(pt(void 0,"nol")):(this.element.classList.remove(pt(void 0,"nol")),ft(D),D.appendChild(Et(A,j)))}),this.element.appendChild(D),this.labelElement=D;const K=A.createElement("div");K.classList.add(pt("v")),this.element.appendChild(K),this.valueElement=K}}class Ct extends ut{constructor(A,R){const D=R.valueController.viewProps;super(Object.assign(Object.assign({},R),{view:new vt(A,{props:R.props,viewProps:D}),viewProps:D})),this.props=R.props,this.valueController=R.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const At={id:"button",type:"blade",accept(w){const A=Y,R=z(w,{title:A.required.string,view:A.required.constant("button"),label:A.optional.string});return R?{params:R}:null},controller(w){return new Ct(w.document,{blade:w.blade,props:Z.fromObject({label:w.params.label}),valueController:new B(w.document,{props:Z.fromObject({title:w.params.title}),viewProps:w.viewProps})})},api(w){return!(w.controller instanceof Ct)||!(w.controller.valueController instanceof B)?null:new c(w.controller)}};class Ut extends ut{constructor(A){super(A),this.value=A.value}}function Qt(){return new Z({positions:W([],{equals:u})})}class Ze extends Z{constructor(A){super(A)}static create(A){const R={completed:!0,expanded:A,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},D=Z.createCore(R);return new Ze(D)}get styleExpanded(){var A;return(A=this.get("temporaryExpanded"))!==null&&A!==void 0?A:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const A=this.get("expandedHeight");return this.get("shouldFixHeight")&&!s(A)?`${A}px`:"auto"}bindExpandedClass(A,R){const D=()=>{this.styleExpanded?A.classList.add(R):A.classList.remove(R)};P(this,"expanded",D),P(this,"temporaryExpanded",D)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function wl(w,A){let R=0;return dt(A,()=>{w.set("expandedHeight",null),w.set("temporaryExpanded",!0),mt(A),R=A.clientHeight,w.set("temporaryExpanded",null),mt(A)}),R}function ga(w,A){A.style.height=w.styleHeight}function Fs(w,A){w.value("expanded").emitter.on("beforechange",()=>{if(w.set("completed",!1),s(w.get("expandedHeight"))){const R=wl(w,A);R>0&&w.set("expandedHeight",R)}w.set("shouldFixHeight",!0),mt(A)}),w.emitter.on("change",()=>{ga(w,A)}),ga(w,A),A.addEventListener("transitionend",R=>{R.propertyName==="height"&&w.cleanUpTransition()})}class Is extends t{constructor(A,R){super(A),this.rackApi_=R}}function Ol(w,A){return w.addBlade(Object.assign(Object.assign({},A),{view:"button"}))}function Fl(w,A){return w.addBlade(Object.assign(Object.assign({},A),{view:"folder"}))}function Il(w,A){const R=A??{};return w.addBlade(Object.assign(Object.assign({},R),{view:"separator"}))}function bl(w,A){return w.addBlade(Object.assign(Object.assign({},A),{view:"tab"}))}class bs{constructor(A){this.emitter=new p,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=A}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(A){for(const R of this.allItems())if(A(R))return R;return null}includes(A){return this.cache_.has(A)}add(A,R){if(this.includes(A))throw f.shouldNeverHappen();const D=R!==void 0?R:this.items_.length;this.items_.splice(D,0,A),this.cache_.add(A);const K=this.extract_(A);K&&(K.emitter.on("add",this.onSubListAdd_),K.emitter.on("remove",this.onSubListRemove_),K.allItems().forEach(j=>{this.cache_.add(j)})),this.emitter.emit("add",{index:D,item:A,root:this,target:this})}remove(A){const R=this.items_.indexOf(A);if(R<0)return;this.items_.splice(R,1),this.cache_.delete(A);const D=this.extract_(A);D&&(D.emitter.off("add",this.onSubListAdd_),D.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:R,item:A,root:this,target:this})}onSubListAdd_(A){this.cache_.add(A.item),this.emitter.emit("add",{index:A.index,item:A.item,root:this,target:A.target})}onSubListRemove_(A){this.cache_.delete(A.item),this.emitter.emit("remove",{index:A.index,item:A.item,root:this,target:A.target})}}class Ds extends t{constructor(A){super(A),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new p,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(A){this.controller_.props.set("label",A)}on(A,R){const D=R.bind(this);return this.emitter_.on(A,K=>{D(K.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(A){const R=A.sender.target.read();this.emitter_.emit("change",{event:new d(this,R,this.controller_.binding.target.presetKey,A.options.last)})}}class xe extends Ct{constructor(A,R){super(A,R),this.binding=R.binding}}class Bs extends t{constructor(A){super(A),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new p,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(A){this.controller_.props.set("label",A)}on(A,R){const D=R.bind(this);return this.emitter_.on(A,K=>{D(K.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(A){const R=A.sender.target.read();this.emitter_.emit("update",{event:new r(this,R,this.controller_.binding.target.presetKey)})}}class Ne extends Ct{constructor(A,R){super(A,R),this.binding=R.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function Dl(w){return w instanceof Dn?w.apiSet_:w instanceof Is?w.rackApi_.apiSet_:null}function Ii(w,A){const R=w.find(D=>D.controller_===A);if(!R)throw f.shouldNeverHappen();return R}function xa(w,A,R){if(!v.isBindable(w))throw f.notBindable();return new v(w,A,R)}class Dn extends t{constructor(A,R){super(A),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new p,this.apiSet_=new bs(Dl),this.pool_=R;const D=this.controller_.rack;D.emitter.on("add",this.onRackAdd_),D.emitter.on("remove",this.onRackRemove_),D.emitter.on("inputchange",this.onRackInputChange_),D.emitter.on("monitorupdate",this.onRackMonitorUpdate_),D.children.forEach(K=>{this.setUpApi_(K)})}get children(){return this.controller_.rack.children.map(A=>Ii(this.apiSet_,A))}addInput(A,R,D){const K=D??{},j=this.controller_.view.element.ownerDocument,_=this.pool_.createInput(j,xa(A,R,K.presetKey),K),lt=new Ds(_);return this.add(lt,K.index)}addMonitor(A,R,D){const K=D??{},j=this.controller_.view.element.ownerDocument,_=this.pool_.createMonitor(j,xa(A,R),K),lt=new Bs(_);return this.add(lt,K.index)}addFolder(A){return Fl(this,A)}addButton(A){return Ol(this,A)}addSeparator(A){return Il(this,A)}addTab(A){return bl(this,A)}add(A,R){this.controller_.rack.add(A.controller_,R);const D=this.apiSet_.find(K=>K.controller_===A.controller_);return D&&this.apiSet_.remove(D),this.apiSet_.add(A),A}remove(A){this.controller_.rack.remove(A.controller_)}addBlade(A){const R=this.controller_.view.element.ownerDocument,D=this.pool_.createBlade(R,A),K=this.pool_.createBladeApi(D);return this.add(K,A.index)}on(A,R){const D=R.bind(this);return this.emitter_.on(A,K=>{D(K.event)}),this}setUpApi_(A){this.apiSet_.find(D=>D.controller_===A)||this.apiSet_.add(this.pool_.createBladeApi(A))}onRackAdd_(A){this.setUpApi_(A.bladeController)}onRackRemove_(A){if(A.isRoot){const R=Ii(this.apiSet_,A.bladeController);this.apiSet_.remove(R)}}onRackInputChange_(A){const R=A.bladeController;if(R instanceof xe){const D=Ii(this.apiSet_,R),K=R.binding;this.emitter_.emit("change",{event:new d(D,K.target.read(),K.target.presetKey,A.options.last)})}else if(R instanceof Ut){const D=Ii(this.apiSet_,R);this.emitter_.emit("change",{event:new d(D,R.value.rawValue,void 0,A.options.last)})}}onRackMonitorUpdate_(A){if(!(A.bladeController instanceof Ne))throw f.shouldNeverHappen();const R=Ii(this.apiSet_,A.bladeController),D=A.bladeController.binding;this.emitter_.emit("update",{event:new r(R,D.target.read(),D.target.presetKey)})}}class Ns extends Is{constructor(A,R){super(A,new Dn(A.rackController,R)),this.emitter_=new p,this.controller_.foldable.value("expanded").emitter.on("change",D=>{this.emitter_.emit("fold",{event:new o(this,D.sender.rawValue)})}),this.rackApi_.on("change",D=>{this.emitter_.emit("change",{event:D})}),this.rackApi_.on("update",D=>{this.emitter_.emit("update",{event:D})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(A){this.controller_.foldable.set("expanded",A)}get title(){return this.controller_.props.get("title")}set title(A){this.controller_.props.set("title",A)}get children(){return this.rackApi_.children}addInput(A,R,D){return this.rackApi_.addInput(A,R,D)}addMonitor(A,R,D){return this.rackApi_.addMonitor(A,R,D)}addFolder(A){return this.rackApi_.addFolder(A)}addButton(A){return this.rackApi_.addButton(A)}addSeparator(A){return this.rackApi_.addSeparator(A)}addTab(A){return this.rackApi_.addTab(A)}add(A,R){return this.rackApi_.add(A,R)}remove(A){this.rackApi_.remove(A)}addBlade(A){return this.rackApi_.addBlade(A)}on(A,R){const D=R.bind(this);return this.emitter_.on(A,K=>{D(K.event)}),this}}class Gs extends ut{constructor(A){super({blade:A.blade,view:A.view,viewProps:A.rackController.viewProps}),this.rackController=A.rackController}}class Bl{constructor(A,R){const D=y(R.viewName);this.element=A.createElement("div"),this.element.classList.add(D()),R.viewProps.bindClassModifiers(this.element)}}function Nl(w,A){for(let R=0;R<w.length;R++){const D=w[R];if(D instanceof xe&&D.binding===A)return D}return null}function Gl(w,A){for(let R=0;R<w.length;R++){const D=w[R];if(D instanceof Ne&&D.binding===A)return D}return null}function Vl(w,A){for(let R=0;R<w.length;R++){const D=w[R];if(D instanceof Ut&&D.value===A)return D}return null}function Vs(w){return w instanceof bi?w.rack:w instanceof Gs?w.rackController.rack:null}function Ul(w){const A=Vs(w);return A?A.bcSet_:null}class Yl{constructor(A){var R,D;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new p,this.blade_=(R=A.blade)!==null&&R!==void 0?R:null,(D=this.blade_)===null||D===void 0||D.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=A.viewProps,this.bcSet_=new bs(Ul),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(A,R){var D;(D=A.parent)===null||D===void 0||D.remove(A),h(A,"parent")?A.parent=this:(A.parent_=this,H({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(A,R)}remove(A){h(A,"parent")?A.parent=null:(A.parent_=null,H({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(A)}find(A){return this.bcSet_.allItems().filter(R=>R instanceof A)}onSetAdd_(A){this.updatePositions_();const R=A.target===A.root;if(this.emitter.emit("add",{bladeController:A.item,index:A.index,isRoot:R,sender:this}),!R)return;const D=A.item;if(D.viewProps.emitter.on("change",this.onChildViewPropsChange_),D.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),D.viewProps.handleDispose(this.onChildDispose_),D instanceof xe)D.binding.emitter.on("change",this.onChildInputChange_);else if(D instanceof Ne)D.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(D instanceof Ut)D.value.emitter.on("change",this.onChildValueChange_);else{const K=Vs(D);if(K){const j=K.emitter;j.on("layout",this.onDescendantLayout_),j.on("inputchange",this.onDescendantInputChange_),j.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(A){this.updatePositions_();const R=A.target===A.root;if(this.emitter.emit("remove",{bladeController:A.item,isRoot:R,sender:this}),!R)return;const D=A.item;if(D instanceof xe)D.binding.emitter.off("change",this.onChildInputChange_);else if(D instanceof Ne)D.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(D instanceof Ut)D.value.emitter.off("change",this.onChildValueChange_);else{const K=Vs(D);if(K){const j=K.emitter;j.off("layout",this.onDescendantLayout_),j.off("inputchange",this.onDescendantInputChange_),j.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const A=this.bcSet_.items.filter(K=>!K.viewProps.get("hidden")),R=A[0],D=A[A.length-1];this.bcSet_.items.forEach(K=>{const j=[];K===R&&(j.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&j.push("veryfirst")),K===D&&(j.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&j.push("verylast")),K.blade.set("positions",j)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(A){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(R=>R.viewProps.get("disposed")).forEach(R=>{this.bcSet_.remove(R)})}onChildInputChange_(A){const R=Nl(this.find(xe),A.sender);if(!R)throw f.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:R,options:A.options,sender:this})}onChildMonitorUpdate_(A){const R=Gl(this.find(Ne),A.sender);if(!R)throw f.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:R,sender:this})}onChildValueChange_(A){const R=Vl(this.find(Ut),A.sender);if(!R)throw f.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:R,options:A.options,sender:this})}onDescendantLayout_(A){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(A){this.emitter.emit("inputchange",{bladeController:A.bladeController,options:A.options,sender:this})}onDescendantMonitorUpdate_(A){this.emitter.emit("monitorupdate",{bladeController:A.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class bi extends ut{constructor(A,R){super(Object.assign(Object.assign({},R),{view:new Bl(A,{viewName:"brk",viewProps:R.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const D=new Yl({blade:R.root?void 0:R.blade,viewProps:R.viewProps});D.emitter.on("add",this.onRackAdd_),D.emitter.on("remove",this.onRackRemove_),this.rack=D,this.viewProps.handleDispose(()=>{for(let K=this.rack.children.length-1;K>=0;K--)this.rack.children[K].viewProps.set("disposed",!0)})}onRackAdd_(A){A.isRoot&&et(this.view.element,A.bladeController.view.element,A.index)}onRackRemove_(A){A.isRoot&&nt(A.bladeController.view.element)}}const ya=y("cnt");class Xl{constructor(A,R){var D;this.className_=y((D=R.viewName)!==null&&D!==void 0?D:"fld"),this.element=A.createElement("div"),this.element.classList.add(this.className_(),ya()),R.viewProps.bindClassModifiers(this.element),this.foldable_=R.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),P(this.foldable_,"completed",O(this.element,this.className_(void 0,"cpl")));const K=A.createElement("button");K.classList.add(this.className_("b")),P(R.props,"title",St=>{s(St)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),R.viewProps.bindDisabled(K),this.element.appendChild(K),this.buttonElement=K;const j=A.createElement("div");j.classList.add(this.className_("i")),this.element.appendChild(j);const _=A.createElement("div");_.classList.add(this.className_("t")),L(R.props.value("title"),_),this.buttonElement.appendChild(_),this.titleElement=_;const lt=A.createElement("div");lt.classList.add(this.className_("m")),this.buttonElement.appendChild(lt);const xt=R.containerElement;xt.classList.add(this.className_("c")),this.element.appendChild(xt),this.containerElement=xt}}class Us extends Gs{constructor(A,R){var D;const K=Ze.create((D=R.expanded)!==null&&D!==void 0?D:!0),j=new bi(A,{blade:R.blade,root:R.root,viewProps:R.viewProps});super(Object.assign(Object.assign({},R),{rackController:j,view:new Xl(A,{containerElement:j.view.element,foldable:K,props:R.props,viewName:R.root?"rot":void 0,viewProps:R.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=R.props,this.foldable=K,Fs(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const zl={id:"folder",type:"blade",accept(w){const A=Y,R=z(w,{title:A.required.string,view:A.required.constant("folder"),expanded:A.optional.boolean});return R?{params:R}:null},controller(w){return new Us(w.document,{blade:w.blade,expanded:w.params.expanded,props:Z.fromObject({title:w.params.title}),viewProps:w.viewProps})},api(w){return w.controller instanceof Us?new Ns(w.controller,w.pool):null}};class fi extends Ut{constructor(A,R){const D=R.valueController.viewProps;super(Object.assign(Object.assign({},R),{value:R.valueController.value,view:new vt(A,{props:R.props,viewProps:D}),viewProps:D})),this.props=R.props,this.valueController=R.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Ta extends t{}const Ea=y("spr");class Wl{constructor(A,R){this.element=A.createElement("div"),this.element.classList.add(Ea()),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("hr");D.classList.add(Ea("r")),this.element.appendChild(D)}}class Sa extends ut{constructor(A,R){super(Object.assign(Object.assign({},R),{view:new Wl(A,{viewProps:R.viewProps})}))}}const Hl={id:"separator",type:"blade",accept(w){const R=z(w,{view:Y.required.constant("separator")});return R?{params:R}:null},controller(w){return new Sa(w.document,{blade:w.blade,viewProps:w.viewProps})},api(w){return w.controller instanceof Sa?new Ta(w.controller):null}},Di=y("tbi");class Kl{constructor(A,R){this.element=A.createElement("div"),this.element.classList.add(Di()),R.viewProps.bindClassModifiers(this.element),P(R.props,"selected",j=>{j?this.element.classList.add(Di(void 0,"sel")):this.element.classList.remove(Di(void 0,"sel"))});const D=A.createElement("button");D.classList.add(Di("b")),R.viewProps.bindDisabled(D),this.element.appendChild(D),this.buttonElement=D;const K=A.createElement("div");K.classList.add(Di("t")),L(R.props.value("title"),K),this.buttonElement.appendChild(K),this.titleElement=K}}class Zl{constructor(A,R){this.emitter=new p,this.onClick_=this.onClick_.bind(this),this.props=R.props,this.viewProps=R.viewProps,this.view=new Kl(A,{props:R.props,viewProps:R.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Ca{constructor(A,R){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Zl(A,{props:R.itemProps,viewProps:it.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new bi(A,{blade:Qt(),viewProps:it.create()}),this.props=R.props,P(this.props,"selected",D=>{this.itemController.props.set("selected",D),this.contentController.viewProps.set("hidden",!D)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class Aa{constructor(A,R){this.controller_=A,this.rackApi_=R}get title(){var A;return(A=this.controller_.itemController.props.get("title"))!==null&&A!==void 0?A:""}set title(A){this.controller_.itemController.props.set("title",A)}get selected(){return this.controller_.props.get("selected")}set selected(A){this.controller_.props.set("selected",A)}get children(){return this.rackApi_.children}addButton(A){return this.rackApi_.addButton(A)}addFolder(A){return this.rackApi_.addFolder(A)}addSeparator(A){return this.rackApi_.addSeparator(A)}addTab(A){return this.rackApi_.addTab(A)}add(A,R){this.rackApi_.add(A,R)}remove(A){this.rackApi_.remove(A)}addInput(A,R,D){return this.rackApi_.addInput(A,R,D)}addMonitor(A,R,D){return this.rackApi_.addMonitor(A,R,D)}addBlade(A){return this.rackApi_.addBlade(A)}}class Pa extends Is{constructor(A,R){super(A,new Dn(A.rackController,R)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new p,this.pageApiMap_=new Map,this.rackApi_.on("change",D=>{this.emitter_.emit("change",{event:D})}),this.rackApi_.on("update",D=>{this.emitter_.emit("update",{event:D})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(D=>{this.setUpPageApi_(D)})}get pages(){return this.controller_.pageSet.items.map(A=>{const R=this.pageApiMap_.get(A);if(!R)throw f.shouldNeverHappen();return R})}addPage(A){const R=this.controller_.view.element.ownerDocument,D=new Ca(R,{itemProps:Z.fromObject({selected:!1,title:A.title}),props:Z.fromObject({selected:!1})});this.controller_.add(D,A.index);const K=this.pageApiMap_.get(D);if(!K)throw f.shouldNeverHappen();return K}removePage(A){this.controller_.remove(A)}on(A,R){const D=R.bind(this);return this.emitter_.on(A,K=>{D(K.event)}),this}setUpPageApi_(A){const R=this.rackApi_.apiSet_.find(K=>K.controller_===A.contentController);if(!R)throw f.shouldNeverHappen();const D=new Aa(A,R);this.pageApiMap_.set(A,D)}onPageAdd_(A){this.setUpPageApi_(A.item)}onPageRemove_(A){if(!this.pageApiMap_.get(A.item))throw f.shouldNeverHappen();this.pageApiMap_.delete(A.item)}onSelect_(A){this.emitter_.emit("select",{event:new n(this,A.rawValue)})}}const Ma=-1;class $l{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=W(!0),this.selectedIndex=W(Ma),this.items_=[]}add(A,R){const D=R??this.items_.length;this.items_.splice(D,0,A),A.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(A){const R=this.items_.indexOf(A);R<0||(this.items_.splice(R,1),A.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Ma,this.empty.rawValue=!0;return}const A=this.items_.findIndex(R=>R.rawValue);A<0?(this.items_.forEach((R,D)=>{R.rawValue=D===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((R,D)=>{R.rawValue=D===A}),this.selectedIndex.rawValue=A),this.empty.rawValue=!1}onItemSelectedChange_(A){if(A.rawValue){const R=this.items_.findIndex(D=>D===A.sender);this.items_.forEach((D,K)=>{D.rawValue=K===R}),this.selectedIndex.rawValue=R}else this.keepSelection_()}}const Bi=y("tab");class Jl{constructor(A,R){this.element=A.createElement("div"),this.element.classList.add(Bi(),ya()),R.viewProps.bindClassModifiers(this.element),S(R.empty,O(this.element,Bi(void 0,"nop")));const D=A.createElement("div");D.classList.add(Bi("t")),this.element.appendChild(D),this.itemsElement=D;const K=A.createElement("div");K.classList.add(Bi("i")),this.element.appendChild(K);const j=R.contentsElement;j.classList.add(Bi("c")),this.element.appendChild(j),this.contentsElement=j}}class Ra extends Gs{constructor(A,R){const D=new bi(A,{blade:R.blade,viewProps:R.viewProps}),K=new $l;super({blade:R.blade,rackController:D,view:new Jl(A,{contentsElement:D.view.element,empty:K.empty,viewProps:R.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new bs(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=K}get pageSet(){return this.pageSet_}add(A,R){this.pageSet_.add(A,R)}remove(A){this.pageSet_.remove(this.pageSet_.items[A])}onPageAdd_(A){const R=A.item;et(this.view.itemsElement,R.itemController.view.element,A.index),R.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(R.contentController,A.index),this.tab.add(R.props.value("selected"))}onPageRemove_(A){const R=A.item;nt(R.itemController.view.element),R.itemController.viewProps.set("parent",null),this.rackController.rack.remove(R.contentController),this.tab.remove(R.props.value("selected"))}}const La={id:"tab",type:"blade",accept(w){const A=Y,R=z(w,{pages:A.required.array(A.required.object({title:A.required.string})),view:A.required.constant("tab")});return!R||R.pages.length===0?null:{params:R}},controller(w){const A=new Ra(w.document,{blade:w.blade,viewProps:w.viewProps});return w.params.pages.forEach(R=>{const D=new Ca(w.document,{itemProps:Z.fromObject({selected:!1,title:R.title}),props:Z.fromObject({selected:!1})});A.add(D)}),A},api(w){return w.controller instanceof Ra?new Pa(w.controller,w.pool):null}};function jl(w,A){const R=w.accept(A.params);if(!R)return null;const D=Y.optional.boolean(A.params.disabled).value,K=Y.optional.boolean(A.params.hidden).value;return w.controller({blade:Qt(),document:A.document,params:Object.assign(Object.assign({},R.params),{disabled:D,hidden:K}),viewProps:it.create({disabled:D,hidden:K})})}class Ql{constructor(){this.disabled=!1,this.emitter=new p}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class kl{constructor(A,R){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=A,this.emitter=new p,this.interval_=R,this.setTimer_()}get disabled(){return this.disabled_}set disabled(A){this.disabled_=A,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const A=this.doc_.defaultView;A&&A.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const A=this.doc_.defaultView;A&&(this.timerId_=A.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class ql{constructor(A){this.onValueChange_=this.onValueChange_.bind(this),this.reader=A.reader,this.writer=A.writer,this.emitter=new p,this.value=A.value,this.value.emitter.on("change",this.onValueChange_),this.target=A.target,this.read()}read(){const A=this.target.read();A!==void 0&&(this.value.rawValue=this.reader(A))}write_(A){this.writer(this.target,A)}onValueChange_(A){this.write_(A.rawValue),this.emitter.emit("change",{options:A.options,rawValue:A.rawValue,sender:this})}}function wa(w,A){for(;w.length<A;)w.push(void 0)}function _l(w){const A=[];return wa(A,w),W(A)}function tu(w){const A=w.indexOf(void 0);return A<0?w:w.slice(0,A)}function eu(w,A){const R=[...tu(w),A];return R.length>w.length?R.splice(0,R.length-w.length):wa(R,w.length),R}class iu{constructor(A){this.onTick_=this.onTick_.bind(this),this.reader_=A.reader,this.target=A.target,this.emitter=new p,this.value=A.value,this.ticker=A.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const A=this.target.read();if(A===void 0)return;const R=this.value.rawValue,D=this.reader_(A);this.value.rawValue=eu(R,D),this.emitter.emit("update",{rawValue:D,sender:this})}onTick_(A){this.read()}}class Ni{constructor(A){this.constraints=A}constrain(A){return this.constraints.reduce((R,D)=>D.constrain(R),A)}}function Ae(w,A){if(w instanceof A)return w;if(w instanceof Ni){const R=w.constraints.reduce((D,K)=>D||(K instanceof A?K:null),null);if(R)return R}return null}class di{constructor(A){this.values=Z.fromObject({max:A.max,min:A.min})}constrain(A){const R=this.values.get("max"),D=this.values.get("min");return Math.min(Math.max(A,D),R)}}class Gi{constructor(A){this.values=Z.fromObject({options:A})}get options(){return this.values.get("options")}constrain(A){const R=this.values.get("options");return R.length===0||R.filter(K=>K.value===A).length>0?A:R[0].value}}class Oa{constructor(A){this.values=Z.fromObject({max:A.max,min:A.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(A){const R=this.values.get("max"),D=this.values.get("min");let K=A;return s(D)||(K=Math.max(K,D)),s(R)||(K=Math.min(K,R)),K}}class Bn{constructor(A,R=0){this.step=A,this.origin=R}constrain(A){const R=this.origin%this.step,D=Math.round((A-R)/this.step);return R+D*this.step}}const Ys=y("lst");class nu{constructor(A,R){this.onValueChange_=this.onValueChange_.bind(this),this.props_=R.props,this.element=A.createElement("div"),this.element.classList.add(Ys()),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("select");D.classList.add(Ys("s")),P(this.props_,"options",j=>{ht(D),j.forEach((_,lt)=>{const xt=A.createElement("option");xt.dataset.index=String(lt),xt.textContent=_.text,xt.value=String(_.value),D.appendChild(xt)})}),R.viewProps.bindDisabled(D),this.element.appendChild(D),this.selectElement=D;const K=A.createElement("div");K.classList.add(Ys("m")),K.appendChild(q(A,"dropdown")),this.element.appendChild(K),R.value.emitter.on("change",this.onValueChange_),this.value_=R.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class Vi{constructor(A,R){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=R.props,this.value=R.value,this.viewProps=R.viewProps,this.view=new nu(A,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(A){const D=A.currentTarget.selectedOptions.item(0);if(!D)return;const K=Number(D.dataset.index);this.value.rawValue=this.props.get("options")[K].value}}const Fa=y("pop");class su{constructor(A,R){this.element=A.createElement("div"),this.element.classList.add(Fa()),R.viewProps.bindClassModifiers(this.element),S(R.shows,O(this.element,Fa(void 0,"v")))}}class Ia{constructor(A,R){this.shows=W(!1),this.viewProps=R.viewProps,this.view=new su(A,{shows:this.shows,viewProps:this.viewProps})}}const ba=y("txt");class ru{constructor(A,R){this.onChange_=this.onChange_.bind(this),this.element=A.createElement("div"),this.element.classList.add(ba()),R.viewProps.bindClassModifiers(this.element),this.props_=R.props,this.props_.emitter.on("change",this.onChange_);const D=A.createElement("input");D.classList.add(ba("i")),D.type="text",R.viewProps.bindDisabled(D),this.element.appendChild(D),this.inputElement=D,R.value.emitter.on("change",this.onChange_),this.value_=R.value,this.refresh()}refresh(){const A=this.props_.get("formatter");this.inputElement.value=A(this.value_.rawValue)}onChange_(){this.refresh()}}class Nn{constructor(A,R){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=R.parser,this.props=R.props,this.value=R.value,this.viewProps=R.viewProps,this.view=new ru(A,{props:R.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(A){const D=A.currentTarget.value,K=this.parser_(D);s(K)||(this.value.rawValue=K),this.view.refresh()}}function au(w){return String(w)}function Da(w){return w==="false"?!1:!!w}function Ba(w){return au(w)}class ou{constructor(A){this.text=A}evaluate(){return Number(this.text)}toString(){return this.text}}const hu={"**":(w,A)=>Math.pow(w,A),"*":(w,A)=>w*A,"/":(w,A)=>w/A,"%":(w,A)=>w%A,"+":(w,A)=>w+A,"-":(w,A)=>w-A,"<<":(w,A)=>w<<A,">>":(w,A)=>w>>A,">>>":(w,A)=>w>>>A,"&":(w,A)=>w&A,"^":(w,A)=>w^A,"|":(w,A)=>w|A};class lu{constructor(A,R,D){this.left=R,this.operator=A,this.right=D}evaluate(){const A=hu[this.operator];if(!A)throw new Error(`unexpected binary operator: '${this.operator}`);return A(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const uu={"+":w=>w,"-":w=>-w,"~":w=>~w};class fu{constructor(A,R){this.operator=A,this.expression=R}evaluate(){const A=uu[this.operator];if(!A)throw new Error(`unexpected unary operator: '${this.operator}`);return A(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Xs(w){return(A,R)=>{for(let D=0;D<w.length;D++){const K=w[D](A,R);if(K!=="")return K}return""}}function Ui(w,A){var R;const D=w.substr(A).match(/^\s+/);return(R=D&&D[0])!==null&&R!==void 0?R:""}function du(w,A){const R=w.substr(A,1);return R.match(/^[1-9]$/)?R:""}function Yi(w,A){var R;const D=w.substr(A).match(/^[0-9]+/);return(R=D&&D[0])!==null&&R!==void 0?R:""}function cu(w,A){const R=Yi(w,A);if(R!=="")return R;const D=w.substr(A,1);if(A+=1,D!=="-"&&D!=="+")return"";const K=Yi(w,A);return K===""?"":D+K}function zs(w,A){const R=w.substr(A,1);if(A+=1,R.toLowerCase()!=="e")return"";const D=cu(w,A);return D===""?"":R+D}function Na(w,A){const R=w.substr(A,1);if(R==="0")return R;const D=du(w,A);return A+=D.length,D===""?"":D+Yi(w,A)}function vu(w,A){const R=Na(w,A);if(A+=R.length,R==="")return"";const D=w.substr(A,1);if(A+=D.length,D!==".")return"";const K=Yi(w,A);return A+=K.length,R+D+K+zs(w,A)}function pu(w,A){const R=w.substr(A,1);if(A+=R.length,R!==".")return"";const D=Yi(w,A);return A+=D.length,D===""?"":R+D+zs(w,A)}function mu(w,A){const R=Na(w,A);return A+=R.length,R===""?"":R+zs(w,A)}const gu=Xs([vu,pu,mu]);function xu(w,A){var R;const D=w.substr(A).match(/^[01]+/);return(R=D&&D[0])!==null&&R!==void 0?R:""}function yu(w,A){const R=w.substr(A,2);if(A+=R.length,R.toLowerCase()!=="0b")return"";const D=xu(w,A);return D===""?"":R+D}function Tu(w,A){var R;const D=w.substr(A).match(/^[0-7]+/);return(R=D&&D[0])!==null&&R!==void 0?R:""}function Eu(w,A){const R=w.substr(A,2);if(A+=R.length,R.toLowerCase()!=="0o")return"";const D=Tu(w,A);return D===""?"":R+D}function Su(w,A){var R;const D=w.substr(A).match(/^[0-9a-f]+/i);return(R=D&&D[0])!==null&&R!==void 0?R:""}function Cu(w,A){const R=w.substr(A,2);if(A+=R.length,R.toLowerCase()!=="0x")return"";const D=Su(w,A);return D===""?"":R+D}const Au=Xs([yu,Eu,Cu]),Pu=Xs([Au,gu]);function Mu(w,A){const R=Pu(w,A);return A+=R.length,R===""?null:{evaluable:new ou(R),cursor:A}}function Ru(w,A){const R=w.substr(A,1);if(A+=R.length,R!=="(")return null;const D=Va(w,A);if(!D)return null;A=D.cursor,A+=Ui(w,A).length;const K=w.substr(A,1);return A+=K.length,K!==")"?null:{evaluable:D.evaluable,cursor:A}}function Lu(w,A){var R;return(R=Mu(w,A))!==null&&R!==void 0?R:Ru(w,A)}function Ga(w,A){const R=Lu(w,A);if(R)return R;const D=w.substr(A,1);if(A+=D.length,D!=="+"&&D!=="-"&&D!=="~")return null;const K=Ga(w,A);return K?(A=K.cursor,{cursor:A,evaluable:new fu(D,K.evaluable)}):null}function wu(w,A,R){R+=Ui(A,R).length;const D=w.filter(K=>A.startsWith(K,R))[0];return D?(R+=D.length,R+=Ui(A,R).length,{cursor:R,operator:D}):null}function Ou(w,A){return(R,D)=>{const K=w(R,D);if(!K)return null;D=K.cursor;let j=K.evaluable;for(;;){const _=wu(A,R,D);if(!_)break;D=_.cursor;const lt=w(R,D);if(!lt)return null;D=lt.cursor,j=new lu(_.operator,j,lt.evaluable)}return j?{cursor:D,evaluable:j}:null}}const Fu=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((w,A)=>Ou(w,A),Ga);function Va(w,A){return A+=Ui(w,A).length,Fu(w,A)}function Iu(w){const A=Va(w,0);return!A||A.cursor+Ui(w,A.cursor).length!==w.length?null:A.evaluable}function Pe(w){var A;const R=Iu(w);return(A=R==null?void 0:R.evaluate())!==null&&A!==void 0?A:null}function Ua(w){if(typeof w=="number")return w;if(typeof w=="string"){const A=Pe(w);if(!s(A))return A}return 0}function bu(w){return String(w)}function qt(w){return A=>A.toFixed(Math.max(Math.min(w,20),0))}const Du=qt(0);function Gn(w){return Du(w)+"%"}function Ya(w){return String(w)}function Ws(w){return w}function Xi({primary:w,secondary:A,forward:R,backward:D}){let K=!1;function j(_){K||(K=!0,_(),K=!1)}w.emitter.on("change",_=>{j(()=>{A.setRawValue(R(w,A),_.options)})}),A.emitter.on("change",_=>{j(()=>{w.setRawValue(D(w,A),_.options)}),j(()=>{A.setRawValue(R(w,A),_.options)})}),j(()=>{A.setRawValue(R(w,A),{forceEmit:!1,last:!0})})}function ie(w,A){const R=w*(A.altKey?.1:1)*(A.shiftKey?10:1);return A.upKey?+R:A.downKey?-R:0}function zi(w){return{altKey:w.altKey,downKey:w.key==="ArrowDown",shiftKey:w.shiftKey,upKey:w.key==="ArrowUp"}}function Me(w){return{altKey:w.altKey,downKey:w.key==="ArrowLeft",shiftKey:w.shiftKey,upKey:w.key==="ArrowRight"}}function Bu(w){return w==="ArrowUp"||w==="ArrowDown"}function Xa(w){return Bu(w)||w==="ArrowLeft"||w==="ArrowRight"}function Hs(w,A){var R,D;const K=A.ownerDocument.defaultView,j=A.getBoundingClientRect();return{x:w.pageX-(((R=K&&K.scrollX)!==null&&R!==void 0?R:0)+j.left),y:w.pageY-(((D=K&&K.scrollY)!==null&&D!==void 0?D:0)+j.top)}}class $e{constructor(A){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=A,this.emitter=new p,A.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),A.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),A.addEventListener("touchend",this.onTouchEnd_),A.addEventListener("mousedown",this.onMouseDown_)}computePosition_(A){const R=this.elem_.getBoundingClientRect();return{bounds:{width:R.width,height:R.height},point:A?{x:A.x,y:A.y}:null}}onMouseDown_(A){var R;A.preventDefault(),(R=A.currentTarget)===null||R===void 0||R.focus();const D=this.elem_.ownerDocument;D.addEventListener("mousemove",this.onDocumentMouseMove_),D.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:A.altKey,data:this.computePosition_(Hs(A,this.elem_)),sender:this,shiftKey:A.shiftKey})}onDocumentMouseMove_(A){this.emitter.emit("move",{altKey:A.altKey,data:this.computePosition_(Hs(A,this.elem_)),sender:this,shiftKey:A.shiftKey})}onDocumentMouseUp_(A){const R=this.elem_.ownerDocument;R.removeEventListener("mousemove",this.onDocumentMouseMove_),R.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:A.altKey,data:this.computePosition_(Hs(A,this.elem_)),sender:this,shiftKey:A.shiftKey})}onTouchStart_(A){A.preventDefault();const R=A.targetTouches.item(0),D=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:A.altKey,data:this.computePosition_(R?{x:R.clientX-D.left,y:R.clientY-D.top}:void 0),sender:this,shiftKey:A.shiftKey}),this.lastTouch_=R}onTouchMove_(A){const R=A.targetTouches.item(0),D=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:A.altKey,data:this.computePosition_(R?{x:R.clientX-D.left,y:R.clientY-D.top}:void 0),sender:this,shiftKey:A.shiftKey}),this.lastTouch_=R}onTouchEnd_(A){var R;const D=(R=A.targetTouches.item(0))!==null&&R!==void 0?R:this.lastTouch_,K=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:A.altKey,data:this.computePosition_(D?{x:D.clientX-K.left,y:D.clientY-K.top}:void 0),sender:this,shiftKey:A.shiftKey})}}function Wt(w,A,R,D,K){const j=(w-A)/(R-A);return D+j*(K-D)}function za(w){return String(w.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Jt(w,A,R){return Math.min(Math.max(w,A),R)}function Wa(w,A){return(w%A+A)%A}const he=y("txt");class Nu{constructor(A,R){this.onChange_=this.onChange_.bind(this),this.props_=R.props,this.props_.emitter.on("change",this.onChange_),this.element=A.createElement("div"),this.element.classList.add(he(),he(void 0,"num")),R.arrayPosition&&this.element.classList.add(he(void 0,R.arrayPosition)),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("input");D.classList.add(he("i")),D.type="text",R.viewProps.bindDisabled(D),this.element.appendChild(D),this.inputElement=D,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=R.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(he()),this.inputElement.classList.add(he("i"));const K=A.createElement("div");K.classList.add(he("k")),this.element.appendChild(K),this.knobElement=K;const j=A.createElementNS(gt,"svg");j.classList.add(he("g")),this.knobElement.appendChild(j);const _=A.createElementNS(gt,"path");_.classList.add(he("gb")),j.appendChild(_),this.guideBodyElem_=_;const lt=A.createElementNS(gt,"path");lt.classList.add(he("gh")),j.appendChild(lt),this.guideHeadElem_=lt;const xt=A.createElement("div");xt.classList.add(y("tt")()),this.knobElement.appendChild(xt),this.tooltipElem_=xt,R.value.emitter.on("change",this.onChange_),this.value=R.value,this.refresh()}onDraggingChange_(A){if(A.rawValue===null){this.element.classList.remove(he(void 0,"drg"));return}this.element.classList.add(he(void 0,"drg"));const R=A.rawValue/this.props_.get("draggingScale"),D=R+(R>0?-1:R<0?1:0),K=Jt(-D,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${D+K},0 L${D},4 L${D+K},8`,`M ${R},-1 L${R},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${R},4`);const j=this.props_.get("formatter");this.tooltipElem_.textContent=j(this.value.rawValue),this.tooltipElem_.style.left=`${R}px`}refresh(){const A=this.props_.get("formatter");this.inputElement.value=A(this.value.rawValue)}onChange_(){this.refresh()}}class Wi{constructor(A,R){var D;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=R.baseStep,this.parser_=R.parser,this.props=R.props,this.sliderProps_=(D=R.sliderProps)!==null&&D!==void 0?D:null,this.value=R.value,this.viewProps=R.viewProps,this.dragging_=W(null),this.view=new Nu(A,{arrayPosition:R.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const K=new $e(this.view.knobElement);K.emitter.on("down",this.onPointerDown_),K.emitter.on("move",this.onPointerMove_),K.emitter.on("up",this.onPointerUp_)}constrainValue_(A){var R,D;const K=(R=this.sliderProps_)===null||R===void 0?void 0:R.get("minValue"),j=(D=this.sliderProps_)===null||D===void 0?void 0:D.get("maxValue");let _=A;return K!==void 0&&(_=Math.max(_,K)),j!==void 0&&(_=Math.min(_,j)),_}onInputChange_(A){const D=A.currentTarget.value,K=this.parser_(D);s(K)||(this.value.rawValue=this.constrainValue_(K)),this.view.refresh()}onInputKeyDown_(A){const R=ie(this.baseStep_,zi(A));R!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+R),{forceEmit:!1,last:!1})}onInputKeyUp_(A){ie(this.baseStep_,zi(A))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(A){if(!A.point)return null;const R=A.point.x-A.bounds.width/2;return this.constrainValue_(this.originRawValue_+R*this.props.get("draggingScale"))}onPointerMove_(A){const R=this.computeDraggingValue_(A.data);R!==null&&(this.value.setRawValue(R,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(A){const R=this.computeDraggingValue_(A.data);R!==null&&(this.value.setRawValue(R,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Ks=y("sld");class Gu{constructor(A,R){this.onChange_=this.onChange_.bind(this),this.props_=R.props,this.props_.emitter.on("change",this.onChange_),this.element=A.createElement("div"),this.element.classList.add(Ks()),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("div");D.classList.add(Ks("t")),R.viewProps.bindTabIndex(D),this.element.appendChild(D),this.trackElement=D;const K=A.createElement("div");K.classList.add(Ks("k")),this.trackElement.appendChild(K),this.knobElement=K,R.value.emitter.on("change",this.onChange_),this.value=R.value,this.update_()}update_(){const A=Jt(Wt(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${A}%`}onChange_(){this.update_()}}class Vu{constructor(A,R){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=R.baseStep,this.value=R.value,this.viewProps=R.viewProps,this.props=R.props,this.view=new Gu(A,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new $e(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(A,R){A.point&&this.value.setRawValue(Wt(Jt(A.point.x,0,A.bounds.width),0,A.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),R)}onPointerDownOrMove_(A){this.handlePointerEvent_(A.data,{forceEmit:!1,last:!1})}onPointerUp_(A){this.handlePointerEvent_(A.data,{forceEmit:!0,last:!0})}onKeyDown_(A){const R=ie(this.baseStep_,Me(A));R!==0&&this.value.setRawValue(this.value.rawValue+R,{forceEmit:!1,last:!1})}onKeyUp_(A){ie(this.baseStep_,Me(A))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Zs=y("sldtxt");class Uu{constructor(A,R){this.element=A.createElement("div"),this.element.classList.add(Zs());const D=A.createElement("div");D.classList.add(Zs("s")),this.sliderView_=R.sliderView,D.appendChild(this.sliderView_.element),this.element.appendChild(D);const K=A.createElement("div");K.classList.add(Zs("t")),this.textView_=R.textView,K.appendChild(this.textView_.element),this.element.appendChild(K)}}class $s{constructor(A,R){this.value=R.value,this.viewProps=R.viewProps,this.sliderC_=new Vu(A,{baseStep:R.baseStep,props:R.sliderProps,value:R.value,viewProps:this.viewProps}),this.textC_=new Wi(A,{baseStep:R.baseStep,parser:R.parser,props:R.textProps,sliderProps:R.sliderProps,value:R.value,viewProps:R.viewProps}),this.view=new Uu(A,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Hi(w,A){w.write(A)}function Vn(w){const A=Y;if(Array.isArray(w))return A.required.array(A.required.object({text:A.required.string,value:A.required.raw}))(w).value;if(typeof w=="object")return A.required.raw(w).value}function Ha(w){if(w==="inline"||w==="popup")return w}function Ge(w){const A=Y;return A.required.object({max:A.optional.number,min:A.optional.number,step:A.optional.number})(w).value}function Ka(w){if(Array.isArray(w))return w;const A=[];return Object.keys(w).forEach(R=>{A.push({text:R,value:w[R]})}),A}function Js(w){return s(w)?null:new Gi(Ka(w))}function Yu(w){const A=w?Ae(w,Bn):null;return A?A.step:null}function Un(w,A){const R=w&&Ae(w,Bn);return R?za(R.step):Math.max(za(A),2)}function ci(w){const A=Yu(w);return A??1}function vi(w,A){var R;const D=w&&Ae(w,Bn),K=Math.abs((R=D==null?void 0:D.step)!==null&&R!==void 0?R:A);return K===0?.1:Math.pow(10,Math.floor(Math.log10(K))-1)}const Yn=y("ckb");class Xu{constructor(A,R){this.onValueChange_=this.onValueChange_.bind(this),this.element=A.createElement("div"),this.element.classList.add(Yn()),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("label");D.classList.add(Yn("l")),this.element.appendChild(D);const K=A.createElement("input");K.classList.add(Yn("i")),K.type="checkbox",D.appendChild(K),this.inputElement=K,R.viewProps.bindDisabled(this.inputElement);const j=A.createElement("div");j.classList.add(Yn("w")),D.appendChild(j);const _=q(A,"check");j.appendChild(_),R.value.emitter.on("change",this.onValueChange_),this.value=R.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class zu{constructor(A,R){this.onInputChange_=this.onInputChange_.bind(this),this.value=R.value,this.viewProps=R.viewProps,this.view=new Xu(A,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(A){const R=A.currentTarget;this.value.rawValue=R.checked}}function Wu(w){const A=[],R=Js(w.options);return R&&A.push(R),new Ni(A)}const Hu={id:"input-bool",type:"input",accept:(w,A)=>{if(typeof w!="boolean")return null;const D=z(A,{options:Y.optional.custom(Vn)});return D?{initialValue:w,params:D}:null},binding:{reader:w=>Da,constraint:w=>Wu(w.params),writer:w=>Hi},controller:w=>{const A=w.document,R=w.value,D=w.constraint,K=D&&Ae(D,Gi);return K?new Vi(A,{props:new Z({options:K.values.value("options")}),value:R,viewProps:w.viewProps}):new zu(A,{value:R,viewProps:w.viewProps})}},Je=y("col");class Ku{constructor(A,R){this.element=A.createElement("div"),this.element.classList.add(Je()),R.foldable.bindExpandedClass(this.element,Je(void 0,"expanded")),P(R.foldable,"completed",O(this.element,Je(void 0,"cpl")));const D=A.createElement("div");D.classList.add(Je("h")),this.element.appendChild(D);const K=A.createElement("div");K.classList.add(Je("s")),D.appendChild(K),this.swatchElement=K;const j=A.createElement("div");if(j.classList.add(Je("t")),D.appendChild(j),this.textElement=j,R.pickerLayout==="inline"){const _=A.createElement("div");_.classList.add(Je("p")),this.element.appendChild(_),this.pickerElement=_}else this.pickerElement=null}}function Zu(w,A,R){const D=Jt(w/255,0,1),K=Jt(A/255,0,1),j=Jt(R/255,0,1),_=Math.max(D,K,j),lt=Math.min(D,K,j),xt=_-lt;let St=0,bt=0;const Bt=(lt+_)/2;return xt!==0&&(bt=xt/(1-Math.abs(_+lt-1)),D===_?St=(K-j)/xt:K===_?St=2+(j-D)/xt:St=4+(D-K)/xt,St=St/6+(St<0?1:0)),[St*360,bt*100,Bt*100]}function $u(w,A,R){const D=(w%360+360)%360,K=Jt(A/100,0,1),j=Jt(R/100,0,1),_=(1-Math.abs(2*j-1))*K,lt=_*(1-Math.abs(D/60%2-1)),xt=j-_/2;let St,bt,Bt;return D>=0&&D<60?[St,bt,Bt]=[_,lt,0]:D>=60&&D<120?[St,bt,Bt]=[lt,_,0]:D>=120&&D<180?[St,bt,Bt]=[0,_,lt]:D>=180&&D<240?[St,bt,Bt]=[0,lt,_]:D>=240&&D<300?[St,bt,Bt]=[lt,0,_]:[St,bt,Bt]=[_,0,lt],[(St+xt)*255,(bt+xt)*255,(Bt+xt)*255]}function Ju(w,A,R){const D=Jt(w/255,0,1),K=Jt(A/255,0,1),j=Jt(R/255,0,1),_=Math.max(D,K,j),lt=Math.min(D,K,j),xt=_-lt;let St;xt===0?St=0:_===D?St=60*(((K-j)/xt%6+6)%6):_===K?St=60*((j-D)/xt+2):St=60*((D-K)/xt+4);const bt=_===0?0:xt/_,Bt=_;return[St,bt*100,Bt*100]}function Za(w,A,R){const D=Wa(w,360),K=Jt(A/100,0,1),j=Jt(R/100,0,1),_=j*K,lt=_*(1-Math.abs(D/60%2-1)),xt=j-_;let St,bt,Bt;return D>=0&&D<60?[St,bt,Bt]=[_,lt,0]:D>=60&&D<120?[St,bt,Bt]=[lt,_,0]:D>=120&&D<180?[St,bt,Bt]=[0,_,lt]:D>=180&&D<240?[St,bt,Bt]=[0,lt,_]:D>=240&&D<300?[St,bt,Bt]=[lt,0,_]:[St,bt,Bt]=[_,0,lt],[(St+xt)*255,(bt+xt)*255,(Bt+xt)*255]}function ju(w,A,R){const D=R+A*(100-Math.abs(2*R-100))/200;return[w,D!==0?A*(100-Math.abs(2*R-100))/D:0,R+A*(100-Math.abs(2*R-100))/(2*100)]}function Qu(w,A,R){const D=100-Math.abs(R*(200-A)/100-100);return[w,D!==0?A*R/D:0,R*(200-A)/(2*100)]}function je(w){return[w[0],w[1],w[2]]}function $a(w,A){return[w[0],w[1],w[2],A]}const ku={hsl:{hsl:(w,A,R)=>[w,A,R],hsv:ju,rgb:$u},hsv:{hsl:Qu,hsv:(w,A,R)=>[w,A,R],rgb:Za},rgb:{hsl:Zu,hsv:Ju,rgb:(w,A,R)=>[w,A,R]}};function Xn(w,A){return[A==="float"?1:w==="rgb"?255:360,A==="float"?1:w==="rgb"?255:100,A==="float"?1:w==="rgb"?255:100]}function qu(w,A){return w===A?A:Wa(w,A)}function _u(w,A,R){var D;const K=Xn(A,R);return[A==="rgb"?Jt(w[0],0,K[0]):qu(w[0],K[0]),Jt(w[1],0,K[1]),Jt(w[2],0,K[2]),Jt((D=w[3])!==null&&D!==void 0?D:1,0,1)]}function Ja(w,A,R,D){const K=Xn(A,R),j=Xn(A,D);return w.map((_,lt)=>_/K[lt]*j[lt])}function tf(w,A,R){const D=Ja(w,A.mode,A.type,"int"),K=ku[A.mode][R.mode](...D);return Ja(K,R.mode,"int",R.type)}function zn(w,A){return typeof w!="object"||s(w)?!1:A in w&&typeof w[A]=="number"}class Ot{static black(A="int"){return new Ot([0,0,0],"rgb",A)}static fromObject(A,R="int"){const D="a"in A?[A.r,A.g,A.b,A.a]:[A.r,A.g,A.b];return new Ot(D,"rgb",R)}static toRgbaObject(A,R="int"){return A.toRgbaObject(R)}static isRgbColorObject(A){return zn(A,"r")&&zn(A,"g")&&zn(A,"b")}static isRgbaColorObject(A){return this.isRgbColorObject(A)&&zn(A,"a")}static isColorObject(A){return this.isRgbColorObject(A)}static equals(A,R){if(A.mode!==R.mode)return!1;const D=A.comps_,K=R.comps_;for(let j=0;j<D.length;j++)if(D[j]!==K[j])return!1;return!0}constructor(A,R,D="int"){this.mode=R,this.type=D,this.comps_=_u(A,R,D)}getComponents(A,R="int"){return $a(tf(je(this.comps_),{mode:this.mode,type:this.type},{mode:A??this.mode,type:R}),this.comps_[3])}toRgbaObject(A="int"){const R=this.getComponents("rgb",A);return{r:R[0],g:R[1],b:R[2],a:R[3]}}}const Ve=y("colp");class ef{constructor(A,R){this.alphaViews_=null,this.element=A.createElement("div"),this.element.classList.add(Ve()),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("div");D.classList.add(Ve("hsv"));const K=A.createElement("div");K.classList.add(Ve("sv")),this.svPaletteView_=R.svPaletteView,K.appendChild(this.svPaletteView_.element),D.appendChild(K);const j=A.createElement("div");j.classList.add(Ve("h")),this.hPaletteView_=R.hPaletteView,j.appendChild(this.hPaletteView_.element),D.appendChild(j),this.element.appendChild(D);const _=A.createElement("div");if(_.classList.add(Ve("rgb")),this.textView_=R.textView,_.appendChild(this.textView_.element),this.element.appendChild(_),R.alphaViews){this.alphaViews_={palette:R.alphaViews.palette,text:R.alphaViews.text};const lt=A.createElement("div");lt.classList.add(Ve("a"));const xt=A.createElement("div");xt.classList.add(Ve("ap")),xt.appendChild(this.alphaViews_.palette.element),lt.appendChild(xt);const St=A.createElement("div");St.classList.add(Ve("at")),St.appendChild(this.alphaViews_.text.element),lt.appendChild(St),this.element.appendChild(lt)}}get allFocusableElements(){const A=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(R=>R.inputElement)];return this.alphaViews_&&A.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),A}}function nf(w){return w==="int"?"int":w==="float"?"float":void 0}function js(w){const A=Y;return z(w,{alpha:A.optional.boolean,color:A.optional.object({alpha:A.optional.boolean,type:A.optional.custom(nf)}),expanded:A.optional.boolean,picker:A.optional.custom(Ha)})}function Qe(w){return w?.1:1}function ke(w){var A;return(A=w.color)===null||A===void 0?void 0:A.type}function sf(w,A){return w.alpha===A.alpha&&w.mode===A.mode&&w.notation===A.notation&&w.type===A.type}function le(w,A){const R=w.match(/^(.+)%$/);return Math.min(R?parseFloat(R[1])*.01*A:parseFloat(w),A)}const rf={deg:w=>w,grad:w=>w*360/400,rad:w=>w*360/(2*Math.PI),turn:w=>w*360};function ja(w){const A=w.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!A)return parseFloat(w);const R=parseFloat(A[1]),D=A[2];return rf[D](R)}function Qa(w){const A=w.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!A)return null;const R=[le(A[1],255),le(A[2],255),le(A[3],255)];return isNaN(R[0])||isNaN(R[1])||isNaN(R[2])?null:R}function ka(w){return A=>{const R=Qa(A);return R?new Ot(R,"rgb",w):null}}function qa(w){const A=w.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!A)return null;const R=[le(A[1],255),le(A[2],255),le(A[3],255),le(A[4],1)];return isNaN(R[0])||isNaN(R[1])||isNaN(R[2])||isNaN(R[3])?null:R}function _a(w){return A=>{const R=qa(A);return R?new Ot(R,"rgb",w):null}}function to(w){const A=w.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!A)return null;const R=[ja(A[1]),le(A[2],100),le(A[3],100)];return isNaN(R[0])||isNaN(R[1])||isNaN(R[2])?null:R}function eo(w){return A=>{const R=to(A);return R?new Ot(R,"hsl",w):null}}function io(w){const A=w.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!A)return null;const R=[ja(A[1]),le(A[2],100),le(A[3],100),le(A[4],1)];return isNaN(R[0])||isNaN(R[1])||isNaN(R[2])||isNaN(R[3])?null:R}function no(w){return A=>{const R=io(A);return R?new Ot(R,"hsl",w):null}}function so(w){const A=w.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(A)return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16)];const R=w.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return R?[parseInt(R[1],16),parseInt(R[2],16),parseInt(R[3],16)]:null}function af(w){const A=so(w);return A?new Ot(A,"rgb","int"):null}function ro(w){const A=w.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(A)return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16),Wt(parseInt(A[4]+A[4],16),0,255,0,1)];const R=w.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return R?[parseInt(R[1],16),parseInt(R[2],16),parseInt(R[3],16),Wt(parseInt(R[4],16),0,255,0,1)]:null}function of(w){const A=ro(w);return A?new Ot(A,"rgb","int"):null}function ao(w){const A=w.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!A)return null;const R=[parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3])];return isNaN(R[0])||isNaN(R[1])||isNaN(R[2])?null:R}function oo(w){return A=>{const R=ao(A);return R?new Ot(R,"rgb",w):null}}function ho(w){const A=w.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!A)return null;const R=[parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3]),parseFloat(A[4])];return isNaN(R[0])||isNaN(R[1])||isNaN(R[2])||isNaN(R[3])?null:R}function lo(w){return A=>{const R=ho(A);return R?new Ot(R,"rgb",w):null}}const hf=[{parser:so,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:ro,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Qa,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:qa,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:to,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:io,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:ao,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:ho,result:{alpha:!0,mode:"rgb",notation:"object"}}];function lf(w){return hf.reduce((A,{parser:R,result:D})=>A||(R(w)?D:null),null)}function Qs(w,A="int"){const R=lf(w);return R?R.notation==="hex"&&A!=="float"?Object.assign(Object.assign({},R),{type:"int"}):R.notation==="func"?Object.assign(Object.assign({},R),{type:A}):null:null}const uo={int:[af,of,ka("int"),_a("int"),eo("int"),no("int"),oo("int"),lo("int")],float:[ka("float"),_a("float"),eo("float"),no("float"),oo("float"),lo("float")]};function uf(w){const A=uo[w];return R=>{if(typeof R!="string")return Ot.black(w);const D=A.reduce((K,j)=>K||j(R),null);return D??Ot.black(w)}}function ks(w){const A=uo[w];return R=>A.reduce((D,K)=>D||K(R),null)}function fo(w){const A=Jt(Math.floor(w),0,255).toString(16);return A.length===1?`0${A}`:A}function co(w,A="#"){const R=je(w.getComponents("rgb")).map(fo).join("");return`${A}${R}`}function qs(w,A="#"){const R=w.getComponents("rgb"),D=[R[0],R[1],R[2],R[3]*255].map(fo).join("");return`${A}${D}`}function vo(w,A){const R=qt(A==="float"?2:0);return`rgb(${je(w.getComponents("rgb",A)).map(K=>R(K)).join(", ")})`}function ff(w){return A=>vo(A,w)}function Wn(w,A){const R=qt(2),D=qt(A==="float"?2:0);return`rgba(${w.getComponents("rgb",A).map((j,_)=>(_===3?R:D)(j)).join(", ")})`}function df(w){return A=>Wn(A,w)}function cf(w){const A=[qt(0),Gn,Gn];return`hsl(${je(w.getComponents("hsl")).map((D,K)=>A[K](D)).join(", ")})`}function vf(w){const A=[qt(0),Gn,Gn,qt(2)];return`hsla(${w.getComponents("hsl").map((D,K)=>A[K](D)).join(", ")})`}function po(w,A){const R=qt(A==="float"?2:0),D=["r","g","b"];return`{${je(w.getComponents("rgb",A)).map((j,_)=>`${D[_]}: ${R(j)}`).join(", ")}}`}function pf(w){return A=>po(A,w)}function mo(w,A){const R=qt(2),D=qt(A==="float"?2:0),K=["r","g","b","a"];return`{${w.getComponents("rgb",A).map((_,lt)=>{const xt=lt===3?R:D;return`${K[lt]}: ${xt(_)}`}).join(", ")}}`}function mf(w){return A=>mo(A,w)}const gf=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:co},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:qs},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:cf},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:vf},...["int","float"].reduce((w,A)=>[...w,{format:{alpha:!1,mode:"rgb",notation:"func",type:A},stringifier:ff(A)},{format:{alpha:!0,mode:"rgb",notation:"func",type:A},stringifier:df(A)},{format:{alpha:!1,mode:"rgb",notation:"object",type:A},stringifier:pf(A)},{format:{alpha:!0,mode:"rgb",notation:"object",type:A},stringifier:mf(A)}],[])];function _s(w){return gf.reduce((A,R)=>A||(sf(R.format,w)?R.stringifier:null),null)}const Ki=y("apl");class xf{constructor(A,R){this.onValueChange_=this.onValueChange_.bind(this),this.value=R.value,this.value.emitter.on("change",this.onValueChange_),this.element=A.createElement("div"),this.element.classList.add(Ki()),R.viewProps.bindClassModifiers(this.element),R.viewProps.bindTabIndex(this.element);const D=A.createElement("div");D.classList.add(Ki("b")),this.element.appendChild(D);const K=A.createElement("div");K.classList.add(Ki("c")),D.appendChild(K),this.colorElem_=K;const j=A.createElement("div");j.classList.add(Ki("m")),this.element.appendChild(j),this.markerElem_=j;const _=A.createElement("div");_.classList.add(Ki("p")),this.markerElem_.appendChild(_),this.previewElem_=_,this.update_()}update_(){const A=this.value.rawValue,R=A.getComponents("rgb"),D=new Ot([R[0],R[1],R[2],0],"rgb"),K=new Ot([R[0],R[1],R[2],255],"rgb"),j=["to right",Wn(D),Wn(K)];this.colorElem_.style.background=`linear-gradient(${j.join(",")})`,this.previewElem_.style.backgroundColor=Wn(A);const _=Wt(R[3],0,1,0,100);this.markerElem_.style.left=`${_}%`}onValueChange_(){this.update_()}}class yf{constructor(A,R){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=R.value,this.viewProps=R.viewProps,this.view=new xf(A,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new $e(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(A,R){if(!A.point)return;const D=A.point.x/A.bounds.width,K=this.value.rawValue,[j,_,lt]=K.getComponents("hsv");this.value.setRawValue(new Ot([j,_,lt,D],"hsv"),R)}onPointerDown_(A){this.handlePointerEvent_(A.data,{forceEmit:!1,last:!1})}onPointerMove_(A){this.handlePointerEvent_(A.data,{forceEmit:!1,last:!1})}onPointerUp_(A){this.handlePointerEvent_(A.data,{forceEmit:!0,last:!0})}onKeyDown_(A){const R=ie(Qe(!0),Me(A));if(R===0)return;const D=this.value.rawValue,[K,j,_,lt]=D.getComponents("hsv");this.value.setRawValue(new Ot([K,j,_,lt+R],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(A){ie(Qe(!0),Me(A))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const pi=y("coltxt");function Tf(w){const A=w.createElement("select"),R=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return A.appendChild(R.reduce((D,K)=>{const j=w.createElement("option");return j.textContent=K.text,j.value=K.value,D.appendChild(j),D},w.createDocumentFragment())),A}class Ef{constructor(A,R){this.element=A.createElement("div"),this.element.classList.add(pi()),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("div");D.classList.add(pi("m")),this.modeElem_=Tf(A),this.modeElem_.classList.add(pi("ms")),D.appendChild(this.modeSelectElement),R.viewProps.bindDisabled(this.modeElem_);const K=A.createElement("div");K.classList.add(pi("mm")),K.appendChild(q(A,"dropdown")),D.appendChild(K),this.element.appendChild(D);const j=A.createElement("div");j.classList.add(pi("w")),this.element.appendChild(j),this.textsElem_=j,this.textViews_=R.textViews,this.applyTextViews_(),S(R.colorMode,_=>{this.modeElem_.value=_})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(A){this.textViews_=A,this.applyTextViews_()}applyTextViews_(){ht(this.textsElem_);const A=this.element.ownerDocument;this.textViews_.forEach(R=>{const D=A.createElement("div");D.classList.add(pi("c")),D.appendChild(R.element),this.textsElem_.appendChild(D)})}}function Sf(w){return qt(w==="float"?2:0)}function Cf(w,A,R){const D=Xn(w,A)[R];return new di({min:0,max:D})}function tr(w,A,R){return new Wi(w,{arrayPosition:R===0?"fst":R===3-1?"lst":"mid",baseStep:Qe(!1),parser:A.parser,props:Z.fromObject({draggingScale:A.colorType==="float"?.01:1,formatter:Sf(A.colorType)}),value:W(0,{constraint:Cf(A.colorMode,A.colorType,R)}),viewProps:A.viewProps})}class Af{constructor(A,R){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=R.colorType,this.parser_=R.parser,this.value=R.value,this.viewProps=R.viewProps,this.colorMode=W(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(A),this.view=new Ef(A,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(A){const R={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},D=[tr(A,R,0),tr(A,R,1),tr(A,R,2)];return D.forEach((K,j)=>{Xi({primary:this.value,secondary:K.value,forward:_=>_.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[j],backward:(_,lt)=>{const xt=this.colorMode.rawValue,St=_.rawValue.getComponents(xt,this.colorType_);return St[j]=lt.rawValue,new Ot($a(je(St),St[3]),xt,this.colorType_)}})}),D}onModeSelectChange_(A){const R=A.currentTarget;this.colorMode.rawValue=R.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const er=y("hpl");class Pf{constructor(A,R){this.onValueChange_=this.onValueChange_.bind(this),this.value=R.value,this.value.emitter.on("change",this.onValueChange_),this.element=A.createElement("div"),this.element.classList.add(er()),R.viewProps.bindClassModifiers(this.element),R.viewProps.bindTabIndex(this.element);const D=A.createElement("div");D.classList.add(er("c")),this.element.appendChild(D);const K=A.createElement("div");K.classList.add(er("m")),this.element.appendChild(K),this.markerElem_=K,this.update_()}update_(){const A=this.value.rawValue,[R]=A.getComponents("hsv");this.markerElem_.style.backgroundColor=vo(new Ot([R,100,100],"hsv"));const D=Wt(R,0,360,0,100);this.markerElem_.style.left=`${D}%`}onValueChange_(){this.update_()}}class Mf{constructor(A,R){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=R.value,this.viewProps=R.viewProps,this.view=new Pf(A,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new $e(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(A,R){if(!A.point)return;const D=Wt(Jt(A.point.x,0,A.bounds.width),0,A.bounds.width,0,360),K=this.value.rawValue,[,j,_,lt]=K.getComponents("hsv");this.value.setRawValue(new Ot([D,j,_,lt],"hsv"),R)}onPointerDown_(A){this.handlePointerEvent_(A.data,{forceEmit:!1,last:!1})}onPointerMove_(A){this.handlePointerEvent_(A.data,{forceEmit:!1,last:!1})}onPointerUp_(A){this.handlePointerEvent_(A.data,{forceEmit:!0,last:!0})}onKeyDown_(A){const R=ie(Qe(!1),Me(A));if(R===0)return;const D=this.value.rawValue,[K,j,_,lt]=D.getComponents("hsv");this.value.setRawValue(new Ot([K+R,j,_,lt],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(A){ie(Qe(!1),Me(A))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const ir=y("svp"),go=64;class Rf{constructor(A,R){this.onValueChange_=this.onValueChange_.bind(this),this.value=R.value,this.value.emitter.on("change",this.onValueChange_),this.element=A.createElement("div"),this.element.classList.add(ir()),R.viewProps.bindClassModifiers(this.element),R.viewProps.bindTabIndex(this.element);const D=A.createElement("canvas");D.height=go,D.width=go,D.classList.add(ir("c")),this.element.appendChild(D),this.canvasElement=D;const K=A.createElement("div");K.classList.add(ir("m")),this.element.appendChild(K),this.markerElem_=K,this.update_()}update_(){const A=yt(this.canvasElement);if(!A)return;const D=this.value.rawValue.getComponents("hsv"),K=this.canvasElement.width,j=this.canvasElement.height,_=A.getImageData(0,0,K,j),lt=_.data;for(let bt=0;bt<j;bt++)for(let Bt=0;Bt<K;Bt++){const qe=Wt(Bt,0,K,0,100),$i=Wt(bt,0,j,100,0),Ji=Za(D[0],qe,$i),Hn=(bt*K+Bt)*4;lt[Hn]=Ji[0],lt[Hn+1]=Ji[1],lt[Hn+2]=Ji[2],lt[Hn+3]=255}A.putImageData(_,0,0);const xt=Wt(D[1],0,100,0,100);this.markerElem_.style.left=`${xt}%`;const St=Wt(D[2],0,100,100,0);this.markerElem_.style.top=`${St}%`}onValueChange_(){this.update_()}}class Lf{constructor(A,R){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=R.value,this.viewProps=R.viewProps,this.view=new Rf(A,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new $e(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(A,R){if(!A.point)return;const D=Wt(A.point.x,0,A.bounds.width,0,100),K=Wt(A.point.y,0,A.bounds.height,100,0),[j,,,_]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Ot([j,D,K,_],"hsv"),R)}onPointerDown_(A){this.handlePointerEvent_(A.data,{forceEmit:!1,last:!1})}onPointerMove_(A){this.handlePointerEvent_(A.data,{forceEmit:!1,last:!1})}onPointerUp_(A){this.handlePointerEvent_(A.data,{forceEmit:!0,last:!0})}onKeyDown_(A){Xa(A.key)&&A.preventDefault();const[R,D,K,j]=this.value.rawValue.getComponents("hsv"),_=Qe(!1),lt=ie(_,Me(A)),xt=ie(_,zi(A));lt===0&&xt===0||this.value.setRawValue(new Ot([R,D+lt,K+xt,j],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(A){const R=Qe(!1),D=ie(R,Me(A)),K=ie(R,zi(A));D===0&&K===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class wf{constructor(A,R){this.value=R.value,this.viewProps=R.viewProps,this.hPaletteC_=new Mf(A,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Lf(A,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=R.supportsAlpha?{palette:new yf(A,{value:this.value,viewProps:this.viewProps}),text:new Wi(A,{parser:Pe,baseStep:.1,props:Z.fromObject({draggingScale:.01,formatter:qt(2)}),value:W(0,{constraint:new di({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Xi({primary:this.value,secondary:this.alphaIcs_.text.value,forward:D=>D.rawValue.getComponents()[3],backward:(D,K)=>{const j=D.rawValue.getComponents();return j[3]=K.rawValue,new Ot(j,D.rawValue.mode)}}),this.textC_=new Af(A,{colorType:R.colorType,parser:Pe,value:this.value,viewProps:this.viewProps}),this.view=new ef(A,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:R.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const nr=y("colsw");class Of{constructor(A,R){this.onValueChange_=this.onValueChange_.bind(this),R.value.emitter.on("change",this.onValueChange_),this.value=R.value,this.element=A.createElement("div"),this.element.classList.add(nr()),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("div");D.classList.add(nr("sw")),this.element.appendChild(D),this.swatchElem_=D;const K=A.createElement("button");K.classList.add(nr("b")),R.viewProps.bindDisabled(K),this.element.appendChild(K),this.buttonElement=K,this.update_()}update_(){const A=this.value.rawValue;this.swatchElem_.style.backgroundColor=qs(A)}onValueChange_(){this.update_()}}class Ff{constructor(A,R){this.value=R.value,this.viewProps=R.viewProps,this.view=new Of(A,{value:this.value,viewProps:this.viewProps})}}class sr{constructor(A,R){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=R.value,this.viewProps=R.viewProps,this.foldable_=Ze.create(R.expanded),this.swatchC_=new Ff(A,{value:this.value,viewProps:this.viewProps});const D=this.swatchC_.view.buttonElement;D.addEventListener("blur",this.onButtonBlur_),D.addEventListener("click",this.onButtonClick_),this.textC_=new Nn(A,{parser:R.parser,props:Z.fromObject({formatter:R.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Ku(A,{foldable:this.foldable_,pickerLayout:R.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=R.pickerLayout==="popup"?new Ia(A,{viewProps:this.viewProps}):null;const K=new wf(A,{colorType:R.colorType,supportsAlpha:R.supportsAlpha,value:this.value,viewProps:this.viewProps});K.view.allFocusableElements.forEach(j=>{j.addEventListener("blur",this.onPopupChildBlur_),j.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=K,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(K.view.element),Xi({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:j=>j.rawValue,backward:(j,_)=>_.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Fs(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(A){if(!this.popC_)return;const R=this.view.element,D=A.relatedTarget;(!D||!R.contains(D))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(A){if(!this.popC_)return;const R=this.popC_.view.element,D=Mt(A);D&&R.contains(D)||D&&D===this.swatchC_.view.buttonElement&&!at(R.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(A){this.popC_?A.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&A.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function If(w,A){return Ot.isColorObject(w)?Ot.fromObject(w,A):Ot.black(A)}function bf(w){return je(w.getComponents("rgb")).reduce((A,R)=>A<<8|Math.floor(R)&255,0)}function Df(w){return w.getComponents("rgb").reduce((A,R,D)=>{const K=Math.floor(D===3?R*255:R)&255;return A<<8|K},0)>>>0}function Bf(w){return new Ot([w>>16&255,w>>8&255,w&255],"rgb")}function Nf(w){return new Ot([w>>24&255,w>>16&255,w>>8&255,Wt(w&255,0,255,0,1)],"rgb")}function Gf(w){return typeof w!="number"?Ot.black():Bf(w)}function Vf(w){return typeof w!="number"?Ot.black():Nf(w)}function Uf(w){const A=_s(w);return A?(R,D)=>{Hi(R,A(D))}:null}function Yf(w){const A=w?Df:bf;return(R,D)=>{Hi(R,A(D))}}function Xf(w,A,R){const D=A.toRgbaObject(R);w.writeProperty("r",D.r),w.writeProperty("g",D.g),w.writeProperty("b",D.b),w.writeProperty("a",D.a)}function zf(w,A,R){const D=A.toRgbaObject(R);w.writeProperty("r",D.r),w.writeProperty("g",D.g),w.writeProperty("b",D.b)}function Wf(w,A){return(R,D)=>{w?Xf(R,D,A):zf(R,D,A)}}function rr(w){var A;return!!(w!=null&&w.alpha||!((A=w==null?void 0:w.color)===null||A===void 0)&&A.alpha)}function Hf(w){return w?A=>qs(A,"0x"):A=>co(A,"0x")}function Kf(w){return"color"in w||"view"in w&&w.view==="color"}const Zf={id:"input-color-number",type:"input",accept:(w,A)=>{if(typeof w!="number"||!Kf(A))return null;const R=js(A);return R?{initialValue:w,params:R}:null},binding:{reader:w=>rr(w.params)?Vf:Gf,equals:Ot.equals,writer:w=>Yf(rr(w.params))},controller:w=>{const A=rr(w.params),R="expanded"in w.params?w.params.expanded:void 0,D="picker"in w.params?w.params.picker:void 0;return new sr(w.document,{colorType:"int",expanded:R??!1,formatter:Hf(A),parser:ks("int"),pickerLayout:D??"popup",supportsAlpha:A,value:w.value,viewProps:w.viewProps})}};function $f(w){return Ot.isRgbaColorObject(w)}function Jf(w){return A=>If(A,w)}function jf(w,A){return R=>w?mo(R,A):po(R,A)}const Qf={id:"input-color-object",type:"input",accept:(w,A)=>{if(!Ot.isColorObject(w))return null;const R=js(A);return R?{initialValue:w,params:R}:null},binding:{reader:w=>Jf(ke(w.params)),equals:Ot.equals,writer:w=>Wf($f(w.initialValue),ke(w.params))},controller:w=>{var A;const R=Ot.isRgbaColorObject(w.initialValue),D="expanded"in w.params?w.params.expanded:void 0,K="picker"in w.params?w.params.picker:void 0,j=(A=ke(w.params))!==null&&A!==void 0?A:"int";return new sr(w.document,{colorType:j,expanded:D??!1,formatter:jf(R,j),parser:ks(j),pickerLayout:K??"popup",supportsAlpha:R,value:w.value,viewProps:w.viewProps})}},kf={id:"input-color-string",type:"input",accept:(w,A)=>{if(typeof w!="string"||"view"in A&&A.view==="text")return null;const R=Qs(w,ke(A));if(!R||!_s(R))return null;const K=js(A);return K?{initialValue:w,params:K}:null},binding:{reader:w=>{var A;return uf((A=ke(w.params))!==null&&A!==void 0?A:"int")},equals:Ot.equals,writer:w=>{const A=Qs(w.initialValue,ke(w.params));if(!A)throw f.shouldNeverHappen();const R=Uf(A);if(!R)throw f.notBindable();return R}},controller:w=>{const A=Qs(w.initialValue,ke(w.params));if(!A)throw f.shouldNeverHappen();const R=_s(A);if(!R)throw f.shouldNeverHappen();const D="expanded"in w.params?w.params.expanded:void 0,K="picker"in w.params?w.params.picker:void 0;return new sr(w.document,{colorType:A.type,expanded:D??!1,formatter:R,parser:ks(A.type),pickerLayout:K??"popup",supportsAlpha:A.alpha,value:w.value,viewProps:w.viewProps})}};class Ue{constructor(A){this.components=A.components,this.asm_=A.assembly}constrain(A){const R=this.asm_.toComponents(A).map((D,K)=>{var j,_;return(_=(j=this.components[K])===null||j===void 0?void 0:j.constrain(D))!==null&&_!==void 0?_:D});return this.asm_.fromComponents(R)}}const xo=y("pndtxt");class qf{constructor(A,R){this.textViews=R.textViews,this.element=A.createElement("div"),this.element.classList.add(xo()),this.textViews.forEach(D=>{const K=A.createElement("div");K.classList.add(xo("a")),K.appendChild(D.element),this.element.appendChild(K)})}}function _f(w,A,R){return new Wi(w,{arrayPosition:R===0?"fst":R===A.axes.length-1?"lst":"mid",baseStep:A.axes[R].baseStep,parser:A.parser,props:A.axes[R].textProps,value:W(0,{constraint:A.axes[R].constraint}),viewProps:A.viewProps})}class ar{constructor(A,R){this.value=R.value,this.viewProps=R.viewProps,this.acs_=R.axes.map((D,K)=>_f(A,R,K)),this.acs_.forEach((D,K)=>{Xi({primary:this.value,secondary:D.value,forward:j=>R.assembly.toComponents(j.rawValue)[K],backward:(j,_)=>{const lt=R.assembly.toComponents(j.rawValue);return lt[K]=_.rawValue,R.assembly.fromComponents(lt)}})}),this.view=new qf(A,{textViews:this.acs_.map(D=>D.view)})}}function yo(w,A){return"step"in w&&!s(w.step)?new Bn(w.step,A):null}function To(w){return!s(w.max)&&!s(w.min)?new di({max:w.max,min:w.min}):!s(w.max)||!s(w.min)?new Oa({max:w.max,min:w.min}):null}function td(w){const A=Ae(w,di);if(A)return[A.values.get("min"),A.values.get("max")];const R=Ae(w,Oa);return R?[R.minValue,R.maxValue]:[void 0,void 0]}function ed(w,A){const R=[],D=yo(w,A);D&&R.push(D);const K=To(w);K&&R.push(K);const j=Js(w.options);return j&&R.push(j),new Ni(R)}const id={id:"input-number",type:"input",accept:(w,A)=>{if(typeof w!="number")return null;const R=Y,D=z(A,{format:R.optional.function,max:R.optional.number,min:R.optional.number,options:R.optional.custom(Vn),step:R.optional.number});return D?{initialValue:w,params:D}:null},binding:{reader:w=>Ua,constraint:w=>ed(w.params,w.initialValue),writer:w=>Hi},controller:w=>{var A;const R=w.value,D=w.constraint,K=D&&Ae(D,Gi);if(K)return new Vi(w.document,{props:new Z({options:K.values.value("options")}),value:R,viewProps:w.viewProps});const j=(A="format"in w.params?w.params.format:void 0)!==null&&A!==void 0?A:qt(Un(D,R.rawValue)),_=D&&Ae(D,di);return _?new $s(w.document,{baseStep:ci(D),parser:Pe,sliderProps:new Z({maxValue:_.values.value("max"),minValue:_.values.value("min")}),textProps:Z.fromObject({draggingScale:vi(D,R.rawValue),formatter:j}),value:R,viewProps:w.viewProps}):new Wi(w.document,{baseStep:ci(D),parser:Pe,props:Z.fromObject({draggingScale:vi(D,R.rawValue),formatter:j}),value:R,viewProps:w.viewProps})}};class Ye{constructor(A=0,R=0){this.x=A,this.y=R}getComponents(){return[this.x,this.y]}static isObject(A){if(s(A))return!1;const R=A.x,D=A.y;return!(typeof R!="number"||typeof D!="number")}static equals(A,R){return A.x===R.x&&A.y===R.y}toObject(){return{x:this.x,y:this.y}}}const Eo={toComponents:w=>w.getComponents(),fromComponents:w=>new Ye(...w)},mi=y("p2d");class nd{constructor(A,R){this.element=A.createElement("div"),this.element.classList.add(mi()),R.viewProps.bindClassModifiers(this.element),S(R.expanded,O(this.element,mi(void 0,"expanded")));const D=A.createElement("div");D.classList.add(mi("h")),this.element.appendChild(D);const K=A.createElement("button");K.classList.add(mi("b")),K.appendChild(q(A,"p2dpad")),R.viewProps.bindDisabled(K),D.appendChild(K),this.buttonElement=K;const j=A.createElement("div");if(j.classList.add(mi("t")),D.appendChild(j),this.textElement=j,R.pickerLayout==="inline"){const _=A.createElement("div");_.classList.add(mi("p")),this.element.appendChild(_),this.pickerElement=_}else this.pickerElement=null}}const Xe=y("p2dp");class sd{constructor(A,R){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=R.invertsY,this.maxValue_=R.maxValue,this.element=A.createElement("div"),this.element.classList.add(Xe()),R.layout==="popup"&&this.element.classList.add(Xe(void 0,"p")),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("div");D.classList.add(Xe("p")),R.viewProps.bindTabIndex(D),this.element.appendChild(D),this.padElement=D;const K=A.createElementNS(gt,"svg");K.classList.add(Xe("g")),this.padElement.appendChild(K),this.svgElem_=K;const j=A.createElementNS(gt,"line");j.classList.add(Xe("ax")),j.setAttributeNS(null,"x1","0"),j.setAttributeNS(null,"y1","50%"),j.setAttributeNS(null,"x2","100%"),j.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(j);const _=A.createElementNS(gt,"line");_.classList.add(Xe("ax")),_.setAttributeNS(null,"x1","50%"),_.setAttributeNS(null,"y1","0"),_.setAttributeNS(null,"x2","50%"),_.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(_);const lt=A.createElementNS(gt,"line");lt.classList.add(Xe("l")),lt.setAttributeNS(null,"x1","50%"),lt.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(lt),this.lineElem_=lt;const xt=A.createElement("div");xt.classList.add(Xe("m")),this.padElement.appendChild(xt),this.markerElem_=xt,R.value.emitter.on("change",this.onValueChange_),this.value=R.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[A,R]=this.value.rawValue.getComponents(),D=this.maxValue_,K=Wt(A,-D,+D,0,100),j=Wt(R,-D,+D,0,100),_=this.invertsY_?100-j:j;this.lineElem_.setAttributeNS(null,"x2",`${K}%`),this.lineElem_.setAttributeNS(null,"y2",`${_}%`),this.markerElem_.style.left=`${K}%`,this.markerElem_.style.top=`${_}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function So(w,A,R){return[ie(A[0],Me(w)),ie(A[1],zi(w))*(R?1:-1)]}class rd{constructor(A,R){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=R.value,this.viewProps=R.viewProps,this.baseSteps_=R.baseSteps,this.maxValue_=R.maxValue,this.invertsY_=R.invertsY,this.view=new sd(A,{invertsY:this.invertsY_,layout:R.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new $e(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(A,R){if(!A.point)return;const D=this.maxValue_,K=Wt(A.point.x,0,A.bounds.width,-D,+D),j=Wt(this.invertsY_?A.bounds.height-A.point.y:A.point.y,0,A.bounds.height,-D,+D);this.value.setRawValue(new Ye(K,j),R)}onPointerDown_(A){this.handlePointerEvent_(A.data,{forceEmit:!1,last:!1})}onPointerMove_(A){this.handlePointerEvent_(A.data,{forceEmit:!1,last:!1})}onPointerUp_(A){this.handlePointerEvent_(A.data,{forceEmit:!0,last:!0})}onPadKeyDown_(A){Xa(A.key)&&A.preventDefault();const[R,D]=So(A,this.baseSteps_,this.invertsY_);R===0&&D===0||this.value.setRawValue(new Ye(this.value.rawValue.x+R,this.value.rawValue.y+D),{forceEmit:!1,last:!1})}onPadKeyUp_(A){const[R,D]=So(A,this.baseSteps_,this.invertsY_);R===0&&D===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ad{constructor(A,R){var D,K;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=R.value,this.viewProps=R.viewProps,this.foldable_=Ze.create(R.expanded),this.popC_=R.pickerLayout==="popup"?new Ia(A,{viewProps:this.viewProps}):null;const j=new rd(A,{baseSteps:[R.axes[0].baseStep,R.axes[1].baseStep],invertsY:R.invertsY,layout:R.pickerLayout,maxValue:R.maxValue,value:this.value,viewProps:this.viewProps});j.view.allFocusableElements.forEach(_=>{_.addEventListener("blur",this.onPopupChildBlur_),_.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=j,this.textC_=new ar(A,{assembly:Eo,axes:R.axes,parser:R.parser,value:this.value,viewProps:this.viewProps}),this.view=new nd(A,{expanded:this.foldable_.value("expanded"),pickerLayout:R.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(D=this.view.buttonElement)===null||D===void 0||D.addEventListener("blur",this.onPadButtonBlur_),(K=this.view.buttonElement)===null||K===void 0||K.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Xi({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:_=>_.rawValue,backward:(_,lt)=>lt.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Fs(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(A){if(!this.popC_)return;const R=this.view.element,D=A.relatedTarget;(!D||!R.contains(D))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(A){if(!this.popC_)return;const R=this.popC_.view.element,D=Mt(A);D&&R.contains(D)||D&&D===this.view.buttonElement&&!at(R.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(A){this.popC_?A.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&A.key==="Escape"&&this.view.buttonElement.focus()}}class gi{constructor(A=0,R=0,D=0){this.x=A,this.y=R,this.z=D}getComponents(){return[this.x,this.y,this.z]}static isObject(A){if(s(A))return!1;const R=A.x,D=A.y,K=A.z;return!(typeof R!="number"||typeof D!="number"||typeof K!="number")}static equals(A,R){return A.x===R.x&&A.y===R.y&&A.z===R.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Co={toComponents:w=>w.getComponents(),fromComponents:w=>new gi(...w)};function od(w){return gi.isObject(w)?new gi(w.x,w.y,w.z):new gi}function hd(w,A){w.writeProperty("x",A.x),w.writeProperty("y",A.y),w.writeProperty("z",A.z)}function ld(w,A){return new Ue({assembly:Co,components:[Re("x"in w?w.x:void 0,A.x),Re("y"in w?w.y:void 0,A.y),Re("z"in w?w.z:void 0,A.z)]})}function or(w,A){return{baseStep:ci(A),constraint:A,textProps:Z.fromObject({draggingScale:vi(A,w),formatter:qt(Un(A,w))})}}const ud={id:"input-point3d",type:"input",accept:(w,A)=>{if(!gi.isObject(w))return null;const R=Y,D=z(A,{x:R.optional.custom(Ge),y:R.optional.custom(Ge),z:R.optional.custom(Ge)});return D?{initialValue:w,params:D}:null},binding:{reader:w=>od,constraint:w=>ld(w.params,w.initialValue),equals:gi.equals,writer:w=>hd},controller:w=>{const A=w.value,R=w.constraint;if(!(R instanceof Ue))throw f.shouldNeverHappen();return new ar(w.document,{assembly:Co,axes:[or(A.rawValue.x,R.components[0]),or(A.rawValue.y,R.components[1]),or(A.rawValue.z,R.components[2])],parser:Pe,value:A,viewProps:w.viewProps})}};class xi{constructor(A=0,R=0,D=0,K=0){this.x=A,this.y=R,this.z=D,this.w=K}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(A){if(s(A))return!1;const R=A.x,D=A.y,K=A.z,j=A.w;return!(typeof R!="number"||typeof D!="number"||typeof K!="number"||typeof j!="number")}static equals(A,R){return A.x===R.x&&A.y===R.y&&A.z===R.z&&A.w===R.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Ao={toComponents:w=>w.getComponents(),fromComponents:w=>new xi(...w)};function fd(w){return xi.isObject(w)?new xi(w.x,w.y,w.z,w.w):new xi}function dd(w,A){w.writeProperty("x",A.x),w.writeProperty("y",A.y),w.writeProperty("z",A.z),w.writeProperty("w",A.w)}function cd(w,A){return new Ue({assembly:Ao,components:[Re("x"in w?w.x:void 0,A.x),Re("y"in w?w.y:void 0,A.y),Re("z"in w?w.z:void 0,A.z),Re("w"in w?w.w:void 0,A.w)]})}function vd(w,A){return{baseStep:ci(A),constraint:A,textProps:Z.fromObject({draggingScale:vi(A,w),formatter:qt(Un(A,w))})}}const pd={id:"input-point4d",type:"input",accept:(w,A)=>{if(!xi.isObject(w))return null;const R=Y,D=z(A,{x:R.optional.custom(Ge),y:R.optional.custom(Ge),z:R.optional.custom(Ge),w:R.optional.custom(Ge)});return D?{initialValue:w,params:D}:null},binding:{reader:w=>fd,constraint:w=>cd(w.params,w.initialValue),equals:xi.equals,writer:w=>dd},controller:w=>{const A=w.value,R=w.constraint;if(!(R instanceof Ue))throw f.shouldNeverHappen();return new ar(w.document,{assembly:Ao,axes:A.rawValue.getComponents().map((D,K)=>vd(D,R.components[K])),parser:Pe,value:A,viewProps:w.viewProps})}};function md(w){const A=[],R=Js(w.options);return R&&A.push(R),new Ni(A)}const gd={id:"input-string",type:"input",accept:(w,A)=>{if(typeof w!="string")return null;const D=z(A,{options:Y.optional.custom(Vn)});return D?{initialValue:w,params:D}:null},binding:{reader:w=>Ya,constraint:w=>md(w.params),writer:w=>Hi},controller:w=>{const A=w.document,R=w.value,D=w.constraint,K=D&&Ae(D,Gi);return K?new Vi(A,{props:new Z({options:K.values.value("options")}),value:R,viewProps:w.viewProps}):new Nn(A,{parser:j=>j,props:Z.fromObject({formatter:Ws}),value:R,viewProps:w.viewProps})}},Zi={monitor:{defaultInterval:200,defaultLineCount:3}},Po=y("mll");class xd{constructor(A,R){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=R.formatter,this.element=A.createElement("div"),this.element.classList.add(Po()),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("textarea");D.classList.add(Po("i")),D.style.height=`calc(var(--bld-us) * ${R.lineCount})`,D.readOnly=!0,R.viewProps.bindDisabled(D),this.element.appendChild(D),this.textareaElem_=D,R.value.emitter.on("change",this.onValueUpdate_),this.value=R.value,this.update_()}update_(){const A=this.textareaElem_,R=A.scrollTop===A.scrollHeight-A.clientHeight,D=[];this.value.rawValue.forEach(K=>{K!==void 0&&D.push(this.formatter_(K))}),A.textContent=D.join(`
`),R&&(A.scrollTop=A.scrollHeight)}onValueUpdate_(){this.update_()}}class hr{constructor(A,R){this.value=R.value,this.viewProps=R.viewProps,this.view=new xd(A,{formatter:R.formatter,lineCount:R.lineCount,value:this.value,viewProps:this.viewProps})}}const Mo=y("sgl");class yd{constructor(A,R){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=R.formatter,this.element=A.createElement("div"),this.element.classList.add(Mo()),R.viewProps.bindClassModifiers(this.element);const D=A.createElement("input");D.classList.add(Mo("i")),D.readOnly=!0,D.type="text",R.viewProps.bindDisabled(D),this.element.appendChild(D),this.inputElement=D,R.value.emitter.on("change",this.onValueUpdate_),this.value=R.value,this.update_()}update_(){const A=this.value.rawValue,R=A[A.length-1];this.inputElement.value=R!==void 0?this.formatter_(R):""}onValueUpdate_(){this.update_()}}class lr{constructor(A,R){this.value=R.value,this.viewProps=R.viewProps,this.view=new yd(A,{formatter:R.formatter,value:this.value,viewProps:this.viewProps})}}const Td={id:"monitor-bool",type:"monitor",accept:(w,A)=>{if(typeof w!="boolean")return null;const D=z(A,{lineCount:Y.optional.number});return D?{initialValue:w,params:D}:null},binding:{reader:w=>Da},controller:w=>{var A;return w.value.rawValue.length===1?new lr(w.document,{formatter:Ba,value:w.value,viewProps:w.viewProps}):new hr(w.document,{formatter:Ba,lineCount:(A=w.params.lineCount)!==null&&A!==void 0?A:Zi.monitor.defaultLineCount,value:w.value,viewProps:w.viewProps})}},ze=y("grl");class Ed{constructor(A,R){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=A.createElement("div"),this.element.classList.add(ze()),R.viewProps.bindClassModifiers(this.element),this.formatter_=R.formatter,this.props_=R.props,this.cursor_=R.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const D=A.createElementNS(gt,"svg");D.classList.add(ze("g")),D.style.height=`calc(var(--bld-us) * ${R.lineCount})`,this.element.appendChild(D),this.svgElem_=D;const K=A.createElementNS(gt,"polyline");this.svgElem_.appendChild(K),this.lineElem_=K;const j=A.createElement("div");j.classList.add(ze("t"),y("tt")()),this.element.appendChild(j),this.tooltipElem_=j,R.value.emitter.on("change",this.onValueUpdate_),this.value=R.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const A=this.svgElem_.getBoundingClientRect(),R=this.value.rawValue.length-1,D=this.props_.get("minValue"),K=this.props_.get("maxValue"),j=[];this.value.rawValue.forEach((bt,Bt)=>{if(bt===void 0)return;const qe=Wt(Bt,0,R,0,A.width),$i=Wt(bt,D,K,A.height,0);j.push([qe,$i].join(","))}),this.lineElem_.setAttributeNS(null,"points",j.join(" "));const _=this.tooltipElem_,lt=this.value.rawValue[this.cursor_.rawValue];if(lt===void 0){_.classList.remove(ze("t","a"));return}const xt=Wt(this.cursor_.rawValue,0,R,0,A.width),St=Wt(lt,D,K,A.height,0);_.style.left=`${xt}px`,_.style.top=`${St}px`,_.textContent=`${this.formatter_(lt)}`,_.classList.contains(ze("t","a"))||(_.classList.add(ze("t","a"),ze("t","in")),mt(_),_.classList.remove(ze("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Sd{constructor(A,R){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=R.props,this.value=R.value,this.viewProps=R.viewProps,this.cursor_=W(-1),this.view=new Ed(A,{cursor:this.cursor_,formatter:R.formatter,lineCount:R.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!at(A))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const D=new $e(this.view.element);D.emitter.on("down",this.onGraphPointerDown_),D.emitter.on("move",this.onGraphPointerMove_),D.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(A){const R=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Wt(A.offsetX,0,R.width,0,this.value.rawValue.length))}onGraphPointerDown_(A){this.onGraphPointerMove_(A)}onGraphPointerMove_(A){if(!A.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Wt(A.data.point.x,0,A.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function ur(w){return"format"in w&&!s(w.format)?w.format:qt(2)}function Cd(w){var A;return w.value.rawValue.length===1?new lr(w.document,{formatter:ur(w.params),value:w.value,viewProps:w.viewProps}):new hr(w.document,{formatter:ur(w.params),lineCount:(A=w.params.lineCount)!==null&&A!==void 0?A:Zi.monitor.defaultLineCount,value:w.value,viewProps:w.viewProps})}function Ad(w){var A,R,D;return new Sd(w.document,{formatter:ur(w.params),lineCount:(A=w.params.lineCount)!==null&&A!==void 0?A:Zi.monitor.defaultLineCount,props:Z.fromObject({maxValue:(R="max"in w.params?w.params.max:null)!==null&&R!==void 0?R:100,minValue:(D="min"in w.params?w.params.min:null)!==null&&D!==void 0?D:0}),value:w.value,viewProps:w.viewProps})}function Ro(w){return"view"in w&&w.view==="graph"}const Pd={id:"monitor-number",type:"monitor",accept:(w,A)=>{if(typeof w!="number")return null;const R=Y,D=z(A,{format:R.optional.function,lineCount:R.optional.number,max:R.optional.number,min:R.optional.number,view:R.optional.string});return D?{initialValue:w,params:D}:null},binding:{defaultBufferSize:w=>Ro(w)?64:1,reader:w=>Ua},controller:w=>Ro(w.params)?Ad(w):Cd(w)},Md={id:"monitor-string",type:"monitor",accept:(w,A)=>{if(typeof w!="string")return null;const R=Y,D=z(A,{lineCount:R.optional.number,multiline:R.optional.boolean});return D?{initialValue:w,params:D}:null},binding:{reader:w=>Ya},controller:w=>{var A;const R=w.value;return R.rawValue.length>1||"multiline"in w.params&&w.params.multiline?new hr(w.document,{formatter:Ws,lineCount:(A=w.params.lineCount)!==null&&A!==void 0?A:Zi.monitor.defaultLineCount,value:R,viewProps:w.viewProps}):new lr(w.document,{formatter:Ws,value:R,viewProps:w.viewProps})}};function Rd(w,A){var R;const D=w.accept(A.target.read(),A.params);if(s(D))return null;const K=Y,j={target:A.target,initialValue:D.initialValue,params:D.params},_=w.binding.reader(j),lt=w.binding.constraint?w.binding.constraint(j):void 0,xt=W(_(D.initialValue),{constraint:lt,equals:w.binding.equals}),St=new ql({reader:_,target:A.target,value:xt,writer:w.binding.writer(j)}),bt=K.optional.boolean(A.params.disabled).value,Bt=K.optional.boolean(A.params.hidden).value,qe=w.controller({constraint:lt,document:A.document,initialValue:D.initialValue,params:D.params,value:St.value,viewProps:it.create({disabled:bt,hidden:Bt})});return new xe(A.document,{binding:St,blade:Qt(),props:Z.fromObject({label:"label"in A.params?(R=K.optional.string(A.params.label).value)!==null&&R!==void 0?R:null:A.target.key}),valueController:qe})}function Ld(w,A){return A===0?new Ql:new kl(w,A??Zi.monitor.defaultInterval)}function wd(w,A){var R,D,K;const j=Y,_=w.accept(A.target.read(),A.params);if(s(_))return null;const lt={target:A.target,initialValue:_.initialValue,params:_.params},xt=w.binding.reader(lt),St=(D=(R=j.optional.number(A.params.bufferSize).value)!==null&&R!==void 0?R:w.binding.defaultBufferSize&&w.binding.defaultBufferSize(_.params))!==null&&D!==void 0?D:1,bt=j.optional.number(A.params.interval).value,Bt=new iu({reader:xt,target:A.target,ticker:Ld(A.document,bt),value:_l(St)}),qe=j.optional.boolean(A.params.disabled).value,$i=j.optional.boolean(A.params.hidden).value,Ji=w.controller({document:A.document,params:_.params,value:Bt.value,viewProps:it.create({disabled:qe,hidden:$i})});return new Ne(A.document,{binding:Bt,blade:Qt(),props:Z.fromObject({label:"label"in A.params?(K=j.optional.string(A.params.label).value)!==null&&K!==void 0?K:null:A.target.key}),valueController:Ji})}class Od{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(A){A.type==="blade"?this.pluginsMap_.blades.unshift(A):A.type==="input"?this.pluginsMap_.inputs.unshift(A):A.type==="monitor"&&this.pluginsMap_.monitors.unshift(A)}createInput(A,R,D){const K=R.read();if(s(K))throw new f({context:{key:R.key},type:"nomatchingcontroller"});const j=this.pluginsMap_.inputs.reduce((_,lt)=>_??Rd(lt,{document:A,target:R,params:D}),null);if(j)return j;throw new f({context:{key:R.key},type:"nomatchingcontroller"})}createMonitor(A,R,D){const K=this.pluginsMap_.monitors.reduce((j,_)=>j??wd(_,{document:A,params:D,target:R}),null);if(K)return K;throw new f({context:{key:R.key},type:"nomatchingcontroller"})}createBlade(A,R){const D=this.pluginsMap_.blades.reduce((K,j)=>K??jl(j,{document:A,params:R}),null);if(!D)throw new f({type:"nomatchingview",context:{params:R}});return D}createBladeApi(A){if(A instanceof xe)return new Ds(A);if(A instanceof Ne)return new Bs(A);if(A instanceof bi)return new Dn(A,this);const R=this.pluginsMap_.blades.reduce((D,K)=>D??K.api({controller:A,pool:this}),null);if(!R)throw f.shouldNeverHappen();return R}}function Fd(){const w=new Od;return[Gd,ud,pd,gd,id,kf,Qf,Zf,Hu,Td,Md,Pd,At,zl,Hl,La].forEach(A=>{w.register(A)}),w}function Id(w){return Ye.isObject(w)?new Ye(w.x,w.y):new Ye}function bd(w,A){w.writeProperty("x",A.x),w.writeProperty("y",A.y)}function Re(w,A){if(!w)return;const R=[],D=yo(w,A);D&&R.push(D);const K=To(w);return K&&R.push(K),new Ni(R)}function Dd(w,A){return new Ue({assembly:Eo,components:[Re("x"in w?w.x:void 0,A.x),Re("y"in w?w.y:void 0,A.y)]})}function Lo(w,A){const[R,D]=w?td(w):[];if(!s(R)||!s(D))return Math.max(Math.abs(R??0),Math.abs(D??0));const K=ci(w);return Math.max(Math.abs(K)*10,Math.abs(A)*10)}function Bd(w,A){const R=A instanceof Ue?A.components[0]:void 0,D=A instanceof Ue?A.components[1]:void 0,K=Lo(R,w.x),j=Lo(D,w.y);return Math.max(K,j)}function wo(w,A){return{baseStep:ci(A),constraint:A,textProps:Z.fromObject({draggingScale:vi(A,w),formatter:qt(Un(A,w))})}}function Nd(w){if(!("y"in w))return!1;const A=w.y;return A&&"inverted"in A?!!A.inverted:!1}const Gd={id:"input-point2d",type:"input",accept:(w,A)=>{if(!Ye.isObject(w))return null;const R=Y,D=z(A,{expanded:R.optional.boolean,picker:R.optional.custom(Ha),x:R.optional.custom(Ge),y:R.optional.object({inverted:R.optional.boolean,max:R.optional.number,min:R.optional.number,step:R.optional.number})});return D?{initialValue:w,params:D}:null},binding:{reader:w=>Id,constraint:w=>Dd(w.params,w.initialValue),equals:Ye.equals,writer:w=>bd},controller:w=>{const A=w.document,R=w.value,D=w.constraint;if(!(D instanceof Ue))throw f.shouldNeverHappen();const K="expanded"in w.params?w.params.expanded:void 0,j="picker"in w.params?w.params.picker:void 0;return new ad(A,{axes:[wo(R.rawValue.x,D.components[0]),wo(R.rawValue.y,D.components[1])],expanded:K??!1,invertsY:Nd(w.params),maxValue:Bd(R.rawValue,D),parser:Pe,pickerLayout:j??"popup",value:R,viewProps:w.viewProps})}};class Oo extends t{constructor(A){super(A),this.emitter_=new p,this.controller_.valueController.value.emitter.on("change",R=>{this.emitter_.emit("change",{event:new d(this,R.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(A){this.controller_.props.set("label",A)}get options(){return this.controller_.valueController.props.get("options")}set options(A){this.controller_.valueController.props.set("options",A)}get value(){return this.controller_.valueController.value.rawValue}set value(A){this.controller_.valueController.value.rawValue=A}on(A,R){const D=R.bind(this);return this.emitter_.on(A,K=>{D(K.event)}),this}}class Fo extends t{constructor(A){super(A),this.emitter_=new p,this.controller_.valueController.value.emitter.on("change",R=>{this.emitter_.emit("change",{event:new d(this,R.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(A){this.controller_.props.set("label",A)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(A){this.controller_.valueController.sliderController.props.set("maxValue",A)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(A){this.controller_.valueController.sliderController.props.set("minValue",A)}get value(){return this.controller_.valueController.value.rawValue}set value(A){this.controller_.valueController.value.rawValue=A}on(A,R){const D=R.bind(this);return this.emitter_.on(A,K=>{D(K.event)}),this}}class Io extends t{constructor(A){super(A),this.emitter_=new p,this.controller_.valueController.value.emitter.on("change",R=>{this.emitter_.emit("change",{event:new d(this,R.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(A){this.controller_.props.set("label",A)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(A){this.controller_.valueController.props.set("formatter",A)}get value(){return this.controller_.valueController.value.rawValue}set value(A){this.controller_.valueController.value.rawValue=A}on(A,R){const D=R.bind(this);return this.emitter_.on(A,K=>{D(K.event)}),this}}const Vd=function(){return{id:"list",type:"blade",accept(w){const A=Y,R=z(w,{options:A.required.custom(Vn),value:A.required.raw,view:A.required.constant("list"),label:A.optional.string});return R?{params:R}:null},controller(w){const A=new Gi(Ka(w.params.options)),R=W(w.params.value,{constraint:A}),D=new Vi(w.document,{props:new Z({options:A.values.value("options")}),value:R,viewProps:w.viewProps});return new fi(w.document,{blade:w.blade,props:Z.fromObject({label:w.params.label}),valueController:D})},api(w){return!(w.controller instanceof fi)||!(w.controller.valueController instanceof Vi)?null:new Oo(w.controller)}}}();function Ud(w){return w.reduce((A,R)=>Object.assign(A,{[R.presetKey]:R.read()}),{})}function Yd(w,A){w.forEach(R=>{const D=A[R.target.presetKey];D!==void 0&&R.writer(R.target,R.reader(D))})}class Xd extends Ns{constructor(A,R){super(A,R)}get element(){return this.controller_.view.element}importPreset(A){const R=this.controller_.rackController.rack.find(xe).map(D=>D.binding);Yd(R,A),this.refresh()}exportPreset(){const A=this.controller_.rackController.rack.find(xe).map(R=>R.binding.target);return Ud(A)}refresh(){this.controller_.rackController.rack.find(xe).forEach(A=>{A.binding.read()}),this.controller_.rackController.rack.find(Ne).forEach(A=>{A.binding.read()})}}class zd extends Us{constructor(A,R){super(A,{expanded:R.expanded,blade:R.blade,props:R.props,root:!0,viewProps:R.viewProps})}}const Wd={id:"slider",type:"blade",accept(w){const A=Y,R=z(w,{max:A.required.number,min:A.required.number,view:A.required.constant("slider"),format:A.optional.function,label:A.optional.string,value:A.optional.number});return R?{params:R}:null},controller(w){var A,R;const D=(A=w.params.value)!==null&&A!==void 0?A:0,K=new di({max:w.params.max,min:w.params.min}),j=new $s(w.document,{baseStep:1,parser:Pe,sliderProps:new Z({maxValue:K.values.value("max"),minValue:K.values.value("min")}),textProps:Z.fromObject({draggingScale:vi(void 0,D),formatter:(R=w.params.format)!==null&&R!==void 0?R:bu}),value:W(D,{constraint:K}),viewProps:w.viewProps});return new fi(w.document,{blade:w.blade,props:Z.fromObject({label:w.params.label}),valueController:j})},api(w){return!(w.controller instanceof fi)||!(w.controller.valueController instanceof $s)?null:new Fo(w.controller)}},Hd=function(){return{id:"text",type:"blade",accept(w){const A=Y,R=z(w,{parse:A.required.function,value:A.required.raw,view:A.required.constant("text"),format:A.optional.function,label:A.optional.string});return R?{params:R}:null},controller(w){var A;const R=new Nn(w.document,{parser:w.params.parse,props:Z.fromObject({formatter:(A=w.params.format)!==null&&A!==void 0?A:D=>String(D)}),value:W(w.params.value),viewProps:w.viewProps});return new fi(w.document,{blade:w.blade,props:Z.fromObject({label:w.params.label}),valueController:R})},api(w){return!(w.controller instanceof fi)||!(w.controller.valueController instanceof Nn)?null:new Io(w.controller)}}}();function Kd(w){const A=w.createElement("div");return A.classList.add(y("dfw")()),w.body&&w.body.appendChild(A),A}function bo(w,A,R){if(w.querySelector(`style[data-tp-style=${A}]`))return;const D=w.createElement("style");D.dataset.tpStyle=A,D.textContent=R,w.head.appendChild(D)}class Zd extends Xd{constructor(A){var R,D;const K=A??{},j=(R=K.document)!==null&&R!==void 0?R:ct(),_=Fd(),lt=new zd(j,{expanded:K.expanded,blade:Qt(),props:Z.fromObject({title:K.title}),viewProps:it.create()});super(lt,_),this.pool_=_,this.containerElem_=(D=K.container)!==null&&D!==void 0?D:Kd(j),this.containerElem_.appendChild(this.element),this.doc_=j,this.usesDefaultWrapper_=!K.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw f.alreadyDisposed();return this.doc_}dispose(){const A=this.containerElem_;if(!A)throw f.alreadyDisposed();if(this.usesDefaultWrapper_){const R=A.parentElement;R&&R.removeChild(A)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(A){("plugin"in A?[A.plugin]:"plugins"in A?A.plugins:[]).forEach(D=>{this.pool_.register(D),this.embedPluginStyle_(D)})}embedPluginStyle_(A){A.css&&bo(this.document,`plugin-${A.id}`,A.css)}setUpDefaultPlugins_(){bo(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(A=>{this.embedPluginStyle_(A)}),this.registerPlugin({plugins:[Wd,Vd,La,Hd]})}}const $d=new x("3.1.7");a.BladeApi=t,a.ButtonApi=c,a.FolderApi=Ns,a.InputBindingApi=Ds,a.ListApi=Oo,a.MonitorBindingApi=Bs,a.Pane=Zd,a.SeparatorApi=Ta,a.SliderApi=Fo,a.TabApi=Pa,a.TabPageApi=Aa,a.TextApi=Io,a.TpChangeEvent=d,a.VERSION=$d,Object.defineProperty(a,"__esModule",{value:!0})})})(sm,ds);class rm{constructor(g,a){Lt(this,"pane");Lt(this,"modules");Lt(this,"events");Lt(this,"playerFolder");Lt(this,"player");Lt(this,"playerPosition",{x:0,y:0,xSpeed:0,ySpeed:0});this.modules=Xo.modules,this.events=Xo.events,this.player=a,this.pane=new ds.Pane({title:"Debug Panel"}),this.setupModuleDebug(),this.setupEventDebug(),this.setupPlayerDebug(),this.listenToDebugChanges(),setInterval(()=>{this.updatePlayerPosition()},100)}setLoggingDebug(g,a){g.info(`Setting ${g.name} to ${a}`),a?g.setLevel(g.levels.DEBUG):g.setLevel(g.levels.INFO)}setupModuleDebug(){const g=this.pane.addFolder({title:"Modules"});for(const a in this.modules){const x=ve(a);this.setLoggingDebug(x,this.modules[a]),g.addInput(this.modules,a).on("change",t=>{this.setLoggingDebug(x,t.value)})}}setupEventDebug(){const g=this.pane.addFolder({title:"Events"});for(const a in this.events)g.addInput(this.events,a).on("change",x=>{jt.emit("debug",{state:x.value,type:a})})}updatePlayerPosition(){this.playerPosition.x=Vt.x[this.player],this.playerPosition.y=Vt.y[this.player],this.playerPosition.xSpeed=Vt.xSpeed[this.player],this.playerPosition.ySpeed=Vt.ySpeed[this.player]}setupPlayerDebug(){this.playerFolder=this.pane.addFolder({title:"Player"}),this.playerFolder.addMonitor(this.playerPosition,"x"),this.playerFolder.addMonitor(this.playerPosition,"y"),this.playerFolder.addMonitor(this.playerPosition,"xSpeed"),this.playerFolder.addMonitor(this.playerPosition,"ySpeed")}listenToDebugChanges(){ve("DebugPanel").debug("DebugPanel initialized")}}const am=Symbol("TimeController"),_h=Symbol("TimeControllerFactory"),tl=Symbol("TimeSystem");var ce="named",el="name",da="unmanaged",il="optional",Ls="inject",Sn="multi_inject",nl="inversify:tagged",sl="inversify:tagged_props",Gr="inversify:paramtypes",om="design:paramtypes",Qo="post_construct",Vr="pre_destroy";function hm(){return[Ls,Sn,el,da,ce,il]}var ko=hm(),Zt={Request:"Request",Singleton:"Singleton",Transient:"Transient"},Yt={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},In={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},lm=0;function bn(){return lm++}var um=function(){function C(g,a){this.id=bn(),this.activated=!1,this.serviceIdentifier=g,this.scope=a,this.type=Yt.Invalid,this.constraint=function(x){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return C.prototype.clone=function(){var g=new C(this.serviceIdentifier,this.scope);return g.activated=g.scope===Zt.Singleton?this.activated:!1,g.implementationType=this.implementationType,g.dynamicValue=this.dynamicValue,g.scope=this.scope,g.type=this.type,g.factory=this.factory,g.provider=this.provider,g.constraint=this.constraint,g.onActivation=this.onActivation,g.onDeactivation=this.onDeactivation,g.cache=this.cache,g},C}(),fm="Cannot apply @injectable decorator multiple times.",rl="Metadata key was used more than once in a parameter:",ki="NULL argument",qo="Key Not Found",dm="Ambiguous match found for serviceIdentifier:",cm="Could not unbind serviceIdentifier:",vm="No matching bindings found for serviceIdentifier:",al="Missing required @injectable annotation in:",pm="Missing required @inject or @multiInject annotation in:",mm=function(C){return"@inject called with undefined this could mean that the class "+C+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},gm="Circular dependency found:",xm="Invalid binding type:",ym="No snapshot available to restore.",Tm="Invalid return type in middleware. Middleware must return!",Em="Value provided to function binding must be a function!",Sm=function(C){return"You are attempting to construct '"+C+`' in a synchronous way
 but it has asynchronous dependencies.`},Cm="The toSelf function can only be applied when a constructor is used as service identifier",ol="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",Am=function(){for(var C=[],g=0;g<arguments.length;g++)C[g]=arguments[g];return"The number of constructor arguments in the derived class "+(C[0]+" must be >= than the number of constructor arguments of its base class.")},Pm="Invalid Container constructor argument. Container options must be an object.",Mm="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",Rm="Invalid Container option. Auto bind injectable must be a boolean",Lm="Invalid Container option. Skip base check must be a boolean",wm="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)",Om=function(C,g){return"@postConstruct error in class "+C+": "+g},Fm=function(C,g){return"@preDestroy error in class "+C+": "+g},Ur=function(C,g){return"onDeactivation() error in class "+C+": "+g},Im=function(C,g){return"It looks like there is a circular dependency in one of the '"+C+"' bindings. Please investigate bindings with"+("service identifier '"+g+"'.")},bm="Maximum call stack size exceeded",Dm=function(){function C(){}return C.prototype.getConstructorMetadata=function(g){var a=Reflect.getMetadata(Gr,g),x=Reflect.getMetadata(nl,g);return{compilerGeneratedMetadata:a,userGeneratedMetadata:x||{}}},C.prototype.getPropertiesMetadata=function(g){var a=Reflect.getMetadata(sl,g)||[];return a},C}(),_n={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function hl(C){return C instanceof RangeError||C.message===bm}var Bm=function(C,g){try{return C()}catch(a){throw hl(a)&&(a=g()),a}};function Cn(C){if(typeof C=="function"){var g=C;return g.name}else{if(typeof C=="symbol")return C.toString();var g=C;return g}}function _o(C,g,a){var x="",t=a(C,g);return t.length!==0&&(x=`
Registered bindings:`,t.forEach(function(e){var d="Object";e.implementationType!==null&&(d=ws(e.implementationType)),x=x+`
 `+d,e.constraint.metaData&&(x=x+" - "+e.constraint.metaData)})),x}function ll(C,g){return C.parentRequest===null?!1:C.parentRequest.serviceIdentifier===g?!0:ll(C.parentRequest,g)}function Nm(C){function g(x,t){t===void 0&&(t=[]);var e=Cn(x.serviceIdentifier);return t.push(e),x.parentRequest!==null?g(x.parentRequest,t):t}var a=g(C);return a.reverse().join(" --> ")}function ul(C){C.childRequests.forEach(function(g){if(ll(g,g.serviceIdentifier)){var a=Nm(g);throw new Error(gm+" "+a)}else ul(g)})}function Gm(C,g){if(g.isTagged()||g.isNamed()){var a="",x=g.getNamedTag(),t=g.getCustomTags();return x!==null&&(a+=x.toString()+`
`),t!==null&&t.forEach(function(e){a+=e.toString()+`
`})," "+C+`
 `+C+" - "+a}else return" "+C}function ws(C){if(C.name)return C.name;var g=C.toString(),a=g.match(/^function\s*([^\s(]+)/);return a?a[1]:"Anonymous function: "+g}function Vm(C){return C.toString().slice(7,-1)}var fl=function(){function C(g){this.id=bn(),this.container=g}return C.prototype.addPlan=function(g){this.plan=g},C.prototype.setCurrentRequest=function(g){this.currentRequest=g},C}(),ui=function(){function C(g,a){this.key=g,this.value=a}return C.prototype.toString=function(){return this.key===ce?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},C}(),Um=function(){function C(g,a){this.parentContext=g,this.rootRequest=a}return C}(),Ym=function(){function C(g){this._cb=g}return C.prototype.unwrap=function(){return this._cb()},C}(),Xm=function(){function C(g){this.str=g}return C.prototype.startsWith=function(g){return this.str.indexOf(g)===0},C.prototype.endsWith=function(g){var a="",x=g.split("").reverse().join("");return a=this.str.split("").reverse().join(""),this.startsWith.call({str:a},x)},C.prototype.contains=function(g){return this.str.indexOf(g)!==-1},C.prototype.equals=function(g){return this.str===g},C.prototype.value=function(){return this.str},C}(),Os=function(){function C(g,a,x,t){this.id=bn(),this.type=g,this.serviceIdentifier=x;var e=typeof a=="symbol"?Vm(a):a;this.name=new Xm(e||""),this.identifier=a,this.metadata=new Array;var d=null;typeof t=="string"?d=new ui(ce,t):t instanceof ui&&(d=t),d!==null&&this.metadata.push(d)}return C.prototype.hasTag=function(g){for(var a=0,x=this.metadata;a<x.length;a++){var t=x[a];if(t.key===g)return!0}return!1},C.prototype.isArray=function(){return this.hasTag(Sn)},C.prototype.matchesArray=function(g){return this.matchesTag(Sn)(g)},C.prototype.isNamed=function(){return this.hasTag(ce)},C.prototype.isTagged=function(){return this.metadata.some(function(g){return ko.every(function(a){return g.key!==a})})},C.prototype.isOptional=function(){return this.matchesTag(il)(!0)},C.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(g){return g.key===ce})[0]:null},C.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(g){return ko.every(function(a){return g.key!==a})}):null},C.prototype.matchesNamedTag=function(g){return this.matchesTag(ce)(g)},C.prototype.matchesTag=function(g){var a=this;return function(x){for(var t=0,e=a.metadata;t<e.length;t++){var d=e[t];if(d.key===g&&d.value===x)return!0}return!1}},C}(),cs=globalThis&&globalThis.__spreadArray||function(C,g,a){if(a||arguments.length===2)for(var x=0,t=g.length,e;x<t;x++)(e||!(x in g))&&(e||(e=Array.prototype.slice.call(g,0,x)),e[x]=g[x]);return C.concat(e||Array.prototype.slice.call(g))};function zm(C,g){var a=ws(g);return dl(C,a,g,!1)}function dl(C,g,a,x){var t=C.getConstructorMetadata(a),e=t.compilerGeneratedMetadata;if(e===void 0){var d=al+" "+g+".";throw new Error(d)}var r=t.userGeneratedMetadata,o=Object.keys(r),n=a.length===0&&o.length>0,i=o.length>a.length,s=n||i?o.length:a.length,u=Hm(x,g,e,r,s),h=cl(C,a,g),l=cs(cs([],u,!0),h,!0);return l}function Wm(C,g,a,x,t){var e=t[C.toString()]||[],d=pl(e),r=d.unmanaged!==!0,o=x[C],n=d.inject||d.multiInject;if(o=n||o,o instanceof Ym&&(o=o.unwrap()),r){var i=o===Object,s=o===Function,u=o===void 0,h=i||s||u;if(!g&&h){var l=pm+" argument "+C+" in class "+a+".";throw new Error(l)}var f=new Os(In.ConstructorArgument,d.targetName,o);return f.metadata=e,f}return null}function Hm(C,g,a,x,t){for(var e=[],d=0;d<t;d++){var r=d,o=Wm(r,C,g,a,x);o!==null&&e.push(o)}return e}function Km(C,g,a,x){var t=C||g;if(t===void 0){var e=al+" for property "+String(a)+" in class "+x+".";throw new Error(e)}return t}function cl(C,g,a){for(var x=C.getPropertiesMetadata(g),t=[],e=Object.getOwnPropertySymbols(x),d=Object.keys(x),r=d.concat(e),o=0,n=r;o<n.length;o++){var i=n[o],s=x[i],u=pl(s),h=u.targetName||i,l=Km(u.inject,u.multiInject,i,a),f=new Os(In.ClassProperty,h,l);f.metadata=s,t.push(f)}var v=Object.getPrototypeOf(g.prototype).constructor;if(v!==Object){var c=cl(C,v,a);t=cs(cs([],t,!0),c,!0)}return t}function vl(C,g){var a=Object.getPrototypeOf(g.prototype).constructor;if(a!==Object){var x=ws(a),t=dl(C,x,a,!0),e=t.map(function(o){return o.metadata.filter(function(n){return n.key===da})}),d=[].concat.apply([],e).length,r=t.length-d;return r>0?r:vl(C,a)}else return 0}function pl(C){var g={};return C.forEach(function(a){g[a.key.toString()]=a.value}),{inject:g[Ls],multiInject:g[Sn],targetName:g[el],unmanaged:g[da]}}var ca=function(){function C(g,a,x,t,e){this.id=bn(),this.serviceIdentifier=g,this.parentContext=a,this.parentRequest=x,this.target=e,this.childRequests=[],this.bindings=Array.isArray(t)?t:[t],this.requestScope=x===null?new Map:null}return C.prototype.addChildRequest=function(g,a,x){var t=new C(g,this.parentContext,this,a,x);return this.childRequests.push(t),t},C}();function vs(C){return C._bindingDictionary}function Zm(C,g,a,x,t,e){var d=C?Sn:Ls,r=new ui(d,a),o=new Os(g,x,a,r);if(t!==void 0){var n=new ui(t,e);o.metadata.push(n)}return o}function th(C,g,a,x,t){var e=An(a.container,t.serviceIdentifier),d=[];return e.length===_n.NoBindingsAvailable&&a.container.options.autoBindInjectable&&typeof t.serviceIdentifier=="function"&&C.getConstructorMetadata(t.serviceIdentifier).compilerGeneratedMetadata&&(a.container.bind(t.serviceIdentifier).toSelf(),e=An(a.container,t.serviceIdentifier)),g?d=e:d=e.filter(function(r){var o=new ca(r.serviceIdentifier,a,x,r,t);return r.constraint(o)}),$m(t.serviceIdentifier,d,t,a.container),d}function $m(C,g,a,x){switch(g.length){case _n.NoBindingsAvailable:if(a.isOptional())return g;var t=Cn(C),e=vm;throw e+=Gm(t,a),e+=_o(x,t,An),new Error(e);case _n.OnlyOneBindingAvailable:return g;case _n.MultipleBindingsAvailable:default:if(a.isArray())return g;var t=Cn(C),e=dm+" "+t;throw e+=_o(x,t,An),new Error(e)}}function ml(C,g,a,x,t,e){var d,r;if(t===null){d=th(C,g,x,null,e),r=new ca(a,x,null,d,e);var o=new Um(x,r);x.addPlan(o)}else d=th(C,g,x,t,e),r=t.addChildRequest(e.serviceIdentifier,d,e);d.forEach(function(n){var i=null;if(e.isArray())i=r.addChildRequest(n.serviceIdentifier,n,e);else{if(n.cache)return;i=r}if(n.type===Yt.Instance&&n.implementationType!==null){var s=zm(C,n.implementationType);if(!x.container.options.skipBaseClassChecks){var u=vl(C,n.implementationType);if(s.length<u){var h=Am(ws(n.implementationType));throw new Error(h)}}s.forEach(function(l){ml(C,!1,l.serviceIdentifier,x,i,l)})}})}function An(C,g){var a=[],x=vs(C);return x.hasKey(g)?a=x.get(g):C.parent!==null&&(a=An(C.parent,g)),a}function Jm(C,g,a,x,t,e,d,r){r===void 0&&(r=!1);var o=new fl(g),n=Zm(a,x,t,"",e,d);try{return ml(C,r,t,o,null,n),o}catch(i){throw hl(i)&&ul(o.plan.rootRequest),i}}function jm(C,g,a,x){var t=new Os(In.Variable,"",g,new ui(a,x)),e=new fl(C),d=new ca(g,e,null,[],t);return d}function ne(C){var g=typeof C=="object"&&C!==null||typeof C=="function";return g&&typeof C.then=="function"}function gl(C){return ne(C)?!0:Array.isArray(C)&&C.some(ne)}var Qm=globalThis&&globalThis.__awaiter||function(C,g,a,x){function t(e){return e instanceof a?e:new a(function(d){d(e)})}return new(a||(a=Promise))(function(e,d){function r(i){try{n(x.next(i))}catch(s){d(s)}}function o(i){try{n(x.throw(i))}catch(s){d(s)}}function n(i){i.done?e(i.value):t(i.value).then(r,o)}n((x=x.apply(C,g||[])).next())})},km=globalThis&&globalThis.__generator||function(C,g){var a={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},x,t,e,d;return d={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function r(n){return function(i){return o([n,i])}}function o(n){if(x)throw new TypeError("Generator is already executing.");for(;a;)try{if(x=1,t&&(e=n[0]&2?t.return:n[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,n[1])).done)return e;switch(t=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,t=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(e=a.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){a=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){a.label=n[1];break}if(n[0]===6&&a.label<e[1]){a.label=e[1],e=n;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(n);break}e[2]&&a.ops.pop(),a.trys.pop();continue}n=g.call(C,a)}catch(i){n=[6,i],t=0}finally{x=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},qm=function(C,g){return g.scope===Zt.Singleton&&g.activated?g.cache:g.scope===Zt.Request&&C.has(g.id)?C.get(g.id):null},_m=function(C,g,a){g.scope===Zt.Singleton&&eg(g,a),g.scope===Zt.Request&&tg(C,g,a)},tg=function(C,g,a){C.has(g.id)||C.set(g.id,a)},eg=function(C,g){C.cache=g,C.activated=!0,ne(g)&&ig(C,g)},ig=function(C,g){return Qm(void 0,void 0,void 0,function(){var a,x;return km(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,g];case 1:return a=t.sent(),C.cache=a,[3,3];case 2:throw x=t.sent(),C.cache=null,C.activated=!1,x;case 3:return[2]}})})},un;(function(C){C.DynamicValue="toDynamicValue",C.Factory="toFactory",C.Provider="toProvider"})(un||(un={}));var ng=function(C){var g=null;switch(C.type){case Yt.ConstantValue:case Yt.Function:g=C.cache;break;case Yt.Constructor:case Yt.Instance:g=C.implementationType;break;case Yt.DynamicValue:g=C.dynamicValue;break;case Yt.Provider:g=C.provider;break;case Yt.Factory:g=C.factory;break}if(g===null){var a=Cn(C.serviceIdentifier);throw new Error(xm+" "+a)}},sg=function(C){switch(C.type){case Yt.Factory:return{factory:C.factory,factoryType:un.Factory};case Yt.Provider:return{factory:C.provider,factoryType:un.Provider};case Yt.DynamicValue:return{factory:C.dynamicValue,factoryType:un.DynamicValue};default:throw new Error("Unexpected factory type "+C.type)}},Li=globalThis&&globalThis.__assign||function(){return Li=Object.assign||function(C){for(var g,a=1,x=arguments.length;a<x;a++){g=arguments[a];for(var t in g)Object.prototype.hasOwnProperty.call(g,t)&&(C[t]=g[t])}return C},Li.apply(this,arguments)},xl=globalThis&&globalThis.__awaiter||function(C,g,a,x){function t(e){return e instanceof a?e:new a(function(d){d(e)})}return new(a||(a=Promise))(function(e,d){function r(i){try{n(x.next(i))}catch(s){d(s)}}function o(i){try{n(x.throw(i))}catch(s){d(s)}}function n(i){i.done?e(i.value):t(i.value).then(r,o)}n((x=x.apply(C,g||[])).next())})},yl=globalThis&&globalThis.__generator||function(C,g){var a={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},x,t,e,d;return d={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function r(n){return function(i){return o([n,i])}}function o(n){if(x)throw new TypeError("Generator is already executing.");for(;a;)try{if(x=1,t&&(e=n[0]&2?t.return:n[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,n[1])).done)return e;switch(t=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,t=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(e=a.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){a=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){a.label=n[1];break}if(n[0]===6&&a.label<e[1]){a.label=e[1],e=n;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(n);break}e[2]&&a.ops.pop(),a.trys.pop();continue}n=g.call(C,a)}catch(i){n=[6,i],t=0}finally{x=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},rg=globalThis&&globalThis.__spreadArray||function(C,g,a){if(a||arguments.length===2)for(var x=0,t=g.length,e;x<t;x++)(e||!(x in g))&&(e||(e=Array.prototype.slice.call(g,0,x)),e[x]=g[x]);return C.concat(e||Array.prototype.slice.call(g))};function ag(C,g){return C.reduce(function(a,x){var t=g(x),e=x.target.type;return e===In.ConstructorArgument?a.constructorInjections.push(t):(a.propertyRequests.push(x),a.propertyInjections.push(t)),a.isAsync||(a.isAsync=gl(t)),a},{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}function og(C,g,a){var x;if(g.length>0){var t=ag(g,a),e=Li(Li({},t),{constr:C});t.isAsync?x=hg(e):x=Tl(e)}else x=new C;return x}function Tl(C){var g,a=new((g=C.constr).bind.apply(g,rg([void 0],C.constructorInjections,!1)));return C.propertyRequests.forEach(function(x,t){var e=x.target.identifier,d=C.propertyInjections[t];a[e]=d}),a}function hg(C){return xl(this,void 0,void 0,function(){var g,a;return yl(this,function(x){switch(x.label){case 0:return[4,eh(C.constructorInjections)];case 1:return g=x.sent(),[4,eh(C.propertyInjections)];case 2:return a=x.sent(),[2,Tl(Li(Li({},C),{constructorInjections:g,propertyInjections:a}))]}})})}function eh(C){return xl(this,void 0,void 0,function(){var g,a,x,t;return yl(this,function(e){for(g=[],a=0,x=C;a<x.length;a++)t=x[a],Array.isArray(t)?g.push(Promise.all(t)):g.push(t);return[2,Promise.all(g)]})})}function ih(C,g){var a=lg(C,g);return ne(a)?a.then(function(){return g}):g}function lg(C,g){var a,x;if(Reflect.hasMetadata(Qo,C)){var t=Reflect.getMetadata(Qo,C);try{return(x=(a=g)[t.value])===null||x===void 0?void 0:x.call(a)}catch(e){throw new Error(Om(C.name,e.message))}}}function ug(C,g){C.scope!==Zt.Singleton&&fg(C,g)}function fg(C,g){var a="Class cannot be instantiated in "+(C.scope===Zt.Request?"request":"transient")+" scope.";if(typeof C.onDeactivation=="function")throw new Error(Ur(g.name,a));if(Reflect.hasMetadata(Vr,g))throw new Error(Fm(g.name,a))}function dg(C,g,a,x){ug(C,g);var t=og(g,a,x);return ne(t)?t.then(function(e){return ih(g,e)}):ih(g,t)}var cg=globalThis&&globalThis.__awaiter||function(C,g,a,x){function t(e){return e instanceof a?e:new a(function(d){d(e)})}return new(a||(a=Promise))(function(e,d){function r(i){try{n(x.next(i))}catch(s){d(s)}}function o(i){try{n(x.throw(i))}catch(s){d(s)}}function n(i){i.done?e(i.value):t(i.value).then(r,o)}n((x=x.apply(C,g||[])).next())})},vg=globalThis&&globalThis.__generator||function(C,g){var a={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},x,t,e,d;return d={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function r(n){return function(i){return o([n,i])}}function o(n){if(x)throw new TypeError("Generator is already executing.");for(;a;)try{if(x=1,t&&(e=n[0]&2?t.return:n[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,n[1])).done)return e;switch(t=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,t=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(e=a.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){a=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){a.label=n[1];break}if(n[0]===6&&a.label<e[1]){a.label=e[1],e=n;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(n);break}e[2]&&a.ops.pop(),a.trys.pop();continue}n=g.call(C,a)}catch(i){n=[6,i],t=0}finally{x=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},va=function(C){return function(g){g.parentContext.setCurrentRequest(g);var a=g.bindings,x=g.childRequests,t=g.target&&g.target.isArray(),e=!g.parentRequest||!g.parentRequest.target||!g.target||!g.parentRequest.target.matchesArray(g.target.serviceIdentifier);if(t&&e)return x.map(function(r){var o=va(C);return o(r)});if(g.target.isOptional()&&a.length===0)return;var d=a[0];return xg(C,g,d)}},pg=function(C,g){var a=sg(C);return Bm(function(){return a.factory.bind(C)(g)},function(){return new Error(Im(a.factoryType,g.currentRequest.serviceIdentifier.toString()))})},mg=function(C,g,a){var x,t=g.childRequests;switch(ng(a),a.type){case Yt.ConstantValue:case Yt.Function:x=a.cache;break;case Yt.Constructor:x=a.implementationType;break;case Yt.Instance:x=dg(a,a.implementationType,t,va(C));break;default:x=pg(a,g.parentContext)}return x},gg=function(C,g,a){var x=qm(C,g);return x!==null||(x=a(),_m(C,g,x)),x},xg=function(C,g,a){return gg(C,a,function(){var x=mg(C,g,a);return ne(x)?x=x.then(function(t){return nh(g,a,t)}):x=nh(g,a,x),x})};function nh(C,g,a){var x=yg(C.parentContext,g,a),t=Sg(C.parentContext.container),e,d=t.next();do{e=d.value;var r=C.parentContext,o=C.serviceIdentifier,n=Eg(e,o);ne(x)?x=El(n,r,x):x=Tg(n,r,x),d=t.next()}while(d.done!==!0&&!vs(e).hasKey(C.serviceIdentifier));return x}var yg=function(C,g,a){var x;return typeof g.onActivation=="function"?x=g.onActivation(C,a):x=a,x},Tg=function(C,g,a){for(var x=C.next();!x.done;){if(a=x.value(g,a),ne(a))return El(C,g,a);x=C.next()}return a},El=function(C,g,a){return cg(void 0,void 0,void 0,function(){var x,t;return vg(this,function(e){switch(e.label){case 0:return[4,a];case 1:x=e.sent(),t=C.next(),e.label=2;case 2:return t.done?[3,4]:[4,t.value(g,x)];case 3:return x=e.sent(),t=C.next(),[3,2];case 4:return[2,x]}})})},Eg=function(C,g){var a=C._activations;return a.hasKey(g)?a.get(g).values():[].values()},Sg=function(C){for(var g=[C],a=C.parent;a!==null;)g.push(a),a=a.parent;var x=function(){var e=g.pop();return e!==void 0?{done:!1,value:e}:{done:!0,value:void 0}},t={next:x};return t};function Cg(C){var g=va(C.plan.rootRequest.requestScope);return g(C.plan.rootRequest)}var we=function(C,g){var a=C.parentRequest;return a!==null?g(a)?!0:we(a,g):!1},en=function(C){return function(g){var a=function(x){return x!==null&&x.target!==null&&x.target.matchesTag(C)(g)};return a.metaData=new ui(C,g),a}},jn=en(ce),gr=function(C){return function(g){var a=null;if(g!==null)if(a=g.bindings[0],typeof C=="string"){var x=a.serviceIdentifier;return x===C}else{var t=g.bindings[0].implementationType;return C===t}return!1}},ps=function(){function C(g){this._binding=g}return C.prototype.when=function(g){return this._binding.constraint=g,new _t(this._binding)},C.prototype.whenTargetNamed=function(g){return this._binding.constraint=jn(g),new _t(this._binding)},C.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(g){if(g===null)return!1;var a=g.target!==null&&!g.target.isNamed()&&!g.target.isTagged();return a},new _t(this._binding)},C.prototype.whenTargetTagged=function(g,a){return this._binding.constraint=en(g)(a),new _t(this._binding)},C.prototype.whenInjectedInto=function(g){return this._binding.constraint=function(a){return a!==null&&gr(g)(a.parentRequest)},new _t(this._binding)},C.prototype.whenParentNamed=function(g){return this._binding.constraint=function(a){return a!==null&&jn(g)(a.parentRequest)},new _t(this._binding)},C.prototype.whenParentTagged=function(g,a){return this._binding.constraint=function(x){return x!==null&&en(g)(a)(x.parentRequest)},new _t(this._binding)},C.prototype.whenAnyAncestorIs=function(g){return this._binding.constraint=function(a){return a!==null&&we(a,gr(g))},new _t(this._binding)},C.prototype.whenNoAncestorIs=function(g){return this._binding.constraint=function(a){return a!==null&&!we(a,gr(g))},new _t(this._binding)},C.prototype.whenAnyAncestorNamed=function(g){return this._binding.constraint=function(a){return a!==null&&we(a,jn(g))},new _t(this._binding)},C.prototype.whenNoAncestorNamed=function(g){return this._binding.constraint=function(a){return a!==null&&!we(a,jn(g))},new _t(this._binding)},C.prototype.whenAnyAncestorTagged=function(g,a){return this._binding.constraint=function(x){return x!==null&&we(x,en(g)(a))},new _t(this._binding)},C.prototype.whenNoAncestorTagged=function(g,a){return this._binding.constraint=function(x){return x!==null&&!we(x,en(g)(a))},new _t(this._binding)},C.prototype.whenAnyAncestorMatches=function(g){return this._binding.constraint=function(a){return a!==null&&we(a,g)},new _t(this._binding)},C.prototype.whenNoAncestorMatches=function(g){return this._binding.constraint=function(a){return a!==null&&!we(a,g)},new _t(this._binding)},C}(),_t=function(){function C(g){this._binding=g}return C.prototype.onActivation=function(g){return this._binding.onActivation=g,new ps(this._binding)},C.prototype.onDeactivation=function(g){return this._binding.onDeactivation=g,new ps(this._binding)},C}(),Oe=function(){function C(g){this._binding=g,this._bindingWhenSyntax=new ps(this._binding),this._bindingOnSyntax=new _t(this._binding)}return C.prototype.when=function(g){return this._bindingWhenSyntax.when(g)},C.prototype.whenTargetNamed=function(g){return this._bindingWhenSyntax.whenTargetNamed(g)},C.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},C.prototype.whenTargetTagged=function(g,a){return this._bindingWhenSyntax.whenTargetTagged(g,a)},C.prototype.whenInjectedInto=function(g){return this._bindingWhenSyntax.whenInjectedInto(g)},C.prototype.whenParentNamed=function(g){return this._bindingWhenSyntax.whenParentNamed(g)},C.prototype.whenParentTagged=function(g,a){return this._bindingWhenSyntax.whenParentTagged(g,a)},C.prototype.whenAnyAncestorIs=function(g){return this._bindingWhenSyntax.whenAnyAncestorIs(g)},C.prototype.whenNoAncestorIs=function(g){return this._bindingWhenSyntax.whenNoAncestorIs(g)},C.prototype.whenAnyAncestorNamed=function(g){return this._bindingWhenSyntax.whenAnyAncestorNamed(g)},C.prototype.whenAnyAncestorTagged=function(g,a){return this._bindingWhenSyntax.whenAnyAncestorTagged(g,a)},C.prototype.whenNoAncestorNamed=function(g){return this._bindingWhenSyntax.whenNoAncestorNamed(g)},C.prototype.whenNoAncestorTagged=function(g,a){return this._bindingWhenSyntax.whenNoAncestorTagged(g,a)},C.prototype.whenAnyAncestorMatches=function(g){return this._bindingWhenSyntax.whenAnyAncestorMatches(g)},C.prototype.whenNoAncestorMatches=function(g){return this._bindingWhenSyntax.whenNoAncestorMatches(g)},C.prototype.onActivation=function(g){return this._bindingOnSyntax.onActivation(g)},C.prototype.onDeactivation=function(g){return this._bindingOnSyntax.onDeactivation(g)},C}(),Ag=function(){function C(g){this._binding=g}return C.prototype.inRequestScope=function(){return this._binding.scope=Zt.Request,new Oe(this._binding)},C.prototype.inSingletonScope=function(){return this._binding.scope=Zt.Singleton,new Oe(this._binding)},C.prototype.inTransientScope=function(){return this._binding.scope=Zt.Transient,new Oe(this._binding)},C}(),sh=function(){function C(g){this._binding=g,this._bindingWhenSyntax=new ps(this._binding),this._bindingOnSyntax=new _t(this._binding),this._bindingInSyntax=new Ag(g)}return C.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},C.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},C.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},C.prototype.when=function(g){return this._bindingWhenSyntax.when(g)},C.prototype.whenTargetNamed=function(g){return this._bindingWhenSyntax.whenTargetNamed(g)},C.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},C.prototype.whenTargetTagged=function(g,a){return this._bindingWhenSyntax.whenTargetTagged(g,a)},C.prototype.whenInjectedInto=function(g){return this._bindingWhenSyntax.whenInjectedInto(g)},C.prototype.whenParentNamed=function(g){return this._bindingWhenSyntax.whenParentNamed(g)},C.prototype.whenParentTagged=function(g,a){return this._bindingWhenSyntax.whenParentTagged(g,a)},C.prototype.whenAnyAncestorIs=function(g){return this._bindingWhenSyntax.whenAnyAncestorIs(g)},C.prototype.whenNoAncestorIs=function(g){return this._bindingWhenSyntax.whenNoAncestorIs(g)},C.prototype.whenAnyAncestorNamed=function(g){return this._bindingWhenSyntax.whenAnyAncestorNamed(g)},C.prototype.whenAnyAncestorTagged=function(g,a){return this._bindingWhenSyntax.whenAnyAncestorTagged(g,a)},C.prototype.whenNoAncestorNamed=function(g){return this._bindingWhenSyntax.whenNoAncestorNamed(g)},C.prototype.whenNoAncestorTagged=function(g,a){return this._bindingWhenSyntax.whenNoAncestorTagged(g,a)},C.prototype.whenAnyAncestorMatches=function(g){return this._bindingWhenSyntax.whenAnyAncestorMatches(g)},C.prototype.whenNoAncestorMatches=function(g){return this._bindingWhenSyntax.whenNoAncestorMatches(g)},C.prototype.onActivation=function(g){return this._bindingOnSyntax.onActivation(g)},C.prototype.onDeactivation=function(g){return this._bindingOnSyntax.onDeactivation(g)},C}(),Pg=function(){function C(g){this._binding=g}return C.prototype.to=function(g){return this._binding.type=Yt.Instance,this._binding.implementationType=g,new sh(this._binding)},C.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+Cm);var g=this._binding.serviceIdentifier;return this.to(g)},C.prototype.toConstantValue=function(g){return this._binding.type=Yt.ConstantValue,this._binding.cache=g,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Zt.Singleton,new Oe(this._binding)},C.prototype.toDynamicValue=function(g){return this._binding.type=Yt.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=g,this._binding.implementationType=null,new sh(this._binding)},C.prototype.toConstructor=function(g){return this._binding.type=Yt.Constructor,this._binding.implementationType=g,this._binding.scope=Zt.Singleton,new Oe(this._binding)},C.prototype.toFactory=function(g){return this._binding.type=Yt.Factory,this._binding.factory=g,this._binding.scope=Zt.Singleton,new Oe(this._binding)},C.prototype.toFunction=function(g){if(typeof g!="function")throw new Error(Em);var a=this.toConstantValue(g);return this._binding.type=Yt.Function,this._binding.scope=Zt.Singleton,a},C.prototype.toAutoFactory=function(g){return this._binding.type=Yt.Factory,this._binding.factory=function(a){var x=function(){return a.container.get(g)};return x},this._binding.scope=Zt.Singleton,new Oe(this._binding)},C.prototype.toAutoNamedFactory=function(g){return this._binding.type=Yt.Factory,this._binding.factory=function(a){return function(x){return a.container.getNamed(g,x)}},new Oe(this._binding)},C.prototype.toProvider=function(g){return this._binding.type=Yt.Provider,this._binding.provider=g,this._binding.scope=Zt.Singleton,new Oe(this._binding)},C.prototype.toService=function(g){this.toDynamicValue(function(a){return a.container.get(g)})},C}(),Mg=function(){function C(){}return C.of=function(g,a,x,t,e){var d=new C;return d.bindings=g,d.middleware=a,d.deactivations=t,d.activations=x,d.moduleActivationStore=e,d},C}();function Rg(C){return typeof C=="object"&&C!==null&&"clone"in C&&typeof C.clone=="function"}var ii=function(){function C(){this._map=new Map}return C.prototype.getMap=function(){return this._map},C.prototype.add=function(g,a){if(g==null)throw new Error(ki);if(a==null)throw new Error(ki);var x=this._map.get(g);x!==void 0?x.push(a):this._map.set(g,[a])},C.prototype.get=function(g){if(g==null)throw new Error(ki);var a=this._map.get(g);if(a!==void 0)return a;throw new Error(qo)},C.prototype.remove=function(g){if(g==null)throw new Error(ki);if(!this._map.delete(g))throw new Error(qo)},C.prototype.removeIntersection=function(g){var a=this;this.traverse(function(x,t){var e=g.hasKey(x)?g.get(x):void 0;if(e!==void 0){var d=t.filter(function(r){return!e.some(function(o){return r===o})});a._setValue(x,d)}})},C.prototype.removeByCondition=function(g){var a=this,x=[];return this._map.forEach(function(t,e){for(var d=[],r=0,o=t;r<o.length;r++){var n=o[r],i=g(n);i?x.push(n):d.push(n)}a._setValue(e,d)}),x},C.prototype.hasKey=function(g){if(g==null)throw new Error(ki);return this._map.has(g)},C.prototype.clone=function(){var g=new C;return this._map.forEach(function(a,x){a.forEach(function(t){return g.add(x,Rg(t)?t.clone():t)})}),g},C.prototype.traverse=function(g){this._map.forEach(function(a,x){g(x,a)})},C.prototype._setValue=function(g,a){a.length>0?this._map.set(g,a):this._map.delete(g)},C}(),Lg=function(){function C(){this._map=new Map}return C.prototype.remove=function(g){if(this._map.has(g)){var a=this._map.get(g);return this._map.delete(g),a}return this._getEmptyHandlersStore()},C.prototype.addDeactivation=function(g,a,x){this._getModuleActivationHandlers(g).onDeactivations.add(a,x)},C.prototype.addActivation=function(g,a,x){this._getModuleActivationHandlers(g).onActivations.add(a,x)},C.prototype.clone=function(){var g=new C;return this._map.forEach(function(a,x){g._map.set(x,{onActivations:a.onActivations.clone(),onDeactivations:a.onDeactivations.clone()})}),g},C.prototype._getModuleActivationHandlers=function(g){var a=this._map.get(g);return a===void 0&&(a=this._getEmptyHandlersStore(),this._map.set(g,a)),a},C.prototype._getEmptyHandlersStore=function(){var g={onActivations:new ii,onDeactivations:new ii};return g},C}(),ms=globalThis&&globalThis.__assign||function(){return ms=Object.assign||function(C){for(var g,a=1,x=arguments.length;a<x;a++){g=arguments[a];for(var t in g)Object.prototype.hasOwnProperty.call(g,t)&&(C[t]=g[t])}return C},ms.apply(this,arguments)},ue=globalThis&&globalThis.__awaiter||function(C,g,a,x){function t(e){return e instanceof a?e:new a(function(d){d(e)})}return new(a||(a=Promise))(function(e,d){function r(i){try{n(x.next(i))}catch(s){d(s)}}function o(i){try{n(x.throw(i))}catch(s){d(s)}}function n(i){i.done?e(i.value):t(i.value).then(r,o)}n((x=x.apply(C,g||[])).next())})},fe=globalThis&&globalThis.__generator||function(C,g){var a={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},x,t,e,d;return d={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function r(n){return function(i){return o([n,i])}}function o(n){if(x)throw new TypeError("Generator is already executing.");for(;a;)try{if(x=1,t&&(e=n[0]&2?t.return:n[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,n[1])).done)return e;switch(t=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,t=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(e=a.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){a=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){a.label=n[1];break}if(n[0]===6&&a.label<e[1]){a.label=e[1],e=n;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(n);break}e[2]&&a.ops.pop(),a.trys.pop();continue}n=g.call(C,a)}catch(i){n=[6,i],t=0}finally{x=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},wg=globalThis&&globalThis.__spreadArray||function(C,g,a){if(a||arguments.length===2)for(var x=0,t=g.length,e;x<t;x++)(e||!(x in g))&&(e||(e=Array.prototype.slice.call(g,0,x)),e[x]=g[x]);return C.concat(e||Array.prototype.slice.call(g))},Og=function(){function C(g){var a=g||{};if(typeof a!="object")throw new Error(""+Pm);if(a.defaultScope===void 0)a.defaultScope=Zt.Transient;else if(a.defaultScope!==Zt.Singleton&&a.defaultScope!==Zt.Transient&&a.defaultScope!==Zt.Request)throw new Error(""+Mm);if(a.autoBindInjectable===void 0)a.autoBindInjectable=!1;else if(typeof a.autoBindInjectable!="boolean")throw new Error(""+Rm);if(a.skipBaseClassChecks===void 0)a.skipBaseClassChecks=!1;else if(typeof a.skipBaseClassChecks!="boolean")throw new Error(""+Lm);this.options={autoBindInjectable:a.autoBindInjectable,defaultScope:a.defaultScope,skipBaseClassChecks:a.skipBaseClassChecks},this.id=bn(),this._bindingDictionary=new ii,this._snapshots=[],this._middleware=null,this._activations=new ii,this._deactivations=new ii,this.parent=null,this._metadataReader=new Dm,this._moduleActivationStore=new Lg}return C.merge=function(g,a){for(var x=[],t=2;t<arguments.length;t++)x[t-2]=arguments[t];var e=new C,d=wg([g,a],x,!0).map(function(n){return vs(n)}),r=vs(e);function o(n,i){n.traverse(function(s,u){u.forEach(function(h){i.add(h.serviceIdentifier,h.clone())})})}return d.forEach(function(n){o(n,r)}),e},C.prototype.load=function(){for(var g=[],a=0;a<arguments.length;a++)g[a]=arguments[a];for(var x=this._getContainerModuleHelpersFactory(),t=0,e=g;t<e.length;t++){var d=e[t],r=x(d.id);d.registry(r.bindFunction,r.unbindFunction,r.isboundFunction,r.rebindFunction,r.unbindAsyncFunction,r.onActivationFunction,r.onDeactivationFunction)}},C.prototype.loadAsync=function(){for(var g=[],a=0;a<arguments.length;a++)g[a]=arguments[a];return ue(this,void 0,void 0,function(){var x,t,e,d,r;return fe(this,function(o){switch(o.label){case 0:x=this._getContainerModuleHelpersFactory(),t=0,e=g,o.label=1;case 1:return t<e.length?(d=e[t],r=x(d.id),[4,d.registry(r.bindFunction,r.unbindFunction,r.isboundFunction,r.rebindFunction,r.unbindAsyncFunction,r.onActivationFunction,r.onDeactivationFunction)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},C.prototype.unload=function(){for(var g=this,a=[],x=0;x<arguments.length;x++)a[x]=arguments[x];a.forEach(function(t){var e=g._removeModuleBindings(t.id);g._deactivateSingletons(e),g._removeModuleHandlers(t.id)})},C.prototype.unloadAsync=function(){for(var g=[],a=0;a<arguments.length;a++)g[a]=arguments[a];return ue(this,void 0,void 0,function(){var x,t,e,d;return fe(this,function(r){switch(r.label){case 0:x=0,t=g,r.label=1;case 1:return x<t.length?(e=t[x],d=this._removeModuleBindings(e.id),[4,this._deactivateSingletonsAsync(d)]):[3,4];case 2:r.sent(),this._removeModuleHandlers(e.id),r.label=3;case 3:return x++,[3,1];case 4:return[2]}})})},C.prototype.bind=function(g){var a=this.options.defaultScope||Zt.Transient,x=new um(g,a);return this._bindingDictionary.add(g,x),new Pg(x)},C.prototype.rebind=function(g){return this.unbind(g),this.bind(g)},C.prototype.rebindAsync=function(g){return ue(this,void 0,void 0,function(){return fe(this,function(a){switch(a.label){case 0:return[4,this.unbindAsync(g)];case 1:return a.sent(),[2,this.bind(g)]}})})},C.prototype.unbind=function(g){if(this._bindingDictionary.hasKey(g)){var a=this._bindingDictionary.get(g);this._deactivateSingletons(a)}this._removeServiceFromDictionary(g)},C.prototype.unbindAsync=function(g){return ue(this,void 0,void 0,function(){var a;return fe(this,function(x){switch(x.label){case 0:return this._bindingDictionary.hasKey(g)?(a=this._bindingDictionary.get(g),[4,this._deactivateSingletonsAsync(a)]):[3,2];case 1:x.sent(),x.label=2;case 2:return this._removeServiceFromDictionary(g),[2]}})})},C.prototype.unbindAll=function(){var g=this;this._bindingDictionary.traverse(function(a,x){g._deactivateSingletons(x)}),this._bindingDictionary=new ii},C.prototype.unbindAllAsync=function(){return ue(this,void 0,void 0,function(){var g,a=this;return fe(this,function(x){switch(x.label){case 0:return g=[],this._bindingDictionary.traverse(function(t,e){g.push(a._deactivateSingletonsAsync(e))}),[4,Promise.all(g)];case 1:return x.sent(),this._bindingDictionary=new ii,[2]}})})},C.prototype.onActivation=function(g,a){this._activations.add(g,a)},C.prototype.onDeactivation=function(g,a){this._deactivations.add(g,a)},C.prototype.isBound=function(g){var a=this._bindingDictionary.hasKey(g);return!a&&this.parent&&(a=this.parent.isBound(g)),a},C.prototype.isCurrentBound=function(g){return this._bindingDictionary.hasKey(g)},C.prototype.isBoundNamed=function(g,a){return this.isBoundTagged(g,ce,a)},C.prototype.isBoundTagged=function(g,a,x){var t=!1;if(this._bindingDictionary.hasKey(g)){var e=this._bindingDictionary.get(g),d=jm(this,g,a,x);t=e.some(function(r){return r.constraint(d)})}return!t&&this.parent&&(t=this.parent.isBoundTagged(g,a,x)),t},C.prototype.snapshot=function(){this._snapshots.push(Mg.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},C.prototype.restore=function(){var g=this._snapshots.pop();if(g===void 0)throw new Error(ym);this._bindingDictionary=g.bindings,this._activations=g.activations,this._deactivations=g.deactivations,this._middleware=g.middleware,this._moduleActivationStore=g.moduleActivationStore},C.prototype.createChild=function(g){var a=new C(g||this.options);return a.parent=this,a},C.prototype.applyMiddleware=function(){for(var g=[],a=0;a<arguments.length;a++)g[a]=arguments[a];var x=this._middleware?this._middleware:this._planAndResolve();this._middleware=g.reduce(function(t,e){return e(t)},x)},C.prototype.applyCustomMetadataReader=function(g){this._metadataReader=g},C.prototype.get=function(g){var a=this._getNotAllArgs(g,!1);return this._getButThrowIfAsync(a)},C.prototype.getAsync=function(g){return ue(this,void 0,void 0,function(){var a;return fe(this,function(x){return a=this._getNotAllArgs(g,!1),[2,this._get(a)]})})},C.prototype.getTagged=function(g,a,x){var t=this._getNotAllArgs(g,!1,a,x);return this._getButThrowIfAsync(t)},C.prototype.getTaggedAsync=function(g,a,x){return ue(this,void 0,void 0,function(){var t;return fe(this,function(e){return t=this._getNotAllArgs(g,!1,a,x),[2,this._get(t)]})})},C.prototype.getNamed=function(g,a){return this.getTagged(g,ce,a)},C.prototype.getNamedAsync=function(g,a){return this.getTaggedAsync(g,ce,a)},C.prototype.getAll=function(g){var a=this._getAllArgs(g);return this._getButThrowIfAsync(a)},C.prototype.getAllAsync=function(g){var a=this._getAllArgs(g);return this._getAll(a)},C.prototype.getAllTagged=function(g,a,x){var t=this._getNotAllArgs(g,!0,a,x);return this._getButThrowIfAsync(t)},C.prototype.getAllTaggedAsync=function(g,a,x){var t=this._getNotAllArgs(g,!0,a,x);return this._getAll(t)},C.prototype.getAllNamed=function(g,a){return this.getAllTagged(g,ce,a)},C.prototype.getAllNamedAsync=function(g,a){return this.getAllTaggedAsync(g,ce,a)},C.prototype.resolve=function(g){var a=this.isBound(g);a||this.bind(g).toSelf();var x=this.get(g);return a||this.unbind(g),x},C.prototype._preDestroy=function(g,a){if(Reflect.hasMetadata(Vr,g)){var x=Reflect.getMetadata(Vr,g);return a[x.value]()}},C.prototype._removeModuleHandlers=function(g){var a=this._moduleActivationStore.remove(g);this._activations.removeIntersection(a.onActivations),this._deactivations.removeIntersection(a.onDeactivations)},C.prototype._removeModuleBindings=function(g){return this._bindingDictionary.removeByCondition(function(a){return a.moduleId===g})},C.prototype._deactivate=function(g,a){var x=this,t=Object.getPrototypeOf(a).constructor;try{if(this._deactivations.hasKey(g.serviceIdentifier)){var e=this._deactivateContainer(a,this._deactivations.get(g.serviceIdentifier).values());if(ne(e))return this._handleDeactivationError(e.then(function(){return x._propagateContainerDeactivationThenBindingAndPreDestroyAsync(g,a,t)}),t)}var d=this._propagateContainerDeactivationThenBindingAndPreDestroy(g,a,t);if(ne(d))return this._handleDeactivationError(d,t)}catch(r){throw new Error(Ur(t.name,r.message))}},C.prototype._handleDeactivationError=function(g,a){return ue(this,void 0,void 0,function(){var x;return fe(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,g];case 1:return t.sent(),[3,3];case 2:throw x=t.sent(),new Error(Ur(a.name,x.message));case 3:return[2]}})})},C.prototype._deactivateContainer=function(g,a){for(var x=this,t=a.next();t.value;){var e=t.value(g);if(ne(e))return e.then(function(){return x._deactivateContainerAsync(g,a)});t=a.next()}},C.prototype._deactivateContainerAsync=function(g,a){return ue(this,void 0,void 0,function(){var x;return fe(this,function(t){switch(t.label){case 0:x=a.next(),t.label=1;case 1:return x.value?[4,x.value(g)]:[3,3];case 2:return t.sent(),x=a.next(),[3,1];case 3:return[2]}})})},C.prototype._getContainerModuleHelpersFactory=function(){var g=this,a=function(i,s){i._binding.moduleId=s},x=function(i){return function(s){var u=g.bind(s);return a(u,i),u}},t=function(){return function(i){return g.unbind(i)}},e=function(){return function(i){return g.unbindAsync(i)}},d=function(){return function(i){return g.isBound(i)}},r=function(i){return function(s){var u=g.rebind(s);return a(u,i),u}},o=function(i){return function(s,u){g._moduleActivationStore.addActivation(i,s,u),g.onActivation(s,u)}},n=function(i){return function(s,u){g._moduleActivationStore.addDeactivation(i,s,u),g.onDeactivation(s,u)}};return function(i){return{bindFunction:x(i),isboundFunction:d(),onActivationFunction:o(i),onDeactivationFunction:n(i),rebindFunction:r(i),unbindFunction:t(),unbindAsyncFunction:e()}}},C.prototype._getAll=function(g){return Promise.all(this._get(g))},C.prototype._get=function(g){var a=ms(ms({},g),{contextInterceptor:function(t){return t},targetType:In.Variable});if(this._middleware){var x=this._middleware(a);if(x==null)throw new Error(Tm);return x}return this._planAndResolve()(a)},C.prototype._getButThrowIfAsync=function(g){var a=this._get(g);if(gl(a))throw new Error(Sm(g.serviceIdentifier));return a},C.prototype._getAllArgs=function(g){var a={avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:g};return a},C.prototype._getNotAllArgs=function(g,a,x,t){var e={avoidConstraints:!1,isMultiInject:a,serviceIdentifier:g,key:x,value:t};return e},C.prototype._planAndResolve=function(){var g=this;return function(a){var x=Jm(g._metadataReader,g,a.isMultiInject,a.targetType,a.serviceIdentifier,a.key,a.value,a.avoidConstraints);x=a.contextInterceptor(x);var t=Cg(x);return t}},C.prototype._deactivateIfSingleton=function(g){var a=this;if(g.activated)return ne(g.cache)?g.cache.then(function(x){return a._deactivate(g,x)}):this._deactivate(g,g.cache)},C.prototype._deactivateSingletons=function(g){for(var a=0,x=g;a<x.length;a++){var t=x[a],e=this._deactivateIfSingleton(t);if(ne(e))throw new Error(wm)}},C.prototype._deactivateSingletonsAsync=function(g){return ue(this,void 0,void 0,function(){var a=this;return fe(this,function(x){switch(x.label){case 0:return[4,Promise.all(g.map(function(t){return a._deactivateIfSingleton(t)}))];case 1:return x.sent(),[2]}})})},C.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(g,a,x){return this.parent?this._deactivate.bind(this.parent)(g,a):this._bindingDeactivationAndPreDestroy(g,a,x)},C.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(g,a,x){return ue(this,void 0,void 0,function(){return fe(this,function(t){switch(t.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(g,a)]:[3,2];case 1:return t.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(g,a,x)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},C.prototype._removeServiceFromDictionary=function(g){try{this._bindingDictionary.remove(g)}catch{throw new Error(cm+" "+Cn(g))}},C.prototype._bindingDeactivationAndPreDestroy=function(g,a,x){var t=this;if(typeof g.onDeactivation=="function"){var e=g.onDeactivation(a);if(ne(e))return e.then(function(){return t._preDestroy(x,a)})}return this._preDestroy(x,a)},C.prototype._bindingDeactivationAndPreDestroyAsync=function(g,a,x){return ue(this,void 0,void 0,function(){return fe(this,function(t){switch(t.label){case 0:return typeof g.onDeactivation!="function"?[3,2]:[4,g.onDeactivation(a)];case 1:t.sent(),t.label=2;case 2:return[4,this._preDestroy(x,a)];case 3:return t.sent(),[2]}})})},C}();function Fg(C){for(var g=new Set,a=0,x=C;a<x.length;a++){var t=x[a];if(g.has(t))return t;g.add(t)}}function Ig(C){return C.prototype!==void 0}function bg(C){if(C!==void 0)throw new Error(ol)}function Dg(C,g,a,x){bg(g),Sl(nl,C,a.toString(),x)}function Bg(C,g,a){if(Ig(C))throw new Error(ol);Sl(sl,C.constructor,g,a)}function Ng(C){var g=[];if(Array.isArray(C)){g=C;var a=Fg(g.map(function(x){return x.key}));if(a!==void 0)throw new Error(rl+" "+a.toString())}else g=[C];return g}function Sl(C,g,a,x){var t=Ng(x),e={};Reflect.hasOwnMetadata(C,g)&&(e=Reflect.getMetadata(C,g));var d=e[a];if(d===void 0)d=[];else for(var r=function(s){if(t.some(function(u){return u.key===s.key}))throw new Error(rl+" "+s.key.toString())},o=0,n=d;o<n.length;o++){var i=n[o];r(i)}d.push.apply(d,t),e[a]=d,Reflect.defineMetadata(C,e,g)}function Gg(C){return function(g,a,x){typeof x=="number"?Dg(g,a,x,C):Bg(g,a,C)}}function Cl(){return function(C){if(Reflect.hasOwnMetadata(Gr,C))throw new Error(fm);var g=Reflect.getMetadata(om,C)||[];return Reflect.defineMetadata(Gr,g,C),C}}function Vg(C){return function(g){return function(a,x,t){if(g===void 0){var e=typeof a=="function"?a.name:a.constructor.name;throw new Error(mm(e))}return Gg(new ui(C,g))(a,x,t)}}}var Ug=Vg(Ls),Yg=Object.defineProperty,Xg=Object.getOwnPropertyDescriptor,zg=(C,g,a,x)=>{for(var t=x>1?void 0:x?Xg(g,a):g,e=C.length-1,d;e>=0;e--)(d=C[e])&&(t=(x?d(g,a,t):d(t))||t);return x&&t&&Yg(g,a,t),t},Wg=(C,g)=>(a,x)=>g(a,x,C);let Yr=class{constructor(C){Lt(this,"scene");Lt(this,"logger",ve("time"));this.scene=C,jt.on("togglePause",this.togglePause.bind(this)),jt.on("toggleSlowTime",this.toggleSlowTime.bind(this)),this.logger.debug("Initialized")}setTimeScale(C){this.scene.time.timeScale=C,this.logger.debug(`Time scale: ${this.scene.time.timeScale}`)}togglePause(){this.scene.time.timeScale===0?this.setTimeScale(1):this.scene.time.timeScale===1?this.setTimeScale(0):this.setTimeScale(1)}toggleSlowTime(){this.scene.time.timeScale===1?this.setTimeScale(.5):this.setTimeScale(1)}};Yr=zg([Cl(),Wg(0,Ug(am))],Yr);var Hg=Object.defineProperty,Kg=Object.getOwnPropertyDescriptor,Zg=(C,g,a,x)=>{for(var t=x>1?void 0:x?Kg(g,a):g,e=C.length-1,d;e>=0;e--)(d=C[e])&&(t=(x?d(g,a,t):d(t))||t);return x&&t&&Hg(g,a,t),t},gs=(C=>(C[C.PAUSED=0]="PAUSED",C[C.RUNNING=1]="RUNNING",C[C.SLOW_MOTION=.5]="SLOW_MOTION",C))(gs||{});let Xr=class{constructor(){Lt(this,"timeState");Lt(this,"timeFactor");Lt(this,"logger",ve("time"));Lt(this,"lastUpdateTime");this.timeState=1,this.setTimeFactor(this.timeState),this.lastUpdateTime=Date.now(),jt.on("togglePause",this.togglePause.bind(this)),jt.on("toggleSlowTime",this.toggleSlowTime.bind(this)),this.logger.debug("Initialized")}setTimeState(C){this.timeState=C,this.setTimeFactor(C),this.logger.debug(`Time state: ${gs[this.timeState]}`)}getTimeState(){return this.logger.debug(`Time state: ${gs[this.timeState]}`),this.timeState}setTimeFactor(C){this.logger.debug(`Time factor: ${C}`),this.timeFactor=C}getTimeFactor(){return this.logger.debug(`Time factor: ${this.timeFactor}`),this.timeFactor}getAdjustedDeltaTime(C){const g=C*this.timeFactor;return this.logger.debug(`Adjusted delta time: ${g}`),g}togglePause(){this.setTimeState(this.timeState===0?1:0)}toggleSlowTime(){this.setTimeState(this.timeState===.5?1:.5)}};Xr=Zg([Cl()],Xr);const xs=new Og;xs.bind(tl).to(Xr).inSingletonScope();xs.bind(_h).toFactory(C=>g=>new Yr(g));const zr=[],Wr=Ms({spriteIndex:re.ui16});function Al(C,g,a){Rs(C,Wr,g),Wr.spriteIndex[g]=zr.length,zr.push(a)}function pa(C){const g=Wr.spriteIndex[C];return zr[g]}const kt=Ms({exempt:re.ui8,collisionModifier:re.f32,minX:re.f32,minY:re.f32,maxX:re.f32,maxY:re.f32});function Pl(C,g,a,x){Rs(C,kt,g),kt.exempt[g]=a?1:0,kt.collisionModifier[g]=x,Ml(g),De.debug(`Added collider to entity ${g}`)}function $g(C){return{eid:C,exempt:kt.exempt[C]===1,collisionModifier:kt.collisionModifier[C],minX:kt.minX[C],minY:kt.minY[C],maxX:kt.maxX[C],maxY:kt.maxY[C]}}function Ml(C){const g=pa(C);if(!g){De.error(`Could not update collider bounds for entity ${C}, no sprite found`);return}kt.minX[C]=g.x,kt.minY[C]=g.y,kt.maxX[C]=g.x+g.width,kt.maxY[C]=g.y+g.height,De.debug(`Updated collider bounds for entity ${C}`)}function ma(C){return{minX:kt.minX[C],minY:kt.minY[C],maxX:kt.maxX[C],maxY:kt.maxY[C]}}const ri=Ms({current:re.f32,max:re.f32});function Rl(C,g,a,x){Rs(C,ri,g),ri.current[g]=a,ri.max[g]=x}const Jg={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",KeyW:"up",KeyS:"down",KeyA:"left",KeyD:"right"},jg={KeyP:"pause",Space:"attack",KeyZ:"slowTime"},Qg={move:Jg,action:jg};var ye=(C=>(C[C.MoveUp=0]="MoveUp",C[C.MoveDown=1]="MoveDown",C[C.MoveLeft=2]="MoveLeft",C[C.MoveRight=3]="MoveRight",C[C.Attack=4]="Attack",C[C.Pause=5]="Pause",C[C.SlowTime=6]="SlowTime",C))(ye||{});class kg{constructor(g){Lt(this,"bindings",new Map);Lt(this,"logger",ve("keyBindings"));this.loadBindingsFromControlMapping(g),this.logger.debug("Key bindings loaded",this.bindings)}bind(g,a){this.bindings.set(a,g),this.logger.debug(`Bound ${ye[g]} to ${a}`)}getActionForKeyCode(g){return this.logger.debug(`Looking up action for key code ${g}`),this.bindings.get(g)}loadBindingsFromControlMapping(g){this.logger.debug("Loading key bindings from control mapping",g);for(const a in g.move)switch(this.logger.debug(`Loading key binding for ${a}`),g.move[a]){case"up":this.bind(0,a);break;case"down":this.bind(1,a);break;case"left":this.bind(2,a);break;case"right":this.bind(3,a);break}for(const a in g.action)switch(this.logger.debug(`Loading key binding for ${a}`),g.action[a]){case"pause":this.bind(5,a);break;case"attack":this.bind(4,a);break;case"slowTime":this.bind(6,a);break}}}var nn=(C=>(C.UP="up",C.DOWN="down",C.LEFT="left",C.RIGHT="right",C))(nn||{});function qg(){const C=(g,a,x)=>{if(g)switch(a){case"up":Vt.ySpeed[x]=-350;break;case"down":Vt.ySpeed[x]=350;break;case"left":Vt.xSpeed[x]=-350;break;case"right":Vt.xSpeed[x]=350;break}else switch(a){case"up":case"down":Vt.ySpeed[x]=0;break;case"left":case"right":Vt.xSpeed[x]=0;break}ve("movement").debug(`Entity ${x} move ${a} ${g?"start":"stop"}`)};jt.on("move",g=>{const{entity:a,state:x,action:t}=g;C(x,t,a)})}class _g{constructor(){Lt(this,"player");Lt(this,"scene");Lt(this,"keyBindings");Lt(this,"pressedKeys",new Set);Lt(this,"logger",ve("control"));const g=Qg;this.keyBindings=new kg(g)}initialize(g,a){this.scene=g,this.player=a,this.scene.input.keyboard.on("keydown",this.onKeyDown.bind(this)),this.scene.input.keyboard.on("keyup",this.onKeyUp.bind(this)),this.logger.debug("Initialized")}onKeyDown(g){this.logger.debug(`Keydown event: ${g.code}`);const a=g.code;if(this.pressedKeys.has(a)){this.logger.debug("Ignoring repeated keydown event");return}this.pressedKeys.add(a);const x=this.keyBindings.getActionForKeyCode(a);x!==void 0?this.handleAction(x,!0):this.logger.info(`No action bound to key ${a}`)}onKeyUp(g){const a=g.code;this.logger.debug(`Keyup event: ${a}`),this.pressedKeys.delete(a);const x=this.keyBindings.getActionForKeyCode(a);x!==void 0&&this.handleAction(x,!1)}handleAction(g,a){switch(this.logger.debug(`Handling action ${ye[g]} with state ${a}`),g){case ye.MoveUp:jt.emit("move",{action:nn.UP,state:a,entity:this.player});break;case ye.MoveDown:jt.emit("move",{action:nn.DOWN,state:a,entity:this.player});break;case ye.MoveLeft:jt.emit("move",{action:nn.LEFT,state:a,entity:this.player});break;case ye.MoveRight:jt.emit("move",{action:nn.RIGHT,state:a,entity:this.player});break;case ye.Attack:a&&jt.emit("attack",{entity:this.player});break;case ye.Pause:a&&jt.emit("togglePause",{});break;case ye.SlowTime:a&&jt.emit("toggleSlowTime",{});break}}}const Qn=100;function t0(C,g,a,x){const t=gn.getLogger("focus"),e=ma(g);if(!e)return t.warn("Player has no bounds"),null;const d=a.search({minX:e.minX-Qn,minY:e.minY-Qn,maxX:e.maxX+Qn,maxY:e.maxY+Qn});if(d===void 0||d.length===0)return x.setVisible(!1),t.debug("No nearby objects"),null;const r=[];for(const i of d)if(!kt.exempt[i.eid]){const s=Phaser.Math.Distance.Between(e.minX+e.maxX/2,e.minY+e.maxY/2,i.minX+i.maxX/2,i.minY+i.maxY/2);r.push({distance:s,target:i})}const o=r.sort((i,s)=>i.distance-s.distance);t.debug("Sorted objects",o),t.debug("Nearest object",o[0]);const n=o[0];return n?e0(n.target,x):(x.setVisible(!1),null)}function e0(C,g){gn.getLogger("focusSystem").debug(`Setting focus to ${C.eid}`);const t=C.minX+(C.maxX-C.minX)-g.width/2,e=C.minY-g.height/2;return g.setPosition(t,e),g.setVisible(!0),g.setDepth(10),C.eid}const i0=Jh([ri]);function n0(C){const g=i0(C);for(const a of g)ri.current[a]<=0&&(ve("health").info("Entity out of health",{eid:a}),jt.emit("destroyEntity",{entityId:a}))}function s0(C,g,a){const x=ve("collision"),t=ma(C);if(!t)return x.error(`Could not find bounding box for entity ${C}`),1;const e=a.search(t);x.debug(`Found ${e.length} nearby objects for entity ${C}`);let d=1;for(const r of e)d*=r.collisionModifier,x.debug(`Collision detected between ${C} and ${r.eid}`);return d}const r0=Jh([Vt]);function a0(C,g,a){const x=r0(C);for(const t of x){const e=Vt.xSpeed[t],d=Vt.ySpeed[t],r=pa(t);if(r){const o=s0(t,C,a);let n,i;o>0?(n=Vt.x[t]+e*o*g,i=Vt.y[t]+d*o*g):(n=Vt.x[t]-e*g,i=Vt.y[t]-d*g,Vt.xSpeed[t]=0,Vt.ySpeed[t]=0),Vt.x[t]=n,Vt.y[t]=i,r.setPosition(n,i),Ml(t)}}}class o0{constructor(g,a){Lt(this,"scene");Lt(this,"world");this.scene=g,this.world=a}createPlayer(){const g=Kh(this.world),a=this.scene.cameras.main.centerX,x=this.scene.cameras.main.centerY,t=this.scene.add.sprite(a,x,"player");return t.setOrigin(0,0),Al(this.world,g,t),nm(this.world,g,a,x,0,0),Rl(this.world,g,100,100),new Ie.Geom.Rectangle(a,x,t.width,t.height),Pl(this.world,g,!0,1),g}}class h0{constructor(g,a){Lt(this,"logger",ve("ObjectPool"));Lt(this,"pool");Lt(this,"factory");this.pool=[],this.factory=g,a&&a>0&&this.createInitialObjects(a)}get(){let g;return this.pool.length===0?g=this.factory():g=this.pool.pop(),this.logger.debug("Got object from pool"),g}release(g){this.pool.push(g),this.logger.debug("Released object back to pool")}size(){return this.logger.debug(`Object pool size: ${this.pool.length}`),this.pool.length}clear(){this.pool=[],this.logger.debug("Cleared object pool")}createInitialObjects(g){for(let a=0;a<g;a++)this.pool.push(this.factory());this.logger.debug(`Created ${g} initial objects`)}}class l0{constructor(g,a){Lt(this,"scene");Lt(this,"world");Lt(this,"spritePool");this.scene=g,this.world=a,this.spritePool=new h0(()=>{const x=new Ie.GameObjects.Sprite(g,0,0,"");return x.setOrigin(0,0),x})}create(g,a,x,t=!1,e=0){const d=Kh(this.world),r=this.spritePool.get();return r.setTexture(x),r.setPosition(g,a),r.setActive(!0),r.setVisible(!0),this.scene.add.existing(r),Al(this.world,d,r),Rl(this.world,d,100,100),Pl(this.world,d,t,e),d}release(g){const a=pa(g);if(!a)throw new Error("No sprite found for entity");a.setActive(!1),a.setVisible(!1),a.setTexture(""),this.spritePool.release(a),Zh(this.world,g)}}function u0(C,g,a,x,t){Ll(C,g,a||0,x||C.length-1,t||f0)}function Ll(C,g,a,x,t){for(;x>a;){if(x-a>600){var e=x-a+1,d=g-a+1,r=Math.log(e),o=.5*Math.exp(2*r/3),n=.5*Math.sqrt(r*o*(e-o)/e)*(d-e/2<0?-1:1),i=Math.max(a,Math.floor(g-d*o/e+n)),s=Math.min(x,Math.floor(g+(e-d)*o/e+n));Ll(C,g,i,s,t)}var u=C[g],h=a,l=x;for(qi(C,a,g),t(C[x],u)>0&&qi(C,a,x);h<l;){for(qi(C,h,l),h++,l--;t(C[h],u)<0;)h++;for(;t(C[l],u)>0;)l--}t(C[a],u)===0?qi(C,a,l):(l++,qi(C,l,x)),l<=g&&(a=l+1),g<=l&&(x=l-1)}}function qi(C,g,a){var x=C[g];C[g]=C[a],C[a]=x}function f0(C,g){return C<g?-1:C>g?1:0}class d0{constructor(g=9){this._maxEntries=Math.max(4,g),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(g){let a=this.data;const x=[];if(!qn(g,a))return x;const t=this.toBBox,e=[];for(;a;){for(let d=0;d<a.children.length;d++){const r=a.children[d],o=a.leaf?t(r):r;qn(g,o)&&(a.leaf?x.push(r):yr(g,o)?this._all(r,x):e.push(r))}a=e.pop()}return x}collides(g){let a=this.data;if(!qn(g,a))return!1;const x=[];for(;a;){for(let t=0;t<a.children.length;t++){const e=a.children[t],d=a.leaf?this.toBBox(e):e;if(qn(g,d)){if(a.leaf||yr(g,d))return!0;x.push(e)}}a=x.pop()}return!1}load(g){if(!(g&&g.length))return this;if(g.length<this._minEntries){for(let x=0;x<g.length;x++)this.insert(g[x]);return this}let a=this._build(g.slice(),0,g.length-1,0);if(!this.data.children.length)this.data=a;else if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){const x=this.data;this.data=a,a=x}this._insert(a,this.data.height-a.height-1,!0)}return this}insert(g){return g&&this._insert(g,this.data.height-1),this}clear(){return this.data=Si([]),this}remove(g,a){if(!g)return this;let x=this.data;const t=this.toBBox(g),e=[],d=[];let r,o,n;for(;x||e.length;){if(x||(x=e.pop(),o=e[e.length-1],r=d.pop(),n=!0),x.leaf){const i=c0(g,x.children,a);if(i!==-1)return x.children.splice(i,1),e.push(x),this._condense(e),this}!n&&!x.leaf&&yr(x,t)?(e.push(x),d.push(r),r=0,o=x,x=x.children[0]):o?(r++,x=o.children[r],n=!1):x=null}return this}toBBox(g){return g}compareMinX(g,a){return g.minX-a.minX}compareMinY(g,a){return g.minY-a.minY}toJSON(){return this.data}fromJSON(g){return this.data=g,this}_all(g,a){const x=[];for(;g;)g.leaf?a.push(...g.children):x.push(...g.children),g=x.pop();return a}_build(g,a,x,t){const e=x-a+1;let d=this._maxEntries,r;if(e<=d)return r=Si(g.slice(a,x+1)),Ei(r,this.toBBox),r;t||(t=Math.ceil(Math.log(e)/Math.log(d)),d=Math.ceil(e/Math.pow(d,t-1))),r=Si([]),r.leaf=!1,r.height=t;const o=Math.ceil(e/d),n=o*Math.ceil(Math.sqrt(d));rh(g,a,x,n,this.compareMinX);for(let i=a;i<=x;i+=n){const s=Math.min(i+n-1,x);rh(g,i,s,o,this.compareMinY);for(let u=i;u<=s;u+=o){const h=Math.min(u+o-1,s);r.children.push(this._build(g,u,h,t-1))}}return Ei(r,this.toBBox),r}_chooseSubtree(g,a,x,t){for(;t.push(a),!(a.leaf||t.length-1===x);){let e=1/0,d=1/0,r;for(let o=0;o<a.children.length;o++){const n=a.children[o],i=xr(n),s=m0(g,n)-i;s<d?(d=s,e=i<e?i:e,r=n):s===d&&i<e&&(e=i,r=n)}a=r||a.children[0]}return a}_insert(g,a,x){const t=x?g:this.toBBox(g),e=[],d=this._chooseSubtree(t,this.data,a,e);for(d.children.push(g),rn(d,t);a>=0&&e[a].children.length>this._maxEntries;)this._split(e,a),a--;this._adjustParentBBoxes(t,e,a)}_split(g,a){const x=g[a],t=x.children.length,e=this._minEntries;this._chooseSplitAxis(x,e,t);const d=this._chooseSplitIndex(x,e,t),r=Si(x.children.splice(d,x.children.length-d));r.height=x.height,r.leaf=x.leaf,Ei(x,this.toBBox),Ei(r,this.toBBox),a?g[a-1].children.push(r):this._splitRoot(x,r)}_splitRoot(g,a){this.data=Si([g,a]),this.data.height=g.height+1,this.data.leaf=!1,Ei(this.data,this.toBBox)}_chooseSplitIndex(g,a,x){let t,e=1/0,d=1/0;for(let r=a;r<=x-a;r++){const o=sn(g,0,r,this.toBBox),n=sn(g,r,x,this.toBBox),i=g0(o,n),s=xr(o)+xr(n);i<e?(e=i,t=r,d=s<d?s:d):i===e&&s<d&&(d=s,t=r)}return t||x-a}_chooseSplitAxis(g,a,x){const t=g.leaf?this.compareMinX:v0,e=g.leaf?this.compareMinY:p0,d=this._allDistMargin(g,a,x,t),r=this._allDistMargin(g,a,x,e);d<r&&g.children.sort(t)}_allDistMargin(g,a,x,t){g.children.sort(t);const e=this.toBBox,d=sn(g,0,a,e),r=sn(g,x-a,x,e);let o=kn(d)+kn(r);for(let n=a;n<x-a;n++){const i=g.children[n];rn(d,g.leaf?e(i):i),o+=kn(d)}for(let n=x-a-1;n>=a;n--){const i=g.children[n];rn(r,g.leaf?e(i):i),o+=kn(r)}return o}_adjustParentBBoxes(g,a,x){for(let t=x;t>=0;t--)rn(a[t],g)}_condense(g){for(let a=g.length-1,x;a>=0;a--)g[a].children.length===0?a>0?(x=g[a-1].children,x.splice(x.indexOf(g[a]),1)):this.clear():Ei(g[a],this.toBBox)}}function c0(C,g,a){if(!a)return g.indexOf(C);for(let x=0;x<g.length;x++)if(a(C,g[x]))return x;return-1}function Ei(C,g){sn(C,0,C.children.length,g,C)}function sn(C,g,a,x,t){t||(t=Si(null)),t.minX=1/0,t.minY=1/0,t.maxX=-1/0,t.maxY=-1/0;for(let e=g;e<a;e++){const d=C.children[e];rn(t,C.leaf?x(d):d)}return t}function rn(C,g){return C.minX=Math.min(C.minX,g.minX),C.minY=Math.min(C.minY,g.minY),C.maxX=Math.max(C.maxX,g.maxX),C.maxY=Math.max(C.maxY,g.maxY),C}function v0(C,g){return C.minX-g.minX}function p0(C,g){return C.minY-g.minY}function xr(C){return(C.maxX-C.minX)*(C.maxY-C.minY)}function kn(C){return C.maxX-C.minX+(C.maxY-C.minY)}function m0(C,g){return(Math.max(g.maxX,C.maxX)-Math.min(g.minX,C.minX))*(Math.max(g.maxY,C.maxY)-Math.min(g.minY,C.minY))}function g0(C,g){const a=Math.max(C.minX,g.minX),x=Math.max(C.minY,g.minY),t=Math.min(C.maxX,g.maxX),e=Math.min(C.maxY,g.maxY);return Math.max(0,t-a)*Math.max(0,e-x)}function yr(C,g){return C.minX<=g.minX&&C.minY<=g.minY&&g.maxX<=C.maxX&&g.maxY<=C.maxY}function qn(C,g){return g.minX<=C.maxX&&g.minY<=C.maxY&&g.maxX>=C.minX&&g.maxY>=C.minY}function Si(C){return{children:C,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function rh(C,g,a,x,t){const e=[g,a];for(;e.length;){if(a=e.pop(),g=e.pop(),a-g<=x)continue;const d=g+Math.ceil((a-g)/x/2)*x;u0(C,d,g,a,t),e.push(g,d,d,a)}}class x0{constructor(){Lt(this,"scene");Lt(this,"world");Lt(this,"staticObjectFactory");Lt(this,"objectSpatialIndex");Lt(this,"playerFactory");Lt(this,"timeController");Lt(this,"timeSystem");Lt(this,"arrow");Lt(this,"player");Lt(this,"focusedObject",null);Lt(this,"logger",ve("universe"))}initialize(g){this.scene=g,this.world=em(),this.objectSpatialIndex=new d0,this.staticObjectFactory=new l0(this.scene,this.world),this.playerFactory=new o0(this.scene,this.world),qg(),this.timeSystem=xs.get(tl);const a=xs.get(_h);this.timeController=a(this.scene),this.arrow=this.scene.add.sprite(0,0,"red_arrow"),this.arrow.setVisible(!1),jt.on("attack",this.attackFocusTarget.bind(this)),jt.on("damage",this.onDamage.bind(this)),jt.on("destroyEntity",this.onEntityDestroyed.bind(this))}update(g,a){const x=this.timeSystem.getAdjustedDeltaTime(a),t=this.timeSystem.getTimeState();t!==gs.PAUSED?(this.logger.debug(`Time state: ${t}, delta time: ${x}`),a0(this.world,x/1e3,this.objectSpatialIndex),n0(this.world),this.focusedObject=t0(this.world,this.player,this.objectSpatialIndex,this.arrow)):this.logger.debug(`Time state: ${t}`)}spawnPlayer(){this.player=this.playerFactory.createPlayer(),new _g().initialize(this.scene,this.player),new rm(this.world,this.player)}generateTileset(g=32,a=50,x=50){for(let e=0;e<a;e++)for(let d=0;d<x;d++){const r=Math.random()>.5?"grass":"grass2";this.generateStaticObject(e*g,d*g,r,!0,.9)}}generateStaticObject(g,a,x,t=!1,e=0){const d=this.staticObjectFactory.create(g,a,x,t),r=ma(d);r||this.logger.info(`No bounds for ${d}`),this.objectSpatialIndex.insert({eid:d,exempt:!0,collisionModifier:e,minX:r.minX,minY:r.minY,maxX:r.maxX,maxY:r.maxY}),this.logger.debug(`Added static object ${d} with texture ${x} to spatial index`)}onEntityDestroyed({entityId:g}){this.focusedObject===g&&(this.focusedObject=null,this.arrow.setVisible(!1));const a=$g(g);this.objectSpatialIndex.remove(a,(x,t)=>x.eid===t.eid),this.staticObjectFactory.release(g),this.logger.info(`Entity ${g} destroyed`)}attackFocusTarget(){this.focusedObject&&(jt.emit("damage",{entity:this.focusedObject,damage:25}),this.logger.info(`Damaging ${this.focusedObject}`))}onDamage({entity:g,damage:a}){ri.current[g]-=a,this.logger.info(`Damage ${a} to ${g}, health: ${ri.current[g]}`)}}class y0 extends Ie.Scene{constructor(){super("MainScene");Lt(this,"universe")}create(){this.initSystems()}update(a,x){this.universe.update(a,x)}initSystems(){this.universe=new x0,this.universe.initialize(this),this.universe.generateTileset(),this.universe.generateStaticObject(200,200,"tree"),this.universe.generateStaticObject(400,400,"bench"),this.universe.spawnPlayer()}}class T0 extends Ie.Scene{constructor(){super("TitleScene")}create(){this.add.image(400,300,"starry_night"),this.add.image(400,300,"forest_silhouette").setScale(1),this.add.image(400,150,"postapoc_title").setScale(2),this.input.on("pointerdown",()=>this.startMainScene()),this.input.keyboard.on("keydown",()=>this.startMainScene())}async startMainScene(){await this.growMushroomCloud(),this.scene.start("MainScene")}async growMushroomCloud(){return new Promise(g=>{const a=this.add.image(400,300,"mushroom_cloud");a.setScale(.1).setDepth(1),a.originY=a.height,this.tweens.add({targets:a,scale:20,duration:2e3,ease:"Sine.easeInOut",onComplete:()=>{g()}});const x=this.add.rectangle(400,300,800,600,16737792,0);x.setDepth(2);const t=this.add.rectangle(400,300,800,600,0,0);t.setDepth(3),this.tweens.add({targets:x,fillAlpha:.5,duration:800,ease:"Linear",onComplete:()=>{this.tweens.add({targets:t,fillAlpha:1,duration:1600,ease:"Expo.easeOut",onComplete:()=>{g()}})}})})}}const E0={type:Ie.AUTO,width:800,height:600,scene:[hp,T0,y0],parent:"game-container"};new Ie.Game(E0);
